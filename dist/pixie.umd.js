var p7=Object.defineProperty;var g7=(pt,st,Zr)=>st in pt?p7(pt,st,{enumerable:!0,configurable:!0,writable:!0,value:Zr}):pt[st]=Zr;var Se=(pt,st,Zr)=>(g7(pt,typeof st!="symbol"?st+"":st,Zr),Zr);(function(pt,st){typeof exports=="object"&&typeof module<"u"?module.exports=st():typeof define=="function"&&define.amd?define(st):(pt=typeof globalThis<"u"?globalThis:pt||self,pt.Pixie=st())})(this,function(){var CS,_S;"use strict";var pt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function st(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Zr(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var am={exports:{}},Wa={},lm={exports:{}},Ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eo=Symbol.for("react.element"),kS=Symbol.for("react.portal"),ES=Symbol.for("react.fragment"),TS=Symbol.for("react.strict_mode"),OS=Symbol.for("react.profiler"),PS=Symbol.for("react.provider"),DS=Symbol.for("react.context"),AS=Symbol.for("react.forward_ref"),MS=Symbol.for("react.suspense"),jS=Symbol.for("react.memo"),IS=Symbol.for("react.lazy"),um=Symbol.iterator;function FS(e){return e===null||typeof e!="object"?null:(e=um&&e[um]||e["@@iterator"],typeof e=="function"?e:null)}var cm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fm=Object.assign,hm={};function Hi(e,t,n){this.props=e,this.context=t,this.refs=hm,this.updater=n||cm}Hi.prototype.isReactComponent={},Hi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},Hi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function dm(){}dm.prototype=Hi.prototype;function Vc(e,t,n){this.props=e,this.context=t,this.refs=hm,this.updater=n||cm}var Hc=Vc.prototype=new dm;Hc.constructor=Vc,fm(Hc,Hi.prototype),Hc.isPureReactComponent=!0;var pm=Array.isArray,gm=Object.prototype.hasOwnProperty,Wc={current:null},mm={key:!0,ref:!0,__self:!0,__source:!0};function vm(e,t,n){var r,i={},o=null,d=null;if(t!=null)for(r in t.ref!==void 0&&(d=t.ref),t.key!==void 0&&(o=""+t.key),t)gm.call(t,r)&&!mm.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var s=Array(a),u=0;u<a;u++)s[u]=arguments[u+2];i.children=s}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:eo,type:e,key:o,ref:d,props:i,_owner:Wc.current}}function RS(e,t){return{$$typeof:eo,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Uc(e){return typeof e=="object"&&e!==null&&e.$$typeof===eo}function LS(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var ym=/\/+/g;function Xc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?LS(""+e.key):t.toString(36)}function Ua(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var d=!1;if(e===null)d=!0;else switch(o){case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case eo:case kS:d=!0}}if(d)return d=e,i=i(d),e=r===""?"."+Xc(d,0):r,pm(i)?(n="",e!=null&&(n=e.replace(ym,"$&/")+"/"),Ua(i,t,n,"",function(u){return u})):i!=null&&(Uc(i)&&(i=RS(i,n+(!i.key||d&&d.key===i.key?"":(""+i.key).replace(ym,"$&/")+"/")+e)),t.push(i)),1;if(d=0,r=r===""?".":r+":",pm(e))for(var a=0;a<e.length;a++){o=e[a];var s=r+Xc(o,a);d+=Ua(o,t,n,s,i)}else if(s=FS(e),typeof s=="function")for(e=s.call(e),a=0;!(o=e.next()).done;)o=o.value,s=r+Xc(o,a++),d+=Ua(o,t,n,s,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return d}function Xa(e,t,n){if(e==null)return e;var r=[],i=0;return Ua(e,r,"","",function(o){return t.call(n,o,i++)}),r}function zS(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Tt={current:null},Ya={transition:null},BS={ReactCurrentDispatcher:Tt,ReactCurrentBatchConfig:Ya,ReactCurrentOwner:Wc};Ee.Children={map:Xa,forEach:function(e,t,n){Xa(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Xa(e,function(){t++}),t},toArray:function(e){return Xa(e,function(t){return t})||[]},only:function(e){if(!Uc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},Ee.Component=Hi,Ee.Fragment=ES,Ee.Profiler=OS,Ee.PureComponent=Vc,Ee.StrictMode=TS,Ee.Suspense=MS,Ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BS,Ee.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=fm({},e.props),i=e.key,o=e.ref,d=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,d=Wc.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(s in t)gm.call(t,s)&&!mm.hasOwnProperty(s)&&(r[s]=t[s]===void 0&&a!==void 0?a[s]:t[s])}var s=arguments.length-2;if(s===1)r.children=n;else if(1<s){a=Array(s);for(var u=0;u<s;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:eo,type:e.type,key:i,ref:o,props:r,_owner:d}},Ee.createContext=function(e){return e={$$typeof:DS,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:PS,_context:e},e.Consumer=e},Ee.createElement=vm,Ee.createFactory=function(e){var t=vm.bind(null,e);return t.type=e,t},Ee.createRef=function(){return{current:null}},Ee.forwardRef=function(e){return{$$typeof:AS,render:e}},Ee.isValidElement=Uc,Ee.lazy=function(e){return{$$typeof:IS,_payload:{_status:-1,_result:e},_init:zS}},Ee.memo=function(e,t){return{$$typeof:jS,type:e,compare:t===void 0?null:t}},Ee.startTransition=function(e){var t=Ya.transition;Ya.transition={};try{e()}finally{Ya.transition=t}},Ee.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},Ee.useCallback=function(e,t){return Tt.current.useCallback(e,t)},Ee.useContext=function(e){return Tt.current.useContext(e)},Ee.useDebugValue=function(){},Ee.useDeferredValue=function(e){return Tt.current.useDeferredValue(e)},Ee.useEffect=function(e,t){return Tt.current.useEffect(e,t)},Ee.useId=function(){return Tt.current.useId()},Ee.useImperativeHandle=function(e,t,n){return Tt.current.useImperativeHandle(e,t,n)},Ee.useInsertionEffect=function(e,t){return Tt.current.useInsertionEffect(e,t)},Ee.useLayoutEffect=function(e,t){return Tt.current.useLayoutEffect(e,t)},Ee.useMemo=function(e,t){return Tt.current.useMemo(e,t)},Ee.useReducer=function(e,t,n){return Tt.current.useReducer(e,t,n)},Ee.useRef=function(e){return Tt.current.useRef(e)},Ee.useState=function(e){return Tt.current.useState(e)},Ee.useSyncExternalStore=function(e,t,n){return Tt.current.useSyncExternalStore(e,t,n)},Ee.useTransition=function(){return Tt.current.useTransition()},Ee.version="18.2.0",lm.exports=Ee;var E=lm.exports;const ce=st(E);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NS=E,$S=Symbol.for("react.element"),VS=Symbol.for("react.fragment"),HS=Object.prototype.hasOwnProperty,WS=NS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,US={key:!0,ref:!0,__self:!0,__source:!0};function bm(e,t,n){var r,i={},o=null,d=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(d=t.ref);for(r in t)HS.call(t,r)&&!US.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:$S,type:e,key:o,ref:d,props:i,_owner:WS.current}}Wa.Fragment=VS,Wa.jsx=bm,Wa.jsxs=bm,am.exports=Wa;var x=am.exports;function XS(e,t){t===void 0&&(t={});var n=t.insertAt;if(!(!e||typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",n==="top"&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}function Yc(e,t){return t===void 0&&(t=15),+parseFloat(Number(e).toPrecision(t))}function kn(e){var t=e.toString().split(/[eE]/),n=(t[0].split(".")[1]||"").length-+(t[1]||0);return n>0?n:0}function to(e){if(e.toString().indexOf("e")===-1)return Number(e.toString().replace(".",""));var t=kn(e);return t>0?Yc(Number(e)*Math.pow(10,t)):Number(e)}function Gc(e){xm&&(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)&&console.warn(e+" is beyond boundary when transfer to integer, the results may not be accurate")}function Ga(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t[0],i=t.slice(1);return i.reduce(function(o,d){return e(o,d)},r)}}var fr=Ga(function(e,t){var n=to(e),r=to(t),i=kn(e)+kn(t),o=n*r;return Gc(o),o/Math.pow(10,i)}),YS=Ga(function(e,t){var n=Math.pow(10,Math.max(kn(e),kn(t)));return(fr(e,n)+fr(t,n))/n}),GS=Ga(function(e,t){var n=Math.pow(10,Math.max(kn(e),kn(t)));return(fr(e,n)-fr(t,n))/n}),wm=Ga(function(e,t){var n=to(e),r=to(t);return Gc(n),Gc(r),fr(n/r,Yc(Math.pow(10,kn(t)-kn(e))))});function KS(e,t){var n=Math.pow(10,t),r=wm(Math.round(Math.abs(fr(e,n))),n);return e<0&&r!==0&&(r=fr(r,-1)),r}var xm=!0;function qS(e){e===void 0&&(e=!0),xm=e}var Kc={strip:Yc,plus:YS,minus:GS,times:fr,divide:wm,round:KS,digitLength:kn,float2Fixed:to,enableBoundaryChecking:qS};const Cm=Object.prototype.toString;function _m(e){switch(Cm.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return Qr(e,Error)}}function Wi(e,t){return Cm.call(e)===`[object ${t}]`}function qc(e){return Wi(e,"ErrorEvent")}function Sm(e){return Wi(e,"DOMError")}function ZS(e){return Wi(e,"DOMException")}function zn(e){return Wi(e,"String")}function Zc(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function Qc(e){return e===null||Zc(e)||typeof e!="object"&&typeof e!="function"}function Ui(e){return Wi(e,"Object")}function Ka(e){return typeof Event<"u"&&Qr(e,Event)}function QS(e){return typeof Element<"u"&&Qr(e,Element)}function JS(e){return Wi(e,"RegExp")}function qa(e){return!!(e&&e.then&&typeof e.then=="function")}function e4(e){return Ui(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function t4(e){return typeof e=="number"&&e!==e}function Qr(e,t){try{return e instanceof t}catch{return!1}}function km(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue))}function Xi(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function Em(e,t){if(!Array.isArray(e))return"";const n=[];for(let r=0;r<e.length;r++){const i=e[r];try{km(i)?n.push("[VueViewModel]"):n.push(String(i))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function n4(e,t,n=!1){return zn(e)?JS(t)?t.test(e):zn(t)?n?e===t:e.includes(t):!1:!1}function Za(e,t=[],n=!1){return t.some(r=>n4(e,r,n))}function r4(e,t,n=250,r,i,o,d){if(!o.exception||!o.exception.values||!d||!Qr(d.originalException,Error))return;const a=o.exception.values.length>0?o.exception.values[o.exception.values.length-1]:void 0;a&&(o.exception.values=i4(Jc(e,t,i,d.originalException,r,o.exception.values,a,0),n))}function Jc(e,t,n,r,i,o,d,a){if(o.length>=n+1)return o;let s=[...o];if(Qr(r[i],Error)){Tm(d,a);const u=e(t,r[i]),h=s.length;Om(u,i,h,a),s=Jc(e,t,n,r[i],i,[u,...s],u,h)}return Array.isArray(r.errors)&&r.errors.forEach((u,h)=>{if(Qr(u,Error)){Tm(d,a);const l=e(t,u),f=s.length;Om(l,`errors[${h}]`,f,a),s=Jc(e,t,n,u,i,[l,...s],l,f)}}),s}function Tm(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}function Om(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}function i4(e,t){return e.map(n=>(n.value&&(n.value=Xi(n.value,t)),n))}function Qa(e){return e&&e.Math==Math?e:void 0}const Pe=typeof globalThis=="object"&&Qa(globalThis)||typeof window=="object"&&Qa(window)||typeof self=="object"&&Qa(self)||typeof global=="object"&&Qa(global)||function(){return this}()||{};function ef(){return Pe}function Pm(e,t,n){const r=n||Pe,i=r.__SENTRY__=r.__SENTRY__||{};return i[e]||(i[e]=t())}const tf=ef(),s4=80;function Dm(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,i=[];let o=0,d=0;const a=" > ",s=a.length;let u;const h=Array.isArray(t)?t:t.keyAttrs,l=!Array.isArray(t)&&t.maxStringLength||s4;for(;n&&o++<r&&(u=o4(n,h),!(u==="html"||o>1&&d+i.length*s+u.length>=l));)i.push(u),d+=u.length,n=n.parentNode;return i.reverse().join(a)}catch{return"<unknown>"}}function o4(e,t){const n=e,r=[];let i,o,d,a,s;if(!n||!n.tagName)return"";if(tf.HTMLElement&&n instanceof HTMLElement&&n.dataset&&n.dataset.sentryComponent)return n.dataset.sentryComponent;r.push(n.tagName.toLowerCase());const u=t&&t.length?t.filter(l=>n.getAttribute(l)).map(l=>[l,n.getAttribute(l)]):null;if(u&&u.length)u.forEach(l=>{r.push(`[${l[0]}="${l[1]}"]`)});else if(n.id&&r.push(`#${n.id}`),i=n.className,i&&zn(i))for(o=i.split(/\s+/),s=0;s<o.length;s++)r.push(`.${o[s]}`);const h=["aria-label","type","name","title","alt"];for(s=0;s<h.length;s++)d=h[s],a=n.getAttribute(d),a&&r.push(`[${d}="${a}"]`);return r.join("")}function a4(){try{return tf.document.location.href}catch{return""}}function l4(e){if(!tf.HTMLElement)return null;let t=e;const n=5;for(let r=0;r<n;r++){if(!t)return null;if(t instanceof HTMLElement&&t.dataset.sentryComponent)return t.dataset.sentryComponent;t=t.parentNode}return null}const no=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,u4="Sentry Logger ",nf=["debug","info","warn","error","log","assert","trace"],Ja={};function el(e){if(!("console"in Pe))return e();const t=Pe.console,n={},r=Object.keys(Ja);r.forEach(i=>{const o=Ja[i];n[i]=t[i],t[i]=o});try{return e()}finally{r.forEach(i=>{t[i]=n[i]})}}function c4(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return no?nf.forEach(n=>{t[n]=(...r)=>{e&&el(()=>{Pe.console[n](`${u4}[${n}]:`,...r)})}}):nf.forEach(n=>{t[n]=()=>{}}),t}const Ce=c4(),f4=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function h4(e){return e==="http"||e==="https"}function ro(e,t=!1){const{host:n,path:r,pass:i,port:o,projectId:d,protocol:a,publicKey:s}=e;return`${a}://${s}${t&&i?`:${i}`:""}@${n}${o?`:${o}`:""}/${r&&`${r}/`}${d}`}function d4(e){const t=f4.exec(e);if(!t){el(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}const[n,r,i="",o,d="",a]=t.slice(1);let s="",u=a;const h=u.split("/");if(h.length>1&&(s=h.slice(0,-1).join("/"),u=h.pop()),u){const l=u.match(/^\d+/);l&&(u=l[0])}return Am({host:o,pass:i,path:s,projectId:u,port:d,protocol:n,publicKey:r})}function Am(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function p4(e){if(!no)return!0;const{port:t,projectId:n,protocol:r}=e;return["protocol","publicKey","host","projectId"].find(d=>e[d]?!1:(Ce.error(`Invalid Sentry Dsn: ${d} missing`),!0))?!1:n.match(/^\d+$/)?h4(r)?t&&isNaN(parseInt(t,10))?(Ce.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(Ce.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(Ce.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function g4(e){const t=typeof e=="string"?d4(e):Am(e);if(!(!t||!p4(t)))return t}class En extends Error{constructor(t,n="warn"){super(t),this.message=t,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=n}}function ut(e,t,n){if(!(t in e))return;const r=e[t],i=n(r);typeof i=="function"&&Mm(i,r),e[t]=i}function io(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{no&&Ce.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function Mm(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,io(e,"__sentry_original__",t)}catch{}}function rf(e){return e.__sentry_original__}function m4(e){return Object.keys(e).map(t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`).join("&")}function jm(e){if(_m(e))return{message:e.message,name:e.name,stack:e.stack,...Fm(e)};if(Ka(e)){const t={type:e.type,target:Im(e.target),currentTarget:Im(e.currentTarget),...Fm(e)};return typeof CustomEvent<"u"&&Qr(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function Im(e){try{return QS(e)?Dm(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function Fm(e){if(typeof e=="object"&&e!==null){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function v4(e,t=40){const n=Object.keys(jm(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return Xi(n[0],t);for(let r=n.length;r>0;r--){const i=n.slice(0,r).join(", ");if(!(i.length>t))return r===n.length?i:Xi(i,t)}return""}function Bn(e){return sf(e,new Map)}function sf(e,t){if(y4(e)){const n=t.get(e);if(n!==void 0)return n;const r={};t.set(e,r);for(const i of Object.keys(e))typeof e[i]<"u"&&(r[i]=sf(e[i],t));return r}if(Array.isArray(e)){const n=t.get(e);if(n!==void 0)return n;const r=[];return t.set(e,r),e.forEach(i=>{r.push(sf(i,t))}),r}return e}function y4(e){if(!Ui(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||t==="Object"}catch{return!0}}const Rm=50,Lm=/\(error: (.*)\)/,zm=/captureMessage|captureException/;function Bm(...e){const t=e.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0)=>{const i=[],o=n.split(`
`);for(let d=r;d<o.length;d++){const a=o[d];if(a.length>1024)continue;const s=Lm.test(a)?a.replace(Lm,"$1"):a;if(!s.match(/\S*Error: /)){for(const u of t){const h=u(s);if(h){i.push(h);break}}if(i.length>=Rm)break}}return w4(i)}}function b4(e){return Array.isArray(e)?Bm(...e):e}function w4(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop(),t.reverse(),zm.test(t[t.length-1].function||"")&&(t.pop(),zm.test(t[t.length-1].function||"")&&t.pop()),t.slice(0,Rm).map(n=>({...n,filename:n.filename||t[t.length-1].filename,function:n.function||"?"}))}const of="<anonymous>";function hr(e){try{return!e||typeof e!="function"?of:e.name||of}catch{return of}}const tl={},Nm={};function Jr(e,t){tl[e]=tl[e]||[],tl[e].push(t)}function ei(e,t){Nm[e]||(t(),Nm[e]=!0)}function gn(e,t){const n=e&&tl[e];if(n)for(const r of n)try{r(t)}catch(i){no&&Ce.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${hr(r)}
Error:`,i)}}function x4(e){const t="console";Jr(t,e),ei(t,C4)}function C4(){"console"in Pe&&nf.forEach(function(e){e in Pe.console&&ut(Pe.console,e,function(t){return Ja[e]=t,function(...n){gn("console",{args:n,level:e});const i=Ja[e];i&&i.apply(Pe.console,n)}})})}function rn(){const e=Pe,t=e.crypto||e.msCrypto;let n=()=>Math.random()*16;try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>{const r=new Uint8Array(1);return t.getRandomValues(r),r[0]})}catch{}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,r=>(r^(n()&15)>>r/4).toString(16))}function $m(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function dr(e){const{message:t,event_id:n}=e;if(t)return t;const r=$m(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function af(e,t,n){const r=e.exception=e.exception||{},i=r.values=r.values||[],o=i[0]=i[0]||{};o.value||(o.value=t||""),o.type||(o.type=n||"Error")}function so(e,t){const n=$m(e);if(!n)return;const r={type:"generic",handled:!0},i=n.mechanism;if(n.mechanism={...r,...i,...t},t&&"data"in t){const o={...i&&i.data,...t.data};n.mechanism.data=o}}function Vm(e){if(e&&e.__sentry_captured__)return!0;try{io(e,"__sentry_captured__",!0)}catch{}return!1}function Hm(e){return Array.isArray(e)?e:[e]}const Yi=Pe,_4=1e3;let Wm,lf,uf;function S4(e){const t="dom";Jr(t,e),ei(t,k4)}function k4(){if(!Yi.document)return;const e=gn.bind(null,"dom"),t=Um(e,!0);Yi.document.addEventListener("click",t,!1),Yi.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{const r=Yi[n]&&Yi[n].prototype;!r||!r.hasOwnProperty||!r.hasOwnProperty("addEventListener")||(ut(r,"addEventListener",function(i){return function(o,d,a){if(o==="click"||o=="keypress")try{const s=this,u=s.__sentry_instrumentation_handlers__=s.__sentry_instrumentation_handlers__||{},h=u[o]=u[o]||{refCount:0};if(!h.handler){const l=Um(e);h.handler=l,i.call(this,o,l,a)}h.refCount++}catch{}return i.call(this,o,d,a)}}),ut(r,"removeEventListener",function(i){return function(o,d,a){if(o==="click"||o=="keypress")try{const s=this,u=s.__sentry_instrumentation_handlers__||{},h=u[o];h&&(h.refCount--,h.refCount<=0&&(i.call(this,o,h.handler,a),h.handler=void 0,delete u[o]),Object.keys(u).length===0&&delete s.__sentry_instrumentation_handlers__)}catch{}return i.call(this,o,d,a)}}))})}function E4(e){if(e.type!==lf)return!1;try{if(!e.target||e.target._sentryId!==uf)return!1}catch{}return!0}function T4(e,t){return e!=="keypress"?!1:!t||!t.tagName?!0:!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable)}function Um(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=O4(n);if(T4(n.type,r))return;io(n,"_sentryCaptured",!0),r&&!r._sentryId&&io(r,"_sentryId",rn());const i=n.type==="keypress"?"input":n.type;E4(n)||(e({event:n,name:i,global:t}),lf=n.type,uf=r?r._sentryId:void 0),clearTimeout(Wm),Wm=Yi.setTimeout(()=>{uf=void 0,lf=void 0},_4)}}function O4(e){try{return e.target}catch{return null}}const cf=ef();function Xm(){if(!("fetch"in cf))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function ff(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function P4(){if(typeof EdgeRuntime=="string")return!0;if(!Xm())return!1;if(ff(cf.fetch))return!0;let e=!1;const t=cf.document;if(t&&typeof t.createElement=="function")try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=ff(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){no&&Ce.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}function D4(e){const t="fetch";Jr(t,e),ei(t,A4)}function A4(){P4()&&ut(Pe,"fetch",function(e){return function(...t){const{method:n,url:r}=M4(t),i={args:t,fetchData:{method:n,url:r},startTimestamp:Date.now()};return gn("fetch",{...i}),e.apply(Pe,t).then(o=>{const d={...i,endTimestamp:Date.now(),response:o};return gn("fetch",d),o},o=>{const d={...i,endTimestamp:Date.now(),error:o};throw gn("fetch",d),o})}})}function hf(e,t){return!!e&&typeof e=="object"&&!!e[t]}function Ym(e){return typeof e=="string"?e:e?hf(e,"url")?e.url:e.toString?e.toString():"":""}function M4(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){const[n,r]=e;return{url:Ym(n),method:hf(r,"method")?String(r.method).toUpperCase():"GET"}}const t=e[0];return{url:Ym(t),method:hf(t,"method")?String(t.method).toUpperCase():"GET"}}let nl=null;function j4(e){const t="error";Jr(t,e),ei(t,I4)}function I4(){nl=Pe.onerror,Pe.onerror=function(e,t,n,r,i){return gn("error",{column:r,error:i,line:n,msg:e,url:t}),nl&&!nl.__SENTRY_LOADER__?nl.apply(this,arguments):!1},Pe.onerror.__SENTRY_INSTRUMENTED__=!0}let rl=null;function F4(e){const t="unhandledrejection";Jr(t,e),ei(t,R4)}function R4(){rl=Pe.onunhandledrejection,Pe.onunhandledrejection=function(e){return gn("unhandledrejection",e),rl&&!rl.__SENTRY_LOADER__?rl.apply(this,arguments):!0},Pe.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const il=ef();function L4(){const e=il.chrome,t=e&&e.app&&e.app.runtime,n="history"in il&&!!il.history.pushState&&!!il.history.replaceState;return!t&&n}const oo=Pe;let sl;function Gm(e){const t="history";Jr(t,e),ei(t,z4)}function z4(){if(!L4())return;const e=oo.onpopstate;oo.onpopstate=function(...n){const r=oo.location.href,i=sl;if(sl=r,gn("history",{from:i,to:r}),e)try{return e.apply(this,n)}catch{}};function t(n){return function(...r){const i=r.length>2?r[2]:void 0;if(i){const o=sl,d=String(i);sl=d,gn("history",{from:o,to:d})}return n.apply(this,r)}}ut(oo.history,"pushState",t),ut(oo.history,"replaceState",t)}const B4=Pe,ao="__sentry_xhr_v3__";function N4(e){const t="xhr";Jr(t,e),ei(t,$4)}function $4(){if(!B4.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;ut(e,"open",function(t){return function(...n){const r=Date.now(),i=zn(n[0])?n[0].toUpperCase():void 0,o=V4(n[1]);if(!i||!o)return t.apply(this,n);this[ao]={method:i,url:o,request_headers:{}},i==="POST"&&o.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const d=()=>{const a=this[ao];if(a&&this.readyState===4){try{a.status_code=this.status}catch{}const s={args:[i,o],endTimestamp:Date.now(),startTimestamp:r,xhr:this};gn("xhr",s)}};return"onreadystatechange"in this&&typeof this.onreadystatechange=="function"?ut(this,"onreadystatechange",function(a){return function(...s){return d(),a.apply(this,s)}}):this.addEventListener("readystatechange",d),ut(this,"setRequestHeader",function(a){return function(...s){const[u,h]=s,l=this[ao];return l&&zn(u)&&zn(h)&&(l.request_headers[u.toLowerCase()]=h),a.apply(this,s)}}),t.apply(this,n)}}),ut(e,"send",function(t){return function(...n){const r=this[ao];if(!r)return t.apply(this,n);n[0]!==void 0&&(r.body=n[0]);const i={args:[r.method,r.url],startTimestamp:Date.now(),xhr:this};return gn("xhr",i),t.apply(this,n)}})}function V4(e){if(zn(e))return e;try{return e.toString()}catch{}}function H4(){return"npm"}function W4(){const e=typeof WeakSet=="function",t=e?new WeakSet:[];function n(i){if(e)return t.has(i)?!0:(t.add(i),!1);for(let o=0;o<t.length;o++)if(t[o]===i)return!0;return t.push(i),!1}function r(i){if(e)t.delete(i);else for(let o=0;o<t.length;o++)if(t[o]===i){t.splice(o,1);break}}return[n,r]}function pr(e,t=100,n=1/0){try{return df("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function Km(e,t=3,n=100*1024){const r=pr(e,t);return G4(r)>n?Km(e,t-1,n):r}function df(e,t,n=1/0,r=1/0,i=W4()){const[o,d]=i;if(t==null||["number","boolean","string"].includes(typeof t)&&!t4(t))return t;const a=U4(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const s=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(s===0)return a.replace("object ","");if(o(t))return"[Circular ~]";const u=t;if(u&&typeof u.toJSON=="function")try{const c=u.toJSON();return df("",c,s-1,r,i)}catch{}const h=Array.isArray(t)?[]:{};let l=0;const f=jm(t);for(const c in f){if(!Object.prototype.hasOwnProperty.call(f,c))continue;if(l>=r){h[c]="[MaxProperties ~]";break}const p=f[c];h[c]=df(c,p,s-1,r,i),l++}return d(t),h}function U4(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(km(t))return"[VueViewModel]";if(e4(t))return"[SyntheticEvent]";if(typeof t=="number"&&t!==t)return"[NaN]";if(typeof t=="function")return`[Function: ${hr(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;const n=X4(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function X4(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}function Y4(e){return~-encodeURI(e).split(/%..|./).length}function G4(e){return Y4(JSON.stringify(e))}var Nn;(function(e){e[e.PENDING=0]="PENDING";const n=1;e[e.RESOLVED=n]="RESOLVED";const r=2;e[e.REJECTED=r]="REJECTED"})(Nn||(Nn={}));function Gi(e){return new Nt(t=>{t(e)})}function pf(e){return new Nt((t,n)=>{n(e)})}class Nt{constructor(t){Nt.prototype.__init.call(this),Nt.prototype.__init2.call(this),Nt.prototype.__init3.call(this),Nt.prototype.__init4.call(this),this._state=Nn.PENDING,this._handlers=[];try{t(this._resolve,this._reject)}catch(n){this._reject(n)}}then(t,n){return new Nt((r,i)=>{this._handlers.push([!1,o=>{if(!t)r(o);else try{r(t(o))}catch(d){i(d)}},o=>{if(!n)i(o);else try{r(n(o))}catch(d){i(d)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new Nt((n,r)=>{let i,o;return this.then(d=>{o=!1,i=d,t&&t()},d=>{o=!0,i=d,t&&t()}).then(()=>{if(o){r(i);return}n(i)})})}__init(){this._resolve=t=>{this._setResult(Nn.RESOLVED,t)}}__init2(){this._reject=t=>{this._setResult(Nn.REJECTED,t)}}__init3(){this._setResult=(t,n)=>{if(this._state===Nn.PENDING){if(qa(n)){n.then(this._resolve,this._reject);return}this._state=t,this._value=n,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===Nn.PENDING)return;const t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===Nn.RESOLVED&&n[1](this._value),this._state===Nn.REJECTED&&n[2](this._value),n[0]=!0)})}}}function K4(e){const t=[];function n(){return e===void 0||t.length<e}function r(d){return t.splice(t.indexOf(d),1)[0]}function i(d){if(!n())return pf(new En("Not adding Promise because buffer limit was reached."));const a=d();return t.indexOf(a)===-1&&t.push(a),a.then(()=>r(a)).then(null,()=>r(a).then(null,()=>{})),a}function o(d){return new Nt((a,s)=>{let u=t.length;if(!u)return a(!0);const h=setTimeout(()=>{d&&d>0&&a(!1)},d);t.forEach(l=>{Gi(l).then(()=>{--u||(clearTimeout(h),a(!0))},s)})})}return{$:t,add:i,drain:o}}function gf(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}const q4=["fatal","error","warning","log","info","debug"];function Z4(e){return e==="warn"?"warning":q4.includes(e)?e:"log"}const qm=1e3;function lo(){return Date.now()/qm}function Q4(){const{performance:e}=Pe;if(!e||!e.now)return lo;const t=Date.now()-e.now(),n=e.timeOrigin==null?t:e.timeOrigin;return()=>(n+e.now())/qm}const Zm=Q4();(()=>{const{performance:e}=Pe;if(!e||!e.now)return;const t=3600*1e3,n=e.now(),r=Date.now(),i=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,o=i<t,d=e.timing&&e.timing.navigationStart,s=typeof d=="number"?Math.abs(d+n-r):t,u=s<t;return o||u?i<=s?e.timeOrigin:d:r})();function Ki(e,t=[]){return[e,t]}function J4(e,t){const[n,r]=e;return[n,[...r,t]]}function Qm(e,t){const n=e[1];for(const r of n){const i=r[0].type;if(t(r,i))return!0}return!1}function mf(e,t){return(t||new TextEncoder).encode(e)}function e5(e,t){const[n,r]=e;let i=JSON.stringify(n);function o(d){typeof i=="string"?i=typeof d=="string"?i+d:[mf(i,t),d]:i.push(typeof d=="string"?mf(d,t):d)}for(const d of r){const[a,s]=d;if(o(`
${JSON.stringify(a)}
`),typeof s=="string"||s instanceof Uint8Array)o(s);else{let u;try{u=JSON.stringify(s)}catch{u=JSON.stringify(pr(s))}o(u)}}return typeof i=="string"?i:t5(i)}function t5(e){const t=e.reduce((i,o)=>i+o.length,0),n=new Uint8Array(t);let r=0;for(const i of e)n.set(i,r),r+=i.length;return n}function n5(e,t){const n=typeof e.data=="string"?mf(e.data,t):e.data;return[Bn({type:"attachment",length:n.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),n]}const r5={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function Jm(e){return r5[e]}function ev(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function i5(e,t,n,r){const i=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:ro(r)},...i&&{trace:Bn({...i})}}}function s5(e,t,n){const r=[{type:"client_report"},{timestamp:n||lo(),discarded_events:e}];return Ki(t?{dsn:t}:{},[r])}const o5=60*1e3;function a5(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;const r=Date.parse(`${e}`);return isNaN(r)?o5:r-t}function l5(e,t){return e[t]||e.all||0}function u5(e,t,n=Date.now()){return l5(e,t)>n}function c5(e,{statusCode:t,headers:n},r=Date.now()){const i={...e},o=n&&n["x-sentry-rate-limits"],d=n&&n["retry-after"];if(o)for(const a of o.trim().split(",")){const[s,u,,,h]=a.split(":",5),l=parseInt(s,10),f=(isNaN(l)?60:l)*1e3;if(!u)i.all=r+f;else for(const c of u.split(";"))c==="metric_bucket"?(!h||h.split(";").includes("custom"))&&(i[c]=r+f):i[c]=r+f}else d?i.all=r+a5(d,r):t===429&&(i.all=r+60*1e3);return i}const Fe=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,ol="production";function vf(){return Pm("globalEventProcessors",()=>[])}function f5(e){vf().push(e)}function al(e,t,n,r=0){return new Nt((i,o)=>{const d=e[r];if(t===null||typeof d!="function")i(t);else{const a=d({...t},n);Fe&&d.id&&a===null&&Ce.log(`Event processor "${d.id}" dropped event`),qa(a)?a.then(s=>al(e,s,n,r+1).then(i)).then(null,o):al(e,a,n,r+1).then(i).then(null,o)}})}function tv(e){const t=Zm(),n={sid:rn(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>h5(n)};return e&&ti(n,e),n}function ti(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Zm(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:rn()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function nv(e,t){let n={};t?n={status:t}:e.status==="ok"&&(n={status:"exited"}),ti(e,n)}function h5(e){return Bn({sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}const d5=1;function p5(e){const{spanId:t,traceId:n}=e.spanContext(),{data:r,op:i,parent_span_id:o,status:d,tags:a,origin:s}=uo(e);return Bn({data:r,op:i,parent_span_id:o,span_id:t,status:d,tags:a,trace_id:n,origin:s})}function uo(e){return g5(e)?e.getSpanJSON():typeof e.toJSON=="function"?e.toJSON():{}}function g5(e){return typeof e.getSpanJSON=="function"}function m5(e){const{traceFlags:t}=e.spanContext();return!!(t&d5)}function v5(e,t,n,r,i,o){const{normalizeDepth:d=3,normalizeMaxBreadth:a=1e3}=e,s={...t,event_id:t.event_id||n.event_id||rn(),timestamp:t.timestamp||lo()},u=n.integrations||e.integrations.map(g=>g.name);y5(s,e),x5(s,u),t.type===void 0&&b5(s,e.stackParser);const h=_5(r,n.captureContext);n.mechanism&&so(s,n.mechanism);const l=i&&i.getEventProcessors?i.getEventProcessors():[],f=L5().getScopeData();if(o){const g=o.getScopeData();hv(f,g)}if(h){const g=h.getScopeData();hv(f,g)}const c=[...n.attachments||[],...f.attachments];c.length&&(n.attachments=c),fv(s,f);const p=[...l,...vf(),...f.eventProcessors];return al(p,s,n).then(g=>(g&&w5(g),typeof d=="number"&&d>0?C5(g,d,a):g))}function y5(e,t){const{environment:n,release:r,dist:i,maxValueLength:o=250}=t;"environment"in e||(e.environment="environment"in t?n:ol),e.release===void 0&&r!==void 0&&(e.release=r),e.dist===void 0&&i!==void 0&&(e.dist=i),e.message&&(e.message=Xi(e.message,o));const d=e.exception&&e.exception.values&&e.exception.values[0];d&&d.value&&(d.value=Xi(d.value,o));const a=e.request;a&&a.url&&(a.url=Xi(a.url,o))}const rv=new WeakMap;function b5(e,t){const n=Pe._sentryDebugIds;if(!n)return;let r;const i=rv.get(t);i?r=i:(r=new Map,rv.set(t,r));const o=Object.keys(n).reduce((d,a)=>{let s;const u=r.get(a);u?s=u:(s=t(a),r.set(a,s));for(let h=s.length-1;h>=0;h--){const l=s[h];if(l.filename){d[l.filename]=n[a];break}}return d},{});try{e.exception.values.forEach(d=>{d.stacktrace.frames.forEach(a=>{a.filename&&(a.debug_id=o[a.filename])})})}catch{}}function w5(e){const t={};try{e.exception.values.forEach(r=>{r.stacktrace.frames.forEach(i=>{i.debug_id&&(i.abs_path?t[i.abs_path]=i.debug_id:i.filename&&(t[i.filename]=i.debug_id),delete i.debug_id)})})}catch{}if(Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.keys(t).forEach(r=>{n.push({type:"sourcemap",code_file:r,debug_id:t[r]})})}function x5(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function C5(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(i=>({...i,...i.data&&{data:pr(i.data,t,n)}}))},...e.user&&{user:pr(e.user,t,n)},...e.contexts&&{contexts:pr(e.contexts,t,n)},...e.extra&&{extra:pr(e.extra,t,n)}};return e.contexts&&e.contexts.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=pr(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map(i=>{const o=uo(i).data;return o&&(i.data=pr(o,t,n)),i})),r}function _5(e,t){if(!t)return e;const n=e?e.clone():new $n;return n.update(t),n}function S5(e){if(e)return k5(e)?{captureContext:e}:T5(e)?{captureContext:e}:e}function k5(e){return e instanceof $n||typeof e=="function"}const E5=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function T5(e){return Object.keys(e).some(t=>E5.includes(t))}function O5(e,t){return Vn().captureException(e,S5(t))}function iv(e,t){return Vn().captureEvent(e,t)}function ni(e,t){Vn().addBreadcrumb(e,t)}function P5(...e){const t=Vn();if(e.length===2){const[n,r]=e;return n?t.withScope(()=>(t.getStackTop().scope=n,r(n))):t.withScope(r)}return t.withScope(e[0])}function jt(){return Vn().getClient()}function co(){return Vn().getScope()}function sv(e){const t=jt(),n=ul(),r=co(),{release:i,environment:o=ol}=t&&t.getOptions()||{},{userAgent:d}=Pe.navigator||{},a=tv({release:i,environment:o,user:r.getUser()||n.getUser(),...d&&{userAgent:d},...e}),s=n.getSession();return s&&s.status==="ok"&&ti(s,{status:"exited"}),ov(),n.setSession(a),r.setSession(a),a}function ov(){const e=ul(),t=co(),n=t.getSession()||e.getSession();n&&nv(n),av(),e.setSession(),t.setSession()}function av(){const e=ul(),t=co(),n=jt(),r=t.getSession()||e.getSession();r&&n&&n.captureSession&&n.captureSession(r)}function lv(e=!1){if(e){ov();return}av()}function uv(e){return e.transaction}function cv(e,t,n){const r=t.getOptions(),{publicKey:i}=t.getDsn()||{},{segment:o}=n&&n.getUser()||{},d=Bn({environment:r.environment||ol,release:r.release,user_segment:o,public_key:i,trace_id:e});return t.emit&&t.emit("createDsc",d),d}function D5(e){const t=jt();if(!t)return{};const n=cv(uo(e).trace_id||"",t,co()),r=uv(e);if(!r)return n;const i=r&&r._frozenDynamicSamplingContext;if(i)return i;const{sampleRate:o,source:d}=r.metadata;o!=null&&(n.sample_rate=`${o}`);const a=uo(r);return d&&d!=="url"&&(n.transaction=a.description),n.sampled=String(m5(r)),t.emit&&t.emit("createDsc",n),n}function fv(e,t){const{fingerprint:n,span:r,breadcrumbs:i,sdkProcessingMetadata:o}=t;A5(e,t),r&&I5(e,r),F5(e,n),M5(e,i),j5(e,o)}function hv(e,t){const{extra:n,tags:r,user:i,contexts:o,level:d,sdkProcessingMetadata:a,breadcrumbs:s,fingerprint:u,eventProcessors:h,attachments:l,propagationContext:f,transactionName:c,span:p}=t;fo(e,"extra",n),fo(e,"tags",r),fo(e,"user",i),fo(e,"contexts",o),fo(e,"sdkProcessingMetadata",a),d&&(e.level=d),c&&(e.transactionName=c),p&&(e.span=p),s.length&&(e.breadcrumbs=[...e.breadcrumbs,...s]),u.length&&(e.fingerprint=[...e.fingerprint,...u]),h.length&&(e.eventProcessors=[...e.eventProcessors,...h]),l.length&&(e.attachments=[...e.attachments,...l]),e.propagationContext={...e.propagationContext,...f}}function fo(e,t,n){if(n&&Object.keys(n).length){e[t]={...e[t]};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[t][r]=n[r])}}function A5(e,t){const{extra:n,tags:r,user:i,contexts:o,level:d,transactionName:a}=t,s=Bn(n);s&&Object.keys(s).length&&(e.extra={...s,...e.extra});const u=Bn(r);u&&Object.keys(u).length&&(e.tags={...u,...e.tags});const h=Bn(i);h&&Object.keys(h).length&&(e.user={...h,...e.user});const l=Bn(o);l&&Object.keys(l).length&&(e.contexts={...l,...e.contexts}),d&&(e.level=d),a&&(e.transaction=a)}function M5(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function j5(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function I5(e,t){e.contexts={trace:p5(t),...e.contexts};const n=uv(t);if(n){e.sdkProcessingMetadata={dynamicSamplingContext:D5(t),...e.sdkProcessingMetadata};const r=uo(n).description;r&&(e.tags={transaction:r,...e.tags})}}function F5(e,t){e.fingerprint=e.fingerprint?Hm(e.fingerprint):[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}const R5=100;let yf;class $n{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=dv()}static clone(t){return t?t.clone():new $n}clone(){const t=new $n;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},t._user=this._user,t._level=this._level,t._span=this._span,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._requestSession=this._requestSession,t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t}setClient(t){this._client=t}getClient(){return this._client}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&ti(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(t){return this._requestSession=t,this}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSpan(t){return this._span=t,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const t=this._span;return t&&t.transaction}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const n=typeof t=="function"?t(this):t;if(n instanceof $n){const r=n.getScopeData();this._tags={...this._tags,...r.tags},this._extra={...this._extra,...r.extra},this._contexts={...this._contexts,...r.contexts},r.user&&Object.keys(r.user).length&&(this._user=r.user),r.level&&(this._level=r.level),r.fingerprint.length&&(this._fingerprint=r.fingerprint),n.getRequestSession()&&(this._requestSession=n.getRequestSession()),r.propagationContext&&(this._propagationContext=r.propagationContext)}else if(Ui(n)){const r=t;this._tags={...this._tags,...r.tags},this._extra={...this._extra,...r.extra},this._contexts={...this._contexts,...r.contexts},r.user&&(this._user=r.user),r.level&&(this._level=r.level),r.fingerprint&&(this._fingerprint=r.fingerprint),r.requestSession&&(this._requestSession=r.requestSession),r.propagationContext&&(this._propagationContext=r.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=dv(),this}addBreadcrumb(t,n){const r=typeof n=="number"?n:R5;if(r<=0)return this;const i={timestamp:lo(),...t},o=this._breadcrumbs;return o.push(i),this._breadcrumbs=o.length>r?o.slice(-r):o,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:t,_attachments:n,_contexts:r,_tags:i,_extra:o,_user:d,_level:a,_fingerprint:s,_eventProcessors:u,_propagationContext:h,_sdkProcessingMetadata:l,_transactionName:f,_span:c}=this;return{breadcrumbs:t,attachments:n,contexts:r,tags:i,extra:o,user:d,level:a,fingerprint:s||[],eventProcessors:u,propagationContext:h,sdkProcessingMetadata:l,transactionName:f,span:c}}applyToEvent(t,n={},r=[]){fv(t,this.getScopeData());const i=[...r,...vf(),...this._eventProcessors];return al(i,t,n)}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...t},this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){const r=n&&n.event_id?n.event_id:rn();if(!this._client)return Ce.warn("No client configured on scope - will not capture exception!"),r;const i=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:i,...n,event_id:r},this),r}captureMessage(t,n,r){const i=r&&r.event_id?r.event_id:rn();if(!this._client)return Ce.warn("No client configured on scope - will not capture message!"),i;const o=new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:o,...r,event_id:i},this),i}captureEvent(t,n){const r=n&&n.event_id?n.event_id:rn();return this._client?(this._client.captureEvent(t,{...n,event_id:r},this),r):(Ce.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}function L5(){return yf||(yf=new $n),yf}function dv(){return{traceId:rn(),spanId:rn().substring(16)}}const bf="7.116.0",pv=parseFloat(bf),z5=100;class gv{constructor(t,n,r,i=pv){this._version=i;let o;n?o=n:(o=new $n,o.setClient(t));let d;r?d=r:(d=new $n,d.setClient(t)),this._stack=[{scope:o}],t&&this.bindClient(t),this._isolationScope=d}isOlderThan(t){return this._version<t}bindClient(t){const n=this.getStackTop();n.client=t,n.scope.setClient(t),t&&t.setupIntegrations&&t.setupIntegrations()}pushScope(){const t=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:t}),t}popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}withScope(t){const n=this.pushScope();let r;try{r=t(n)}catch(i){throw this.popScope(),i}return qa(r)?r.then(i=>(this.popScope(),i),i=>{throw this.popScope(),i}):(this.popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(t,n){const r=this._lastEventId=n&&n.event_id?n.event_id:rn(),i=new Error("Sentry syntheticException");return this.getScope().captureException(t,{originalException:t,syntheticException:i,...n,event_id:r}),r}captureMessage(t,n,r){const i=this._lastEventId=r&&r.event_id?r.event_id:rn(),o=new Error(t);return this.getScope().captureMessage(t,n,{originalException:t,syntheticException:o,...r,event_id:i}),i}captureEvent(t,n){const r=n&&n.event_id?n.event_id:rn();return t.type||(this._lastEventId=r),this.getScope().captureEvent(t,{...n,event_id:r}),r}lastEventId(){return this._lastEventId}addBreadcrumb(t,n){const{scope:r,client:i}=this.getStackTop();if(!i)return;const{beforeBreadcrumb:o=null,maxBreadcrumbs:d=z5}=i.getOptions&&i.getOptions()||{};if(d<=0)return;const s={timestamp:lo(),...t},u=o?el(()=>o(s,n)):s;u!==null&&(i.emit&&i.emit("beforeAddBreadcrumb",u,n),r.addBreadcrumb(u,d))}setUser(t){this.getScope().setUser(t),this.getIsolationScope().setUser(t)}setTags(t){this.getScope().setTags(t),this.getIsolationScope().setTags(t)}setExtras(t){this.getScope().setExtras(t),this.getIsolationScope().setExtras(t)}setTag(t,n){this.getScope().setTag(t,n),this.getIsolationScope().setTag(t,n)}setExtra(t,n){this.getScope().setExtra(t,n),this.getIsolationScope().setExtra(t,n)}setContext(t,n){this.getScope().setContext(t,n),this.getIsolationScope().setContext(t,n)}configureScope(t){const{scope:n,client:r}=this.getStackTop();r&&t(n)}run(t){const n=mv(this);try{t(this)}finally{mv(n)}}getIntegration(t){const n=this.getClient();if(!n)return null;try{return n.getIntegration(t)}catch{return Fe&&Ce.warn(`Cannot retrieve integration ${t.id} from the current Hub`),null}}startTransaction(t,n){const r=this._callExtensionMethod("startTransaction",t,n);return Fe&&!r&&(this.getClient()?Ce.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`):Ce.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")),r}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(t=!1){if(t)return this.endSession();this._sendSessionUpdate()}endSession(){const n=this.getStackTop().scope,r=n.getSession();r&&nv(r),this._sendSessionUpdate(),n.setSession()}startSession(t){const{scope:n,client:r}=this.getStackTop(),{release:i,environment:o=ol}=r&&r.getOptions()||{},{userAgent:d}=Pe.navigator||{},a=tv({release:i,environment:o,user:n.getUser(),...d&&{userAgent:d},...t}),s=n.getSession&&n.getSession();return s&&s.status==="ok"&&ti(s,{status:"exited"}),this.endSession(),n.setSession(a),a}shouldSendDefaultPii(){const t=this.getClient(),n=t&&t.getOptions();return!!(n&&n.sendDefaultPii)}_sendSessionUpdate(){const{scope:t,client:n}=this.getStackTop(),r=t.getSession();r&&n&&n.captureSession&&n.captureSession(r)}_callExtensionMethod(t,...n){const i=ll().__SENTRY__;if(i&&i.extensions&&typeof i.extensions[t]=="function")return i.extensions[t].apply(this,n);Fe&&Ce.warn(`Extension method ${t} couldn't be found, doing nothing.`)}}function ll(){return Pe.__SENTRY__=Pe.__SENTRY__||{extensions:{},hub:void 0},Pe}function mv(e){const t=ll(),n=wf(t);return vv(t,e),n}function Vn(){const e=ll();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return B5(e)}function ul(){return Vn().getIsolationScope()}function B5(e=ll()){return(!N5(e)||wf(e).isOlderThan(pv))&&vv(e,new gv),wf(e)}function N5(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function wf(e){return Pm("hub",()=>new gv,e)}function vv(e,t){if(!e)return!1;const n=e.__SENTRY__=e.__SENTRY__||{};return n.hub=t,!0}function $5(e,t){return t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]]),e}function V5(e,t,n,r){const i=ev(n),o={sent_at:new Date().toISOString(),...i&&{sdk:i},...!!r&&t&&{dsn:ro(t)}},d="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return Ki(o,[d])}function H5(e,t,n,r){const i=ev(n),o=e.type&&e.type!=="replay_event"?e.type:"event";$5(e,n&&n.sdk);const d=i5(e,i,r,t);return delete e.sdkProcessingMetadata,Ki(d,[[{type:o},e]])}const W5="7";function U5(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function X5(e){return`${U5(e)}${e.projectId}/envelope/`}function Y5(e,t){return m4({sentry_key:e.publicKey,sentry_version:W5,...t&&{sentry_client:`${t.name}/${t.version}`}})}function G5(e,t={}){const n=typeof t=="string"?t:t.tunnel,r=typeof t=="string"||!t._metadata?void 0:t._metadata.sdk;return n||`${X5(e)}?${Y5(e,r)}`}const yv=[];function K5(e){const t={};return e.forEach(n=>{const{name:r}=n,i=t[r];i&&!i.isDefaultInstance&&n.isDefaultInstance||(t[r]=n)}),Object.keys(t).map(n=>t[n])}function q5(e){const t=e.defaultIntegrations||[],n=e.integrations;t.forEach(d=>{d.isDefaultInstance=!0});let r;Array.isArray(n)?r=[...t,...n]:typeof n=="function"?r=Hm(n(t)):r=t;const i=K5(r),o=Q5(i,d=>d.name==="Debug");if(o!==-1){const[d]=i.splice(o,1);i.push(d)}return i}function Z5(e,t){const n={};return t.forEach(r=>{r&&wv(e,r,n)}),n}function bv(e,t){for(const n of t)n&&n.afterAllSetup&&n.afterAllSetup(e)}function wv(e,t,n){if(n[t.name]){Fe&&Ce.log(`Integration skipped because it was already installed: ${t.name}`);return}if(n[t.name]=t,yv.indexOf(t.name)===-1&&(t.setupOnce(f5,Vn),yv.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),e.on&&typeof t.preprocessEvent=="function"){const r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(i,o)=>r(i,o,e))}if(e.addEventProcessor&&typeof t.processEvent=="function"){const r=t.processEvent.bind(t),i=Object.assign((o,d)=>r(o,d,e),{id:t.name});e.addEventProcessor(i)}Fe&&Ce.log(`Integration installed: ${t.name}`)}function Q5(e,t){for(let n=0;n<e.length;n++)if(t(e[n])===!0)return n;return-1}function gr(e,t){return Object.assign(function(...r){return t(...r)},{id:e})}function m7(e){return e}function J5(e){let t="";for(const n of e){const r=Object.entries(n.tags),i=r.length>0?`|#${r.map(([o,d])=>`${o}:${d}`).join(",")}`:"";t+=`${n.name}@${n.unit}:${n.metric}|${n.metricType}${i}|T${n.timestamp}
`}return t}function e3(e,t,n,r){const i={sent_at:new Date().toISOString()};n&&n.sdk&&(i.sdk={name:n.sdk.name,version:n.sdk.version}),r&&t&&(i.dsn=ro(t));const o=t3(e);return Ki(i,[o])}function t3(e){const t=J5(e);return[{type:"statsd",length:t.length},t]}const xv="Not capturing exception because it's already been captured.";class n3{constructor(t){if(this._options=t,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=g4(t.dsn):Fe&&Ce.warn("No DSN provided, client will not send events."),this._dsn){const n=G5(this._dsn,t);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:n})}}captureException(t,n,r){if(Vm(t)){Fe&&Ce.log(xv);return}let i=n&&n.event_id;return this._process(this.eventFromException(t,n).then(o=>this._captureEvent(o,n,r)).then(o=>{i=o})),i}captureMessage(t,n,r,i){let o=r&&r.event_id;const d=Zc(t)?t:String(t),a=Qc(t)?this.eventFromMessage(d,n,r):this.eventFromException(t,r);return this._process(a.then(s=>this._captureEvent(s,r,i)).then(s=>{o=s})),o}captureEvent(t,n,r){if(n&&n.originalException&&Vm(n.originalException)){Fe&&Ce.log(xv);return}let i=n&&n.event_id;const d=(t.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(t,n,d||r).then(a=>{i=a})),i}captureSession(t){typeof t.release!="string"?Fe&&Ce.warn("Discarded session because of missing or non-string release"):(this.sendSession(t),ti(t,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){const n=this._transport;return n?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(t).then(r=>n.flush(t).then(i=>r&&i))):Gi(!0)}close(t){return this.flush(t).then(n=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}setupIntegrations(t){(t&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&this._setupIntegrations()}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationById(t){return this.getIntegrationByName(t)}getIntegrationByName(t){return this._integrations[t]}getIntegration(t){try{return this._integrations[t.id]||null}catch{return Fe&&Ce.warn(`Cannot retrieve integration ${t.id} from the current Client`),null}}addIntegration(t){const n=this._integrations[t.name];wv(this,t,this._integrations),n||bv(this,[t])}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let r=H5(t,this._dsn,this._options._metadata,this._options.tunnel);for(const o of n.attachments||[])r=J4(r,n5(o,this._options.transportOptions&&this._options.transportOptions.textEncoder));const i=this._sendEnvelope(r);i&&i.then(o=>this.emit("afterSendEvent",t,o),null)}sendSession(t){const n=V5(t,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(n)}recordDroppedEvent(t,n,r){if(this._options.sendClientReports){const i=`${t}:${n}`;Fe&&Ce.log(`Adding outcome: "${i}"`),this._outcomes[i]=this._outcomes[i]+1||1}}captureAggregateMetrics(t){Fe&&Ce.log(`Flushing aggregated metrics, number of metrics: ${t.length}`);const n=e3(t,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(n)}on(t,n){this._hooks[t]||(this._hooks[t]=[]),this._hooks[t].push(n)}emit(t,...n){this._hooks[t]&&this._hooks[t].forEach(r=>r(...n))}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=Z5(this,t),bv(this,t),this._integrationsInitialized=!0}_updateSessionFromEvent(t,n){let r=!1,i=!1;const o=n.exception&&n.exception.values;if(o){i=!0;for(const s of o){const u=s.mechanism;if(u&&u.handled===!1){r=!0;break}}}const d=t.status==="ok";(d&&t.errors===0||d&&r)&&(ti(t,{...r&&{status:"crashed"},errors:t.errors||Number(i||r)}),this.captureSession(t))}_isClientDoneProcessing(t){return new Nt(n=>{let r=0;const i=1,o=setInterval(()=>{this._numProcessing==0?(clearInterval(o),n(!0)):(r+=i,t&&r>=t&&(clearInterval(o),n(!1)))},i)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,r,i=ul()){const o=this.getOptions(),d=Object.keys(this._integrations);return!n.integrations&&d.length>0&&(n.integrations=d),this.emit("preprocessEvent",t,n),v5(o,t,n,r,this,i).then(a=>{if(a===null)return a;const s={...i.getPropagationContext(),...r?r.getPropagationContext():void 0};if(!(a.contexts&&a.contexts.trace)&&s){const{traceId:h,spanId:l,parentSpanId:f,dsc:c}=s;a.contexts={trace:{trace_id:h,span_id:l,parent_span_id:f},...a.contexts};const p=c||cv(h,this,r);a.sdkProcessingMetadata={dynamicSamplingContext:p,...a.sdkProcessingMetadata}}return a})}_captureEvent(t,n={},r){return this._processEvent(t,n,r).then(i=>i.event_id,i=>{if(Fe){const o=i;o.logLevel==="log"?Ce.log(o.message):Ce.warn(o)}})}_processEvent(t,n,r){const i=this.getOptions(),{sampleRate:o}=i,d=_v(t),a=Cv(t),s=t.type||"error",u=`before send for type \`${s}\``;if(a&&typeof o=="number"&&Math.random()>o)return this.recordDroppedEvent("sample_rate","error",t),pf(new En(`Discarding event because it's not included in the random sample (sampling rate = ${o})`,"log"));const h=s==="replay_event"?"replay":s,f=(t.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(t,n,r,f).then(c=>{if(c===null)throw this.recordDroppedEvent("event_processor",h,t),new En("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return c;const m=i3(i,c,n);return r3(m,u)}).then(c=>{if(c===null)throw this.recordDroppedEvent("before_send",h,t),new En(`${u} returned \`null\`, will not send event.`,"log");const p=r&&r.getSession();!d&&p&&this._updateSessionFromEvent(p,c);const m=c.transaction_info;if(d&&m&&c.transaction!==t.transaction){const g="custom";c.transaction_info={...m,source:g}}return this.sendEvent(c,n),c}).then(null,c=>{throw c instanceof En?c:(this.captureException(c,{data:{__sentry__:!0},originalException:c}),new En(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${c}`))})}_process(t){this._numProcessing++,t.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_sendEnvelope(t){if(this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport)return this._transport.send(t).then(null,n=>{Fe&&Ce.error("Error while sending event:",n)});Fe&&Ce.error("Transport disabled")}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.keys(t).map(n=>{const[r,i]=n.split(":");return{reason:r,category:i,quantity:t[n]}})}}function r3(e,t){const n=`${t} must return \`null\` or a valid event.`;if(qa(e))return e.then(r=>{if(!Ui(r)&&r!==null)throw new En(n);return r},r=>{throw new En(`${t} rejected with ${r}`)});if(!Ui(e)&&e!==null)throw new En(n);return e}function i3(e,t,n){const{beforeSend:r,beforeSendTransaction:i}=e;return Cv(t)&&r?r(t,n):_v(t)&&i?i(t,n):t}function Cv(e){return e.type===void 0}function _v(e){return e.type==="transaction"}function s3(e,t){t.debug===!0&&(Fe?Ce.enable():el(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),co().update(t.initialScope);const r=new e(t);o3(r),a3(r)}function o3(e){const n=Vn().getStackTop();n.client=e,n.scope.setClient(e)}function a3(e){e.init?e.init():e.setupIntegrations&&e.setupIntegrations()}const l3=30;function Sv(e,t,n=K4(e.bufferSize||l3)){let r={};const i=d=>n.drain(d);function o(d){const a=[];if(Qm(d,(l,f)=>{const c=Jm(f);if(u5(r,c)){const p=kv(l,f);e.recordDroppedEvent("ratelimit_backoff",c,p)}else a.push(l)}),a.length===0)return Gi();const s=Ki(d[0],a),u=l=>{Qm(s,(f,c)=>{const p=kv(f,c);e.recordDroppedEvent(l,Jm(c),p)})},h=()=>t({body:e5(s,e.textEncoder)}).then(l=>(l.statusCode!==void 0&&(l.statusCode<200||l.statusCode>=300)&&Fe&&Ce.warn(`Sentry responded with status code ${l.statusCode} to sent event.`),r=c5(r,l),l),l=>{throw u("network_error"),l});return n.add(h).then(l=>l,l=>{if(l instanceof En)return Fe&&Ce.error("Skipped sending event because buffer is full."),u("queue_overflow"),Gi();throw l})}return o.__sentry__baseTransport__=!0,{send:o,flush:i}}function kv(e,t){if(!(t!=="event"&&t!=="transaction"))return Array.isArray(e)?e[1]:void 0}function Ev(e,t,n=[t],r="npm"){const i=e._metadata||{};i.sdk||(i.sdk={name:`sentry.javascript.${t}`,packages:n.map(o=>({name:`${r}:@sentry/${o}`,version:bf})),version:bf}),e._metadata=i}const u3=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/],c3=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],Tv="InboundFilters",Ov=(e={})=>({name:Tv,setupOnce(){},processEvent(t,n,r){const i=r.getOptions(),o=f3(e,i);return h3(t,o)?null:t}});gr(Tv,Ov);function f3(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:u3],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[],...e.disableTransactionDefaults?[]:c3],ignoreInternal:e.ignoreInternal!==void 0?e.ignoreInternal:!0}}function h3(e,t){return t.ignoreInternal&&y3(e)?(Fe&&Ce.warn(`Event dropped due to being internal Sentry Error.
Event: ${dr(e)}`),!0):d3(e,t.ignoreErrors)?(Fe&&Ce.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${dr(e)}`),!0):p3(e,t.ignoreTransactions)?(Fe&&Ce.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${dr(e)}`),!0):g3(e,t.denyUrls)?(Fe&&Ce.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${dr(e)}.
Url: ${cl(e)}`),!0):m3(e,t.allowUrls)?!1:(Fe&&Ce.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${dr(e)}.
Url: ${cl(e)}`),!0)}function d3(e,t){return e.type||!t||!t.length?!1:v3(e).some(n=>Za(n,t))}function p3(e,t){if(e.type!=="transaction"||!t||!t.length)return!1;const n=e.transaction;return n?Za(n,t):!1}function g3(e,t){if(!t||!t.length)return!1;const n=cl(e);return n?Za(n,t):!1}function m3(e,t){if(!t||!t.length)return!0;const n=cl(e);return n?Za(n,t):!0}function v3(e){const t=[];e.message&&t.push(e.message);let n;try{n=e.exception.values[e.exception.values.length-1]}catch{}return n&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`)),Fe&&t.length===0&&Ce.error(`Could not extract message for event ${dr(e)}`),t}function y3(e){try{return e.exception.values[0].type==="SentryError"}catch{}return!1}function b3(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function cl(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch{}return t?b3(t):null}catch{return Fe&&Ce.error(`Cannot extract url for event ${dr(e)}`),null}}let Pv;const Dv="FunctionToString",Av=new WeakMap,Mv=()=>({name:Dv,setupOnce(){Pv=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=rf(this),n=Av.has(jt())&&t!==void 0?t:this;return Pv.apply(n,e)}}catch{}},setup(e){Av.set(e,!0)}});gr(Dv,Mv);const Ie=Pe;let xf=0;function jv(){return xf>0}function w3(){xf++,setTimeout(()=>{xf--})}function qi(e,t={},n){if(typeof e!="function")return e;try{const i=e.__sentry_wrapped__;if(i)return i;if(rf(e))return e}catch{return e}const r=function(){const i=Array.prototype.slice.call(arguments);try{n&&typeof n=="function"&&n.apply(this,arguments);const o=i.map(d=>qi(d,t));return e.apply(this,o)}catch(o){throw w3(),P5(d=>{d.addEventProcessor(a=>(t.mechanism&&(af(a,void 0,void 0),so(a,t.mechanism)),a.extra={...a.extra,arguments:i},a)),O5(o)}),o}};try{for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}catch{}Mm(r,e),io(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return e.name}})}catch{}return r}const Hn=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function Iv(e,t){const n=_f(e,t),r={type:t&&t.name,value:S3(t)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function x3(e,t,n,r){const i=jt(),o=i&&i.getOptions().normalizeDepth,d={exception:{values:[{type:Ka(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:T3(t,{isUnhandledRejection:r})}]},extra:{__serialized__:Km(t,o)}};if(n){const a=_f(e,n);a.length&&(d.exception.values[0].stacktrace={frames:a})}return d}function Cf(e,t){return{exception:{values:[Iv(e,t)]}}}function _f(e,t){const n=t.stacktrace||t.stack||"",r=_3(t);try{return e(n,r)}catch{}return[]}const C3=/Minified React error #\d+;/i;function _3(e){if(e){if(typeof e.framesToPop=="number")return e.framesToPop;if(C3.test(e.message))return 1}return 0}function S3(e){const t=e&&e.message;return t?t.error&&typeof t.error.message=="string"?t.error.message:t:"No error message"}function k3(e,t,n,r){const i=n&&n.syntheticException||void 0,o=Sf(e,t,i,r);return so(o),o.level="error",n&&n.event_id&&(o.event_id=n.event_id),Gi(o)}function E3(e,t,n="info",r,i){const o=r&&r.syntheticException||void 0,d=kf(e,t,o,i);return d.level=n,r&&r.event_id&&(d.event_id=r.event_id),Gi(d)}function Sf(e,t,n,r,i){let o;if(qc(t)&&t.error)return Cf(e,t.error);if(Sm(t)||ZS(t)){const d=t;if("stack"in t)o=Cf(e,t);else{const a=d.name||(Sm(d)?"DOMError":"DOMException"),s=d.message?`${a}: ${d.message}`:a;o=kf(e,s,n,r),af(o,s)}return"code"in d&&(o.tags={...o.tags,"DOMException.code":`${d.code}`}),o}return _m(t)?Cf(e,t):Ui(t)||Ka(t)?(o=x3(e,t,n,i),so(o,{synthetic:!0}),o):(o=kf(e,t,n,r),af(o,`${t}`,void 0),so(o,{synthetic:!0}),o)}function kf(e,t,n,r){const i={};if(r&&n){const o=_f(e,n);o.length&&(i.exception={values:[{value:t,stacktrace:{frames:o}}]})}if(Zc(t)){const{__sentry_template_string__:o,__sentry_template_values__:d}=t;return i.logentry={message:o,params:d},i}return i.message=t,i}function T3(e,{isUnhandledRejection:t}){const n=v4(e),r=t?"promise rejection":"exception";return qc(e)?`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``:Ka(e)?`Event \`${O3(e)}\` (type=${e.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function O3(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function P3(e,{metadata:t,tunnel:n,dsn:r}){const i={event_id:e.event_id,sent_at:new Date().toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:ro(r)}},o=D3(e);return Ki(i,[o])}function D3(e){return[{type:"user_report"},e]}class A3 extends n3{constructor(t){const n=Ie.SENTRY_SDK_SOURCE||H4();Ev(t,"browser",["browser"],n),super(t),t.sendClientReports&&Ie.document&&Ie.document.addEventListener("visibilitychange",()=>{Ie.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(t,n){return k3(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",r){return E3(this._options.stackParser,t,n,r,this._options.attachStacktrace)}captureUserFeedback(t){if(!this._isEnabled()){Hn&&Ce.warn("SDK not enabled, will not capture user feedback.");return}const n=P3(t,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(n)}_prepareEvent(t,n,r){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,r)}_flushOutcomes(){const t=this._clearOutcomes();if(t.length===0){Hn&&Ce.log("No outcomes to send");return}if(!this._dsn){Hn&&Ce.log("No dsn provided, will not send outcomes");return}Hn&&Ce.log("Sending outcomes:",t);const n=s5(t,this._options.tunnel&&ro(this._dsn));this._sendEnvelope(n)}}let ho;function M3(){if(ho)return ho;if(ff(Ie.fetch))return ho=Ie.fetch.bind(Ie);const e=Ie.document;let t=Ie.fetch;if(e&&typeof e.createElement=="function")try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n);const r=n.contentWindow;r&&r.fetch&&(t=r.fetch),e.head.removeChild(n)}catch(n){Hn&&Ce.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return ho=t.bind(Ie)}function j3(){ho=void 0}function I3(e,t=M3()){let n=0,r=0;function i(o){const d=o.body.length;n+=d,r++;const a={body:o.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};try{return t(e.url,a).then(s=>(n-=d,r--,{statusCode:s.status,headers:{"x-sentry-rate-limits":s.headers.get("X-Sentry-Rate-Limits"),"retry-after":s.headers.get("Retry-After")}}))}catch(s){return j3(),n-=d,r--,pf(s)}}return Sv(e,i)}const F3=4;function R3(e){function t(n){return new Nt((r,i)=>{const o=new XMLHttpRequest;o.onerror=i,o.onreadystatechange=()=>{o.readyState===F3&&r({statusCode:o.status,headers:{"x-sentry-rate-limits":o.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":o.getResponseHeader("Retry-After")}})},o.open("POST",e.url);for(const d in e.headers)Object.prototype.hasOwnProperty.call(e.headers,d)&&o.setRequestHeader(d,e.headers[d]);o.send(n.body)})}return Sv(e,t)}const fl="?",L3=30,z3=40,B3=50;function Ef(e,t,n,r){const i={filename:e,function:t,in_app:!0};return n!==void 0&&(i.lineno=n),r!==void 0&&(i.colno=r),i}const N3=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,$3=/\((\S*)(?::(\d+))(?::(\d+))\)/,V3=[L3,e=>{const t=N3.exec(e);if(t){if(t[2]&&t[2].indexOf("eval")===0){const o=$3.exec(t[2]);o&&(t[2]=o[1],t[3]=o[2],t[4]=o[3])}const[r,i]=Fv(t[1]||fl,t[2]);return Ef(i,r,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}}],H3=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,W3=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,U3=[B3,e=>{const t=H3.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const o=W3.exec(t[3]);o&&(t[1]=t[1]||"eval",t[3]=o[1],t[4]=o[2],t[5]="")}let r=t[3],i=t[1]||fl;return[i,r]=Fv(i,r),Ef(r,i,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],X3=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Y3=Bm(...[V3,U3,[z3,e=>{const t=X3.exec(e);return t?Ef(t[2],t[1]||fl,+t[3],t[4]?+t[4]:void 0):void 0}]]),Fv=(e,t)=>{const n=e.indexOf("safari-extension")!==-1,r=e.indexOf("safari-web-extension")!==-1;return n||r?[e.indexOf("@")!==-1?e.split("@")[0]:fl,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},hl=1024,Rv="Breadcrumbs",Lv=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:Rv,setupOnce(){},setup(n){t.console&&x4(q3(n)),t.dom&&S4(K3(n,t.dom)),t.xhr&&N4(Z3(n)),t.fetch&&D4(Q3(n)),t.history&&Gm(J3(n)),t.sentry&&n.on&&n.on("beforeSendEvent",G3(n))}}};gr(Rv,Lv);function G3(e){return function(n){jt()===e&&ni({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:dr(n)},{event:n})}}function K3(e,t){return function(r){if(jt()!==e)return;let i,o,d=typeof t=="object"?t.serializeAttribute:void 0,a=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;a&&a>hl&&(Hn&&Ce.warn(`\`dom.maxStringLength\` cannot exceed ${hl}, but a value of ${a} was configured. Sentry will use ${hl} instead.`),a=hl),typeof d=="string"&&(d=[d]);try{const u=r.event,h=ek(u)?u.target:u;i=Dm(h,{keyAttrs:d,maxStringLength:a}),o=l4(h)}catch{i="<unknown>"}if(i.length===0)return;const s={category:`ui.${r.name}`,message:i};o&&(s.data={"ui.component_name":o}),ni(s,{event:r.event,name:r.name,global:r.global})}}function q3(e){return function(n){if(jt()!==e)return;const r={category:"console",data:{arguments:n.args,logger:"console"},level:Z4(n.level),message:Em(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${Em(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;ni(r,{input:n.args,level:n.level})}}function Z3(e){return function(n){if(jt()!==e)return;const{startTimestamp:r,endTimestamp:i}=n,o=n.xhr[ao];if(!r||!i||!o)return;const{method:d,url:a,status_code:s,body:u}=o,h={method:d,url:a,status_code:s},l={xhr:n.xhr,input:u,startTimestamp:r,endTimestamp:i};ni({category:"xhr",data:h,type:"http"},l)}}function Q3(e){return function(n){if(jt()!==e)return;const{startTimestamp:r,endTimestamp:i}=n;if(i&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.error){const o=n.fetchData,d={data:n.error,input:n.args,startTimestamp:r,endTimestamp:i};ni({category:"fetch",data:o,level:"error",type:"http"},d)}else{const o=n.response,d={...n.fetchData,status_code:o&&o.status},a={input:n.args,response:o,startTimestamp:r,endTimestamp:i};ni({category:"fetch",data:d,type:"http"},a)}}}function J3(e){return function(n){if(jt()!==e)return;let r=n.from,i=n.to;const o=gf(Ie.location.href);let d=r?gf(r):void 0;const a=gf(i);(!d||!d.path)&&(d=o),o.protocol===a.protocol&&o.host===a.host&&(i=a.relative),o.protocol===d.protocol&&o.host===d.host&&(r=d.relative),ni({category:"navigation",data:{from:r,to:i}})}}function ek(e){return!!e&&!!e.target}const zv="Dedupe",Bv=()=>{let e;return{name:zv,setupOnce(){},processEvent(t){if(t.type)return t;try{if(tk(t,e))return Hn&&Ce.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}};gr(zv,Bv);function tk(e,t){return t?!!(nk(e,t)||rk(e,t)):!1}function nk(e,t){const n=e.message,r=t.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!$v(e,t)||!Nv(e,t))}function rk(e,t){const n=Vv(t),r=Vv(e);return!(!n||!r||n.type!==r.type||n.value!==r.value||!$v(e,t)||!Nv(e,t))}function Nv(e,t){let n=Hv(e),r=Hv(t);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let i=0;i<r.length;i++){const o=r[i],d=n[i];if(o.filename!==d.filename||o.lineno!==d.lineno||o.colno!==d.colno||o.function!==d.function)return!1}return!0}function $v(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function Vv(e){return e.exception&&e.exception.values&&e.exception.values[0]}function Hv(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch{return}}const Wv="GlobalHandlers",Uv=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:Wv,setupOnce(){Error.stackTraceLimit=50},setup(n){t.onerror&&(ik(n),Yv("onerror")),t.onunhandledrejection&&(sk(n),Yv("onunhandledrejection"))}}};gr(Wv,Uv);function ik(e){j4(t=>{const{stackParser:n,attachStacktrace:r}=Gv();if(jt()!==e||jv())return;const{msg:i,url:o,line:d,column:a,error:s}=t,u=s===void 0&&zn(i)?lk(i,o,d,a):Xv(Sf(n,s||i,void 0,r,!1),o,d,a);u.level="error",iv(u,{originalException:s,mechanism:{handled:!1,type:"onerror"}})})}function sk(e){F4(t=>{const{stackParser:n,attachStacktrace:r}=Gv();if(jt()!==e||jv())return;const i=ok(t),o=Qc(i)?ak(i):Sf(n,i,void 0,r,!0);o.level="error",iv(o,{originalException:i,mechanism:{handled:!1,type:"onunhandledrejection"}})})}function ok(e){if(Qc(e))return e;const t=e;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch{}return e}function ak(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function lk(e,t,n,r){const i=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let o=qc(e)?e.message:e,d="Error";const a=o.match(i);return a&&(d=a[1],o=a[2]),Xv({exception:{values:[{type:d,value:o}]}},t,n,r)}function Xv(e,t,n,r){const i=e.exception=e.exception||{},o=i.values=i.values||[],d=o[0]=o[0]||{},a=d.stacktrace=d.stacktrace||{},s=a.frames=a.frames||[],u=isNaN(parseInt(r,10))?void 0:r,h=isNaN(parseInt(n,10))?void 0:n,l=zn(t)&&t.length>0?t:a4();return s.length===0&&s.push({colno:u,filename:l,function:"?",in_app:!0,lineno:h}),e}function Yv(e){Hn&&Ce.log(`Global Handler attached: ${e}`)}function Gv(){const e=jt();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const Kv="HttpContext",qv=()=>({name:Kv,setupOnce(){},preprocessEvent(e){if(!Ie.navigator&&!Ie.location&&!Ie.document)return;const t=e.request&&e.request.url||Ie.location&&Ie.location.href,{referrer:n}=Ie.document||{},{userAgent:r}=Ie.navigator||{},i={...e.request&&e.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},o={...e.request,...t&&{url:t},headers:i};e.request=o}});gr(Kv,qv);const uk="cause",ck=5,Zv="LinkedErrors",Qv=(e={})=>{const t=e.limit||ck,n=e.key||uk;return{name:Zv,setupOnce(){},preprocessEvent(r,i,o){const d=o.getOptions();r4(Iv,d.stackParser,d.maxValueLength,n,t,r,i)}}};gr(Zv,Qv);const fk=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Jv="TryCatch",e0=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:Jv,setupOnce(){t.setTimeout&&ut(Ie,"setTimeout",t0),t.setInterval&&ut(Ie,"setInterval",t0),t.requestAnimationFrame&&ut(Ie,"requestAnimationFrame",hk),t.XMLHttpRequest&&"XMLHttpRequest"in Ie&&ut(XMLHttpRequest.prototype,"send",dk);const n=t.eventTarget;n&&(Array.isArray(n)?n:fk).forEach(pk)}}};gr(Jv,e0);function t0(e){return function(...t){const n=t[0];return t[0]=qi(n,{mechanism:{data:{function:hr(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function hk(e){return function(t){return e.apply(this,[qi(t,{mechanism:{data:{function:"requestAnimationFrame",handler:hr(e)},handled:!1,type:"instrument"}})])}}function dk(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(i=>{i in n&&typeof n[i]=="function"&&ut(n,i,function(o){const d={mechanism:{data:{function:i,handler:hr(o)},handled:!1,type:"instrument"}},a=rf(o);return a&&(d.mechanism.data.handler=hr(a)),qi(o,d)})}),e.apply(this,t)}}function pk(e){const t=Ie,n=t[e]&&t[e].prototype;!n||!n.hasOwnProperty||!n.hasOwnProperty("addEventListener")||(ut(n,"addEventListener",function(r){return function(i,o,d){try{typeof o.handleEvent=="function"&&(o.handleEvent=qi(o.handleEvent,{mechanism:{data:{function:"handleEvent",handler:hr(o),target:e},handled:!1,type:"instrument"}}))}catch{}return r.apply(this,[i,qi(o,{mechanism:{data:{function:"addEventListener",handler:hr(o),target:e},handled:!1,type:"instrument"}}),d])}}),ut(n,"removeEventListener",function(r){return function(i,o,d){const a=o;try{const s=a&&a.__sentry_wrapped__;s&&r.call(this,i,s,d)}catch{}return r.call(this,i,a,d)}}))}const gk=[Ov(),Mv(),e0(),Lv(),Uv(),Qv(),Bv(),qv()];function mk(e){return[...gk]}function vk(e={}){e.defaultIntegrations===void 0&&(e.defaultIntegrations=mk()),e.release===void 0&&(typeof __SENTRY_RELEASE__=="string"&&(e.release=__SENTRY_RELEASE__),Ie.SENTRY_RELEASE&&Ie.SENTRY_RELEASE.id&&(e.release=Ie.SENTRY_RELEASE.id)),e.autoSessionTracking===void 0&&(e.autoSessionTracking=!0),e.sendClientReports===void 0&&(e.sendClientReports=!0);const t={...e,stackParser:b4(e.stackParser||Y3),integrations:q5(e),transport:e.transport||(Xm()?I3:R3)};s3(A3,t),e.autoSessionTracking&&yk()}function yk(){if(typeof Ie.document>"u"){Hn&&Ce.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}sv({ignoreDuration:!0}),lv(),Gm(({from:e,to:t})=>{e!==void 0&&e!==t&&(sv({ignoreDuration:!0}),lv())})}function bk(e){const t={...e};Ev(t,"react"),vk(t)}var Tf=(e=>(e.INLINE="inline",e.OVERLAY="overlay",e))(Tf||{}),n0=(e=>(e.TOP="top",e.BOTTOM="bottom",e.HIDDEN="",e))(n0||{});const wk=[{name:"circle",type:"Circle"},{name:"square",type:"Rect",options:{lockUniScaling:!1}},{name:"triangle",type:"Triangle"},{name:"ellipse",type:"Ellipse",options:{lockUniScaling:!1}},{name:"Arrow #1",type:"Path",options:{path:"M 294.9 16.4 l 15.7 42.2 c -171.4 70.3 -294 242.3 -289.1 437.4 l 14.7 -1 c 9.1 -0.6 18.1 -1.2 27.1 -1.9 l 14.7 -1 c -4.3 -170.1 102.5 -320 252 -381.3 l 15.7 42.2 c 34.7 -40.5 83.1 -76.6 144.8 -99.8 c -58.1 -26.2 -124.9 -39.6 -195.6 -36.8 z"}},{name:"Arrow #2",type:"Path",options:{path:"M 16 248.4 v 14.9 h 447.5 l -93.2 82.5 l 11.9 10.5 l 113.8 -100.2 l -113.6 -100.4 l -11.8 10.5 l 92.9 82.2 z"}},{name:"Arrow #3",type:"Path",options:{path:"M 496 256 l -118.6 -66 v 40.8 h -361.4 v 50.4 h 361.4 v 40.8 l 118.6 -66 z"}},{name:"Line",type:"Path",options:{path:"M 16 256 h 480",strokeWidth:10,stroke:"#000",padding:10}},{name:"Star",type:"Path",options:{path:"M 256 406.3 l 148.3 78 l -28.3 -165.2 l 120 -117 l -165.8 -24.1 l -74.2 -150.3 l -74.2 150.3 l -165.8 24.1 l 120 117 l -28.3 165.2 z"}},{name:"Polygon",type:"Path",options:{path:"M 256 19.6 l 156.6 57.1 l 83.4 144.3 l -28.9 164.2 l -127.7 107.2 h -166.8 l -127.7 -107.2 l -28.9 -164.2 l 83.4 -144.3 z"}},{name:"Badge",type:"Path",options:{path:"M 257.3 16.2 s -148 58.2 -204.4 81.4 c 0 75.7 -16.8 303.5 204.4 398.2 c 218.7 -94.6 201.9 -322.4 201.9 -398.2 c -62.1 -23.6 -201.9 -81.4 -201.9 -81.4 z"}}],xk=["afro-1","afro","agent","alien-1","alien","angel","angry-1","angry-2","angry-3","angry-4","angry-5","angry","arguing","arrogant","asian-1","asian","avatar","baby-1","baby-2","baby","bully","burglar","businessman","cheeky-1","cheeky","clown","confused-1","confused-2","confused-3","confused","creepy","crying-1","crying-2","crying-3","crying","dazed-1","dazed-2","dazed-3","dazed","dead-1","dead-2","dead-3","dead-4","dead-5","dead-6","dead","desperate-1","desperate","detective","dissapointment","doctor","drunk","dumb","emo-1","emo-2","emo","emoticon","evil","faint-1","faint","flirt-1","flirt-2","flirt","flirty","gangster","geek-1","geek","gentleman-1","gentleman-2","gentleman-3","gentleman-4","gentleman","ginger","girl-1","girl","goofy-1","goofy-2","goofy-3","goofy-4","goofy","grubby-1","grubby","happy-1","happy-10","happy-11","happy-12","happy-13","happy-14","happy-15","happy-16","happy-2","happy-3","happy-4","happy-5","happy-6","happy-7","happy-8","happy-9","happy","harry-potter","heisenberg","hipster-1","hipster-2","hipster","in-love-1","in-love-2","in-love-3","in-love-4","in-love-5","in-love-6","in-love","japan","jew","joyful-1","joyful-2","joyful","kiss-1","kiss-2","kiss-3","kiss-4","kiss","laughing-1","laughing-2","laughing-3","laughing","listening","love","manly","miserly-1","miserly","nerd-1","nerd-2","nerd-3","nerd-4","nerd","ninja","pirate-1","pirate-2","pirate","punk-1","punk-2","punk","rapper","relieved","rich-1","rich-2","rich","rockstar","sad-1","sad-2","sad-3","sad-4","sad-5","sad-6","sad","scared-1","scared-2","scared-3","scared","sceptic-1","sceptic-2","sceptic-3","sceptic-4","sceptic-5","sceptic-6","sceptic-7","sceptic","secret","shocked-1","shocked-2","shocked-3","shocked","sick-1","sick-2","sick-3","sick-4","sick","silent","skeleton","smile","smiling-1","smiling","smoked","smug-1","smug-2","smug-3","smug-4","smug-5","smug-6","smug","sporty","stunned","superhero-1","superhero-2","superhero-3","superhero-4","superhero","surprised-1","surprised","thinking","tired-1","tired-2","tired-3","tired","tough-1","tough","trendy","vampire-1","vampire","wink-1","wink-2","wink","winking-1","winking","yawning-1","yawning-2","yawning-3","yawning","yelling","zombie"];function se(e,t){return{...t,message:e}}const Ck=[{name:"emoticons",list:xk,type:"svg",thumbnailUrl:"images/stickers/categories/emoticon.svg"},{name:"doodles",items:100,type:"svg",thumbnailUrl:"images/stickers/categories/doodles.svg"},{name:"landmarks",items:100,type:"svg",thumbnailUrl:"images/stickers/categories/landmark.svg",invertPreview:!0},{name:"bubbles",items:104,type:"png",thumbnailUrl:"images/stickers/categories/speech-bubble.svg"},{name:"transportation",items:22,type:"svg",thumbnailUrl:"images/stickers/categories/transportation.svg",invertPreview:!0},{name:"beach",items:22,type:"svg",thumbnailUrl:"images/stickers/categories/beach.svg",invertPreview:!0}],_k={emoticons:se("Emoticons"),doodles:se("Doodles"),landmarks:se("Landmarks"),bubbles:se("Bubbles"),transportation:se("Transportation"),beach:se("Beach")},Of={fill:"#1565C0",opacity:1,backgroundColor:null,strokeWidth:.05,stroke:"#000"},Sk=["PencilBrush","EraserBrush","SprayBrush","CircleBrush","DiamondBrush","VLineBrush","HLineBrush","SquareBrush"],r0=[1,8,15,20,25];var dl=(e=>(e.DARK="dark",e.LIGHT="light",e))(dl||{});const Pf=[{name:dl.LIGHT,colors:{"--be-foreground-base":"0 0 0","--be-primary-light":"191 219 254","--be-primary":"59 130 246","--be-primary-dark":"37 99 235","--be-on-primary":"255 255 255","--be-danger":"179 38 30","--be-on-danger":"255 255 255","--be-background":"255 255 255","--be-background-alt":"250 250 250","--be-paper":"255 255 255","--be-disabled-bg-opacity":"12%","--be-disabled-fg-opacity":"26%","--be-hover-opacity":"4%","--be-focus-opacity":"12%","--be-selected-opacity":"8%","--be-text-main-opacity":"87%","--be-text-muted-opacity":"60%","--be-divider-opacity":"12%"}},{name:dl.DARK,isDark:!0,colors:{"--be-foreground-base":"255 255 255","--be-primary-light":"239 246 255","--be-primary":"191 219 254","--be-primary-dark":"147 197 253","--be-on-primary":"56 30 114","--be-danger":"242 184 181","--be-on-danger":"96 20 16","--be-background":"20 21 23","--be-background-alt":"26 27 30","--be-paper":"44 46 51","--be-disabled-bg-opacity":"12%","--be-disabled-fg-opacity":"30%","--be-hover-opacity":"8%","--be-focus-opacity":"12%","--be-selected-opacity":"16%","--be-text-main-opacity":"100%","--be-text-muted-opacity":"70%","--be-divider-opacity":"12%"}}];var De=(e=>(e.FILTER="filter",e.RESIZE="resize",e.CROP="crop",e.DRAW="draw",e.TEXT="text",e.SHAPES="shapes",e.STICKERS="stickers",e.FRAME="frame",e.CORNERS="corners",e.MERGE="merge",e))(De||{});function i0(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=i0(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function le(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=i0(e))&&(r&&(r+=" "),r+=t);return r}const kk=E.forwardRef((e,t)=>{const{attr:n,size:r,title:i,className:o,color:d,style:a,children:s,viewBox:u,width:h,height:l,...f}=e;return x.jsxs("svg",{"aria-hidden":!i,focusable:!1,xmlns:"http://www.w3.org/2000/svg",viewBox:u||"0 0 24 24",...n,...f,className:le("svg-icon",o,Ek(r)),style:{color:d,...a},ref:t,height:l||"1em",width:h||"1em",children:[i&&x.jsx("title",{children:i}),s]})});function Ek(e){switch(e){case"2xs":return"icon-2xs";case"xs":return"icon-xs";case"sm":return"icon-sm";case"md":return"icon-md";case"lg":return"icon-lg";case"xl":return"icon-xl";default:return e}}function ve(e,t="",n){const r=(i,o)=>x.jsx(kk,{"data-testid":`${t}Icon`,ref:o,viewBox:n,...i,size:i.size||"md",children:e});return ce.memo(ce.forwardRef(r))}function Tk(e,t=""){const n=s0(e);return ve(n,t)}function s0(e){return(e==null?void 0:e.map)&&e.map((t,n)=>ce.createElement(t.tag,{key:n,...t.attr},s0(t.child)))}const o0=ve(x.jsx("path",{d:"M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z"}),"TuneOutlined"),Ok=ve(x.jsx("path",{d:"M21 15h2v2h-2v-2zm0-4h2v2h-2v-2zm2 8h-2v2c1 0 2-1 2-2zM13 3h2v2h-2V3zm8 4h2v2h-2V7zm0-4v2h2c0-1-1-2-2-2zM1 7h2v2H1V7zm16-4h2v2h-2V3zm0 16h2v2h-2v-2zM3 3C2 3 1 4 1 5h2V3zm6 0h2v2H9V3zM5 3h2v2H5V3zm-4 8v8c0 1.1.9 2 2 2h12V11H1zm2 8 2.5-3.21 1.79 2.15 2.5-3.22L13 19H3z"}),"PhotoSizeSelectLargeOutlined"),Pk=ve(x.jsx("path",{d:"M17 15h2V7c0-1.1-.9-2-2-2H9v2h8v8zM7 17V1H5v4H1v2h4v10c0 1.1.9 2 2 2h10v4h2v-4h4v-2H7z"}),"CropOutlined"),Dk=ve(x.jsx("path",{d:"M2.5 4v3h5v12h3V7h5V4h-13zm19 5h-9v3h3v7h3v-7h3V9z"}),"TextFieldsOutlined"),Ak=ve(x.jsx("path",{d:"M10.5 4.5c.28 0 .5.22.5.5v2h6v6h2c.28 0 .5.22.5.5s-.22.5-.5.5h-2v6h-2.12c-.68-1.75-2.39-3-4.38-3s-3.7 1.25-4.38 3H4v-2.12c1.75-.68 3-2.39 3-4.38 0-1.99-1.24-3.7-2.99-4.38L4 7h6V5c0-.28.22-.5.5-.5m0-2C9.12 2.5 8 3.62 8 5H4c-1.1 0-1.99.9-1.99 2v3.8h.29c1.49 0 2.7 1.21 2.7 2.7s-1.21 2.7-2.7 2.7H2V20c0 1.1.9 2 2 2h3.8v-.3c0-1.49 1.21-2.7 2.7-2.7s2.7 1.21 2.7 2.7v.3H17c1.1 0 2-.9 2-2v-4c1.38 0 2.5-1.12 2.5-2.5S20.38 11 19 11V7c0-1.1-.9-2-2-2h-4c0-1.38-1.12-2.5-2.5-2.5z"}),"ExtensionOutlined"),Mk=ve(x.jsx("path",{d:"M10.25 13c0 .69-.56 1.25-1.25 1.25S7.75 13.69 7.75 13s.56-1.25 1.25-1.25 1.25.56 1.25 1.25zM15 11.75c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25-.56-1.25-1.25-1.25zm7 .25c0 5.52-4.48 10-10 10S2 17.52 2 12 6.48 2 12 2s10 4.48 10 10zM10.66 4.12C12.06 6.44 14.6 8 17.5 8c.46 0 .91-.05 1.34-.12C17.44 5.56 14.9 4 12 4c-.46 0-.91.05-1.34.12zM4.42 9.47c1.71-.97 3.03-2.55 3.66-4.44C6.37 6 5.05 7.58 4.42 9.47zM20 12c0-.78-.12-1.53-.33-2.24-.7.15-1.42.24-2.17.24-3.13 0-5.92-1.44-7.76-3.69C8.69 8.87 6.6 10.88 4 11.86c.01.04 0 .09 0 .14 0 4.41 3.59 8 8 8s8-3.59 8-8z"}),"FaceOutlined"),jk=ve(x.jsx("path",{d:"M20 4h-4l-4-4-4 4H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H4V6h4.52l3.52-3.5L15.52 6H20v14zM6 18h12V8H6v10zm2-8h8v6H8v-6z"}),"FilterFramesOutlined"),Ik=ve(x.jsx("path",{d:"M6.41 21 5 19.59l4.83-4.83c.75-.75 1.17-1.77 1.17-2.83v-5.1L9.41 8.41 8 7l4-4 4 4-1.41 1.41L13 6.83v5.1c0 1.06.42 2.08 1.17 2.83L19 19.59 17.59 21 12 15.41 6.41 21z"}),"MergeOutlined"),Fk=ve(x.jsx("path",{d:"M19 19h2v2h-2v-2zm0-2h2v-2h-2v2zM3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm0-4h2V3H3v2zm4 0h2V3H7v2zm8 16h2v-2h-2v2zm-4 0h2v-2h-2v2zm4 0h2v-2h-2v2zm-8 0h2v-2H7v2zm-4 0h2v-2H3v2zM21 8c0-2.76-2.24-5-5-5h-5v2h5c1.65 0 3 1.35 3 3v5h2V8z"}),"RoundedCornerOutlined"),a0=ve(x.jsx("path",{d:"M20 4v12H8V4h12m0-2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-8.5 9.67 1.69 2.26 2.48-3.1L19 15H9zM2 6v14c0 1.1.9 2 2 2h14v-2H4V6H2z"}),"PhotoLibraryOutlined"),l0=ve(x.jsx("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.25 2.52.77-1.28-3.52-2.09V8z"}),"HistoryOutlined"),Rk=ve([x.jsx("path",{d:"m2.53 19.65 1.34.56v-9.03l-2.43 5.86c-.41 1.02.08 2.19 1.09 2.61zm19.5-3.7L17.07 3.98c-.31-.75-1.04-1.21-1.81-1.23-.26 0-.53.04-.79.15L7.1 5.95c-.75.31-1.21 1.03-1.23 1.8-.01.27.04.54.15.8l4.96 11.97c.31.76 1.05 1.22 1.83 1.23.26 0 .52-.05.77-.15l7.36-3.05c1.02-.42 1.51-1.59 1.09-2.6zm-9.2 3.8L7.87 7.79l7.35-3.04h.01l4.95 11.95-7.35 3.05z"},"0"),x.jsx("circle",{cx:"11",cy:"9",r:"1"},"1"),x.jsx("path",{d:"M5.88 19.75c0 1.1.9 2 2 2h1.45l-3.45-8.34v6.34z"},"2")],"StyleOutlined"),Lk=ve(x.jsx("path",{d:"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"}),"DeleteOutlined"),zk=ve(x.jsx("path",{d:"M18.85,10.39l1.06-1.06c0.78-0.78,0.78-2.05,0-2.83L18.5,5.09c-0.78-0.78-2.05-0.78-2.83,0l-1.06,1.06L18.85,10.39z M14.61,11.81L7.41,19H6v-1.41l7.19-7.19L14.61,11.81z M13.19,7.56L4,16.76V21h4.24l9.19-9.19L13.19,7.56L13.19,7.56z M19,17.5 c0,2.19-2.54,3.5-5,3.5c-0.55,0-1-0.45-1-1s0.45-1,1-1c1.54,0,3-0.73,3-1.5c0-0.47-0.48-0.87-1.23-1.2l1.48-1.48 C18.32,15.45,19,16.29,19,17.5z M4.58,13.35C3.61,12.79,3,12.06,3,11c0-1.8,1.89-2.63,3.56-3.36C7.59,7.18,9,6.56,9,6 c0-0.41-0.78-1-2-1C5.74,5,5.2,5.61,5.17,5.64C4.82,6.05,4.19,6.1,3.77,5.76C3.36,5.42,3.28,4.81,3.62,4.38C3.73,4.24,4.76,3,7,3 c2.24,0,4,1.32,4,3c0,1.87-1.93,2.72-3.64,3.47C6.42,9.88,5,10.5,5,11c0,0.31,0.43,0.6,1.07,0.86L4.58,13.35z"}),"Draw"),Bk=ve(x.jsx("path",{d:"m12 5.69 5 4.5V18h-2v-6H9v6H7v-7.81l5-4.5M12 3 2 12h3v8h6v-6h2v6h6v-8h3L12 3z"}),"HomeOutlined"),mr={[De.FILTER]:{name:se("Applied Filters"),icon:o0},[De.RESIZE]:{name:se("Resized Image"),icon:Ok},[De.CROP]:{name:se("Cropped Image"),icon:Pk},[De.DRAW]:{name:se("Added Drawing"),icon:zk},[De.TEXT]:{name:se("Added Text"),icon:Dk},[De.SHAPES]:{name:se("Added Shape"),icon:Ak},[De.STICKERS]:{name:se("Added Sticker"),icon:Mk},[De.FRAME]:{name:se("Added Frame"),icon:jk},[De.MERGE]:{name:se("Merged Objects"),icon:Ik},[De.CORNERS]:{name:se("Rounded Corner"),icon:Fk},bgImage:{name:se("Replaced Background Image"),icon:a0},overlayImage:{name:se("Added Image"),icon:a0},initial:{name:se("Initial"),icon:Bk},loadedState:{name:se("Loaded State"),icon:l0},objectStyle:{name:se("Changed Style"),icon:Rk},deletedObject:{name:se("Deleted object"),icon:Lk}},Nk=Object.values(De).map(e=>({name:e,icon:mr[e].icon,action:e===De.MERGE?t=>{t.tools.merge.apply()}:e})),$k={filter:se("filter"),resize:se("resize"),crop:se("crop"),draw:se("draw"),text:se("text"),shapes:se("shapes"),stickers:se("stickers"),frame:se("frame"),corners:se("corners"),merge:se("merge")},Vk=ve(x.jsx("path",{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zm-1-4-1.41-1.41L13 12.17V4h-2v8.17L8.41 9.59 7 11l5 5 5-5z"}),"FileDownloadOutlined"),Hk={name:"pixie",version:"3.0.5",main:"dist/pixie.umd.js",module:"dist/pixie.es.js",types:"dist/types/src/pixie.d.ts",private:!0,exports:{".":{import:"./dist/pixie.es.js",require:"./dist/pixie.umd.js"}},files:["dist"],scripts:{dev:"vite --host",build:"vite build && npm run build-umd && npm run types && npm run build-cc",types:"tsc --skipLibCheck --emitDeclarationOnly --noEmit false --declarationMap false","build-umd":"vite build --config scripts/vite-umd.config.ts","build-cc":"./scripts/build-cc.sh",serve:"vite preview",extract:"node ./scripts/extract-translations.js"},dependencies:{"@floating-ui/react-dom":"^2.0.2","@internationalized/date":"^3.5.0","@internationalized/number":"^3.3.0","@paypal/paypal-js":"^7.0.3","@react-aria/focus":"^3.14.3","@react-aria/interactions":"^3.19.1","@react-aria/overlays":"^3.18.1","@react-aria/ssr":"^3.8.0","@react-aria/utils":"^3.21.1","@react-stately/color":"^3.4.4","@react-stately/utils":"^3.8.0","@sentry/react":"^7.76.0","@sentry/tracing":"^7.76.0","@stripe/react-stripe-js":"^2.3.1","@stripe/stripe-js":"^2.1.10","@tailwindcss/container-queries":"^0.1.0","@tanstack/react-query":"^5.0.5","@tanstack/react-query-devtools":"^5.4.2","@tanstack/react-virtual":"^3.0.0-beta.68","@tiptap/extension-code-block-lowlight":"^2.1.12","@tiptap/extension-color":"^2.1.12","@tiptap/extension-image":"^2.1.12","@tiptap/extension-link":"^2.1.12","@tiptap/extension-subscript":"^2.1.12","@tiptap/extension-superscript":"^2.1.12","@tiptap/extension-text-align":"^2.1.12","@tiptap/extension-text-style":"^2.1.12","@tiptap/extension-underline":"^2.1.12","@tiptap/react":"^2.1.12","@tiptap/starter-kit":"^2.1.12","@types/google.visualization":"^0.0.71","@use-gesture/react":"^10.2.20","@vitejs/plugin-react-swc":"^3.4.0","ace-builds":"^1.31.0",axios:"^1.6.0","axios-retry":"^3.8.1","chart.js":"^4.4.0",clsx:"^2.0.0",color:"^4.2.3",dashjs:"^4.7.2","deep-object-diff":"^1.1.7",deepmerge:"^4.2.2","dot-object":"^2.1.4",fabric:"^5.3.0","file-saver":"^2.0.5","framer-motion":"^10.16.4",fscreen:"^1.2.0","get-video-id":"^3.6.5","highlight.js":"^11.9.0","hls.js":"^1.4.12",immer:"^10.0.3","just-debounce-it":"^3.2.0","linkify-string":"^4.0.2",lowlight:"^3.1.0","media-icons":"^0.10.0","mime-match":"^1.0.2","nano-memoize":"^1.3.0",nanoid:"^5.0.2","number-precision":"^1.6.0","performant-array-to-tree":"^1.11.0","prosemirror-state":"^1.4.1",react:">=18.2.0","react-ace":"^10.1.0","react-colorful":"^5.5.1","react-dom":">=18.2.0","react-hook-form":"^7.47.0","react-merge-refs":"^2.1.1","react-router-dom":"^6.17.0","react-textarea-autosize":"^8.5.3","react-use-clipboard":"^1.0.7","react-use-cookie":"^1.4.0",slugify:"^1.6.5","style-inject":"^0.3.0","swagger-ui-react":"^4.15","tus-js-client":"^3.0.1","url-regex":"^5.0.0","use-debounce":"^9.0.4","use-immer":"^0.9.0",zustand:"^4.4.4"},peerDependencies:{react:">=18.2.0","react-dom":">=18.2.0"},devDependencies:{"@prettier/plugin-php":"^0.21.0","@rollup/plugin-replace":"^5.0","@tailwindcss/typography":"^0.5.10","@types/color":"^3.0.6","@types/dot-object":"^2.1.4","@types/fabric":"^4.5.12","@types/file-saver":"^2.0.7","@types/fscreen":"^1.0.3","@types/react":"^18","@types/react-dom":"^18","@types/react-recaptcha-v3":"^1.1.3","@types/swagger-ui-react":"^4.18.2","@typescript-eslint/eslint-plugin":"^6.9.0","@typescript-eslint/parser":"^6.9.0","@vitejs/plugin-react":"^4.3.0",autoprefixer:"^10.4.16","babel-loader":"^9.1.3",cssnano:"^7.0.2",eslint:"^8.52.0","eslint-config-prettier":"^9.0.0","eslint-plugin-import":"^2.29.0","eslint-plugin-jsx-a11y":"^6.6.1","eslint-plugin-react":"^7.33.2","eslint-plugin-react-hooks":"^4.6.0",express:"^4.18.2","laravel-vite-plugin":"^0.8.1",postcss:"^8.4.31",prettier:"^3.0.3","prettier-plugin-blade":"^1.6.14","prettier-plugin-tailwindcss":"^0.5.6",tailwindcss:"^3.3",typescript:"^5.2.2","utility-types":"^3.10.0",vite:"^4.5.0","vite-tsconfig-paths":"^4.2.1"}}.version,u0={selector:"pixie-editor",textureSize:4096,activeLanguage:"en",ui:{visible:!0,mode:Tf.INLINE,forceOverlayModeOnMobile:!0,activeTheme:dl.LIGHT,themes:Pf,allowEditorClose:!0,menubar:{items:[{type:"undoWidget",align:"left"},{type:"zoomWidget",align:"center",desktopOnly:!0},{type:"button",icon:l0,align:"right",desktopOnly:!0,action:e=>{e.togglePanel("history")}},{type:"button",icon:Vk,label:se("Done"),align:"right",action:e=>{var t;(t=e.state.config.ui)!=null&&t.showExportPanel?e.state.togglePanel("export",!0):e.tools.export.save()}}]},nav:{position:n0.BOTTOM,items:[...Nk]},openImageDialog:{show:!0,sampleImages:[{url:"images/samples/sample1.jpg",thumbnail:"images/samples/sample1_thumbnail.jpg"},{url:"images/samples/sample2.jpg",thumbnail:"images/samples/sample2_thumbnail.jpg"},{url:"images/samples/sample3.jpg",thumbnail:"images/samples/sample3_thumbnail.jpg"}]},colorPresets:{items:["rgb(0,0,0)","rgb(255, 255, 255)","rgb(242, 38, 19)","rgb(249, 105, 14)","rgb(253, 227, 167)","rgb(4, 147, 114)","rgb(30, 139, 195)","rgb(142, 68, 173)"]}},objectDefaults:{global:{...Of},sticker:{fill:void 0},text:{textAlign:"initial",underline:!1,linethrough:!1,fontStyle:"normal",fontFamily:"Times New Roman",fontWeight:"normal",stroke:void 0,fontSize:40}},tools:{filter:{items:["grayscale","blackWhite","sharpen","invert","vintage","polaroid","kodachrome","technicolor","brownie","sepia","removeColor","brightness","gamma","noise","pixelate","blur","emboss","blendColor"]},zoom:{allowUserZoom:!0,fitImageToScreen:!0},crop:{allowCustomRatio:!0,defaultRatio:"1:1",presets:[{ratio:null,name:"Custom"},{ratio:"1:1",name:"Square"},{ratio:"4:3"},{ratio:"16:9"},{ratio:"5:3"},{ratio:"5:4"},{ratio:"6:4"},{ratio:"7:5"},{ratio:"10:8"}]},text:{defaultText:"Double click to edit",controlsPadding:6,items:[{family:"Roboto",src:"fonts/open-sans-v27-latin-ext_latin-regular.woff2"},{family:"Fuzzy Bubbles",src:"fonts/fuzzy-bubbles-v3-latin-700.woff2",descriptors:{weight:"700"}},{family:"Aleo Bold",src:"fonts/aleo-v4-latin-ext_latin-700.woff2",descriptors:{weight:"700"}},{family:"Amatic SC",src:"fonts/amatic-sc-v16-latin-ext_latin-regular.woff2"},{family:"Corinthia Bold",src:"fonts/corinthia-v7-latin-ext_latin-700.woff2"},{family:"Bungee Inline",src:"fonts/bungee-inline-v6-latin-ext_latin-regular.woff2"},{family:"Robot Slab Bold",src:"fonts/roboto-slab-v16-latin-ext_latin-500.woff2"},{family:"Carter One",src:"fonts/carter-one-v12-latin-regular.woff2"},{family:"Cody Star",src:"fonts/codystar-v10-latin-ext_latin-regular.woff2"},{family:"Fira Sans",src:"fonts/fira-sans-v11-latin-ext_latin_cyrillic-regular.woff2"},{family:"Krona One",src:"fonts/krona-one-v9-latin-ext_latin-regular.woff2"},{family:"Kumar One Outline",src:"fonts/kumar-one-outline-v8-latin-ext_latin-regular.woff2"},{family:"Lobster Two",src:"fonts/lobster-two-v13-latin-regular.woff2"},{family:"Molle Italic",src:"fonts/molle-v11-latin-ext_latin-italic.woff2"},{family:"Monoton",src:"fonts/monoton-v10-latin-regular.woff2"},{family:"Nixie One",src:"fonts/nixie-one-v11-latin-regular.woff2"},{family:"Permanent Marker",src:"fonts/permanent-marker-v10-latin-regular.woff2"},{family:"Sancreek",src:"fonts/sancreek-v13-latin-ext_latin-regular.woff2"},{family:"Stint Ultra Expanded",src:"fonts/stint-ultra-expanded-v10-latin-regular.woff2"},{family:"VT323",src:"fonts/vt323-v12-latin-ext_latin-regular.woff2"},{family:"Trash Hand",src:"fonts/TrashHand.ttf"}]},draw:{brushSizes:r0,brushTypes:Sk},shapes:{items:wk.slice()},stickers:{items:Ck},import:{validImgExtensions:["png","jpg","jpeg","svg","gif"],fitOverlayToScreen:!0,openDroppedImageAsBackground:!1},export:{defaultFormat:"png",defaultQuality:.8,defaultName:"image"},frame:{items:[{name:"basic",mode:"basic",size:{min:1,max:35,default:10}},{name:"pine",mode:"stretch",size:{min:1,max:35,default:15}},{name:"oak",mode:"stretch",size:{min:1,max:35,default:15}},{name:"rainbow",mode:"stretch",size:{min:1,max:35,default:15}},{name:"grunge1",display_name:"grunge #1",mode:"stretch",size:{min:1,max:35,default:15}},{name:"grunge2",display_name:"grunge #2",mode:"stretch",size:{min:1,max:35,default:20}},{name:"ebony",mode:"stretch",size:{min:1,max:35,default:15}},{name:"art1",display_name:"Art #1",mode:"repeat",size:{min:10,max:70,default:55}},{name:"art2",display_name:"Art #2",mode:"repeat",size:{min:10,max:70,default:55}}]}}},c0=e=>{let t;const n=new Set,r=(h,l)=>{const f=typeof h=="function"?h(t):h;if(!Object.is(f,t)){const c=t;t=l??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(p=>p(t,c))}},i=()=>t,s={setState:r,getState:i,getInitialState:()=>u,subscribe:h=>(n.add(h),()=>n.delete(h)),destroy:()=>{n.clear()}},u=t=e(r,i,s);return s},Wk=e=>e?c0(e):c0;var f0={exports:{}},h0={},d0={exports:{}},p0={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zi=E;function Uk(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Xk=typeof Object.is=="function"?Object.is:Uk,Yk=Zi.useState,Gk=Zi.useEffect,Kk=Zi.useLayoutEffect,qk=Zi.useDebugValue;function Zk(e,t){var n=t(),r=Yk({inst:{value:n,getSnapshot:t}}),i=r[0].inst,o=r[1];return Kk(function(){i.value=n,i.getSnapshot=t,Df(i)&&o({inst:i})},[e,n,t]),Gk(function(){return Df(i)&&o({inst:i}),e(function(){Df(i)&&o({inst:i})})},[e]),qk(n),n}function Df(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Xk(e,n)}catch{return!0}}function Qk(e,t){return t()}var Jk=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Qk:Zk;p0.useSyncExternalStore=Zi.useSyncExternalStore!==void 0?Zi.useSyncExternalStore:Jk,d0.exports=p0;var eE=d0.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pl=E,tE=eE;function nE(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var rE=typeof Object.is=="function"?Object.is:nE,iE=tE.useSyncExternalStore,sE=pl.useRef,oE=pl.useEffect,aE=pl.useMemo,lE=pl.useDebugValue;h0.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var o=sE(null);if(o.current===null){var d={hasValue:!1,value:null};o.current=d}else d=o.current;o=aE(function(){function s(c){if(!u){if(u=!0,h=c,c=r(c),i!==void 0&&d.hasValue){var p=d.value;if(i(p,c))return l=p}return l=c}if(p=l,rE(h,c))return p;var m=r(c);return i!==void 0&&i(p,m)?p:(h=c,l=m)}var u=!1,h,l,f=n===void 0?null:n;return[function(){return s(t())},f===null?void 0:function(){return s(f())}]},[t,n,r,i]);var a=iE(e,o[0],o[1]);return oE(function(){d.hasValue=!0,d.value=a},[a]),lE(a),a},f0.exports=h0;var uE=f0.exports;const cE=st(uE),{useDebugValue:fE}=ce,{useSyncExternalStoreWithSelector:hE}=cE;let V7=!1;const dE=e=>e;function pE(e,t=dE,n){const r=hE(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return fE(r),r}const g0=e=>{const t=typeof e=="function"?Wk(e):e,n=(r,i)=>pE(t,r,i);return Object.assign(n,t),n},Af=e=>e?g0(e):g0,gE=e=>(t,n,r)=>{const i=r.subscribe;return r.subscribe=(d,a,s)=>{let u=d;if(a){const h=(s==null?void 0:s.equalityFn)||Object.is;let l=d(r.getState());u=f=>{const c=d(f);if(!h(l,c)){const p=l;a(l=c,p)}},s!=null&&s.fireImmediately&&a(l,l)}return i(u)},e(t,n,r)};var m0=Symbol.for("immer-nothing"),v0=Symbol.for("immer-draftable"),$t=Symbol.for("immer-state");function mn(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Qi=Object.getPrototypeOf;function Ji(e){return!!e&&!!e[$t]}function ri(e){var t;return e?y0(e)||Array.isArray(e)||!!e[v0]||!!((t=e.constructor)!=null&&t[v0])||vl(e)||yl(e):!1}var mE=Object.prototype.constructor.toString();function y0(e){if(!e||typeof e!="object")return!1;const t=Qi(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===mE}function gl(e,t){ml(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function ml(e){const t=e[$t];return t?t.type_:Array.isArray(e)?1:vl(e)?2:yl(e)?3:0}function Mf(e,t){return ml(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function b0(e,t,n){const r=ml(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function vE(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function vl(e){return e instanceof Map}function yl(e){return e instanceof Set}function ii(e){return e.copy_||e.base_}function jf(e,t){if(vl(e))return new Map(e);if(yl(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=y0(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[$t];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const d=i[o],a=r[d];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[d]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[d]})}return Object.create(Qi(e),r)}else{const r=Qi(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function If(e,t=!1){return bl(e)||Ji(e)||!ri(e)||(ml(e)>1&&(e.set=e.add=e.clear=e.delete=yE),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>If(r,!0))),e}function yE(){mn(2)}function bl(e){return Object.isFrozen(e)}var bE={};function si(e){const t=bE[e];return t||mn(0,e),t}var po;function w0(){return po}function wE(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function x0(e,t){t&&(si("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Ff(e){Rf(e),e.drafts_.forEach(xE),e.drafts_=null}function Rf(e){e===po&&(po=e.parent_)}function C0(e){return po=wE(po,e)}function xE(e){const t=e[$t];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function _0(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[$t].modified_&&(Ff(t),mn(4)),ri(e)&&(e=wl(t,e),t.parent_||xl(t,e)),t.patches_&&si("Patches").generateReplacementPatches_(n[$t].base_,e,t.patches_,t.inversePatches_)):e=wl(t,n,[]),Ff(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==m0?e:void 0}function wl(e,t,n){if(bl(t))return t;const r=t[$t];if(!r)return gl(t,(i,o)=>S0(e,r,t,i,o,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return xl(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,d=!1;r.type_===3&&(o=new Set(i),i.clear(),d=!0),gl(o,(a,s)=>S0(e,r,i,a,s,n,d)),xl(e,i,!1),n&&e.patches_&&si("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function S0(e,t,n,r,i,o,d){if(Ji(i)){const a=o&&t&&t.type_!==3&&!Mf(t.assigned_,r)?o.concat(r):void 0,s=wl(e,i,a);if(b0(n,r,s),Ji(s))e.canAutoFreeze_=!1;else return}else d&&n.add(i);if(ri(i)&&!bl(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;wl(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&xl(e,i)}}function xl(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&If(t,n)}function CE(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:w0(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=Lf;n&&(i=[r],o=go);const{revoke:d,proxy:a}=Proxy.revocable(i,o);return r.draft_=a,r.revoke_=d,a}var Lf={get(e,t){if(t===$t)return e;const n=ii(e);if(!Mf(n,t))return _E(e,n,t);const r=n[t];return e.finalized_||!ri(r)?r:r===zf(e.base_,t)?(Nf(e),e.copy_[t]=$f(r,e)):r},has(e,t){return t in ii(e)},ownKeys(e){return Reflect.ownKeys(ii(e))},set(e,t,n){const r=k0(ii(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=zf(ii(e),t),o=i==null?void 0:i[$t];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(vE(n,i)&&(n!==void 0||Mf(e.base_,t)))return!0;Nf(e),Bf(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return zf(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Nf(e),Bf(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=ii(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){mn(11)},getPrototypeOf(e){return Qi(e.base_)},setPrototypeOf(){mn(12)}},go={};gl(Lf,(e,t)=>{go[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),go.deleteProperty=function(e,t){return go.set.call(this,e,t,void 0)},go.set=function(e,t,n){return Lf.set.call(this,e[0],t,n,e[0])};function zf(e,t){const n=e[$t];return(n?ii(n):e)[t]}function _E(e,t,n){var i;const r=k0(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function k0(e,t){if(!(t in e))return;let n=Qi(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Qi(n)}}function Bf(e){e.modified_||(e.modified_=!0,e.parent_&&Bf(e.parent_))}function Nf(e){e.copy_||(e.copy_=jf(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var SE=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const o=n;n=t;const d=this;return function(s=o,...u){return d.produce(s,h=>n.call(this,h,...u))}}typeof n!="function"&&mn(6),r!==void 0&&typeof r!="function"&&mn(7);let i;if(ri(t)){const o=C0(this),d=$f(t,void 0);let a=!0;try{i=n(d),a=!1}finally{a?Ff(o):Rf(o)}return x0(o,r),_0(i,o)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===m0&&(i=void 0),this.autoFreeze_&&If(i,!0),r){const o=[],d=[];si("Patches").generateReplacementPatches_(t,i,o,d),r(o,d)}return i}else mn(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(d,...a)=>this.produceWithPatches(d,s=>t(s,...a));let r,i;return[this.produce(t,n,(d,a)=>{r=d,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){ri(e)||mn(8),Ji(e)&&(e=kE(e));const t=C0(this),n=$f(e,void 0);return n[$t].isManual_=!0,Rf(t),n}finishDraft(e,t){const n=e&&e[$t];(!n||!n.isManual_)&&mn(9);const{scope_:r}=n;return x0(r,t),_0(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=si("Patches").applyPatches_;return Ji(e)?r(e,t):this.produce(e,i=>r(i,t))}};function $f(e,t){const n=vl(e)?si("MapSet").proxyMap_(e,t):yl(e)?si("MapSet").proxySet_(e,t):CE(e,t);return(t?t.scope_:w0()).drafts_.push(n),n}function kE(e){return Ji(e)||mn(10,e),E0(e)}function E0(e){if(!ri(e)||bl(e))return e;const t=e[$t];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=jf(e,t.scope_.immer_.useStrictShallowCopy_)}else n=jf(e,!0);return gl(n,(r,i)=>{b0(n,r,E0(i))}),t&&(t.finalized_=!1),n}var Vt=new SE,EE=Vt.produce;Vt.produceWithPatches.bind(Vt),Vt.setAutoFreeze.bind(Vt),Vt.setUseStrictShallowCopy.bind(Vt),Vt.applyPatches.bind(Vt),Vt.createDraft.bind(Vt),Vt.finishDraft.bind(Vt);function W7(e){return e}var TE=function(t){return OE(t)&&!PE(t)};function OE(e){return!!e&&typeof e=="object"}function PE(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||ME(e)}var DE=typeof Symbol=="function"&&Symbol.for,AE=DE?Symbol.for("react.element"):60103;function ME(e){return e.$$typeof===AE}function jE(e){return Array.isArray(e)?[]:{}}function mo(e,t){return t.clone!==!1&&t.isMergeableObject(e)?es(jE(e),e,t):e}function IE(e,t,n){return e.concat(t).map(function(r){return mo(r,n)})}function FE(e,t){if(!t.customMerge)return es;var n=t.customMerge(e);return typeof n=="function"?n:es}function RE(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}function T0(e){return Object.keys(e).concat(RE(e))}function O0(e,t){try{return t in e}catch{return!1}}function LE(e,t){return O0(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function zE(e,t,n){var r={};return n.isMergeableObject(e)&&T0(e).forEach(function(i){r[i]=mo(e[i],n)}),T0(t).forEach(function(i){LE(e,i)||(O0(e,i)&&n.isMergeableObject(t[i])?r[i]=FE(i,n)(e[i],t[i],n):r[i]=mo(t[i],n))}),r}function es(e,t,n){n=n||{},n.arrayMerge=n.arrayMerge||IE,n.isMergeableObject=n.isMergeableObject||TE,n.cloneUnlessOtherwiseSpecified=mo;var r=Array.isArray(t),i=Array.isArray(e),o=r===i;return o?r?n.arrayMerge(e,t,n):zE(e,t,n):mo(t,n)}es.all=function(t,n){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(r,i){return es(r,i,n)},{})};var BE=es,NE=BE;const P0=st(NE);function $E(e){return e?e.charAt(0).toLowerCase()+e.slice(1):""}function VE(e,t){const n=P0(t,e);return D0(n,e)}function D0(e,t){return Object.keys(e).forEach(n=>{if(n.startsWith("replaceDefault")&&e[n]){const r=$E(n.replace("replaceDefault","")||"items");e[r]=t?t[r]:[],delete e[n]}else typeof e[n]=="object"&&e[n]!==null&&D0(e[n],t==null?void 0:t[n])}),e}const HE=(e,t)=>({history:{...A0,updatePointerById:n=>{const r=t().history.items.findIndex(i=>i.id===n);t().history.update(r)},update:(n,r)=>{e(i=>{i.history.pointer=n,r&&(i.history.items=r),i.history.canUndo=i.history.pointer>0,i.history.canRedo=i.history.items.length>i.history.pointer+1})},reset:n=>{e({history:{...t().history,...n??A0}})}}}),A0={items:[],pointer:0,canUndo:!1,canRedo:!1};var sn=(e=>(e.Filter="filter",e.Frame="frame",e.ActiveObject="activeObj",e.Text="text",e))(sn||{});const WE=(e,t)=>({filter:{...M0,select(n,r=!1){e(i=>{i.filter.selected=n,i.activeToolOverlay=r?sn.Filter:null,i.dirty=!0})},deselect(n){t().filter.selected===n&&e(r=>{r.filter.selected=null,r.activeToolOverlay=null,r.dirty=!0})},reset(){e({filter:{...t().filter,...M0}})}}}),M0={selected:null,applied:[]},UE=(e,t)=>({crop:{...j0,setCropzoneRect:n=>{e(r=>{r.crop.zoneRect=n})},setAspectRatio:n=>{e(r=>{r.crop.selectedAspectRatio=n})},setTransformAngle:n=>{e(r=>{r.crop.straightenAngle=n})},apply:async()=>{const n=t().crop.zoneRect;if(n){const r={width:Math.ceil(n.width/t().zoom),height:Math.ceil(n.height/t().zoom),left:Math.ceil(n.left/t().zoom),top:Math.ceil(n.top/t().zoom)};await t().editor.tools.crop.apply(r)}},reset:()=>{e({crop:{...t().crop,...j0}})}}}),j0={zoneRect:null,selectedAspectRatio:null,straightenAngle:0};function vr(e){return(e==null?void 0:e.type)==="i-text"}var Ge=(e=>(e.Text="text",e.Shape="shape",e.Sticker="sticker",e.Drawing="drawing",e.Image="image",e.MainImage="mainImage",e.StraightenAnchor="straightenHelper",e))(Ge||{});const XE={text:{name:se("Text"),icon:mr.text.icon},shape:{name:se("Shape"),icon:mr.shapes.icon},sticker:{name:se("Sticker"),icon:mr.stickers.icon},drawing:{name:se("Drawing"),icon:mr.draw.icon},image:{name:se("Image"),icon:mr.overlayImage.icon},mainImage:{name:se("Background Image"),icon:mr.bgImage.icon}};function YE(e){return e.name===Ge.Image}const I0={isMoving:!1,editableProps:{},id:null,isText:!1,isImage:!1,name:null};function GE(e){if(!e)return{};const t={fill:e.fill,opacity:e.opacity,backgroundColor:e.backgroundColor,stroke:e.stroke,strokeWidth:e.strokeWidth},n=e.shadow;return n&&(t.shadow={color:n.color,blur:n.blur,offsetX:n.offsetX,offsetY:n.offsetY}),vr(e)&&(t.textAlign=e.textAlign,t.underline=e.underline,t.linethrough=e.linethrough,t.fontStyle=e.fontStyle,t.fontFamily=e.fontFamily,t.fontWeight=e.fontWeight,t.fontSize=e.fontSize),t}const KE=(e,t)=>({objects:{...F0,setActiveIsMoving:n=>{e(r=>{r.objects.active.isMoving=n})},setIsEditingText:n=>{e(r=>{r.objects.isEditingText=n})},setActive:n=>{e(n?r=>{r.objects.active.editableProps=GE(n),r.objects.active.id=n.data.id,r.objects.active.name=n.name??null,r.objects.active.isText=vr(n),r.objects.active.isImage=YE(n)}:r=>{var o,d,a,s,u;const i={...(o=t().config.objectDefaults)==null?void 0:o.global,fontFamily:(a=(d=t().config.objectDefaults)==null?void 0:d.text)==null?void 0:a.fontFamily,fontSize:(u=(s=t().config.objectDefaults)==null?void 0:s.text)==null?void 0:u.fontSize};r.objects.active={...I0,editableProps:i}})},reset(){e({objects:{...t().objects,...F0}})}}}),F0={all:[],isEditingText:!1,active:I0},qE=(e,t)=>({frame:{...R0,select:n=>{e(r=>{r.frame.active=n}),t().frame.showOptionsPanel()},deselect:()=>{e(n=>{n.frame.active=null,n.activeToolOverlay=null})},showOptionsPanel:()=>{t().activeTool===De.FRAME&&e(n=>{n.activeToolOverlay=sn.Frame})},reset(){e({frame:{...t().frame,...R0}})}}}),R0={active:null},ZE=(e,t)=>({resize:{...L0,setFormValue:n=>{e(r=>{Object.entries(n).forEach(([i,o])=>{r.resize.formValue[i]=o})})},apply(){const n=t().resize.formValue,r=t().original;if(n.width===r.width&&n.height===r.height)return!1;t().editor.tools.resize.apply(n)},reset(){e({resize:{...t().resize,...L0}})}}}),L0={formValue:{width:1,height:1,maintainAspect:!0,usePercentages:!1}},QE=(e,t)=>({corners:{...z0,setRadius:n=>{e(r=>{r.corners.radius=n})},apply(){return t().editor.tools.corners.apply(t().corners.radius)},reset(){e({corners:{...t().corners,...z0}})}}}),z0={radius:50},B0=e=>(t,n,r)=>(r.setState=(i,o,...d)=>{const a=typeof i=="function"?EE(i):i;return t(a,o,...d)},e(r.setState,n,r));var N0={exports:{}},JE={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},$0={exports:{}},eT=function(t){return!t||typeof t=="string"?!1:t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&t.constructor.name!=="String")},tT=eT,nT=Array.prototype.concat,rT=Array.prototype.slice,V0=$0.exports=function(t){for(var n=[],r=0,i=t.length;r<i;r++){var o=t[r];tT(o)?n=nT.call(n,rT.call(o)):n.push(o)}return n};V0.wrap=function(e){return function(){return e(V0(arguments))}};var iT=$0.exports,vo=JE,yo=iT,H0=Object.hasOwnProperty,W0=Object.create(null);for(var Vf in vo)H0.call(vo,Vf)&&(W0[vo[Vf]]=Vf);var Ht=N0.exports={to:{},get:{}};Ht.get=function(e){var t=e.substring(0,3).toLowerCase(),n,r;switch(t){case"hsl":n=Ht.get.hsl(e),r="hsl";break;case"hwb":n=Ht.get.hwb(e),r="hwb";break;default:n=Ht.get.rgb(e),r="rgb";break}return n?{model:r,value:n}:null},Ht.get.rgb=function(e){if(!e)return null;var t=/^#([a-f0-9]{3,4})$/i,n=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,r=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,i=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,o=/^(\w+)$/,d=[0,0,0,1],a,s,u;if(a=e.match(n)){for(u=a[2],a=a[1],s=0;s<3;s++){var h=s*2;d[s]=parseInt(a.slice(h,h+2),16)}u&&(d[3]=parseInt(u,16)/255)}else if(a=e.match(t)){for(a=a[1],u=a[3],s=0;s<3;s++)d[s]=parseInt(a[s]+a[s],16);u&&(d[3]=parseInt(u+u,16)/255)}else if(a=e.match(r)){for(s=0;s<3;s++)d[s]=parseInt(a[s+1],0);a[4]&&(a[5]?d[3]=parseFloat(a[4])*.01:d[3]=parseFloat(a[4]))}else if(a=e.match(i)){for(s=0;s<3;s++)d[s]=Math.round(parseFloat(a[s+1])*2.55);a[4]&&(a[5]?d[3]=parseFloat(a[4])*.01:d[3]=parseFloat(a[4]))}else return(a=e.match(o))?a[1]==="transparent"?[0,0,0,0]:H0.call(vo,a[1])?(d=vo[a[1]],d[3]=1,d):null:null;for(s=0;s<3;s++)d[s]=yr(d[s],0,255);return d[3]=yr(d[3],0,1),d},Ht.get.hsl=function(e){if(!e)return null;var t=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=e.match(t);if(n){var r=parseFloat(n[4]),i=(parseFloat(n[1])%360+360)%360,o=yr(parseFloat(n[2]),0,100),d=yr(parseFloat(n[3]),0,100),a=yr(isNaN(r)?1:r,0,1);return[i,o,d,a]}return null},Ht.get.hwb=function(e){if(!e)return null;var t=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=e.match(t);if(n){var r=parseFloat(n[4]),i=(parseFloat(n[1])%360+360)%360,o=yr(parseFloat(n[2]),0,100),d=yr(parseFloat(n[3]),0,100),a=yr(isNaN(r)?1:r,0,1);return[i,o,d,a]}return null},Ht.to.hex=function(){var e=yo(arguments);return"#"+Cl(e[0])+Cl(e[1])+Cl(e[2])+(e[3]<1?Cl(Math.round(e[3]*255)):"")},Ht.to.rgb=function(){var e=yo(arguments);return e.length<4||e[3]===1?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"},Ht.to.rgb.percent=function(){var e=yo(arguments),t=Math.round(e[0]/255*100),n=Math.round(e[1]/255*100),r=Math.round(e[2]/255*100);return e.length<4||e[3]===1?"rgb("+t+"%, "+n+"%, "+r+"%)":"rgba("+t+"%, "+n+"%, "+r+"%, "+e[3]+")"},Ht.to.hsl=function(){var e=yo(arguments);return e.length<4||e[3]===1?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"},Ht.to.hwb=function(){var e=yo(arguments),t="";return e.length>=4&&e[3]!==1&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"},Ht.to.keyword=function(e){return W0[e.slice(0,3)]};function yr(e,t,n){return Math.min(Math.max(t,e),n)}function Cl(e){var t=Math.round(e).toString(16).toUpperCase();return t.length<2?"0"+t:t}var sT=N0.exports,oT={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};const bo=oT,U0={};for(const e of Object.keys(bo))U0[bo[e]]=e;const me={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var X0=me;for(const e of Object.keys(me)){if(!("channels"in me[e]))throw new Error("missing channels property: "+e);if(!("labels"in me[e]))throw new Error("missing channel labels property: "+e);if(me[e].labels.length!==me[e].channels)throw new Error("channel and label counts mismatch: "+e);const{channels:t,labels:n}=me[e];delete me[e].channels,delete me[e].labels,Object.defineProperty(me[e],"channels",{value:t}),Object.defineProperty(me[e],"labels",{value:n})}me.rgb.hsl=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,i=Math.min(t,n,r),o=Math.max(t,n,r),d=o-i;let a,s;o===i?a=0:t===o?a=(n-r)/d:n===o?a=2+(r-t)/d:r===o&&(a=4+(t-n)/d),a=Math.min(a*60,360),a<0&&(a+=360);const u=(i+o)/2;return o===i?s=0:u<=.5?s=d/(o+i):s=d/(2-o-i),[a,s*100,u*100]},me.rgb.hsv=function(e){let t,n,r,i,o;const d=e[0]/255,a=e[1]/255,s=e[2]/255,u=Math.max(d,a,s),h=u-Math.min(d,a,s),l=function(f){return(u-f)/6/h+1/2};return h===0?(i=0,o=0):(o=h/u,t=l(d),n=l(a),r=l(s),d===u?i=r-n:a===u?i=1/3+t-r:s===u&&(i=2/3+n-t),i<0?i+=1:i>1&&(i-=1)),[i*360,o*100,u*100]},me.rgb.hwb=function(e){const t=e[0],n=e[1];let r=e[2];const i=me.rgb.hsl(e)[0],o=1/255*Math.min(t,Math.min(n,r));return r=1-1/255*Math.max(t,Math.max(n,r)),[i,o*100,r*100]},me.rgb.cmyk=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,i=Math.min(1-t,1-n,1-r),o=(1-t-i)/(1-i)||0,d=(1-n-i)/(1-i)||0,a=(1-r-i)/(1-i)||0;return[o*100,d*100,a*100,i*100]};function aT(e,t){return(e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]-t[2])**2}me.rgb.keyword=function(e){const t=U0[e];if(t)return t;let n=1/0,r;for(const i of Object.keys(bo)){const o=bo[i],d=aT(e,o);d<n&&(n=d,r=i)}return r},me.keyword.rgb=function(e){return bo[e]},me.rgb.xyz=function(e){let t=e[0]/255,n=e[1]/255,r=e[2]/255;t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92;const i=t*.4124+n*.3576+r*.1805,o=t*.2126+n*.7152+r*.0722,d=t*.0193+n*.1192+r*.9505;return[i*100,o*100,d*100]},me.rgb.lab=function(e){const t=me.rgb.xyz(e);let n=t[0],r=t[1],i=t[2];n/=95.047,r/=100,i/=108.883,n=n>.008856?n**(1/3):7.787*n+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;const o=116*r-16,d=500*(n-r),a=200*(r-i);return[o,d,a]},me.hsl.rgb=function(e){const t=e[0]/360,n=e[1]/100,r=e[2]/100;let i,o,d;if(n===0)return d=r*255,[d,d,d];r<.5?i=r*(1+n):i=r+n-r*n;const a=2*r-i,s=[0,0,0];for(let u=0;u<3;u++)o=t+1/3*-(u-1),o<0&&o++,o>1&&o--,6*o<1?d=a+(i-a)*6*o:2*o<1?d=i:3*o<2?d=a+(i-a)*(2/3-o)*6:d=a,s[u]=d*255;return s},me.hsl.hsv=function(e){const t=e[0];let n=e[1]/100,r=e[2]/100,i=n;const o=Math.max(r,.01);r*=2,n*=r<=1?r:2-r,i*=o<=1?o:2-o;const d=(r+n)/2,a=r===0?2*i/(o+i):2*n/(r+n);return[t,a*100,d*100]},me.hsv.rgb=function(e){const t=e[0]/60,n=e[1]/100;let r=e[2]/100;const i=Math.floor(t)%6,o=t-Math.floor(t),d=255*r*(1-n),a=255*r*(1-n*o),s=255*r*(1-n*(1-o));switch(r*=255,i){case 0:return[r,s,d];case 1:return[a,r,d];case 2:return[d,r,s];case 3:return[d,a,r];case 4:return[s,d,r];case 5:return[r,d,a]}},me.hsv.hsl=function(e){const t=e[0],n=e[1]/100,r=e[2]/100,i=Math.max(r,.01);let o,d;d=(2-n)*r;const a=(2-n)*i;return o=n*i,o/=a<=1?a:2-a,o=o||0,d/=2,[t,o*100,d*100]},me.hwb.rgb=function(e){const t=e[0]/360;let n=e[1]/100,r=e[2]/100;const i=n+r;let o;i>1&&(n/=i,r/=i);const d=Math.floor(6*t),a=1-r;o=6*t-d,d&1&&(o=1-o);const s=n+o*(a-n);let u,h,l;switch(d){default:case 6:case 0:u=a,h=s,l=n;break;case 1:u=s,h=a,l=n;break;case 2:u=n,h=a,l=s;break;case 3:u=n,h=s,l=a;break;case 4:u=s,h=n,l=a;break;case 5:u=a,h=n,l=s;break}return[u*255,h*255,l*255]},me.cmyk.rgb=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100,i=e[3]/100,o=1-Math.min(1,t*(1-i)+i),d=1-Math.min(1,n*(1-i)+i),a=1-Math.min(1,r*(1-i)+i);return[o*255,d*255,a*255]},me.xyz.rgb=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100;let i,o,d;return i=t*3.2406+n*-1.5372+r*-.4986,o=t*-.9689+n*1.8758+r*.0415,d=t*.0557+n*-.204+r*1.057,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92,d=d>.0031308?1.055*d**(1/2.4)-.055:d*12.92,i=Math.min(Math.max(0,i),1),o=Math.min(Math.max(0,o),1),d=Math.min(Math.max(0,d),1),[i*255,o*255,d*255]},me.xyz.lab=function(e){let t=e[0],n=e[1],r=e[2];t/=95.047,n/=100,r/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,r=r>.008856?r**(1/3):7.787*r+16/116;const i=116*n-16,o=500*(t-n),d=200*(n-r);return[i,o,d]},me.lab.xyz=function(e){const t=e[0],n=e[1],r=e[2];let i,o,d;o=(t+16)/116,i=n/500+o,d=o-r/200;const a=o**3,s=i**3,u=d**3;return o=a>.008856?a:(o-16/116)/7.787,i=s>.008856?s:(i-16/116)/7.787,d=u>.008856?u:(d-16/116)/7.787,i*=95.047,o*=100,d*=108.883,[i,o,d]},me.lab.lch=function(e){const t=e[0],n=e[1],r=e[2];let i;i=Math.atan2(r,n)*360/2/Math.PI,i<0&&(i+=360);const d=Math.sqrt(n*n+r*r);return[t,d,i]},me.lch.lab=function(e){const t=e[0],n=e[1],i=e[2]/360*2*Math.PI,o=n*Math.cos(i),d=n*Math.sin(i);return[t,o,d]},me.rgb.ansi16=function(e,t=null){const[n,r,i]=e;let o=t===null?me.rgb.hsv(e)[2]:t;if(o=Math.round(o/50),o===0)return 30;let d=30+(Math.round(i/255)<<2|Math.round(r/255)<<1|Math.round(n/255));return o===2&&(d+=60),d},me.hsv.ansi16=function(e){return me.rgb.ansi16(me.hsv.rgb(e),e[2])},me.rgb.ansi256=function(e){const t=e[0],n=e[1],r=e[2];return t===n&&n===r?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)},me.ansi16.rgb=function(e){let t=e%10;if(t===0||t===7)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];const n=(~~(e>50)+1)*.5,r=(t&1)*n*255,i=(t>>1&1)*n*255,o=(t>>2&1)*n*255;return[r,i,o]},me.ansi256.rgb=function(e){if(e>=232){const o=(e-232)*10+8;return[o,o,o]}e-=16;let t;const n=Math.floor(e/36)/5*255,r=Math.floor((t=e%36)/6)/5*255,i=t%6/5*255;return[n,r,i]},me.rgb.hex=function(e){const n=(((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255)).toString(16).toUpperCase();return"000000".substring(n.length)+n},me.hex.rgb=function(e){const t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];let n=t[0];t[0].length===3&&(n=n.split("").map(a=>a+a).join(""));const r=parseInt(n,16),i=r>>16&255,o=r>>8&255,d=r&255;return[i,o,d]},me.rgb.hcg=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,i=Math.max(Math.max(t,n),r),o=Math.min(Math.min(t,n),r),d=i-o;let a,s;return d<1?a=o/(1-d):a=0,d<=0?s=0:i===t?s=(n-r)/d%6:i===n?s=2+(r-t)/d:s=4+(t-n)/d,s/=6,s%=1,[s*360,d*100,a*100]},me.hsl.hcg=function(e){const t=e[1]/100,n=e[2]/100,r=n<.5?2*t*n:2*t*(1-n);let i=0;return r<1&&(i=(n-.5*r)/(1-r)),[e[0],r*100,i*100]},me.hsv.hcg=function(e){const t=e[1]/100,n=e[2]/100,r=t*n;let i=0;return r<1&&(i=(n-r)/(1-r)),[e[0],r*100,i*100]},me.hcg.rgb=function(e){const t=e[0]/360,n=e[1]/100,r=e[2]/100;if(n===0)return[r*255,r*255,r*255];const i=[0,0,0],o=t%1*6,d=o%1,a=1-d;let s=0;switch(Math.floor(o)){case 0:i[0]=1,i[1]=d,i[2]=0;break;case 1:i[0]=a,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=d;break;case 3:i[0]=0,i[1]=a,i[2]=1;break;case 4:i[0]=d,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=a}return s=(1-n)*r,[(n*i[0]+s)*255,(n*i[1]+s)*255,(n*i[2]+s)*255]},me.hcg.hsv=function(e){const t=e[1]/100,n=e[2]/100,r=t+n*(1-t);let i=0;return r>0&&(i=t/r),[e[0],i*100,r*100]},me.hcg.hsl=function(e){const t=e[1]/100,r=e[2]/100*(1-t)+.5*t;let i=0;return r>0&&r<.5?i=t/(2*r):r>=.5&&r<1&&(i=t/(2*(1-r))),[e[0],i*100,r*100]},me.hcg.hwb=function(e){const t=e[1]/100,n=e[2]/100,r=t+n*(1-t);return[e[0],(r-t)*100,(1-r)*100]},me.hwb.hcg=function(e){const t=e[1]/100,r=1-e[2]/100,i=r-t;let o=0;return i<1&&(o=(r-i)/(1-i)),[e[0],i*100,o*100]},me.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},me.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},me.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},me.gray.hsl=function(e){return[0,0,e[0]]},me.gray.hsv=me.gray.hsl,me.gray.hwb=function(e){return[0,100,e[0]]},me.gray.cmyk=function(e){return[0,0,0,e[0]]},me.gray.lab=function(e){return[e[0],0,0]},me.gray.hex=function(e){const t=Math.round(e[0]/100*255)&255,r=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(r.length)+r},me.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]};const _l=X0;function lT(){const e={},t=Object.keys(_l);for(let n=t.length,r=0;r<n;r++)e[t[r]]={distance:-1,parent:null};return e}function uT(e){const t=lT(),n=[e];for(t[e].distance=0;n.length;){const r=n.pop(),i=Object.keys(_l[r]);for(let o=i.length,d=0;d<o;d++){const a=i[d],s=t[a];s.distance===-1&&(s.distance=t[r].distance+1,s.parent=r,n.unshift(a))}}return t}function cT(e,t){return function(n){return t(e(n))}}function fT(e,t){const n=[t[e].parent,e];let r=_l[t[e].parent][e],i=t[e].parent;for(;t[i].parent;)n.unshift(t[i].parent),r=cT(_l[t[i].parent][i],r),i=t[i].parent;return r.conversion=n,r}var hT=function(e){const t=uT(e),n={},r=Object.keys(t);for(let i=r.length,o=0;o<i;o++){const d=r[o];t[d].parent!==null&&(n[d]=fT(d,t))}return n};const Hf=X0,dT=hT,ts={},pT=Object.keys(Hf);function gT(e){const t=function(...n){const r=n[0];return r==null?r:(r.length>1&&(n=r),e(n))};return"conversion"in e&&(t.conversion=e.conversion),t}function mT(e){const t=function(...n){const r=n[0];if(r==null)return r;r.length>1&&(n=r);const i=e(n);if(typeof i=="object")for(let o=i.length,d=0;d<o;d++)i[d]=Math.round(i[d]);return i};return"conversion"in e&&(t.conversion=e.conversion),t}pT.forEach(e=>{ts[e]={},Object.defineProperty(ts[e],"channels",{value:Hf[e].channels}),Object.defineProperty(ts[e],"labels",{value:Hf[e].labels});const t=dT(e);Object.keys(t).forEach(r=>{const i=t[r];ts[e][r]=mT(i),ts[e][r].raw=gT(i)})});var vT=ts;const ns=sT,Wt=vT,Y0=["keyword","gray","hex"],Wf={};for(const e of Object.keys(Wt))Wf[[...Wt[e].labels].sort().join("")]=e;const Sl={};function ot(e,t){if(!(this instanceof ot))return new ot(e,t);if(t&&t in Y0&&(t=null),t&&!(t in Wt))throw new Error("Unknown model: "+t);let n,r;if(e==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof ot)this.model=e.model,this.color=[...e.color],this.valpha=e.valpha;else if(typeof e=="string"){const i=ns.get(e);if(i===null)throw new Error("Unable to parse color from string: "+e);this.model=i.model,r=Wt[this.model].channels,this.color=i.value.slice(0,r),this.valpha=typeof i.value[r]=="number"?i.value[r]:1}else if(e.length>0){this.model=t||"rgb",r=Wt[this.model].channels;const i=Array.prototype.slice.call(e,0,r);this.color=Uf(i,r),this.valpha=typeof e[r]=="number"?e[r]:1}else if(typeof e=="number")this.model="rgb",this.color=[e>>16&255,e>>8&255,e&255],this.valpha=1;else{this.valpha=1;const i=Object.keys(e);"alpha"in e&&(i.splice(i.indexOf("alpha"),1),this.valpha=typeof e.alpha=="number"?e.alpha:0);const o=i.sort().join("");if(!(o in Wf))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=Wf[o];const{labels:d}=Wt[this.model],a=[];for(n=0;n<d.length;n++)a.push(e[d[n]]);this.color=Uf(a)}if(Sl[this.model])for(r=Wt[this.model].channels,n=0;n<r;n++){const i=Sl[this.model][n];i&&(this.color[n]=i(this.color[n]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}ot.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(e){let t=this.model in ns.to?this:this.rgb();t=t.round(typeof e=="number"?e:1);const n=t.valpha===1?t.color:[...t.color,this.valpha];return ns.to[t.model](n)},percentString(e){const t=this.rgb().round(typeof e=="number"?e:1),n=t.valpha===1?t.color:[...t.color,this.valpha];return ns.to.rgb.percent(n)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const e={},{channels:t}=Wt[this.model],{labels:n}=Wt[this.model];for(let r=0;r<t;r++)e[n[r]]=this.color[r];return this.valpha!==1&&(e.alpha=this.valpha),e},unitArray(){const e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,this.valpha!==1&&e.push(this.valpha),e},unitObject(){const e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,this.valpha!==1&&(e.alpha=this.valpha),e},round(e){return e=Math.max(e||0,0),new ot([...this.color.map(bT(e)),this.valpha],this.model)},alpha(e){return e!==void 0?new ot([...this.color,Math.max(0,Math.min(1,e))],this.model):this.valpha},red:Xe("rgb",0,tt(255)),green:Xe("rgb",1,tt(255)),blue:Xe("rgb",2,tt(255)),hue:Xe(["hsl","hsv","hsl","hwb","hcg"],0,e=>(e%360+360)%360),saturationl:Xe("hsl",1,tt(100)),lightness:Xe("hsl",2,tt(100)),saturationv:Xe("hsv",1,tt(100)),value:Xe("hsv",2,tt(100)),chroma:Xe("hcg",1,tt(100)),gray:Xe("hcg",2,tt(100)),white:Xe("hwb",1,tt(100)),wblack:Xe("hwb",2,tt(100)),cyan:Xe("cmyk",0,tt(100)),magenta:Xe("cmyk",1,tt(100)),yellow:Xe("cmyk",2,tt(100)),black:Xe("cmyk",3,tt(100)),x:Xe("xyz",0,tt(95.047)),y:Xe("xyz",1,tt(100)),z:Xe("xyz",2,tt(108.833)),l:Xe("lab",0,tt(100)),a:Xe("lab",1),b:Xe("lab",2),keyword(e){return e!==void 0?new ot(e):Wt[this.model].keyword(this.color)},hex(e){return e!==void 0?new ot(e):ns.to.hex(this.rgb().round().color)},hexa(e){if(e!==void 0)return new ot(e);const t=this.rgb().round().color;let n=Math.round(this.valpha*255).toString(16).toUpperCase();return n.length===1&&(n="0"+n),ns.to.hex(t)+n},rgbNumber(){const e=this.rgb().color;return(e[0]&255)<<16|(e[1]&255)<<8|e[2]&255},luminosity(){const e=this.rgb().color,t=[];for(const[n,r]of e.entries()){const i=r/255;t[n]=i<=.04045?i/12.92:((i+.055)/1.055)**2.4}return .2126*t[0]+.7152*t[1]+.0722*t[2]},contrast(e){const t=this.luminosity(),n=e.luminosity();return t>n?(t+.05)/(n+.05):(n+.05)/(t+.05)},level(e){const t=this.contrast(e);return t>=7?"AAA":t>=4.5?"AA":""},isDark(){const e=this.rgb().color;return(e[0]*2126+e[1]*7152+e[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const e=this.rgb();for(let t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten(e){const t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken(e){const t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate(e){const t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate(e){const t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten(e){const t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken(e){const t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale(){const e=this.rgb().color,t=e[0]*.3+e[1]*.59+e[2]*.11;return ot.rgb(t,t,t)},fade(e){return this.alpha(this.valpha-this.valpha*e)},opaquer(e){return this.alpha(this.valpha+this.valpha*e)},rotate(e){const t=this.hsl();let n=t.color[0];return n=(n+e)%360,n=n<0?360+n:n,t.color[0]=n,t},mix(e,t){if(!e||!e.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e);const n=e.rgb(),r=this.rgb(),i=t===void 0?.5:t,o=2*i-1,d=n.alpha()-r.alpha(),a=((o*d===-1?o:(o+d)/(1+o*d))+1)/2,s=1-a;return ot.rgb(a*n.red()+s*r.red(),a*n.green()+s*r.green(),a*n.blue()+s*r.blue(),n.alpha()*i+r.alpha()*(1-i))}};for(const e of Object.keys(Wt)){if(Y0.includes(e))continue;const{channels:t}=Wt[e];ot.prototype[e]=function(...n){return this.model===e?new ot(this):n.length>0?new ot(n,e):new ot([...wT(Wt[this.model][e].raw(this.color)),this.valpha],e)},ot[e]=function(...n){let r=n[0];return typeof r=="number"&&(r=Uf(n,t)),new ot(r,e)}}function yT(e,t){return Number(e.toFixed(t))}function bT(e){return function(t){return yT(t,e)}}function Xe(e,t,n){e=Array.isArray(e)?e:[e];for(const r of e)(Sl[r]||(Sl[r]=[]))[t]=n;return e=e[0],function(r){let i;return r!==void 0?(n&&(r=n(r)),i=this[e](),i.color[t]=r,i):(i=this[e]().color[t],n&&(i=n(i)),i)}}function tt(e){return function(t){return Math.max(0,Math.min(e,t))}}function wT(e){return Array.isArray(e)?e:[e]}function Uf(e,t){for(let n=0;n<t;n++)typeof e[n]!="number"&&(e[n]=0);return e}var xT=ot;const CT=st(xT);function _T(e){const t=e.isDark?Pf.find(i=>i.isDark):Pf.find(i=>!i.isDark),n={...t,...e,colors:{...t==null?void 0:t.colors,...e.colors}},r=Object.entries(n.colors).map(([i,o])=>[i,ST(o)]);return{id:n.name,name:n.name,values:Object.fromEntries(r),is_dark:n.isDark}}function ST(e){return e.endsWith("%")||e.split(" ").length===3?e:CT(e).rgb().array().slice(0,3).join(" ")}let oi=typeof document<"u"?document.getElementById("root")??document.body:void 0,rs=typeof document<"u"?document.documentElement:void 0;function kT(e){oi=e,rs=e}function ET(e,t){rs==null||rs.style.setProperty(e,t)}function TT(e){Object.entries(e.values).forEach(([t,n])=>{ET(t,n)}),e.is_dark?rs.classList.add("dark"):rs.classList.remove("dark")}const kl=Af()(e=>({data:typeof window<"u"&&window.bootstrapData?G0(window.bootstrapData):null,setData:t=>{const n=typeof t=="string"?G0(t):t;e({data:n})},mergeData:t=>{e(n=>({data:{...n.data,...t}}))}})),OT=()=>kl.getState().data;kl.getState().setData;const PT=kl.getState().mergeData;function G0(e){return typeof e=="string"?JSON.parse(e):e}const K0={top:0,right:0,bottom:0,left:0,width:0,height:0},fe=Af()(gE(B0((e,t)=>({editor:null,fabric:null,config:u0,zoom:1,dirty:!1,original:{width:1,height:1},stageSize:K0,canvasSize:K0,canvasRef:null,activeTool:null,activeToolOverlay:null,loading:!1,openPanels:{newImage:!1,history:!1,objects:!1,export:!1},...HE(e,t),...KE(e,t),...WE(e,t),...UE(e,t),...qE(e,t),...ZE(e,t),...QE(e,t),setZoom:n=>e(r=>{r.zoom=n}),setOriginal:(n,r)=>e(i=>{i.original={width:n,height:r}}),setDirty:n=>e(r=>{r.dirty=n}),toggleLoading:n=>e(r=>{r.loading=n}),setStageSize:n=>e(r=>{r.stageSize=n}),setCanvasSize:n=>e(r=>{r.canvasSize=n}),setActiveTool:(n,r)=>{e(i=>{i.activeTool=n,i.activeToolOverlay=r})},setConfig:n=>e(r=>{var u,h;const i=VE(n,t().config);r.config=i;const o=i.activeLanguage||"en",d=(u=i.languages)==null?void 0:u[o],a=(((h=i.ui)==null?void 0:h.themes)||[]).map(l=>_T(l)),s=a.find(l=>{var f;return l.id===((f=i.ui)==null?void 0:f.activeTheme)});s&&TT(s),PT({i18n:{language:o,name:o,id:0,lines:d},themes:{all:a}})}),togglePanel:(n,r)=>e(i=>{i.openPanels[n]=r??!i.openPanels[n]}),applyChanges:async()=>{var o;const n=t().activeTool;if(!n)return;const r=t()[n],i=await((o=r==null?void 0:r.apply)==null?void 0:o.call(r));e(d=>{d.dirty=!1,d.activeTool=null,d.activeToolOverlay=null}),i!==!1&&t().editor.tools.history.addHistoryItem({name:n}),r==null||r.reset()},cancelChanges:async()=>{const n=t().activeTool;if(!n)return;const r=t().dirty;e(o=>{o.dirty=!1,o.activeTool=null,o.activeToolOverlay=null}),r&&await t().editor.tools.history.reload();const i=t()[n];i==null||i.reset()},reset:()=>{t().editor.tools.transform.resetStraightenAnchor(),e({activeTool:null,activeToolOverlay:null,zoom:1,dirty:!1,loading:!1,openPanels:{newImage:!1,history:!1,objects:!1,export:!1}}),t().history.reset(),t().objects.reset(),t().filter.reset(),t().crop.reset(),t().frame.reset(),t().resize.reset(),t().corners.reset()}}))));function D(){return fe.getState()}function L(){return D().editor.tools}function he(){return D().fabric}function Xf(e){var n,r,i,o,d;L().canvas.clear(),L().frame.remove();const t=!((n=D().config.ui)!=null&&n.visible);return D().setConfig({image:void 0,blankCanvasSize:void 0,...e}),D().reset(),(r=D().config.ui)!=null&&r.defaultTool&&D().setActiveTool((i=D().config.ui)==null?void 0:i.defaultTool,null),t&&((d=(o=D().config).onOpen)==null||d.call(o)),new Promise(a=>setTimeout(a))}async function El(e){return(await fetch(e)).json()}const ai={selectable:!1,evented:!1,lockMovementX:!0,lockMovementY:!0,lockRotation:!0,lockScalingX:!0,lockScalingY:!0,lockUniScaling:!0,hasControls:!1,hasBorders:!1,hasRotatingPoint:!1,strokeWidth:0};function Tl(e=[]){var r;e=[...Object.keys(ai),"crossOrigin","name","displayName","data",...e];const t=he().toJSON(e);t.objects=t.objects.filter(i=>!i.data.pixieInternal).map(i=>(i.type==="image"&&D().config.crossOrigin&&(i.crossOrigin="anonymous"),vr(i)&&(i.selectable=!0,i.lockMovementX=!1,i.lockMovementY=!1,i.lockUniScaling=!1),{...i,data:i.data?{...i.data}:{}}));const n=L().frame.active.config?{name:L().frame.active.config.name,sizePercent:L().frame.active.currentSizeInPercent}:null;return{canvas:t,editor:{frame:n,zoom:D().zoom,activeObjectId:((r=D().objects.active)==null?void 0:r.id)||null},canvasWidth:D().original.width,canvasHeight:D().original.height}}function Yf(e=null){if(D().dirty)return;L().zoom.fitToScreen();const[t,n]=q0(he().getActiveObject());e?D().setActiveTool(e,t===e?n:null):D().setActiveTool(t,n)}function q0(e){switch(e==null?void 0:e.name){case Ge.Text:return[De.TEXT,sn.Text];case Ge.Sticker:return[De.STICKERS,sn.ActiveObject];case Ge.Image:return[null,sn.ActiveObject];case Ge.Shape:return[De.SHAPES,sn.ActiveObject];default:return[null,null]}}const DT=`/*! tailwindcss v3.3.2 | MIT License | https://tailwindcss.com*/.pi *,.pi :after,.pi :before{border-color:rgb(var(--be-foreground-base)/var(--be-divider-opacity));border-style:solid;border-width:0;box-sizing:border-box}.pi :after,.pi :before{--tw-content:""}.pi hr{border-top-width:1px;color:inherit;height:0}.pi abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}.pi h1,.pi h2,.pi h3,.pi h4,.pi h5,.pi h6{font-size:inherit;font-weight:inherit}.pi a{color:inherit;text-decoration:inherit}.pi b,.pi strong{font-weight:bolder}.pi code,.pi kbd,.pi pre,.pi samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}.pi small{font-size:80%}.pi sub,.pi sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}.pi sub{bottom:-.25em}.pi sup{top:-.5em}.pi table{border-collapse:collapse;border-color:inherit;text-indent:0}.pi button,.pi input,.pi optgroup,.pi select,.pi textarea{color:inherit;font-family:inherit;font-size:100%;font-weight:inherit;line-height:inherit;margin:0;padding:0}.pi button,.pi select{text-transform:none}.pi [type=button],.pi [type=reset],.pi [type=submit],.pi button{-webkit-appearance:button;background-color:transparent;background-image:none}.pi :-moz-focusring{outline:auto}.pi :-moz-ui-invalid{box-shadow:none}.pi progress{vertical-align:baseline}.pi ::-webkit-inner-spin-button,.pi ::-webkit-outer-spin-button{height:auto}.pi [type=search]{-webkit-appearance:textfield;outline-offset:-2px}.pi ::-webkit-search-decoration{-webkit-appearance:none}.pi ::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}.pi summary{display:list-item}.pi blockquote,.pi dd,.pi dl,.pi figure,.pi h1,.pi h2,.pi h3,.pi h4,.pi h5,.pi h6,.pi hr,.pi p,.pi pre{margin:0}.pi fieldset{margin:0;padding:0}.pi legend{padding:0}.pi menu,.pi ol,.pi ul{list-style:none;margin:0;padding:0}.pi textarea{resize:vertical}.pi input::-moz-placeholder,.pi textarea::-moz-placeholder{color:#9ca3af;opacity:1}.pi input::placeholder,.pi textarea::placeholder{color:#9ca3af;opacity:1}.pi [role=button],.pi button{cursor:pointer}.pi :disabled{cursor:default}.pi audio,.pi canvas,.pi embed,.pi iframe,.pi img,.pi object,.pi svg,.pi video{display:block;vertical-align:middle}.pi img,.pi video{height:auto;max-width:100%}.pi [hidden]{display:none}.pi *,.pi :after,.pi :before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(147,197,253,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.pi ::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(147,197,253,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.pi .\\!container{width:100%!important}.pi .container{width:100%}@media (min-width:640px){.pi .\\!container{max-width:640px!important}.pi .container{max-width:640px}}@media (min-width:768px){.pi .\\!container{max-width:768px!important}.pi .container{max-width:768px}}@media (min-width:1024px){.pi .\\!container{max-width:1024px!important}.pi .container{max-width:1024px}}@media (min-width:1280px){.pi .\\!container{max-width:1280px!important}.pi .container{max-width:1280px}}@media (min-width:1536px){.pi .\\!container{max-width:1536px!important}.pi .container{max-width:1536px}}.pi .sr-only{height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;clip:rect(0,0,0,0);border-width:0;white-space:nowrap}.pi .pointer-events-none{pointer-events:none}.pi .pointer-events-auto{pointer-events:auto}.pi .\\!visible{visibility:visible!important}.pi .visible{visibility:visible}.pi .invisible{visibility:hidden}.pi .collapse{visibility:collapse}.pi .static{position:static}.pi .fixed{position:fixed}.pi .absolute{position:absolute}.pi .relative{position:relative}.pi .inset-0{top:0;right:0;bottom:0;left:0}.pi .inset-x-0{left:0;right:0}.pi .-bottom-10{bottom:-10px}.pi .-bottom-20{bottom:-20px}.pi .-bottom-5{bottom:-5px}.pi .-left-5{left:-5px}.pi .-left-8{left:-8px}.pi .-left-80{left:-80px}.pi .-right-5{right:-5px}.pi .-top-144{top:-144px}.pi .-top-40{top:-40px}.pi .-top-5{top:-5px}.pi .bottom-0{bottom:0}.pi .bottom-20{bottom:20px}.pi .left-0{left:0}.pi .left-1\\/2{left:50%}.pi .left-20{left:20px}.pi .right-0{right:0}.pi .right-16{right:16px}.pi .right-2{right:2px}.pi .right-20{right:20px}.pi .right-4{right:4px}.pi .top-0{top:0}.pi .top-1\\/2{top:50%}.pi .top-2{top:2px}.pi .isolate{isolation:isolate}.pi .z-10{z-index:10}.pi .z-20{z-index:20}.pi .z-50{z-index:50}.pi .z-cropzone{z-index:10}.pi .z-loading-indicator{z-index:50}.pi .z-modal{z-index:110}.pi .z-navbar{z-index:40}.pi .z-obj-box{z-index:20}.pi .z-popover{z-index:130}.pi .z-toast{z-index:160}.pi .z-tool-overlay{z-index:30}.pi .z-tooltip{z-index:150}.pi .z-tray{z-index:120}.pi .m-auto{margin:auto}.pi .mx-20{margin-left:20px;margin-right:20px}.pi .mx-8{margin-left:8px;margin-right:8px}.pi .mx-auto{margin-left:auto;margin-right:auto}.pi .my-20{margin-bottom:20px;margin-top:20px}.pi .my-4{margin-bottom:4px;margin-top:4px}.pi .my-6{margin-bottom:6px;margin-top:6px}.pi .my-8{margin-bottom:8px;margin-top:8px}.pi .my-auto{margin-bottom:auto;margin-top:auto}.pi .-ml-1{margin-left:-1px}.pi .-ml-10{margin-left:-10px}.pi .-ml-12{margin-left:-12px}.pi .-ml-3{margin-left:-3px}.pi .-ml-4{margin-left:-4px}.pi .-ml-6{margin-left:-6px}.pi .-mr-4{margin-right:-4px}.pi .-mr-8{margin-right:-8px}.pi .mb-1{margin-bottom:1px}.pi .mb-10{margin-bottom:10px}.pi .mb-16{margin-bottom:16px}.pi .mb-2{margin-bottom:2px}.pi .mb-20{margin-bottom:20px}.pi .mb-24{margin-bottom:24px}.pi .mb-4{margin-bottom:4px}.pi .mb-6{margin-bottom:6px}.pi .mb-8{margin-bottom:8px}.pi .ml-10{margin-left:10px}.pi .ml-12{margin-left:12px}.pi .ml-4{margin-left:4px}.pi .ml-6{margin-left:6px}.pi .ml-8{margin-left:8px}.pi .ml-auto{margin-left:auto}.pi .mr-10{margin-right:10px}.pi .mr-16{margin-right:16px}.pi .mr-20{margin-right:20px}.pi .mr-4{margin-right:4px}.pi .mr-5{margin-right:5px}.pi .mr-6{margin-right:6px}.pi .mr-8{margin-right:8px}.pi .mr-auto{margin-right:auto}.pi .mt-0{margin-top:0}.pi .mt-10{margin-top:10px}.pi .mt-14{margin-top:14px}.pi .mt-20{margin-top:20px}.pi .mt-24{margin-top:24px}.pi .mt-4{margin-top:4px}.pi .mt-6{margin-top:6px}.pi .box-content{box-sizing:content-box}.pi .block{display:block}.pi .inline-block{display:inline-block}.pi .inline{display:inline}.pi .flex{display:flex}.pi .inline-flex{display:inline-flex}.pi .grid{display:grid}.pi .contents{display:contents}.pi .hidden{display:none}.pi .aspect-square{aspect-ratio:1/1}.pi .h-1{height:1px}.pi .h-12{height:12px}.pi .h-128{height:128px}.pi .h-14{height:14px}.pi .h-16{height:16px}.pi .h-18{height:18px}.pi .h-2{height:2px}.pi .h-2\\/4{height:50%}.pi .h-20{height:20px}.pi .h-22{height:22px}.pi .h-24{height:24px}.pi .h-26{height:26px}.pi .h-28{height:28px}.pi .h-3{height:3px}.pi .h-30{height:30px}.pi .h-32{height:32px}.pi .h-36{height:36px}.pi .h-38{height:2.375rem}.pi .h-4{height:4px}.pi .h-40{height:40px}.pi .h-42{height:42px}.pi .h-48{height:48px}.pi .h-50{height:50px}.pi .h-56{height:56px}.pi .h-6{height:6px}.pi .h-60{height:60px}.pi .h-64{height:64px}.pi .h-68{height:68px}.pi .h-8{height:8px}.pi .h-80{height:80px}.pi .h-84{height:84px}.pi .h-92{height:92px}.pi .h-\\[54px\\]{height:54px}.pi .h-font{height:1em}.pi .h-full{height:100%}.pi .h-px{height:1px}.pi .h-screen{height:100dvh}.pi .max-h-100{max-height:6.25rem}.pi .max-h-\\[calc\\(100\\%-40px\\)\\]{max-height:calc(100% - 40px)}.pi .max-h-\\[calc\\(100vh-90px\\)\\]{max-height:calc(100vh - 90px)}.pi .max-h-dialog{max-height:calc(var(--be-viewport-height, 100vh)*.9)}.pi .max-h-full{max-height:100%}.pi .max-h-inherit{max-height:inherit}.pi .max-h-tray{max-height:calc(var(--be-viewport-height, 100vh)*.9)}.pi .min-h-24{min-height:24px}.pi .min-h-30{min-height:30px}.pi .min-h-36{min-height:36px}.pi .min-h-42{min-height:42px}.pi .min-h-50{min-height:50px}.pi .min-h-60{min-height:60px}.pi .min-h-86{min-height:86px}.pi .\\!w-auto{width:auto!important}.pi .w-1\\/2{width:50%}.pi .w-110{width:110px}.pi .w-12{width:12px}.pi .w-1280{width:80rem}.pi .w-14{width:14px}.pi .w-144{width:144px}.pi .w-16{width:16px}.pi .w-18{width:18px}.pi .w-2{width:2px}.pi .w-20{width:20px}.pi .w-22{width:22px}.pi .w-224{width:224px}.pi .w-24{width:24px}.pi .w-256{width:256px}.pi .w-26{width:26px}.pi .w-28{width:28px}.pi .w-280{width:17.5rem}.pi .w-30{width:30px}.pi .w-32{width:32px}.pi .w-320{width:320px}.pi .w-36{width:36px}.pi .w-38{width:2.375rem}.pi .w-384{width:384px}.pi .w-40{width:40px}.pi .w-42{width:42px}.pi .w-440{width:27.5rem}.pi .w-46{width:2.875rem}.pi .w-50{width:50px}.pi .w-56{width:56px}.pi .w-60{width:60px}.pi .w-620{width:38.75rem}.pi .w-64{width:64px}.pi .w-68{width:68px}.pi .w-780{width:48.75rem}.pi .w-8{width:8px}.pi .w-80{width:80px}.pi .w-850{width:53.125rem}.pi .w-96{width:96px}.pi .w-\\[4ch\\]{width:4ch}.pi .w-auto{width:auto}.pi .w-font{width:1em}.pi .w-full{width:100%}.pi .w-max{width:-moz-max-content;width:max-content}.pi .w-min{width:-moz-min-content;width:min-content}.pi .w-px{width:1px}.pi .w-screen{width:100vw}.pi .min-w-0{min-width:0}.pi .min-w-128{min-width:128px}.pi .min-w-180{min-width:11.25rem}.pi .min-w-192{min-width:192px}.pi .min-w-288{min-width:288px}.pi .min-w-30{min-width:30px}.pi .min-w-4{min-width:4px}.pi .min-w-42{min-width:42px}.pi .min-w-92{min-width:92px}.pi .min-w-min{min-width:-moz-min-content;min-width:min-content}.pi .max-w-112{max-width:112px}.pi .max-w-240{max-width:240px}.pi .max-w-288{max-width:288px}.pi .max-w-320{max-width:320px}.pi .max-w-375{max-width:375px}.pi .max-w-500{max-width:31.25rem}.pi .max-w-\\[90\\%\\]{max-width:90%}.pi .max-w-\\[calc\\(100\\%-40px\\)\\]{max-width:calc(100% - 40px)}.pi .max-w-\\[calc\\(100vw-90px\\)\\]{max-width:calc(100vw - 90px)}.pi .max-w-dialog{max-width:calc(var(--be-viewport-width, 100vw)*.9)}.pi .max-w-full{max-width:100%}.pi .max-w-max{max-width:-moz-max-content;max-width:max-content}.pi .flex-\\[1_1_60px\\]{flex:1 1 60px}.pi .flex-auto{flex:1 1 auto}.pi .flex-shrink-0,.pi .shrink-0{flex-shrink:0}.pi .origin-\\[0_55\\%\\]{transform-origin:0 55%}.pi .origin-\\[100\\%\\]{transform-origin:100%}.pi .-translate-x-1\\/2{--tw-translate-x:-50%}.pi .-translate-x-1\\/2,.pi .-translate-y-1\\/2{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.pi .-translate-y-1\\/2{--tw-translate-y:-50%}.pi .rotate-0{--tw-rotate:0deg}.pi .rotate-0,.pi .rotate-180{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.pi .rotate-180{--tw-rotate:180deg}.pi .rotate-45{--tw-rotate:45deg}.pi .rotate-45,.pi .rotate-90{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.pi .rotate-90{--tw-rotate:90deg}.pi .scale-y-\\[0\\.6\\]{--tw-scale-y:.6}.pi .scale-y-\\[0\\.6\\],.pi .transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.pi .cursor-default{cursor:default}.pi .cursor-move{cursor:move}.pi .cursor-nesw-resize{cursor:nesw-resize}.pi .cursor-not-allowed{cursor:not-allowed}.pi .cursor-nwse-resize{cursor:nwse-resize}.pi .cursor-pointer{cursor:pointer}.pi .cursor-se-resize{cursor:se-resize}.pi .cursor-sw-resize{cursor:sw-resize}.pi .touch-none{touch-action:none}.pi .select-none{-webkit-user-select:none;-moz-user-select:none;user-select:none}.pi .resize{resize:both}.pi .appearance-none{-webkit-appearance:none;-moz-appearance:none;appearance:none}.pi .grid-cols-5-min-content{grid-template-columns:repeat(5,min-content)}.pi .flex-row{flex-direction:row}.pi .flex-col{flex-direction:column}.pi .flex-col-reverse{flex-direction:column-reverse}.pi .flex-wrap{flex-wrap:wrap}.pi .flex-nowrap{flex-wrap:nowrap}.pi .items-start{align-items:flex-start}.pi .items-end{align-items:flex-end}.pi .items-center{align-items:center}.pi .items-stretch{align-items:stretch}.pi .justify-start{justify-content:flex-start}.pi .justify-center{justify-content:center}.pi .justify-between{justify-content:space-between}.pi .gap-10{gap:10px}.pi .gap-14{gap:14px}.pi .gap-16{gap:16px}.pi .gap-18{gap:18px}.pi .gap-20{gap:20px}.pi .gap-36{gap:36px}.pi .gap-4{gap:4px}.pi .gap-40{gap:40px}.pi .gap-6{gap:6px}.pi .gap-8{gap:8px}.pi .space-y-10>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-bottom:calc(10px*var(--tw-space-y-reverse));margin-top:calc(10px*(1 - var(--tw-space-y-reverse)))}.pi .overflow-auto{overflow:auto}.pi .overflow-hidden{overflow:hidden}.pi .overflow-x-auto{overflow-x:auto}.pi .overflow-y-auto{overflow-y:auto}.pi .overflow-x-hidden{overflow-x:hidden}.pi .overflow-y-hidden{overflow-y:hidden}.pi .overscroll-contain{overscroll-behavior:contain}.pi .truncate{overflow:hidden;white-space:nowrap}.pi .overflow-ellipsis,.pi .text-ellipsis,.pi .truncate{text-overflow:ellipsis}.pi .whitespace-normal{white-space:normal}.pi .whitespace-nowrap{white-space:nowrap}.pi .break-words{overflow-wrap:break-word}.pi .rounded{border-radius:4px}.pi .rounded-2xl{border-radius:16px}.pi .rounded-3xl{border-radius:24px}.pi .rounded-button{border-radius:var(--be-button-radius,.25rem)}.pi .rounded-full{border-radius:9999px}.pi .rounded-input{border-radius:var(--be-input-radius,.25rem)}.pi .rounded-lg{border-radius:8px}.pi .rounded-md{border-radius:6px}.pi .rounded-none{border-radius:0}.pi .rounded-panel{border-radius:var(--be-panel-radius,.25rem)}.pi .rounded-xl{border-radius:12px}.pi .rounded-l{border-bottom-left-radius:4px;border-top-left-radius:4px}.pi .rounded-l-full{border-bottom-left-radius:9999px;border-top-left-radius:9999px}.pi .rounded-l-input{border-bottom-left-radius:var(--be-input-radius,.25rem);border-top-left-radius:var(--be-input-radius,.25rem)}.pi .rounded-l-none{border-bottom-left-radius:0;border-top-left-radius:0}.pi .rounded-r-full{border-bottom-right-radius:9999px;border-top-right-radius:9999px}.pi .rounded-r-input{border-bottom-right-radius:var(--be-input-radius,.25rem);border-top-right-radius:var(--be-input-radius,.25rem)}.pi .rounded-r-none{border-bottom-right-radius:0;border-top-right-radius:0}.pi .rounded-t{border-top-left-radius:4px;border-top-right-radius:4px}.pi .rounded-bl-none{border-bottom-left-radius:0}.pi .rounded-br-none{border-bottom-right-radius:0}.pi .rounded-tl-none{border-top-left-radius:0}.pi .rounded-tr-none{border-top-right-radius:0}.pi .border{border-width:1px}.pi .border-2{border-width:2px}.pi .border-4{border-width:4px}.pi .border-\\[3px\\]{border-width:3px}.pi .border-y{border-top-width:1px}.pi .border-b,.pi .border-y{border-bottom-width:1px}.pi .border-b-4{border-bottom-width:4px}.pi .border-l{border-left-width:1px}.pi .border-l-4{border-left-width:4px}.pi .border-r{border-right-width:1px}.pi .border-r-4{border-right-width:4px}.pi .border-t{border-top-width:1px}.pi .border-t-4{border-top-width:4px}.pi .border-dotted{border-style:dotted}.pi .border-none{border-style:none}.pi .border-background{--tw-border-opacity:1;border-color:rgb(var(--be-background)/var(--tw-border-opacity))}.pi .border-bg-alt{--tw-border-opacity:1;border-color:rgb(var(--be-background-alt)/var(--tw-border-opacity))}.pi .border-chip{--tw-border-opacity:1;border-color:rgb(var(--be-background-chip)/var(--tw-border-opacity))}.pi .border-danger{--tw-border-opacity:1;border-color:rgb(239 68 68/var(--tw-border-opacity))}.pi .border-danger\\/50{border-color:#ef444480}.pi .border-divider{border-color:rgb(var(--be-foreground-base)/var(--be-divider-opacity))}.pi .border-paper{--tw-border-opacity:1;border-color:rgb(var(--be-paper)/var(--tw-border-opacity))}.pi .border-positive\\/50{border-color:#22c55e80}.pi .border-primary{--tw-border-opacity:1;border-color:rgb(var(--be-primary)/var(--tw-border-opacity))}.pi .border-primary\\/50{border-color:rgb(var(--be-primary)/.5)}.pi .border-text-muted{border-color:rgb(var(--be-foreground-base)/var(--be-text-muted-opacity))}.pi .border-transparent{border-color:transparent}.pi .border-white{--tw-border-opacity:1;border-color:rgb(255 255 255/var(--tw-border-opacity))}.pi .border-white\\/50{border-color:#ffffff80}.pi .border-b-bg{--tw-border-opacity:1;border-bottom-color:rgb(var(--be-background)/var(--tw-border-opacity))}.pi .border-b-transparent{border-bottom-color:transparent}.pi .border-r-transparent{border-right-color:transparent}.pi .bg{--tw-bg-opacity:1;background-color:rgb(var(--be-background)/var(--tw-bg-opacity))}.pi .bg-alt{--tw-bg-opacity:1;background-color:rgb(var(--be-background-alt)/var(--tw-bg-opacity))}.pi .bg-background{--tw-bg-opacity:1;background-color:rgb(var(--be-background)/var(--tw-bg-opacity))}.pi .bg-background\\/70{background-color:rgb(var(--be-background)/.7)}.pi .bg-background\\/80{background-color:rgb(var(--be-background)/.8)}.pi .bg-black\\/50{background-color:#00000080}.pi .bg-black\\/80{background-color:#000c}.pi .bg-chip{--tw-bg-opacity:1;background-color:rgb(var(--be-background-chip)/var(--tw-bg-opacity))}.pi .bg-controls{--tw-bg-opacity:1;background-color:rgb(50 50 50/var(--tw-bg-opacity))}.pi .bg-danger{--tw-bg-opacity:1;background-color:rgb(239 68 68/var(--tw-bg-opacity))}.pi .bg-danger-lighter{--tw-bg-opacity:1;background-color:rgb(254 202 202/var(--tw-bg-opacity))}.pi .bg-divider{background-color:rgb(var(--be-foreground-base)/var(--be-divider-opacity))}.pi .bg-fg-base\\/4{background-color:rgb(var(--be-foreground-base)/4%)}.pi .bg-focus{background-color:rgb(var(--be-foreground-base)/var(--be-focus-opacity))}.pi .bg-inherit{background-color:inherit}.pi .bg-paper{--tw-bg-opacity:1;background-color:rgb(var(--be-paper)/var(--tw-bg-opacity))}.pi .bg-positive{--tw-bg-opacity:1;background-color:rgb(34 197 94/var(--tw-bg-opacity))}.pi .bg-positive-lighter{--tw-bg-opacity:1;background-color:rgb(187 247 208/var(--tw-bg-opacity))}.pi .bg-primary{--tw-bg-opacity:1;background-color:rgb(var(--be-primary)/var(--tw-bg-opacity))}.pi .bg-primary-dark{--tw-bg-opacity:1;background-color:rgb(var(--be-primary-dark)/var(--tw-bg-opacity))}.pi .bg-primary-light{--tw-bg-opacity:1;background-color:rgb(var(--be-primary-light)/var(--tw-bg-opacity))}.pi .bg-primary\\/focus{background-color:rgb(var(--be-primary)/var(--be-focus-opacity))}.pi .bg-primary\\/selected{background-color:rgb(var(--be-primary)/var(--be-selected-opacity))}.pi .bg-slider-disabled{--tw-bg-opacity:1;background-color:rgb(189 189 189/var(--tw-bg-opacity))}.pi .bg-slider-disabled\\/60{background-color:#bdbdbd99}.pi .bg-toast{--tw-bg-opacity:1;background-color:rgb(50 50 50/var(--tw-bg-opacity))}.pi .bg-transparent{background-color:transparent}.pi .bg-warning{--tw-bg-opacity:1;background-color:rgb(243 164 50/var(--tw-bg-opacity))}.pi .bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity))}.pi .bg-white\\/50{background-color:#ffffff80}.pi .bg-opacity-95{--tw-bg-opacity:.95}.pi .bg-no-repeat{background-repeat:no-repeat}.pi .fill-current{fill:currentColor}.pi .fill-transparent{fill:transparent}.pi .stroke-current{stroke:currentColor}.pi .object-contain{-o-object-fit:contain;object-fit:contain}.pi .object-cover{-o-object-fit:cover;object-fit:cover}.pi .p-0{padding:0}.pi .p-10{padding:10px}.pi .p-14{padding:14px}.pi .p-16{padding:16px}.pi .p-18{padding:18px}.pi .p-2{padding:2px}.pi .p-20{padding:20px}.pi .p-4{padding:4px}.pi .p-40{padding:40px}.pi .p-6{padding:6px}.pi .p-8{padding:8px}.pi .px-10{padding-left:10px;padding-right:10px}.pi .px-12{padding-left:12px;padding-right:12px}.pi .px-14{padding-left:14px;padding-right:14px}.pi .px-16{padding-left:16px;padding-right:16px}.pi .px-18{padding-left:18px;padding-right:18px}.pi .px-20{padding-left:20px;padding-right:20px}.pi .px-22{padding-left:22px;padding-right:22px}.pi .px-24{padding-left:24px;padding-right:24px}.pi .px-26{padding-left:26px;padding-right:26px}.pi .px-32{padding-left:32px;padding-right:32px}.pi .px-4{padding-left:4px;padding-right:4px}.pi .px-5vw{padding-left:5vw;padding-right:5vw}.pi .px-6{padding-left:6px;padding-right:6px}.pi .px-8{padding-left:8px;padding-right:8px}.pi .py-10{padding-bottom:10px;padding-top:10px}.pi .py-12{padding-bottom:12px;padding-top:12px}.pi .py-14{padding-bottom:14px;padding-top:14px}.pi .py-2{padding-bottom:2px;padding-top:2px}.pi .py-20{padding-bottom:20px;padding-top:20px}.pi .py-3{padding-bottom:3px;padding-top:3px}.pi .py-4{padding-bottom:4px;padding-top:4px}.pi .py-5{padding-bottom:5px;padding-top:5px}.pi .py-6{padding-bottom:6px;padding-top:6px}.pi .py-8{padding-bottom:8px;padding-top:8px}.pi .py-\\[9px\\]{padding-bottom:9px;padding-top:9px}.pi .pb-10{padding-bottom:10px}.pi .pb-12{padding-bottom:12px}.pi .pb-14{padding-bottom:14px}.pi .pb-16{padding-bottom:16px}.pi .pb-18{padding-bottom:18px}.pi .pb-20{padding-bottom:20px}.pi .pb-4{padding-bottom:4px}.pi .pb-8{padding-bottom:8px}.pi .pb-safe-area{padding-bottom:env(safe-area-inset-bottom)}.pi .pl-10{padding-left:10px}.pi .pl-12{padding-left:12px}.pi .pl-14{padding-left:14px}.pi .pl-16{padding-left:16px}.pi .pl-18{padding-left:18px}.pi .pl-28{padding-left:28px}.pi .pl-46{padding-left:2.875rem}.pi .pl-54{padding-left:3.375rem}.pi .pl-8{padding-left:8px}.pi .pr-10{padding-right:10px}.pi .pr-12{padding-right:12px}.pi .pr-18{padding-right:18px}.pi .pr-24{padding-right:24px}.pi .pr-28{padding-right:28px}.pi .pr-46{padding-right:2.875rem}.pi .pr-54{padding-right:3.375rem}.pi .pr-6{padding-right:6px}.pi .pr-8{padding-right:8px}.pi .pt-10{padding-top:10px}.pi .pt-12{padding-top:12px}.pi .pt-14{padding-top:14px}.pi .pt-16{padding-top:16px}.pi .pt-20{padding-top:20px}.pi .pt-24{padding-top:24px}.pi .pt-4{padding-top:4px}.pi .pt-40{padding-top:40px}.pi .pt-6{padding-top:6px}.pi .text-left{text-align:left}.pi .text-center{text-align:center}.pi .text-right{text-align:right}.pi .align-middle{vertical-align:middle}.pi .text-base{font-size:16px;line-height:24px}.pi .text-lg{font-size:18px;line-height:28px}.pi .text-sm{font-size:14px;line-height:20px}.pi .text-xl{font-size:20px;line-height:28px}.pi .text-xs{font-size:12px;line-height:16px}.pi .font-bold{font-weight:700}.pi .font-medium{font-weight:500}.pi .font-semibold{font-weight:600}.pi .uppercase{text-transform:uppercase}.pi .capitalize{text-transform:capitalize}.pi .italic{font-style:italic}.pi .tabular-nums{--tw-numeric-spacing:tabular-nums;font-variant-numeric:var(--tw-ordinal) var(--tw-slashed-zero) var(--tw-numeric-figure) var(--tw-numeric-spacing) var(--tw-numeric-fraction)}.pi .leading-5{line-height:1.25rem}.pi .leading-none{line-height:1}.pi .tracking-wide{letter-spacing:.025em}.pi .\\!text{color:rgb(var(--be-foreground-base)/var(--be-text-main-opacity))!important}.pi .text{color:rgb(var(--be-foreground-base)/var(--be-text-main-opacity))}.pi .text-black{--tw-text-opacity:1;color:rgb(0 0 0/var(--tw-text-opacity))}.pi .text-black\\/30{color:#0000004d}.pi .text-danger{--tw-text-opacity:1;color:rgb(239 68 68/var(--tw-text-opacity))}.pi .text-danger-darker{--tw-text-opacity:1;color:rgb(153 27 27/var(--tw-text-opacity))}.pi .text-disabled{color:rgb(var(--be-foreground-base)/var(--be-disabled-fg-opacity))}.pi .text-link{--tw-text-opacity:1;color:rgb(var(--be-link-color,var(--be-primary))/var(--tw-text-opacity))}.pi .text-main{color:rgb(var(--be-foreground-base)/var(--be-text-main-opacity))}.pi .text-muted{color:rgb(var(--be-foreground-base)/var(--be-text-muted-opacity))}.pi .text-on-primary{--tw-text-opacity:1;color:rgb(var(--be-on-primary)/var(--tw-text-opacity))}.pi .text-positive{--tw-text-opacity:1;color:rgb(34 197 94/var(--tw-text-opacity))}.pi .text-positive-darker{--tw-text-opacity:1;color:rgb(22 101 52/var(--tw-text-opacity))}.pi .text-primary{--tw-text-opacity:1;color:rgb(var(--be-primary)/var(--tw-text-opacity))}.pi .text-white{--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity))}.pi .underline{text-decoration-line:underline}.pi .no-underline{text-decoration-line:none}.pi .caret-transparent{caret-color:transparent}.pi .opacity-0{opacity:0}.pi .opacity-100{opacity:1}.pi .opacity-70{opacity:.7}.pi .opacity-80{opacity:.8}.pi .opacity-90{opacity:.9}.pi .shadow{--tw-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px -1px rgba(0,0,0,.1);--tw-shadow-colored:0 1px 3px 0 var(--tw-shadow-color),0 1px 2px -1px var(--tw-shadow-color)}.pi .shadow,.pi .shadow-2xl{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.pi .shadow-2xl{--tw-shadow:0 25px 50px -12px rgba(0,0,0,.25);--tw-shadow-colored:0 25px 50px -12px var(--tw-shadow-color)}.pi .shadow-lg{--tw-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -4px rgba(0,0,0,.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color)}.pi .shadow-lg,.pi .shadow-md{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.pi .shadow-md{--tw-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -2px rgba(0,0,0,.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color),0 2px 4px -2px var(--tw-shadow-color)}.pi .shadow-sm{--tw-shadow:0 1px 2px 0 rgba(0,0,0,.05);--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color)}.pi .shadow-sm,.pi .shadow-xl{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.pi .shadow-xl{--tw-shadow:0 20px 25px -5px rgba(0,0,0,.1),0 8px 10px -6px rgba(0,0,0,.1);--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color),0 8px 10px -6px var(--tw-shadow-color)}.pi .outline-none{outline:2px solid transparent;outline-offset:2px}.pi .outline{outline-color:rgb(var(--be-primary-lighter)/1);outline-style:solid;outline-width:2px}.pi .ring{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(4px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.pi .ring-inset{--tw-ring-inset:inset}.pi .blur{--tw-blur:blur(8px)}.pi .blur,.pi .grayscale{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.pi .grayscale{--tw-grayscale:grayscale(100%)}.pi .invert{--tw-invert:invert(100%)}.pi .invert,.pi .sepia{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.pi .sepia{--tw-sepia:sepia(100%)}.pi .filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.pi .backdrop-blur-sm{--tw-backdrop-blur:blur(4px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.pi .transition{transition-duration:.15s;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .transition-all{transition-duration:.15s;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .transition-button{transition-duration:.15s;transition-property:background-color,box-shadow,border-color,color;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .transition-colors{transition-duration:.15s;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .transition-opacity{transition-duration:.15s;transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .transition-shadow{transition-duration:.15s;transition-property:box-shadow;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .transition-transform{transition-duration:.15s;transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .transition-width{transition-duration:.15s;transition-property:width;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .duration-100{transition-duration:.1s}.pi .duration-200{transition-duration:.2s}.pi .will-change-transform{will-change:transform}.pi .icon-2xs{font-size:.75rem}.pi .icon-xs{font-size:1rem}.pi .icon-sm{font-size:1.25rem}.pi .icon-md{font-size:1.5rem}.pi .icon-lg{font-size:2.1875rem}.pi .icon-xl{font-size:2.6875rem}.pi .no-tap-highlight{-webkit-tap-highlight-color:transparent}@media only screen and (min-device-width:768px){.pi .tiny-scrollbar{scrollbar-color:rgba(0,0,0,.2) transparent;scrollbar-width:thin}.pi .tiny-scrollbar::-webkit-scrollbar{background-color:transparent;height:6px;width:6px}.pi .tiny-scrollbar::-webkit-scrollbar-thumb{background-color:rgb(var(--be-foreground-base)/.2);border-radius:10px}.pi .tiny-scrollbar::-webkit-scrollbar-track-piece:start{background:transparent}.pi .tiny-scrollbar::-webkit-scrollbar-track-piece:end{background:transparent}}.pi .hide-scrollbar{-ms-overflow-style:none;scrollbar-width:none}.pi .hide-scrollbar::-webkit-scrollbar{background:transparent;display:none;height:0;width:0}.pi .svg-icon{display:inline-block;flex-shrink:0;-webkit-user-select:none;-moz-user-select:none;user-select:none;fill:currentColor;transition-duration:.15s;transition-property:transform,fill;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .cropzone:not(.moving) .cropzone-transition{transition-duration:.15s;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .first-letter\\:capitalize:first-letter{text-transform:capitalize}.pi .file\\:mr-10::file-selector-button{margin-right:10px}.pi .file\\:h-24::file-selector-button{height:24px}.pi .file\\:rounded::file-selector-button{border-radius:4px}.pi .file\\:border-none::file-selector-button{border-style:none}.pi .file\\:bg-primary::file-selector-button{--tw-bg-opacity:1;background-color:rgb(var(--be-primary)/var(--tw-bg-opacity))}.pi .file\\:px-10::file-selector-button{padding-left:10px;padding-right:10px}.pi .file\\:text-sm::file-selector-button{font-size:14px;line-height:20px}.pi .file\\:font-semibold::file-selector-button{font-weight:600}.pi .file\\:text-on-primary::file-selector-button{--tw-text-opacity:1;color:rgb(var(--be-on-primary)/var(--tw-text-opacity))}.pi .before\\:z-10:before{content:var(--tw-content);z-index:10}.pi .before\\:block:before{content:var(--tw-content);display:block}.pi .before\\:h-12:before{content:var(--tw-content);height:12px}.pi .before\\:h-14:before{content:var(--tw-content);height:14px}.pi .before\\:h-18:before{content:var(--tw-content);height:18px}.pi .before\\:h-22:before{content:var(--tw-content);height:22px}.pi .before\\:h-28:before{content:var(--tw-content);height:28px}.pi .before\\:h-full:before{content:var(--tw-content);height:100%}.pi .before\\:w-12:before{content:var(--tw-content);width:12px}.pi .before\\:w-14:before{content:var(--tw-content);width:14px}.pi .before\\:w-18:before{content:var(--tw-content);width:18px}.pi .before\\:w-22:before{content:var(--tw-content);width:22px}.pi .before\\:w-28:before{content:var(--tw-content);width:28px}.pi .before\\:w-full:before{content:var(--tw-content);width:100%}.pi .before\\:translate-x-2:before{--tw-translate-x:2px}.pi .before\\:scale-10:before,.pi .before\\:translate-x-2:before{content:var(--tw-content);transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.pi .before\\:scale-10:before{--tw-scale-x:.1;--tw-scale-y:.1}.pi .before\\:rounded-3xl:before{border-radius:24px;content:var(--tw-content)}.pi .before\\:rounded-full:before{border-radius:9999px;content:var(--tw-content)}.pi .before\\:border:before{border-width:1px;content:var(--tw-content)}.pi .before\\:bg-primary:before{content:var(--tw-content);--tw-bg-opacity:1;background-color:rgb(var(--be-primary)/var(--tw-bg-opacity))}.pi .before\\:bg-white:before{content:var(--tw-content);--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity))}.pi .before\\:opacity-0:before{content:var(--tw-content);opacity:0}.pi .before\\:transition:before{content:var(--tw-content);transition-duration:.15s;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .before\\:transition-transform:before{content:var(--tw-content);transition-duration:.15s;transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1)}.pi .before\\:duration-200:before{content:var(--tw-content);transition-duration:.2s}.pi .after\\:pointer-events-none:after{content:var(--tw-content);pointer-events:none}.pi .after\\:absolute:after{content:var(--tw-content);position:absolute}.pi .after\\:inset-0:after{content:var(--tw-content);top:0;right:0;bottom:0;left:0}.pi .checked\\:border-danger:checked{--tw-border-opacity:1;border-color:rgb(239 68 68/var(--tw-border-opacity))}.pi .checked\\:border-primary:checked{--tw-border-opacity:1;border-color:rgb(var(--be-primary)/var(--tw-border-opacity))}.pi .checked\\:bg-danger:checked{--tw-bg-opacity:1;background-color:rgb(239 68 68/var(--tw-bg-opacity))}.pi .checked\\:bg-primary:checked{--tw-bg-opacity:1;background-color:rgb(var(--be-primary)/var(--tw-bg-opacity))}.pi .checked\\:before\\:translate-x-14:checked:before{--tw-translate-x:14px}.pi .checked\\:before\\:translate-x-14:checked:before,.pi .checked\\:before\\:translate-x-20:checked:before{content:var(--tw-content);transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.pi .checked\\:before\\:translate-x-20:checked:before{--tw-translate-x:20px}.pi .checked\\:before\\:translate-x-24:checked:before{--tw-translate-x:24px}.pi .checked\\:before\\:translate-x-24:checked:before,.pi .checked\\:before\\:translate-x-30:checked:before{content:var(--tw-content);transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.pi .checked\\:before\\:translate-x-30:checked:before{--tw-translate-x:30px}.pi .checked\\:before\\:translate-x-36:checked:before{--tw-translate-x:36px}.pi .checked\\:before\\:scale-\\[\\.65\\]:checked:before,.pi .checked\\:before\\:translate-x-36:checked:before{content:var(--tw-content);transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.pi .checked\\:before\\:scale-\\[\\.65\\]:checked:before{--tw-scale-x:.65;--tw-scale-y:.65}.pi .checked\\:before\\:border-white:checked:before{content:var(--tw-content);--tw-border-opacity:1;border-color:rgb(255 255 255/var(--tw-border-opacity))}.pi .checked\\:before\\:opacity-100:checked:before{content:var(--tw-content);opacity:1}.pi .focus-within\\:border-primary\\/60:focus-within{border-color:rgb(var(--be-primary)/.6)}.pi .focus-within\\:ring:focus-within{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(4px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.pi .focus-within\\:ring-primary\\/focus:focus-within{--tw-ring-color:rgb(var(--be-primary)/var(--be-focus-opacity))}.pi .hover\\:scale-110:hover{--tw-scale-x:1.1;--tw-scale-y:1.1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.pi .hover\\:border-chip\\/90:hover{border-color:rgb(var(--be-background-chip)/.9)}.pi .hover\\:border-danger:hover{--tw-border-opacity:1;border-color:rgb(239 68 68/var(--tw-border-opacity))}.pi .hover\\:border-danger\\/90:hover{border-color:#ef4444e6}.pi .hover\\:border-paper\\/90:hover{border-color:rgb(var(--be-paper)/.9)}.pi .hover\\:border-positive:hover{--tw-border-opacity:1;border-color:rgb(34 197 94/var(--tw-border-opacity))}.pi .hover\\:border-primary:hover{--tw-border-opacity:1;border-color:rgb(var(--be-primary)/var(--tw-border-opacity))}.pi .hover\\:border-primary-dark:hover{--tw-border-opacity:1;border-color:rgb(var(--be-primary-dark)/var(--tw-border-opacity))}.pi .hover\\:bg-chip\\/90:hover{background-color:rgb(var(--be-background-chip)/.9)}.pi .hover\\:bg-danger\\/4:hover{background-color:#ef44440a}.pi .hover\\:bg-danger\\/90:hover{background-color:#ef4444e6}.pi .hover\\:bg-fg-base\\/15:hover{background-color:rgb(var(--be-foreground-base)/15%)}.pi .hover\\:bg-hover:hover{background-color:rgb(var(--be-foreground-base)/var(--be-hover-opacity))}.pi .hover\\:bg-paper\\/90:hover{background-color:rgb(var(--be-paper)/.9)}.pi .hover\\:bg-positive\\/4:hover{background-color:#22c55e0a}.pi .hover\\:bg-primary-dark:hover{--tw-bg-opacity:1;background-color:rgb(var(--be-primary-dark)/var(--tw-bg-opacity))}.pi .hover\\:bg-primary\\/4:hover{background-color:rgb(var(--be-primary)/4%)}.pi .hover\\:bg-primary\\/focus:hover{background-color:rgb(var(--be-primary)/var(--be-focus-opacity))}.pi .hover\\:bg-primary\\/hover:hover{background-color:rgb(var(--be-primary)/var(--be-hover-opacity))}.pi .hover\\:bg-white:hover{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity))}.pi .hover\\:bg-white\\/20:hover{background-color:#fff3}.pi .hover\\:bg-white\\/hover:hover{background-color:rgb(255 255 255/var(--be-hover-opacity))}.pi .hover\\:text-main:hover{color:rgb(var(--be-foreground-base)/var(--be-text-main-opacity))}.pi .hover\\:text-primary-dark:hover{--tw-text-opacity:1;color:rgb(var(--be-primary-dark)/var(--tw-text-opacity))}.pi .hover\\:underline:hover{text-decoration-line:underline}.pi .hover\\:shadow-md:hover{--tw-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -2px rgba(0,0,0,.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color),0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.pi .before\\:hover\\:bg-primary-dark:hover:before{content:var(--tw-content);--tw-bg-opacity:1;background-color:rgb(var(--be-primary-dark)/var(--tw-bg-opacity))}.pi .hover\\:after\\:bg-black\\/5:hover:after{background-color:#0000000d;content:var(--tw-content)}.pi .checked\\:hover\\:border-primary-dark:hover:checked{--tw-border-opacity:1;border-color:rgb(var(--be-primary-dark)/var(--tw-border-opacity))}.pi .focus\\:border-danger\\/60:focus{border-color:#ef444499}.pi .focus\\:border-primary\\/60:focus{border-color:rgb(var(--be-primary)/.6)}.pi .focus\\:bg-primary:focus{--tw-bg-opacity:1;background-color:rgb(var(--be-primary)/var(--tw-bg-opacity))}.pi .focus\\:text-on-primary:focus{--tw-text-opacity:1;color:rgb(var(--be-on-primary)/var(--tw-text-opacity))}.pi .focus\\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.pi .focus\\:ring:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(4px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.pi .focus\\:ring-danger\\/focus:focus{--tw-ring-color:rgb(239 68 68/var(--be-focus-opacity))}.pi .focus\\:ring-primary\\/focus:focus{--tw-ring-color:rgb(var(--be-primary)/var(--be-focus-opacity))}.pi .focus\\:after\\:bg-black\\/10:focus:after{background-color:#0000001a;content:var(--tw-content)}.pi .focus-visible\\:bg-primary\\/focus:focus-visible{background-color:rgb(var(--be-primary)/var(--be-focus-opacity))}.pi .focus-visible\\:outline:focus-visible{outline-color:rgb(var(--be-primary-lighter)/1);outline-style:solid;outline-width:2px}.pi .focus-visible\\:outline-primary-light:focus-visible{outline-color:rgb(var(--be-primary-light)/1)}.pi .focus-visible\\:ring:focus-visible{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(4px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.pi .focus-visible\\:ring-2:focus-visible{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.pi .focus-visible\\:ring-offset-2:focus-visible{--tw-ring-offset-width:2px}.pi .disabled\\:pointer-events-none:disabled{pointer-events:none}.pi .disabled\\:cursor-default:disabled{cursor:default}.pi .disabled\\:border-disabled-bg:disabled{border-color:rgb(var(--be-foreground-base)/var(--be-disabled-bg-opacity))}.pi .disabled\\:border-disabled-fg:disabled{border-color:rgb(var(--be-foreground-base)/var(--be-disabled-fg-opacity))}.pi .disabled\\:border-transparent:disabled{border-color:transparent}.pi .disabled\\:border-white\\/70:disabled{border-color:#ffffffb3}.pi .disabled\\:border-r-transparent:disabled{border-right-color:transparent}.pi .disabled\\:bg-disabled:disabled{background-color:rgb(var(--be-foreground-base)/var(--be-disabled-bg-opacity))}.pi .disabled\\:bg-transparent:disabled{background-color:transparent}.pi .disabled\\:text-disabled:disabled{color:rgb(var(--be-foreground-base)/var(--be-disabled-fg-opacity))}.pi .disabled\\:text-white\\/70:disabled{color:#ffffffb3}.pi .disabled\\:shadow-none:disabled{--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.pi .disabled\\:before\\:bg-disabled-fg:disabled:before{background-color:rgb(var(--be-foreground-base)/var(--be-disabled-fg-opacity));content:var(--tw-content)}.pi :is(.dark .dark\\:bg-chip){--tw-bg-opacity:1;background-color:rgb(var(--be-background-chip)/var(--tw-bg-opacity))}.pi :is(.dark .dark\\:text-white\\/50){color:#ffffff80}.pi :is(.dark .dark\\:checked\\:border-primary-dark:checked){--tw-border-opacity:1;border-color:rgb(var(--be-primary-dark)/var(--tw-border-opacity))}.pi :is(.dark .dark\\:checked\\:bg-primary-dark:checked){--tw-bg-opacity:1;background-color:rgb(var(--be-primary-dark)/var(--tw-bg-opacity))}@media (min-width:640px){.pi .sm\\:text-sm{font-size:14px;line-height:20px}}@media (min-width:768px){.pi .md\\:text-lg{font-size:18px;line-height:28px}}.pi .\\[\\&\\>\\.tree-label\\]\\:focus-visible\\:ring:focus-visible>.tree-label{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(4px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.pi .\\[\\&\\>\\.tree-label\\]\\:focus-visible\\:ring-2:focus-visible>.tree-label{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.pi .\\[\\&\\>\\.tree-label\\]\\:focus-visible\\:ring-inset:focus-visible>.tree-label{--tw-ring-inset:inset}
`,AT="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Z0=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e));for(;e--;)t+=AT[n[e]&63];return t};class MT{constructor(t,n){Se(this,"timerId");Se(this,"createdAt",0);this.callback=t,this.remaining=n,this.resume()}pause(){clearTimeout(this.timerId),this.remaining-=Date.now()-this.createdAt}resume(){this.createdAt=Date.now(),this.timerId&&clearTimeout(this.timerId),this.timerId=setTimeout(this.callback,this.remaining)}clear(){clearTimeout(this.timerId)}}const jT=1;function IT(e){switch(e){case"danger":return 8e3;case"loading":return 0;default:return 3e3}}const Q0=Af()(B0((e,t)=>({toasts:[],add:(n,r)=>{const i=t().toasts.length+1-jT;i>0&&e(h=>{h.toasts.splice(0,i)});const o=(r==null?void 0:r.id)||Z0(6),d=(r==null?void 0:r.type)||"positive",a=(r==null?void 0:r.duration)??IT(d),s={timer:a>0?new MT(()=>t().remove(o),a):null,message:n,...r,id:o,type:d,position:(r==null?void 0:r.position)||"bottom-center",duration:a,disableExitAnimation:r==null?void 0:r.disableExitAnimation,disableEnterAnimation:r==null?void 0:r.disableEnterAnimation},u=t().toasts.findIndex(h=>h.id===s.id);u>-1?e(h=>{h.toasts[u]=s}):e(h=>{h.toasts.push(s)})},remove:n=>{const r=t().toasts.filter(i=>{var o;return n===i.id?((o=i.timer)==null||o.clear(),!1):!0});e(i=>{i.toasts=r})}})));function is(){return Q0.getState()}function ss(e,t){is().add(e,t)}ss.danger=(e,t)=>{is().add(e,{...t,type:"danger"})},ss.positive=(e,t)=>{is().add(e,{...t,type:"positive"})},ss.loading=(e,t)=>{is().add(e,{...t,type:"loading"})};var J0={exports:{}},Ut={},ey={exports:{}},ty={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(V,k){var P=V.length;V.push(k);e:for(;0<P;){var A=P-1>>>1,j=V[A];if(0<i(j,k))V[A]=k,V[P]=j,P=A;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var k=V[0],P=V.pop();if(P!==k){V[0]=P;e:for(var A=0,j=V.length,H=j>>>1;A<H;){var M=2*(A+1)-1,O=V[M],R=M+1,B=V[R];if(0>i(O,P))R<j&&0>i(B,O)?(V[A]=B,V[R]=P,A=R):(V[A]=O,V[M]=P,A=M);else if(R<j&&0>i(B,P))V[A]=B,V[R]=P,A=R;else break e}}return k}function i(V,k){var P=V.sortIndex-k.sortIndex;return P!==0?P:V.id-k.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var d=Date,a=d.now();e.unstable_now=function(){return d.now()-a}}var s=[],u=[],h=1,l=null,f=3,c=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(V){for(var k=n(u);k!==null;){if(k.callback===null)r(u);else if(k.startTime<=V)r(u),k.sortIndex=k.expirationTime,t(s,k);else break;k=n(u)}}function w(V){if(m=!1,b(V),!p)if(n(s)!==null)p=!0,Z(C);else{var k=n(u);k!==null&&ie(w,k.startTime-V)}}function C(V,k){p=!1,m&&(m=!1,v(T),T=-1),c=!0;var P=f;try{for(b(k),l=n(s);l!==null&&(!(l.expirationTime>k)||V&&!$());){var A=l.callback;if(typeof A=="function"){l.callback=null,f=l.priorityLevel;var j=A(l.expirationTime<=k);k=e.unstable_now(),typeof j=="function"?l.callback=j:l===n(s)&&r(s),b(k)}else r(s);l=n(s)}if(l!==null)var H=!0;else{var M=n(u);M!==null&&ie(w,M.startTime-k),H=!1}return H}finally{l=null,f=P,c=!1}}var _=!1,S=null,T=-1,I=5,F=-1;function $(){return!(e.unstable_now()-F<I)}function G(){if(S!==null){var V=e.unstable_now();F=V;var k=!0;try{k=S(!0,V)}finally{k?ne():(_=!1,S=null)}}else _=!1}var ne;if(typeof y=="function")ne=function(){y(G)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,Q=X.port2;X.port1.onmessage=G,ne=function(){Q.postMessage(null)}}else ne=function(){g(G,0)};function Z(V){S=V,_||(_=!0,ne())}function ie(V,k){T=g(function(){V(e.unstable_now())},k)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(V){V.callback=null},e.unstable_continueExecution=function(){p||c||(p=!0,Z(C))},e.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<V?Math.floor(1e3/V):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(s)},e.unstable_next=function(V){switch(f){case 1:case 2:case 3:var k=3;break;default:k=f}var P=f;f=k;try{return V()}finally{f=P}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(V,k){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var P=f;f=V;try{return k()}finally{f=P}},e.unstable_scheduleCallback=function(V,k,P){var A=e.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?A+P:A):P=A,V){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=P+j,V={id:h++,callback:k,priorityLevel:V,startTime:P,expirationTime:j,sortIndex:-1},P>A?(V.sortIndex=P,t(u,V),n(s)===null&&V===n(u)&&(m?(v(T),T=-1):m=!0,ie(w,P-A))):(V.sortIndex=j,t(s,V),p||c||(p=!0,Z(C))),V},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(V){var k=f;return function(){var P=f;f=k;try{return V.apply(this,arguments)}finally{f=P}}}})(ty),ey.exports=ty;var FT=ey.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ny=E,Xt=FT;function oe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ry=new Set,wo={};function li(e,t){os(e,t),os(e+"Capture",t)}function os(e,t){for(wo[e]=t,e=0;e<t.length;e++)ry.add(t[e])}var Wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gf=Object.prototype.hasOwnProperty,RT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,iy={},sy={};function LT(e){return Gf.call(sy,e)?!0:Gf.call(iy,e)?!1:RT.test(e)?sy[e]=!0:(iy[e]=!0,!1)}function zT(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function BT(e,t,n,r){if(t===null||typeof t>"u"||zT(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ot(e,t,n,r,i,o,d){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=d}var ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ct[e]=new Ot(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ct[t]=new Ot(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){ct[e]=new Ot(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ct[e]=new Ot(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ct[e]=new Ot(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){ct[e]=new Ot(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){ct[e]=new Ot(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){ct[e]=new Ot(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){ct[e]=new Ot(e,5,!1,e.toLowerCase(),null,!1,!1)});var Kf=/[\-:]([a-z])/g;function qf(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Kf,qf);ct[t]=new Ot(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Kf,qf);ct[t]=new Ot(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Kf,qf);ct[t]=new Ot(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){ct[e]=new Ot(e,1,!1,e.toLowerCase(),null,!1,!1)}),ct.xlinkHref=new Ot("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){ct[e]=new Ot(e,1,!1,e.toLowerCase(),null,!0,!0)});function Zf(e,t,n,r){var i=ct.hasOwnProperty(t)?ct[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(BT(t,n,i,r)&&(n=null),r||i===null?LT(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Un=ny.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ol=Symbol.for("react.element"),as=Symbol.for("react.portal"),ls=Symbol.for("react.fragment"),Qf=Symbol.for("react.strict_mode"),Jf=Symbol.for("react.profiler"),oy=Symbol.for("react.provider"),ay=Symbol.for("react.context"),eh=Symbol.for("react.forward_ref"),th=Symbol.for("react.suspense"),nh=Symbol.for("react.suspense_list"),rh=Symbol.for("react.memo"),br=Symbol.for("react.lazy"),ly=Symbol.for("react.offscreen"),uy=Symbol.iterator;function xo(e){return e===null||typeof e!="object"?null:(e=uy&&e[uy]||e["@@iterator"],typeof e=="function"?e:null)}var Ve=Object.assign,ih;function Co(e){if(ih===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ih=t&&t[1]||""}return`
`+ih+e}var sh=!1;function oh(e,t){if(!e||sh)return"";sh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=r.stack.split(`
`),d=i.length-1,a=o.length-1;1<=d&&0<=a&&i[d]!==o[a];)a--;for(;1<=d&&0<=a;d--,a--)if(i[d]!==o[a]){if(d!==1||a!==1)do if(d--,a--,0>a||i[d]!==o[a]){var s=`
`+i[d].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}while(1<=d&&0<=a);break}}}finally{sh=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Co(e):""}function NT(e){switch(e.tag){case 5:return Co(e.type);case 16:return Co("Lazy");case 13:return Co("Suspense");case 19:return Co("SuspenseList");case 0:case 2:case 15:return e=oh(e.type,!1),e;case 11:return e=oh(e.type.render,!1),e;case 1:return e=oh(e.type,!0),e;default:return""}}function ah(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ls:return"Fragment";case as:return"Portal";case Jf:return"Profiler";case Qf:return"StrictMode";case th:return"Suspense";case nh:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ay:return(e.displayName||"Context")+".Consumer";case oy:return(e._context.displayName||"Context")+".Provider";case eh:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case rh:return t=e.displayName||null,t!==null?t:ah(e.type)||"Memo";case br:t=e._payload,e=e._init;try{return ah(e(t))}catch{}}return null}function $T(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ah(t);case 8:return t===Qf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function wr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function cy(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function VT(e){var t=cy(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(d){r=""+d,o.call(this,d)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(d){r=""+d},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Pl(e){e._valueTracker||(e._valueTracker=VT(e))}function fy(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=cy(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Dl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function lh(e,t){var n=t.checked;return Ve({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function hy(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=wr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function dy(e,t){t=t.checked,t!=null&&Zf(e,"checked",t,!1)}function uh(e,t){dy(e,t);var n=wr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ch(e,t.type,n):t.hasOwnProperty("defaultValue")&&ch(e,t.type,wr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function py(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ch(e,t,n){(t!=="number"||Dl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var _o=Array.isArray;function us(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+wr(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function fh(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(oe(91));return Ve({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function gy(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(oe(92));if(_o(n)){if(1<n.length)throw Error(oe(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:wr(n)}}function my(e,t){var n=wr(t.value),r=wr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function vy(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function yy(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hh(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?yy(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Al,by=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Al=Al||document.createElement("div"),Al.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Al.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function So(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ko={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},HT=["Webkit","ms","Moz","O"];Object.keys(ko).forEach(function(e){HT.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ko[t]=ko[e]})});function wy(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ko.hasOwnProperty(e)&&ko[e]?(""+t).trim():t+"px"}function xy(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=wy(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var WT=Ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dh(e,t){if(t){if(WT[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(oe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(oe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(oe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(oe(62))}}function ph(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gh=null;function mh(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var vh=null,cs=null,fs=null;function Cy(e){if(e=Yo(e)){if(typeof vh!="function")throw Error(oe(280));var t=e.stateNode;t&&(t=eu(t),vh(e.stateNode,e.type,t))}}function _y(e){cs?fs?fs.push(e):fs=[e]:cs=e}function Sy(){if(cs){var e=cs,t=fs;if(fs=cs=null,Cy(e),t)for(e=0;e<t.length;e++)Cy(t[e])}}function ky(e,t){return e(t)}function Ey(){}var yh=!1;function Ty(e,t,n){if(yh)return e(t,n);yh=!0;try{return ky(e,t,n)}finally{yh=!1,(cs!==null||fs!==null)&&(Ey(),Sy())}}function Eo(e,t){var n=e.stateNode;if(n===null)return null;var r=eu(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(oe(231,t,typeof n));return n}var bh=!1;if(Wn)try{var To={};Object.defineProperty(To,"passive",{get:function(){bh=!0}}),window.addEventListener("test",To,To),window.removeEventListener("test",To,To)}catch{bh=!1}function UT(e,t,n,r,i,o,d,a,s){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(h){this.onError(h)}}var Oo=!1,Ml=null,jl=!1,wh=null,XT={onError:function(e){Oo=!0,Ml=e}};function YT(e,t,n,r,i,o,d,a,s){Oo=!1,Ml=null,UT.apply(XT,arguments)}function GT(e,t,n,r,i,o,d,a,s){if(YT.apply(this,arguments),Oo){if(Oo){var u=Ml;Oo=!1,Ml=null}else throw Error(oe(198));jl||(jl=!0,wh=u)}}function ui(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Oy(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Py(e){if(ui(e)!==e)throw Error(oe(188))}function KT(e){var t=e.alternate;if(!t){if(t=ui(e),t===null)throw Error(oe(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Py(i),e;if(o===r)return Py(i),t;o=o.sibling}throw Error(oe(188))}if(n.return!==r.return)n=i,r=o;else{for(var d=!1,a=i.child;a;){if(a===n){d=!0,n=i,r=o;break}if(a===r){d=!0,r=i,n=o;break}a=a.sibling}if(!d){for(a=o.child;a;){if(a===n){d=!0,n=o,r=i;break}if(a===r){d=!0,r=o,n=i;break}a=a.sibling}if(!d)throw Error(oe(189))}}if(n.alternate!==r)throw Error(oe(190))}if(n.tag!==3)throw Error(oe(188));return n.stateNode.current===n?e:t}function Dy(e){return e=KT(e),e!==null?Ay(e):null}function Ay(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Ay(e);if(t!==null)return t;e=e.sibling}return null}var My=Xt.unstable_scheduleCallback,jy=Xt.unstable_cancelCallback,qT=Xt.unstable_shouldYield,ZT=Xt.unstable_requestPaint,Ke=Xt.unstable_now,QT=Xt.unstable_getCurrentPriorityLevel,xh=Xt.unstable_ImmediatePriority,Iy=Xt.unstable_UserBlockingPriority,Il=Xt.unstable_NormalPriority,JT=Xt.unstable_LowPriority,Fy=Xt.unstable_IdlePriority,Fl=null,Tn=null;function eO(e){if(Tn&&typeof Tn.onCommitFiberRoot=="function")try{Tn.onCommitFiberRoot(Fl,e,void 0,(e.current.flags&128)===128)}catch{}}var vn=Math.clz32?Math.clz32:rO,tO=Math.log,nO=Math.LN2;function rO(e){return e>>>=0,e===0?32:31-(tO(e)/nO|0)|0}var Rl=64,Ll=4194304;function Po(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function zl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,d=n&268435455;if(d!==0){var a=d&~i;a!==0?r=Po(a):(o&=d,o!==0&&(r=Po(o)))}else d=n&~i,d!==0?r=Po(d):o!==0&&(r=Po(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-vn(t),i=1<<n,r|=e[n],t&=~i;return r}function iO(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sO(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var d=31-vn(o),a=1<<d,s=i[d];s===-1?(!(a&n)||a&r)&&(i[d]=iO(a,t)):s<=t&&(e.expiredLanes|=a),o&=~a}}function Ch(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ry(){var e=Rl;return Rl<<=1,!(Rl&4194240)&&(Rl=64),e}function _h(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Do(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-vn(t),e[t]=n}function oO(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-vn(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function Sh(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-vn(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Ae=0;function Ly(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var zy,kh,By,Ny,$y,Eh=!1,Bl=[],xr=null,Cr=null,_r=null,Ao=new Map,Mo=new Map,Sr=[],aO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vy(e,t){switch(e){case"focusin":case"focusout":xr=null;break;case"dragenter":case"dragleave":Cr=null;break;case"mouseover":case"mouseout":_r=null;break;case"pointerover":case"pointerout":Ao.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mo.delete(t.pointerId)}}function jo(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=Yo(t),t!==null&&kh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function lO(e,t,n,r,i){switch(t){case"focusin":return xr=jo(xr,e,t,n,r,i),!0;case"dragenter":return Cr=jo(Cr,e,t,n,r,i),!0;case"mouseover":return _r=jo(_r,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Ao.set(o,jo(Ao.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Mo.set(o,jo(Mo.get(o)||null,e,t,n,r,i)),!0}return!1}function Hy(e){var t=ci(e.target);if(t!==null){var n=ui(t);if(n!==null){if(t=n.tag,t===13){if(t=Oy(n),t!==null){e.blockedOn=t,$y(e.priority,function(){By(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Nl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Oh(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);gh=r,n.target.dispatchEvent(r),gh=null}else return t=Yo(n),t!==null&&kh(t),e.blockedOn=n,!1;t.shift()}return!0}function Wy(e,t,n){Nl(e)&&n.delete(t)}function uO(){Eh=!1,xr!==null&&Nl(xr)&&(xr=null),Cr!==null&&Nl(Cr)&&(Cr=null),_r!==null&&Nl(_r)&&(_r=null),Ao.forEach(Wy),Mo.forEach(Wy)}function Io(e,t){e.blockedOn===t&&(e.blockedOn=null,Eh||(Eh=!0,Xt.unstable_scheduleCallback(Xt.unstable_NormalPriority,uO)))}function Fo(e){function t(i){return Io(i,e)}if(0<Bl.length){Io(Bl[0],e);for(var n=1;n<Bl.length;n++){var r=Bl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(xr!==null&&Io(xr,e),Cr!==null&&Io(Cr,e),_r!==null&&Io(_r,e),Ao.forEach(t),Mo.forEach(t),n=0;n<Sr.length;n++)r=Sr[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Sr.length&&(n=Sr[0],n.blockedOn===null);)Hy(n),n.blockedOn===null&&Sr.shift()}var hs=Un.ReactCurrentBatchConfig,$l=!0;function cO(e,t,n,r){var i=Ae,o=hs.transition;hs.transition=null;try{Ae=1,Th(e,t,n,r)}finally{Ae=i,hs.transition=o}}function fO(e,t,n,r){var i=Ae,o=hs.transition;hs.transition=null;try{Ae=4,Th(e,t,n,r)}finally{Ae=i,hs.transition=o}}function Th(e,t,n,r){if($l){var i=Oh(e,t,n,r);if(i===null)Uh(e,t,r,Vl,n),Vy(e,r);else if(lO(i,e,t,n,r))r.stopPropagation();else if(Vy(e,r),t&4&&-1<aO.indexOf(e)){for(;i!==null;){var o=Yo(i);if(o!==null&&zy(o),o=Oh(e,t,n,r),o===null&&Uh(e,t,r,Vl,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Uh(e,t,r,null,n)}}var Vl=null;function Oh(e,t,n,r){if(Vl=null,e=mh(r),e=ci(e),e!==null)if(t=ui(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Oy(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Vl=e,null}function Uy(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(QT()){case xh:return 1;case Iy:return 4;case Il:case JT:return 16;case Fy:return 536870912;default:return 16}default:return 16}}var kr=null,Ph=null,Hl=null;function Xy(){if(Hl)return Hl;var e,t=Ph,n=t.length,r,i="value"in kr?kr.value:kr.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var d=n-e;for(r=1;r<=d&&t[n-r]===i[o-r];r++);return Hl=i.slice(e,1<r?1-r:void 0)}function Wl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ul(){return!0}function Yy(){return!1}function Yt(e){function t(n,r,i,o,d){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=d,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Ul:Yy,this.isPropagationStopped=Yy,this}return Ve(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ul)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ul)},persist:function(){},isPersistent:Ul}),t}var ds={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dh=Yt(ds),Ro=Ve({},ds,{view:0,detail:0}),hO=Yt(Ro),Ah,Mh,Lo,Xl=Ve({},Ro,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ih,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Lo&&(Lo&&e.type==="mousemove"?(Ah=e.screenX-Lo.screenX,Mh=e.screenY-Lo.screenY):Mh=Ah=0,Lo=e),Ah)},movementY:function(e){return"movementY"in e?e.movementY:Mh}}),Gy=Yt(Xl),dO=Ve({},Xl,{dataTransfer:0}),pO=Yt(dO),gO=Ve({},Ro,{relatedTarget:0}),jh=Yt(gO),mO=Ve({},ds,{animationName:0,elapsedTime:0,pseudoElement:0}),vO=Yt(mO),yO=Ve({},ds,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bO=Yt(yO),wO=Ve({},ds,{data:0}),Ky=Yt(wO),xO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},CO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_O={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function SO(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=_O[e])?!!t[e]:!1}function Ih(){return SO}var kO=Ve({},Ro,{key:function(e){if(e.key){var t=xO[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Wl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?CO[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ih,charCode:function(e){return e.type==="keypress"?Wl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Wl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),EO=Yt(kO),TO=Ve({},Xl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qy=Yt(TO),OO=Ve({},Ro,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ih}),PO=Yt(OO),DO=Ve({},ds,{propertyName:0,elapsedTime:0,pseudoElement:0}),AO=Yt(DO),MO=Ve({},Xl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jO=Yt(MO),IO=[9,13,27,32],Fh=Wn&&"CompositionEvent"in window,zo=null;Wn&&"documentMode"in document&&(zo=document.documentMode);var FO=Wn&&"TextEvent"in window&&!zo,Zy=Wn&&(!Fh||zo&&8<zo&&11>=zo),Qy=String.fromCharCode(32),Jy=!1;function e1(e,t){switch(e){case"keyup":return IO.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function t1(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ps=!1;function RO(e,t){switch(e){case"compositionend":return t1(t);case"keypress":return t.which!==32?null:(Jy=!0,Qy);case"textInput":return e=t.data,e===Qy&&Jy?null:e;default:return null}}function LO(e,t){if(ps)return e==="compositionend"||!Fh&&e1(e,t)?(e=Xy(),Hl=Ph=kr=null,ps=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Zy&&t.locale!=="ko"?null:t.data;default:return null}}var zO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function n1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!zO[e.type]:t==="textarea"}function r1(e,t,n,r){_y(r),t=Zl(t,"onChange"),0<t.length&&(n=new Dh("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Bo=null,No=null;function BO(e){x1(e,0)}function Yl(e){var t=bs(e);if(fy(t))return e}function NO(e,t){if(e==="change")return t}var i1=!1;if(Wn){var Rh;if(Wn){var Lh="oninput"in document;if(!Lh){var s1=document.createElement("div");s1.setAttribute("oninput","return;"),Lh=typeof s1.oninput=="function"}Rh=Lh}else Rh=!1;i1=Rh&&(!document.documentMode||9<document.documentMode)}function o1(){Bo&&(Bo.detachEvent("onpropertychange",a1),No=Bo=null)}function a1(e){if(e.propertyName==="value"&&Yl(No)){var t=[];r1(t,No,e,mh(e)),Ty(BO,t)}}function $O(e,t,n){e==="focusin"?(o1(),Bo=t,No=n,Bo.attachEvent("onpropertychange",a1)):e==="focusout"&&o1()}function VO(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Yl(No)}function HO(e,t){if(e==="click")return Yl(t)}function WO(e,t){if(e==="input"||e==="change")return Yl(t)}function UO(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var yn=typeof Object.is=="function"?Object.is:UO;function $o(e,t){if(yn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Gf.call(t,i)||!yn(e[i],t[i]))return!1}return!0}function l1(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function u1(e,t){var n=l1(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=l1(n)}}function c1(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?c1(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function f1(){for(var e=window,t=Dl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Dl(e.document)}return t}function zh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function XO(e){var t=f1(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&c1(n.ownerDocument.documentElement,n)){if(r!==null&&zh(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=u1(n,o);var d=u1(n,r);i&&d&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==d.node||e.focusOffset!==d.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(d.node,d.offset)):(t.setEnd(d.node,d.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var YO=Wn&&"documentMode"in document&&11>=document.documentMode,gs=null,Bh=null,Vo=null,Nh=!1;function h1(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Nh||gs==null||gs!==Dl(r)||(r=gs,"selectionStart"in r&&zh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Vo&&$o(Vo,r)||(Vo=r,r=Zl(Bh,"onSelect"),0<r.length&&(t=new Dh("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gs)))}function Gl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ms={animationend:Gl("Animation","AnimationEnd"),animationiteration:Gl("Animation","AnimationIteration"),animationstart:Gl("Animation","AnimationStart"),transitionend:Gl("Transition","TransitionEnd")},$h={},d1={};Wn&&(d1=document.createElement("div").style,"AnimationEvent"in window||(delete ms.animationend.animation,delete ms.animationiteration.animation,delete ms.animationstart.animation),"TransitionEvent"in window||delete ms.transitionend.transition);function Kl(e){if($h[e])return $h[e];if(!ms[e])return e;var t=ms[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in d1)return $h[e]=t[n];return e}var p1=Kl("animationend"),g1=Kl("animationiteration"),m1=Kl("animationstart"),v1=Kl("transitionend"),y1=new Map,b1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Er(e,t){y1.set(e,t),li(t,[e])}for(var Vh=0;Vh<b1.length;Vh++){var Hh=b1[Vh],GO=Hh.toLowerCase(),KO=Hh[0].toUpperCase()+Hh.slice(1);Er(GO,"on"+KO)}Er(p1,"onAnimationEnd"),Er(g1,"onAnimationIteration"),Er(m1,"onAnimationStart"),Er("dblclick","onDoubleClick"),Er("focusin","onFocus"),Er("focusout","onBlur"),Er(v1,"onTransitionEnd"),os("onMouseEnter",["mouseout","mouseover"]),os("onMouseLeave",["mouseout","mouseover"]),os("onPointerEnter",["pointerout","pointerover"]),os("onPointerLeave",["pointerout","pointerover"]),li("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),li("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),li("onBeforeInput",["compositionend","keypress","textInput","paste"]),li("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),li("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),li("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ho="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qO=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ho));function w1(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,GT(r,t,void 0,e),e.currentTarget=null}function x1(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var d=r.length-1;0<=d;d--){var a=r[d],s=a.instance,u=a.currentTarget;if(a=a.listener,s!==o&&i.isPropagationStopped())break e;w1(i,a,u),o=s}else for(d=0;d<r.length;d++){if(a=r[d],s=a.instance,u=a.currentTarget,a=a.listener,s!==o&&i.isPropagationStopped())break e;w1(i,a,u),o=s}}}if(jl)throw e=wh,jl=!1,wh=null,e}function ze(e,t){var n=t[Zh];n===void 0&&(n=t[Zh]=new Set);var r=e+"__bubble";n.has(r)||(C1(t,e,2,!1),n.add(r))}function Wh(e,t,n){var r=0;t&&(r|=4),C1(n,e,r,t)}var ql="_reactListening"+Math.random().toString(36).slice(2);function Wo(e){if(!e[ql]){e[ql]=!0,ry.forEach(function(n){n!=="selectionchange"&&(qO.has(n)||Wh(n,!1,e),Wh(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ql]||(t[ql]=!0,Wh("selectionchange",!1,t))}}function C1(e,t,n,r){switch(Uy(t)){case 1:var i=cO;break;case 4:i=fO;break;default:i=Th}n=i.bind(null,t,n,e),i=void 0,!bh||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Uh(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var d=r.tag;if(d===3||d===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(d===4)for(d=r.return;d!==null;){var s=d.tag;if((s===3||s===4)&&(s=d.stateNode.containerInfo,s===i||s.nodeType===8&&s.parentNode===i))return;d=d.return}for(;a!==null;){if(d=ci(a),d===null)return;if(s=d.tag,s===5||s===6){r=o=d;continue e}a=a.parentNode}}r=r.return}Ty(function(){var u=o,h=mh(n),l=[];e:{var f=y1.get(e);if(f!==void 0){var c=Dh,p=e;switch(e){case"keypress":if(Wl(n)===0)break e;case"keydown":case"keyup":c=EO;break;case"focusin":p="focus",c=jh;break;case"focusout":p="blur",c=jh;break;case"beforeblur":case"afterblur":c=jh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=Gy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=pO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=PO;break;case p1:case g1:case m1:c=vO;break;case v1:c=AO;break;case"scroll":c=hO;break;case"wheel":c=jO;break;case"copy":case"cut":case"paste":c=bO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=qy}var m=(t&4)!==0,g=!m&&e==="scroll",v=m?f!==null?f+"Capture":null:f;m=[];for(var y=u,b;y!==null;){b=y;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,v!==null&&(w=Eo(y,v),w!=null&&m.push(Uo(y,w,b)))),g)break;y=y.return}0<m.length&&(f=new c(f,p,null,n,h),l.push({event:f,listeners:m}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",c=e==="mouseout"||e==="pointerout",f&&n!==gh&&(p=n.relatedTarget||n.fromElement)&&(ci(p)||p[Xn]))break e;if((c||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,c?(p=n.relatedTarget||n.toElement,c=u,p=p?ci(p):null,p!==null&&(g=ui(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(c=null,p=u),c!==p)){if(m=Gy,w="onMouseLeave",v="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(m=qy,w="onPointerLeave",v="onPointerEnter",y="pointer"),g=c==null?f:bs(c),b=p==null?f:bs(p),f=new m(w,y+"leave",c,n,h),f.target=g,f.relatedTarget=b,w=null,ci(h)===u&&(m=new m(v,y+"enter",p,n,h),m.target=b,m.relatedTarget=g,w=m),g=w,c&&p)t:{for(m=c,v=p,y=0,b=m;b;b=vs(b))y++;for(b=0,w=v;w;w=vs(w))b++;for(;0<y-b;)m=vs(m),y--;for(;0<b-y;)v=vs(v),b--;for(;y--;){if(m===v||v!==null&&m===v.alternate)break t;m=vs(m),v=vs(v)}m=null}else m=null;c!==null&&_1(l,f,c,m,!1),p!==null&&g!==null&&_1(l,g,p,m,!0)}}e:{if(f=u?bs(u):window,c=f.nodeName&&f.nodeName.toLowerCase(),c==="select"||c==="input"&&f.type==="file")var C=NO;else if(n1(f))if(i1)C=WO;else{C=VO;var _=$O}else(c=f.nodeName)&&c.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=HO);if(C&&(C=C(e,u))){r1(l,C,n,h);break e}_&&_(e,f,u),e==="focusout"&&(_=f._wrapperState)&&_.controlled&&f.type==="number"&&ch(f,"number",f.value)}switch(_=u?bs(u):window,e){case"focusin":(n1(_)||_.contentEditable==="true")&&(gs=_,Bh=u,Vo=null);break;case"focusout":Vo=Bh=gs=null;break;case"mousedown":Nh=!0;break;case"contextmenu":case"mouseup":case"dragend":Nh=!1,h1(l,n,h);break;case"selectionchange":if(YO)break;case"keydown":case"keyup":h1(l,n,h)}var S;if(Fh)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else ps?e1(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(Zy&&n.locale!=="ko"&&(ps||T!=="onCompositionStart"?T==="onCompositionEnd"&&ps&&(S=Xy()):(kr=h,Ph="value"in kr?kr.value:kr.textContent,ps=!0)),_=Zl(u,T),0<_.length&&(T=new Ky(T,e,null,n,h),l.push({event:T,listeners:_}),S?T.data=S:(S=t1(n),S!==null&&(T.data=S)))),(S=FO?RO(e,n):LO(e,n))&&(u=Zl(u,"onBeforeInput"),0<u.length&&(h=new Ky("onBeforeInput","beforeinput",null,n,h),l.push({event:h,listeners:u}),h.data=S))}x1(l,t)})}function Uo(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Zl(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Eo(e,n),o!=null&&r.unshift(Uo(e,o,i)),o=Eo(e,t),o!=null&&r.push(Uo(e,o,i))),e=e.return}return r}function vs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function _1(e,t,n,r,i){for(var o=t._reactName,d=[];n!==null&&n!==r;){var a=n,s=a.alternate,u=a.stateNode;if(s!==null&&s===r)break;a.tag===5&&u!==null&&(a=u,i?(s=Eo(n,o),s!=null&&d.unshift(Uo(n,s,a))):i||(s=Eo(n,o),s!=null&&d.push(Uo(n,s,a)))),n=n.return}d.length!==0&&e.push({event:t,listeners:d})}var ZO=/\r\n?/g,QO=/\u0000|\uFFFD/g;function S1(e){return(typeof e=="string"?e:""+e).replace(ZO,`
`).replace(QO,"")}function Ql(e,t,n){if(t=S1(t),S1(e)!==t&&n)throw Error(oe(425))}function Jl(){}var Xh=null,Yh=null;function Gh(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Kh=typeof setTimeout=="function"?setTimeout:void 0,JO=typeof clearTimeout=="function"?clearTimeout:void 0,k1=typeof Promise=="function"?Promise:void 0,eP=typeof queueMicrotask=="function"?queueMicrotask:typeof k1<"u"?function(e){return k1.resolve(null).then(e).catch(tP)}:Kh;function tP(e){setTimeout(function(){throw e})}function qh(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Fo(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Fo(t)}function Tr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function E1(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ys=Math.random().toString(36).slice(2),On="__reactFiber$"+ys,Xo="__reactProps$"+ys,Xn="__reactContainer$"+ys,Zh="__reactEvents$"+ys,nP="__reactListeners$"+ys,rP="__reactHandles$"+ys;function ci(e){var t=e[On];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Xn]||n[On]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=E1(e);e!==null;){if(n=e[On])return n;e=E1(e)}return t}e=n,n=e.parentNode}return null}function Yo(e){return e=e[On]||e[Xn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function bs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(oe(33))}function eu(e){return e[Xo]||null}var Qh=[],ws=-1;function Or(e){return{current:e}}function Be(e){0>ws||(e.current=Qh[ws],Qh[ws]=null,ws--)}function Re(e,t){ws++,Qh[ws]=e.current,e.current=t}var Pr={},gt=Or(Pr),It=Or(!1),fi=Pr;function xs(e,t){var n=e.type.contextTypes;if(!n)return Pr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ft(e){return e=e.childContextTypes,e!=null}function tu(){Be(It),Be(gt)}function T1(e,t,n){if(gt.current!==Pr)throw Error(oe(168));Re(gt,t),Re(It,n)}function O1(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(oe(108,$T(e)||"Unknown",i));return Ve({},n,r)}function nu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Pr,fi=gt.current,Re(gt,e),Re(It,It.current),!0}function P1(e,t,n){var r=e.stateNode;if(!r)throw Error(oe(169));n?(e=O1(e,t,fi),r.__reactInternalMemoizedMergedChildContext=e,Be(It),Be(gt),Re(gt,e)):Be(It),Re(It,n)}var Yn=null,ru=!1,Jh=!1;function D1(e){Yn===null?Yn=[e]:Yn.push(e)}function iP(e){ru=!0,D1(e)}function Dr(){if(!Jh&&Yn!==null){Jh=!0;var e=0,t=Ae;try{var n=Yn;for(Ae=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Yn=null,ru=!1}catch(i){throw Yn!==null&&(Yn=Yn.slice(e+1)),My(xh,Dr),i}finally{Ae=t,Jh=!1}}return null}var Cs=[],_s=0,iu=null,su=0,on=[],an=0,hi=null,Gn=1,Kn="";function di(e,t){Cs[_s++]=su,Cs[_s++]=iu,iu=e,su=t}function A1(e,t,n){on[an++]=Gn,on[an++]=Kn,on[an++]=hi,hi=e;var r=Gn;e=Kn;var i=32-vn(r)-1;r&=~(1<<i),n+=1;var o=32-vn(t)+i;if(30<o){var d=i-i%5;o=(r&(1<<d)-1).toString(32),r>>=d,i-=d,Gn=1<<32-vn(t)+i|n<<i|r,Kn=o+e}else Gn=1<<o|n<<i|r,Kn=e}function ed(e){e.return!==null&&(di(e,1),A1(e,1,0))}function td(e){for(;e===iu;)iu=Cs[--_s],Cs[_s]=null,su=Cs[--_s],Cs[_s]=null;for(;e===hi;)hi=on[--an],on[an]=null,Kn=on[--an],on[an]=null,Gn=on[--an],on[an]=null}var Gt=null,Kt=null,$e=!1,bn=null;function M1(e,t){var n=fn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function j1(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Gt=e,Kt=Tr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Gt=e,Kt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=hi!==null?{id:Gn,overflow:Kn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=fn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Gt=e,Kt=null,!0):!1;default:return!1}}function nd(e){return(e.mode&1)!==0&&(e.flags&128)===0}function rd(e){if($e){var t=Kt;if(t){var n=t;if(!j1(e,t)){if(nd(e))throw Error(oe(418));t=Tr(n.nextSibling);var r=Gt;t&&j1(e,t)?M1(r,n):(e.flags=e.flags&-4097|2,$e=!1,Gt=e)}}else{if(nd(e))throw Error(oe(418));e.flags=e.flags&-4097|2,$e=!1,Gt=e}}}function I1(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Gt=e}function ou(e){if(e!==Gt)return!1;if(!$e)return I1(e),$e=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Gh(e.type,e.memoizedProps)),t&&(t=Kt)){if(nd(e))throw F1(),Error(oe(418));for(;t;)M1(e,t),t=Tr(t.nextSibling)}if(I1(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(oe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Kt=Tr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Kt=null}}else Kt=Gt?Tr(e.stateNode.nextSibling):null;return!0}function F1(){for(var e=Kt;e;)e=Tr(e.nextSibling)}function Ss(){Kt=Gt=null,$e=!1}function id(e){bn===null?bn=[e]:bn.push(e)}var sP=Un.ReactCurrentBatchConfig;function wn(e,t){if(e&&e.defaultProps){t=Ve({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var au=Or(null),lu=null,ks=null,sd=null;function od(){sd=ks=lu=null}function ad(e){var t=au.current;Be(au),e._currentValue=t}function ld(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Es(e,t){lu=e,sd=ks=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Rt=!0),e.firstContext=null)}function ln(e){var t=e._currentValue;if(sd!==e)if(e={context:e,memoizedValue:t,next:null},ks===null){if(lu===null)throw Error(oe(308));ks=e,lu.dependencies={lanes:0,firstContext:e}}else ks=ks.next=e;return t}var pi=null;function ud(e){pi===null?pi=[e]:pi.push(e)}function R1(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,ud(t)):(n.next=i.next,i.next=n),t.interleaved=n,qn(e,r)}function qn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ar=!1;function cd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function L1(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Zn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Mr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Te&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,qn(e,n)}return i=r.interleaved,i===null?(t.next=t,ud(r)):(t.next=i.next,i.next=t),r.interleaved=t,qn(e,n)}function uu(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Sh(e,n)}}function z1(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var d={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=d:o=o.next=d,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function cu(e,t,n,r){var i=e.updateQueue;Ar=!1;var o=i.firstBaseUpdate,d=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var s=a,u=s.next;s.next=null,d===null?o=u:d.next=u,d=s;var h=e.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==d&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=s))}if(o!==null){var l=i.baseState;d=0,h=u=s=null,a=o;do{var f=a.lane,c=a.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:c,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(f=t,c=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){l=p.call(c,l,f);break e}l=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,f=typeof p=="function"?p.call(c,l,f):p,f==null)break e;l=Ve({},l,f);break e;case 2:Ar=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else c={eventTime:c,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=c,s=l):h=h.next=c,d|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(1);if(h===null&&(s=l),i.baseState=s,i.firstBaseUpdate=u,i.lastBaseUpdate=h,t=i.shared.interleaved,t!==null){i=t;do d|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);vi|=d,e.lanes=d,e.memoizedState=l}}function B1(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(oe(191,i));i.call(r)}}}var N1=new ny.Component().refs;function fd(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ve({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var fu={isMounted:function(e){return(e=e._reactInternals)?ui(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Dt(),i=Rr(e),o=Zn(r,i);o.payload=t,n!=null&&(o.callback=n),t=Mr(e,o,i),t!==null&&(_n(t,e,i,r),uu(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Dt(),i=Rr(e),o=Zn(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Mr(e,o,i),t!==null&&(_n(t,e,i,r),uu(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Dt(),r=Rr(e),i=Zn(n,r);i.tag=2,t!=null&&(i.callback=t),t=Mr(e,i,r),t!==null&&(_n(t,e,r,n),uu(t,e,r))}};function $1(e,t,n,r,i,o,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,d):t.prototype&&t.prototype.isPureReactComponent?!$o(n,r)||!$o(i,o):!0}function V1(e,t,n){var r=!1,i=Pr,o=t.contextType;return typeof o=="object"&&o!==null?o=ln(o):(i=Ft(t)?fi:gt.current,r=t.contextTypes,o=(r=r!=null)?xs(e,i):Pr),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=fu,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function H1(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&fu.enqueueReplaceState(t,t.state,null)}function hd(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=N1,cd(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=ln(o):(o=Ft(t)?fi:gt.current,i.context=xs(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(fd(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&fu.enqueueReplaceState(i,i.state,null),cu(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Go(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(oe(309));var r=n.stateNode}if(!r)throw Error(oe(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(d){var a=i.refs;a===N1&&(a=i.refs={}),d===null?delete a[o]:a[o]=d},t._stringRef=o,t)}if(typeof e!="string")throw Error(oe(284));if(!n._owner)throw Error(oe(290,e))}return e}function hu(e,t){throw e=Object.prototype.toString.call(t),Error(oe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function W1(e){var t=e._init;return t(e._payload)}function U1(e){function t(v,y){if(e){var b=v.deletions;b===null?(v.deletions=[y],v.flags|=16):b.push(y)}}function n(v,y){if(!e)return null;for(;y!==null;)t(v,y),y=y.sibling;return null}function r(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function i(v,y){return v=zr(v,y),v.index=0,v.sibling=null,v}function o(v,y,b){return v.index=b,e?(b=v.alternate,b!==null?(b=b.index,b<y?(v.flags|=2,y):b):(v.flags|=2,y)):(v.flags|=1048576,y)}function d(v){return e&&v.alternate===null&&(v.flags|=2),v}function a(v,y,b,w){return y===null||y.tag!==6?(y=Kd(b,v.mode,w),y.return=v,y):(y=i(y,b),y.return=v,y)}function s(v,y,b,w){var C=b.type;return C===ls?h(v,y,b.props.children,w,b.key):y!==null&&(y.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===br&&W1(C)===y.type)?(w=i(y,b.props),w.ref=Go(v,y,b),w.return=v,w):(w=Au(b.type,b.key,b.props,null,v.mode,w),w.ref=Go(v,y,b),w.return=v,w)}function u(v,y,b,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=qd(b,v.mode,w),y.return=v,y):(y=i(y,b.children||[]),y.return=v,y)}function h(v,y,b,w,C){return y===null||y.tag!==7?(y=xi(b,v.mode,w,C),y.return=v,y):(y=i(y,b),y.return=v,y)}function l(v,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Kd(""+y,v.mode,b),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ol:return b=Au(y.type,y.key,y.props,null,v.mode,b),b.ref=Go(v,null,y),b.return=v,b;case as:return y=qd(y,v.mode,b),y.return=v,y;case br:var w=y._init;return l(v,w(y._payload),b)}if(_o(y)||xo(y))return y=xi(y,v.mode,b,null),y.return=v,y;hu(v,y)}return null}function f(v,y,b,w){var C=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return C!==null?null:a(v,y,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ol:return b.key===C?s(v,y,b,w):null;case as:return b.key===C?u(v,y,b,w):null;case br:return C=b._init,f(v,y,C(b._payload),w)}if(_o(b)||xo(b))return C!==null?null:h(v,y,b,w,null);hu(v,b)}return null}function c(v,y,b,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return v=v.get(b)||null,a(y,v,""+w,C);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ol:return v=v.get(w.key===null?b:w.key)||null,s(y,v,w,C);case as:return v=v.get(w.key===null?b:w.key)||null,u(y,v,w,C);case br:var _=w._init;return c(v,y,b,_(w._payload),C)}if(_o(w)||xo(w))return v=v.get(b)||null,h(y,v,w,C,null);hu(y,w)}return null}function p(v,y,b,w){for(var C=null,_=null,S=y,T=y=0,I=null;S!==null&&T<b.length;T++){S.index>T?(I=S,S=null):I=S.sibling;var F=f(v,S,b[T],w);if(F===null){S===null&&(S=I);break}e&&S&&F.alternate===null&&t(v,S),y=o(F,y,T),_===null?C=F:_.sibling=F,_=F,S=I}if(T===b.length)return n(v,S),$e&&di(v,T),C;if(S===null){for(;T<b.length;T++)S=l(v,b[T],w),S!==null&&(y=o(S,y,T),_===null?C=S:_.sibling=S,_=S);return $e&&di(v,T),C}for(S=r(v,S);T<b.length;T++)I=c(S,v,T,b[T],w),I!==null&&(e&&I.alternate!==null&&S.delete(I.key===null?T:I.key),y=o(I,y,T),_===null?C=I:_.sibling=I,_=I);return e&&S.forEach(function($){return t(v,$)}),$e&&di(v,T),C}function m(v,y,b,w){var C=xo(b);if(typeof C!="function")throw Error(oe(150));if(b=C.call(b),b==null)throw Error(oe(151));for(var _=C=null,S=y,T=y=0,I=null,F=b.next();S!==null&&!F.done;T++,F=b.next()){S.index>T?(I=S,S=null):I=S.sibling;var $=f(v,S,F.value,w);if($===null){S===null&&(S=I);break}e&&S&&$.alternate===null&&t(v,S),y=o($,y,T),_===null?C=$:_.sibling=$,_=$,S=I}if(F.done)return n(v,S),$e&&di(v,T),C;if(S===null){for(;!F.done;T++,F=b.next())F=l(v,F.value,w),F!==null&&(y=o(F,y,T),_===null?C=F:_.sibling=F,_=F);return $e&&di(v,T),C}for(S=r(v,S);!F.done;T++,F=b.next())F=c(S,v,T,F.value,w),F!==null&&(e&&F.alternate!==null&&S.delete(F.key===null?T:F.key),y=o(F,y,T),_===null?C=F:_.sibling=F,_=F);return e&&S.forEach(function(G){return t(v,G)}),$e&&di(v,T),C}function g(v,y,b,w){if(typeof b=="object"&&b!==null&&b.type===ls&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Ol:e:{for(var C=b.key,_=y;_!==null;){if(_.key===C){if(C=b.type,C===ls){if(_.tag===7){n(v,_.sibling),y=i(_,b.props.children),y.return=v,v=y;break e}}else if(_.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===br&&W1(C)===_.type){n(v,_.sibling),y=i(_,b.props),y.ref=Go(v,_,b),y.return=v,v=y;break e}n(v,_);break}else t(v,_);_=_.sibling}b.type===ls?(y=xi(b.props.children,v.mode,w,b.key),y.return=v,v=y):(w=Au(b.type,b.key,b.props,null,v.mode,w),w.ref=Go(v,y,b),w.return=v,v=w)}return d(v);case as:e:{for(_=b.key;y!==null;){if(y.key===_)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){n(v,y.sibling),y=i(y,b.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else t(v,y);y=y.sibling}y=qd(b,v.mode,w),y.return=v,v=y}return d(v);case br:return _=b._init,g(v,y,_(b._payload),w)}if(_o(b))return p(v,y,b,w);if(xo(b))return m(v,y,b,w);hu(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(n(v,y.sibling),y=i(y,b),y.return=v,v=y):(n(v,y),y=Kd(b,v.mode,w),y.return=v,v=y),d(v)):n(v,y)}return g}var Ts=U1(!0),X1=U1(!1),Ko={},Pn=Or(Ko),qo=Or(Ko),Zo=Or(Ko);function gi(e){if(e===Ko)throw Error(oe(174));return e}function dd(e,t){switch(Re(Zo,t),Re(qo,e),Re(Pn,Ko),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:hh(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=hh(t,e)}Be(Pn),Re(Pn,t)}function Os(){Be(Pn),Be(qo),Be(Zo)}function Y1(e){gi(Zo.current);var t=gi(Pn.current),n=hh(t,e.type);t!==n&&(Re(qo,e),Re(Pn,n))}function pd(e){qo.current===e&&(Be(Pn),Be(qo))}var He=Or(0);function du(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var gd=[];function md(){for(var e=0;e<gd.length;e++)gd[e]._workInProgressVersionPrimary=null;gd.length=0}var pu=Un.ReactCurrentDispatcher,vd=Un.ReactCurrentBatchConfig,mi=0,We=null,nt=null,at=null,gu=!1,Qo=!1,Jo=0,oP=0;function mt(){throw Error(oe(321))}function yd(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!yn(e[n],t[n]))return!1;return!0}function bd(e,t,n,r,i,o){if(mi=o,We=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,pu.current=e===null||e.memoizedState===null?cP:fP,e=n(r,i),Qo){o=0;do{if(Qo=!1,Jo=0,25<=o)throw Error(oe(301));o+=1,at=nt=null,t.updateQueue=null,pu.current=hP,e=n(r,i)}while(Qo)}if(pu.current=yu,t=nt!==null&&nt.next!==null,mi=0,at=nt=We=null,gu=!1,t)throw Error(oe(300));return e}function wd(){var e=Jo!==0;return Jo=0,e}function Dn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return at===null?We.memoizedState=at=e:at=at.next=e,at}function un(){if(nt===null){var e=We.alternate;e=e!==null?e.memoizedState:null}else e=nt.next;var t=at===null?We.memoizedState:at.next;if(t!==null)at=t,nt=e;else{if(e===null)throw Error(oe(310));nt=e,e={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},at===null?We.memoizedState=at=e:at=at.next=e}return at}function ea(e,t){return typeof t=="function"?t(e):t}function xd(e){var t=un(),n=t.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=e;var r=nt,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var d=i.next;i.next=o.next,o.next=d}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=d=null,s=null,u=o;do{var h=u.lane;if((mi&h)===h)s!==null&&(s=s.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var l={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};s===null?(a=s=l,d=r):s=s.next=l,We.lanes|=h,vi|=h}u=u.next}while(u!==null&&u!==o);s===null?d=r:s.next=a,yn(r,t.memoizedState)||(Rt=!0),t.memoizedState=r,t.baseState=d,t.baseQueue=s,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,We.lanes|=o,vi|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Cd(e){var t=un(),n=t.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var d=i=i.next;do o=e(o,d.action),d=d.next;while(d!==i);yn(o,t.memoizedState)||(Rt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function G1(){}function K1(e,t){var n=We,r=un(),i=t(),o=!yn(r.memoizedState,i);if(o&&(r.memoizedState=i,Rt=!0),r=r.queue,_d(Q1.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||at!==null&&at.memoizedState.tag&1){if(n.flags|=2048,ta(9,Z1.bind(null,n,r,i,t),void 0,null),lt===null)throw Error(oe(349));mi&30||q1(n,t,i)}return i}function q1(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=We.updateQueue,t===null?(t={lastEffect:null,stores:null},We.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Z1(e,t,n,r){t.value=n,t.getSnapshot=r,J1(t)&&eb(e)}function Q1(e,t,n){return n(function(){J1(t)&&eb(e)})}function J1(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!yn(e,n)}catch{return!0}}function eb(e){var t=qn(e,1);t!==null&&_n(t,e,1,-1)}function tb(e){var t=Dn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ea,lastRenderedState:e},t.queue=e,e=e.dispatch=uP.bind(null,We,e),[t.memoizedState,e]}function ta(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=We.updateQueue,t===null?(t={lastEffect:null,stores:null},We.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function nb(){return un().memoizedState}function mu(e,t,n,r){var i=Dn();We.flags|=e,i.memoizedState=ta(1|t,n,void 0,r===void 0?null:r)}function vu(e,t,n,r){var i=un();r=r===void 0?null:r;var o=void 0;if(nt!==null){var d=nt.memoizedState;if(o=d.destroy,r!==null&&yd(r,d.deps)){i.memoizedState=ta(t,n,o,r);return}}We.flags|=e,i.memoizedState=ta(1|t,n,o,r)}function rb(e,t){return mu(8390656,8,e,t)}function _d(e,t){return vu(2048,8,e,t)}function ib(e,t){return vu(4,2,e,t)}function sb(e,t){return vu(4,4,e,t)}function ob(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ab(e,t,n){return n=n!=null?n.concat([e]):null,vu(4,4,ob.bind(null,t,e),n)}function Sd(){}function lb(e,t){var n=un();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&yd(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ub(e,t){var n=un();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&yd(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function cb(e,t,n){return mi&21?(yn(n,t)||(n=Ry(),We.lanes|=n,vi|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Rt=!0),e.memoizedState=n)}function aP(e,t){var n=Ae;Ae=n!==0&&4>n?n:4,e(!0);var r=vd.transition;vd.transition={};try{e(!1),t()}finally{Ae=n,vd.transition=r}}function fb(){return un().memoizedState}function lP(e,t,n){var r=Rr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},hb(e))db(t,n);else if(n=R1(e,t,n,r),n!==null){var i=Dt();_n(n,e,r,i),pb(n,t,r)}}function uP(e,t,n){var r=Rr(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(hb(e))db(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var d=t.lastRenderedState,a=o(d,n);if(i.hasEagerState=!0,i.eagerState=a,yn(a,d)){var s=t.interleaved;s===null?(i.next=i,ud(t)):(i.next=s.next,s.next=i),t.interleaved=i;return}}catch{}finally{}n=R1(e,t,i,r),n!==null&&(i=Dt(),_n(n,e,r,i),pb(n,t,r))}}function hb(e){var t=e.alternate;return e===We||t!==null&&t===We}function db(e,t){Qo=gu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function pb(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Sh(e,n)}}var yu={readContext:ln,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useInsertionEffect:mt,useLayoutEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useMutableSource:mt,useSyncExternalStore:mt,useId:mt,unstable_isNewReconciler:!1},cP={readContext:ln,useCallback:function(e,t){return Dn().memoizedState=[e,t===void 0?null:t],e},useContext:ln,useEffect:rb,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,mu(4194308,4,ob.bind(null,t,e),n)},useLayoutEffect:function(e,t){return mu(4194308,4,e,t)},useInsertionEffect:function(e,t){return mu(4,2,e,t)},useMemo:function(e,t){var n=Dn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Dn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=lP.bind(null,We,e),[r.memoizedState,e]},useRef:function(e){var t=Dn();return e={current:e},t.memoizedState=e},useState:tb,useDebugValue:Sd,useDeferredValue:function(e){return Dn().memoizedState=e},useTransition:function(){var e=tb(!1),t=e[0];return e=aP.bind(null,e[1]),Dn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=We,i=Dn();if($e){if(n===void 0)throw Error(oe(407));n=n()}else{if(n=t(),lt===null)throw Error(oe(349));mi&30||q1(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,rb(Q1.bind(null,r,o,e),[e]),r.flags|=2048,ta(9,Z1.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Dn(),t=lt.identifierPrefix;if($e){var n=Kn,r=Gn;n=(r&~(1<<32-vn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Jo++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=oP++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},fP={readContext:ln,useCallback:lb,useContext:ln,useEffect:_d,useImperativeHandle:ab,useInsertionEffect:ib,useLayoutEffect:sb,useMemo:ub,useReducer:xd,useRef:nb,useState:function(){return xd(ea)},useDebugValue:Sd,useDeferredValue:function(e){var t=un();return cb(t,nt.memoizedState,e)},useTransition:function(){var e=xd(ea)[0],t=un().memoizedState;return[e,t]},useMutableSource:G1,useSyncExternalStore:K1,useId:fb,unstable_isNewReconciler:!1},hP={readContext:ln,useCallback:lb,useContext:ln,useEffect:_d,useImperativeHandle:ab,useInsertionEffect:ib,useLayoutEffect:sb,useMemo:ub,useReducer:Cd,useRef:nb,useState:function(){return Cd(ea)},useDebugValue:Sd,useDeferredValue:function(e){var t=un();return nt===null?t.memoizedState=e:cb(t,nt.memoizedState,e)},useTransition:function(){var e=Cd(ea)[0],t=un().memoizedState;return[e,t]},useMutableSource:G1,useSyncExternalStore:K1,useId:fb,unstable_isNewReconciler:!1};function Ps(e,t){try{var n="",r=t;do n+=NT(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function kd(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Ed(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var dP=typeof WeakMap=="function"?WeakMap:Map;function gb(e,t,n){n=Zn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ku||(ku=!0,$d=r),Ed(e,t)},n}function mb(e,t,n){n=Zn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Ed(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Ed(e,t),typeof r!="function"&&(Ir===null?Ir=new Set([this]):Ir.add(this));var d=t.stack;this.componentDidCatch(t.value,{componentStack:d!==null?d:""})}),n}function vb(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new dP;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=TP.bind(null,e,t,n),t.then(e,e))}function yb(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function bb(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Zn(-1,1),t.tag=2,Mr(n,t,1))),n.lanes|=1),e)}var pP=Un.ReactCurrentOwner,Rt=!1;function Pt(e,t,n,r){t.child=e===null?X1(t,null,n,r):Ts(t,e.child,n,r)}function wb(e,t,n,r,i){n=n.render;var o=t.ref;return Es(t,i),r=bd(e,t,n,r,o,i),n=wd(),e!==null&&!Rt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Qn(e,t,i)):($e&&n&&ed(t),t.flags|=1,Pt(e,t,r,i),t.child)}function xb(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!Gd(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,Cb(e,t,o,r,i)):(e=Au(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var d=o.memoizedProps;if(n=n.compare,n=n!==null?n:$o,n(d,r)&&e.ref===t.ref)return Qn(e,t,i)}return t.flags|=1,e=zr(o,r),e.ref=t.ref,e.return=t,t.child=e}function Cb(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if($o(o,r)&&e.ref===t.ref)if(Rt=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(Rt=!0);else return t.lanes=e.lanes,Qn(e,t,i)}return Td(e,t,n,r,i)}function _b(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Re(As,qt),qt|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Re(As,qt),qt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Re(As,qt),qt|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,Re(As,qt),qt|=r;return Pt(e,t,i,n),t.child}function Sb(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Td(e,t,n,r,i){var o=Ft(n)?fi:gt.current;return o=xs(t,o),Es(t,i),n=bd(e,t,n,r,o,i),r=wd(),e!==null&&!Rt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Qn(e,t,i)):($e&&r&&ed(t),t.flags|=1,Pt(e,t,n,i),t.child)}function kb(e,t,n,r,i){if(Ft(n)){var o=!0;nu(t)}else o=!1;if(Es(t,i),t.stateNode===null)wu(e,t),V1(t,n,r),hd(t,n,r,i),r=!0;else if(e===null){var d=t.stateNode,a=t.memoizedProps;d.props=a;var s=d.context,u=n.contextType;typeof u=="object"&&u!==null?u=ln(u):(u=Ft(n)?fi:gt.current,u=xs(t,u));var h=n.getDerivedStateFromProps,l=typeof h=="function"||typeof d.getSnapshotBeforeUpdate=="function";l||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(a!==r||s!==u)&&H1(t,d,r,u),Ar=!1;var f=t.memoizedState;d.state=f,cu(t,r,d,i),s=t.memoizedState,a!==r||f!==s||It.current||Ar?(typeof h=="function"&&(fd(t,n,h,r),s=t.memoizedState),(a=Ar||$1(t,n,a,r,f,s,u))?(l||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),d.props=r,d.state=s,d.context=u,r=a):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{d=t.stateNode,L1(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:wn(t.type,a),d.props=u,l=t.pendingProps,f=d.context,s=n.contextType,typeof s=="object"&&s!==null?s=ln(s):(s=Ft(n)?fi:gt.current,s=xs(t,s));var c=n.getDerivedStateFromProps;(h=typeof c=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(a!==l||f!==s)&&H1(t,d,r,s),Ar=!1,f=t.memoizedState,d.state=f,cu(t,r,d,i);var p=t.memoizedState;a!==l||f!==p||It.current||Ar?(typeof c=="function"&&(fd(t,n,c,r),p=t.memoizedState),(u=Ar||$1(t,n,u,r,f,p,s)||!1)?(h||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(r,p,s),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(r,p,s)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),d.props=r,d.state=p,d.context=s,r=u):(typeof d.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Od(e,t,n,r,o,i)}function Od(e,t,n,r,i,o){Sb(e,t);var d=(t.flags&128)!==0;if(!r&&!d)return i&&P1(t,n,!1),Qn(e,t,o);r=t.stateNode,pP.current=t;var a=d&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&d?(t.child=Ts(t,e.child,null,o),t.child=Ts(t,null,a,o)):Pt(e,t,a,o),t.memoizedState=r.state,i&&P1(t,n,!0),t.child}function Eb(e){var t=e.stateNode;t.pendingContext?T1(e,t.pendingContext,t.pendingContext!==t.context):t.context&&T1(e,t.context,!1),dd(e,t.containerInfo)}function Tb(e,t,n,r,i){return Ss(),id(i),t.flags|=256,Pt(e,t,n,r),t.child}var Pd={dehydrated:null,treeContext:null,retryLane:0};function Dd(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ob(e,t,n){var r=t.pendingProps,i=He.current,o=!1,d=(t.flags&128)!==0,a;if((a=d)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Re(He,i&1),e===null)return rd(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(d=r.children,e=r.fallback,o?(r=t.mode,o=t.child,d={mode:"hidden",children:d},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=d):o=Mu(d,r,0,null),e=xi(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Dd(n),t.memoizedState=Pd,e):Ad(t,d));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return gP(e,t,d,r,a,i,n);if(o){o=r.fallback,d=t.mode,i=e.child,a=i.sibling;var s={mode:"hidden",children:r.children};return!(d&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=s,t.deletions=null):(r=zr(i,s),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=zr(a,o):(o=xi(o,d,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,d=e.child.memoizedState,d=d===null?Dd(n):{baseLanes:d.baseLanes|n,cachePool:null,transitions:d.transitions},o.memoizedState=d,o.childLanes=e.childLanes&~n,t.memoizedState=Pd,r}return o=e.child,e=o.sibling,r=zr(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Ad(e,t){return t=Mu({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function bu(e,t,n,r){return r!==null&&id(r),Ts(t,e.child,null,n),e=Ad(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function gP(e,t,n,r,i,o,d){if(n)return t.flags&256?(t.flags&=-257,r=kd(Error(oe(422))),bu(e,t,d,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mu({mode:"visible",children:r.children},i,0,null),o=xi(o,i,d,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&Ts(t,e.child,null,d),t.child.memoizedState=Dd(d),t.memoizedState=Pd,o);if(!(t.mode&1))return bu(e,t,d,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(oe(419)),r=kd(o,r,void 0),bu(e,t,d,r)}if(a=(d&e.childLanes)!==0,Rt||a){if(r=lt,r!==null){switch(d&-d){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|d)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,qn(e,i),_n(r,e,i,-1))}return Yd(),r=kd(Error(oe(421))),bu(e,t,d,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=OP.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,Kt=Tr(i.nextSibling),Gt=t,$e=!0,bn=null,e!==null&&(on[an++]=Gn,on[an++]=Kn,on[an++]=hi,Gn=e.id,Kn=e.overflow,hi=t),t=Ad(t,r.children),t.flags|=4096,t)}function Pb(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),ld(e.return,t,n)}function Md(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Db(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Pt(e,t,r.children,n),r=He.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Pb(e,n,t);else if(e.tag===19)Pb(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Re(He,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&du(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Md(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&du(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Md(t,!0,n,null,o);break;case"together":Md(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function wu(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Qn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),vi|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(oe(153));if(t.child!==null){for(e=t.child,n=zr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=zr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function mP(e,t,n){switch(t.tag){case 3:Eb(t),Ss();break;case 5:Y1(t);break;case 1:Ft(t.type)&&nu(t);break;case 4:dd(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Re(au,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Re(He,He.current&1),t.flags|=128,null):n&t.child.childLanes?Ob(e,t,n):(Re(He,He.current&1),e=Qn(e,t,n),e!==null?e.sibling:null);Re(He,He.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Db(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Re(He,He.current),r)break;return null;case 22:case 23:return t.lanes=0,_b(e,t,n)}return Qn(e,t,n)}var Ab,jd,Mb,jb;Ab=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},jd=function(){},Mb=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,gi(Pn.current);var o=null;switch(n){case"input":i=lh(e,i),r=lh(e,r),o=[];break;case"select":i=Ve({},i,{value:void 0}),r=Ve({},r,{value:void 0}),o=[];break;case"textarea":i=fh(e,i),r=fh(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Jl)}dh(n,r);var d;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(d in a)a.hasOwnProperty(d)&&(n||(n={}),n[d]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(wo.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var s=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&s!==a&&(s!=null||a!=null))if(u==="style")if(a){for(d in a)!a.hasOwnProperty(d)||s&&s.hasOwnProperty(d)||(n||(n={}),n[d]="");for(d in s)s.hasOwnProperty(d)&&a[d]!==s[d]&&(n||(n={}),n[d]=s[d])}else n||(o||(o=[]),o.push(u,n)),n=s;else u==="dangerouslySetInnerHTML"?(s=s?s.__html:void 0,a=a?a.__html:void 0,s!=null&&a!==s&&(o=o||[]).push(u,s)):u==="children"?typeof s!="string"&&typeof s!="number"||(o=o||[]).push(u,""+s):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(wo.hasOwnProperty(u)?(s!=null&&u==="onScroll"&&ze("scroll",e),o||a===s||(o=[])):(o=o||[]).push(u,s))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},jb=function(e,t,n,r){n!==r&&(t.flags|=4)};function na(e,t){if(!$e)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function vt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function vP(e,t,n){var r=t.pendingProps;switch(td(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(t),null;case 1:return Ft(t.type)&&tu(),vt(t),null;case 3:return r=t.stateNode,Os(),Be(It),Be(gt),md(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ou(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,bn!==null&&(Wd(bn),bn=null))),jd(e,t),vt(t),null;case 5:pd(t);var i=gi(Zo.current);if(n=t.type,e!==null&&t.stateNode!=null)Mb(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(oe(166));return vt(t),null}if(e=gi(Pn.current),ou(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[On]=t,r[Xo]=o,e=(t.mode&1)!==0,n){case"dialog":ze("cancel",r),ze("close",r);break;case"iframe":case"object":case"embed":ze("load",r);break;case"video":case"audio":for(i=0;i<Ho.length;i++)ze(Ho[i],r);break;case"source":ze("error",r);break;case"img":case"image":case"link":ze("error",r),ze("load",r);break;case"details":ze("toggle",r);break;case"input":hy(r,o),ze("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},ze("invalid",r);break;case"textarea":gy(r,o),ze("invalid",r)}dh(n,o),i=null;for(var d in o)if(o.hasOwnProperty(d)){var a=o[d];d==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&Ql(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&Ql(r.textContent,a,e),i=["children",""+a]):wo.hasOwnProperty(d)&&a!=null&&d==="onScroll"&&ze("scroll",r)}switch(n){case"input":Pl(r),py(r,o,!0);break;case"textarea":Pl(r),vy(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Jl)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{d=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=yy(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=d.createElement(n,{is:r.is}):(e=d.createElement(n),n==="select"&&(d=e,r.multiple?d.multiple=!0:r.size&&(d.size=r.size))):e=d.createElementNS(e,n),e[On]=t,e[Xo]=r,Ab(e,t,!1,!1),t.stateNode=e;e:{switch(d=ph(n,r),n){case"dialog":ze("cancel",e),ze("close",e),i=r;break;case"iframe":case"object":case"embed":ze("load",e),i=r;break;case"video":case"audio":for(i=0;i<Ho.length;i++)ze(Ho[i],e);i=r;break;case"source":ze("error",e),i=r;break;case"img":case"image":case"link":ze("error",e),ze("load",e),i=r;break;case"details":ze("toggle",e),i=r;break;case"input":hy(e,r),i=lh(e,r),ze("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Ve({},r,{value:void 0}),ze("invalid",e);break;case"textarea":gy(e,r),i=fh(e,r),ze("invalid",e);break;default:i=r}dh(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var s=a[o];o==="style"?xy(e,s):o==="dangerouslySetInnerHTML"?(s=s?s.__html:void 0,s!=null&&by(e,s)):o==="children"?typeof s=="string"?(n!=="textarea"||s!=="")&&So(e,s):typeof s=="number"&&So(e,""+s):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(wo.hasOwnProperty(o)?s!=null&&o==="onScroll"&&ze("scroll",e):s!=null&&Zf(e,o,s,d))}switch(n){case"input":Pl(e),py(e,r,!1);break;case"textarea":Pl(e),vy(e);break;case"option":r.value!=null&&e.setAttribute("value",""+wr(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?us(e,!!r.multiple,o,!1):r.defaultValue!=null&&us(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Jl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return vt(t),null;case 6:if(e&&t.stateNode!=null)jb(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(oe(166));if(n=gi(Zo.current),gi(Pn.current),ou(t)){if(r=t.stateNode,n=t.memoizedProps,r[On]=t,(o=r.nodeValue!==n)&&(e=Gt,e!==null))switch(e.tag){case 3:Ql(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ql(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[On]=t,t.stateNode=r}return vt(t),null;case 13:if(Be(He),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if($e&&Kt!==null&&t.mode&1&&!(t.flags&128))F1(),Ss(),t.flags|=98560,o=!1;else if(o=ou(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(oe(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(oe(317));o[On]=t}else Ss(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;vt(t),o=!1}else bn!==null&&(Wd(bn),bn=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||He.current&1?rt===0&&(rt=3):Yd())),t.updateQueue!==null&&(t.flags|=4),vt(t),null);case 4:return Os(),jd(e,t),e===null&&Wo(t.stateNode.containerInfo),vt(t),null;case 10:return ad(t.type._context),vt(t),null;case 17:return Ft(t.type)&&tu(),vt(t),null;case 19:if(Be(He),o=t.memoizedState,o===null)return vt(t),null;if(r=(t.flags&128)!==0,d=o.rendering,d===null)if(r)na(o,!1);else{if(rt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(d=du(e),d!==null){for(t.flags|=128,na(o,!1),r=d.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,d=o.alternate,d===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=d.childLanes,o.lanes=d.lanes,o.child=d.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=d.memoizedProps,o.memoizedState=d.memoizedState,o.updateQueue=d.updateQueue,o.type=d.type,e=d.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Re(He,He.current&1|2),t.child}e=e.sibling}o.tail!==null&&Ke()>Ms&&(t.flags|=128,r=!0,na(o,!1),t.lanes=4194304)}else{if(!r)if(e=du(d),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),na(o,!0),o.tail===null&&o.tailMode==="hidden"&&!d.alternate&&!$e)return vt(t),null}else 2*Ke()-o.renderingStartTime>Ms&&n!==1073741824&&(t.flags|=128,r=!0,na(o,!1),t.lanes=4194304);o.isBackwards?(d.sibling=t.child,t.child=d):(n=o.last,n!==null?n.sibling=d:t.child=d,o.last=d)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ke(),t.sibling=null,n=He.current,Re(He,r?n&1|2:n&1),t):(vt(t),null);case 22:case 23:return Xd(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?qt&1073741824&&(vt(t),t.subtreeFlags&6&&(t.flags|=8192)):vt(t),null;case 24:return null;case 25:return null}throw Error(oe(156,t.tag))}function yP(e,t){switch(td(t),t.tag){case 1:return Ft(t.type)&&tu(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Os(),Be(It),Be(gt),md(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return pd(t),null;case 13:if(Be(He),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(oe(340));Ss()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Be(He),null;case 4:return Os(),null;case 10:return ad(t.type._context),null;case 22:case 23:return Xd(),null;case 24:return null;default:return null}}var xu=!1,yt=!1,bP=typeof WeakSet=="function"?WeakSet:Set,de=null;function Ds(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ye(e,t,r)}else n.current=null}function Id(e,t,n){try{n()}catch(r){Ye(e,t,r)}}var Ib=!1;function wP(e,t){if(Xh=$l,e=f1(),zh(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var d=0,a=-1,s=-1,u=0,h=0,l=e,f=null;t:for(;;){for(var c;l!==n||i!==0&&l.nodeType!==3||(a=d+i),l!==o||r!==0&&l.nodeType!==3||(s=d+r),l.nodeType===3&&(d+=l.nodeValue.length),(c=l.firstChild)!==null;)f=l,l=c;for(;;){if(l===e)break t;if(f===n&&++u===i&&(a=d),f===o&&++h===r&&(s=d),(c=l.nextSibling)!==null)break;l=f,f=l.parentNode}l=c}n=a===-1||s===-1?null:{start:a,end:s}}else n=null}n=n||{start:0,end:0}}else n=null;for(Yh={focusedElem:e,selectionRange:n},$l=!1,de=t;de!==null;)if(t=de,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,de=e;else for(;de!==null;){t=de;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,v=t.stateNode,y=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:wn(t.type,m),g);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(oe(163))}}catch(w){Ye(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,de=e;break}de=t.return}return p=Ib,Ib=!1,p}function ra(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&Id(t,n,o)}i=i.next}while(i!==r)}}function Cu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Fd(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Fb(e){var t=e.alternate;t!==null&&(e.alternate=null,Fb(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[On],delete t[Xo],delete t[Zh],delete t[nP],delete t[rP])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Rb(e){return e.tag===5||e.tag===3||e.tag===4}function Lb(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Rb(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Rd(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Jl));else if(r!==4&&(e=e.child,e!==null))for(Rd(e,t,n),e=e.sibling;e!==null;)Rd(e,t,n),e=e.sibling}function Ld(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Ld(e,t,n),e=e.sibling;e!==null;)Ld(e,t,n),e=e.sibling}var ft=null,xn=!1;function jr(e,t,n){for(n=n.child;n!==null;)zb(e,t,n),n=n.sibling}function zb(e,t,n){if(Tn&&typeof Tn.onCommitFiberUnmount=="function")try{Tn.onCommitFiberUnmount(Fl,n)}catch{}switch(n.tag){case 5:yt||Ds(n,t);case 6:var r=ft,i=xn;ft=null,jr(e,t,n),ft=r,xn=i,ft!==null&&(xn?(e=ft,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ft.removeChild(n.stateNode));break;case 18:ft!==null&&(xn?(e=ft,n=n.stateNode,e.nodeType===8?qh(e.parentNode,n):e.nodeType===1&&qh(e,n),Fo(e)):qh(ft,n.stateNode));break;case 4:r=ft,i=xn,ft=n.stateNode.containerInfo,xn=!0,jr(e,t,n),ft=r,xn=i;break;case 0:case 11:case 14:case 15:if(!yt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,d=o.destroy;o=o.tag,d!==void 0&&(o&2||o&4)&&Id(n,t,d),i=i.next}while(i!==r)}jr(e,t,n);break;case 1:if(!yt&&(Ds(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ye(n,t,a)}jr(e,t,n);break;case 21:jr(e,t,n);break;case 22:n.mode&1?(yt=(r=yt)||n.memoizedState!==null,jr(e,t,n),yt=r):jr(e,t,n);break;default:jr(e,t,n)}}function Bb(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new bP),t.forEach(function(r){var i=PP.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Cn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,d=t,a=d;e:for(;a!==null;){switch(a.tag){case 5:ft=a.stateNode,xn=!1;break e;case 3:ft=a.stateNode.containerInfo,xn=!0;break e;case 4:ft=a.stateNode.containerInfo,xn=!0;break e}a=a.return}if(ft===null)throw Error(oe(160));zb(o,d,i),ft=null,xn=!1;var s=i.alternate;s!==null&&(s.return=null),i.return=null}catch(u){Ye(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Nb(t,e),t=t.sibling}function Nb(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Cn(t,e),An(e),r&4){try{ra(3,e,e.return),Cu(3,e)}catch(m){Ye(e,e.return,m)}try{ra(5,e,e.return)}catch(m){Ye(e,e.return,m)}}break;case 1:Cn(t,e),An(e),r&512&&n!==null&&Ds(n,n.return);break;case 5:if(Cn(t,e),An(e),r&512&&n!==null&&Ds(n,n.return),e.flags&32){var i=e.stateNode;try{So(i,"")}catch(m){Ye(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,d=n!==null?n.memoizedProps:o,a=e.type,s=e.updateQueue;if(e.updateQueue=null,s!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&dy(i,o),ph(a,d);var u=ph(a,o);for(d=0;d<s.length;d+=2){var h=s[d],l=s[d+1];h==="style"?xy(i,l):h==="dangerouslySetInnerHTML"?by(i,l):h==="children"?So(i,l):Zf(i,h,l,u)}switch(a){case"input":uh(i,o);break;case"textarea":my(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var c=o.value;c!=null?us(i,!!o.multiple,c,!1):f!==!!o.multiple&&(o.defaultValue!=null?us(i,!!o.multiple,o.defaultValue,!0):us(i,!!o.multiple,o.multiple?[]:"",!1))}i[Xo]=o}catch(m){Ye(e,e.return,m)}}break;case 6:if(Cn(t,e),An(e),r&4){if(e.stateNode===null)throw Error(oe(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Ye(e,e.return,m)}}break;case 3:if(Cn(t,e),An(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Fo(t.containerInfo)}catch(m){Ye(e,e.return,m)}break;case 4:Cn(t,e),An(e);break;case 13:Cn(t,e),An(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Nd=Ke())),r&4&&Bb(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(yt=(u=yt)||h,Cn(t,e),yt=u):Cn(t,e),An(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!h&&e.mode&1)for(de=e,h=e.child;h!==null;){for(l=de=h;de!==null;){switch(f=de,c=f.child,f.tag){case 0:case 11:case 14:case 15:ra(4,f,f.return);break;case 1:Ds(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){Ye(r,n,m)}}break;case 5:Ds(f,f.return);break;case 22:if(f.memoizedState!==null){Hb(l);continue}}c!==null?(c.return=f,de=c):Hb(l)}h=h.sibling}e:for(h=null,l=e;;){if(l.tag===5){if(h===null){h=l;try{i=l.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=l.stateNode,s=l.memoizedProps.style,d=s!=null&&s.hasOwnProperty("display")?s.display:null,a.style.display=wy("display",d))}catch(m){Ye(e,e.return,m)}}}else if(l.tag===6){if(h===null)try{l.stateNode.nodeValue=u?"":l.memoizedProps}catch(m){Ye(e,e.return,m)}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===e)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===e)break e;for(;l.sibling===null;){if(l.return===null||l.return===e)break e;h===l&&(h=null),l=l.return}h===l&&(h=null),l.sibling.return=l.return,l=l.sibling}}break;case 19:Cn(t,e),An(e),r&4&&Bb(e);break;case 21:break;default:Cn(t,e),An(e)}}function An(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Rb(n)){var r=n;break e}n=n.return}throw Error(oe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(So(i,""),r.flags&=-33);var o=Lb(e);Ld(e,o,i);break;case 3:case 4:var d=r.stateNode.containerInfo,a=Lb(e);Rd(e,a,d);break;default:throw Error(oe(161))}}catch(s){Ye(e,e.return,s)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function xP(e,t,n){de=e,$b(e)}function $b(e,t,n){for(var r=(e.mode&1)!==0;de!==null;){var i=de,o=i.child;if(i.tag===22&&r){var d=i.memoizedState!==null||xu;if(!d){var a=i.alternate,s=a!==null&&a.memoizedState!==null||yt;a=xu;var u=yt;if(xu=d,(yt=s)&&!u)for(de=i;de!==null;)d=de,s=d.child,d.tag===22&&d.memoizedState!==null?Wb(i):s!==null?(s.return=d,de=s):Wb(i);for(;o!==null;)de=o,$b(o),o=o.sibling;de=i,xu=a,yt=u}Vb(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,de=o):Vb(e)}}function Vb(e){for(;de!==null;){var t=de;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:yt||Cu(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!yt)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:wn(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&B1(t,o,r);break;case 3:var d=t.updateQueue;if(d!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}B1(t,d,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var s=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":s.autoFocus&&n.focus();break;case"img":s.src&&(n.src=s.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var l=h.dehydrated;l!==null&&Fo(l)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(oe(163))}yt||t.flags&512&&Fd(t)}catch(f){Ye(t,t.return,f)}}if(t===e){de=null;break}if(n=t.sibling,n!==null){n.return=t.return,de=n;break}de=t.return}}function Hb(e){for(;de!==null;){var t=de;if(t===e){de=null;break}var n=t.sibling;if(n!==null){n.return=t.return,de=n;break}de=t.return}}function Wb(e){for(;de!==null;){var t=de;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Cu(4,t)}catch(s){Ye(t,n,s)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(s){Ye(t,i,s)}}var o=t.return;try{Fd(t)}catch(s){Ye(t,o,s)}break;case 5:var d=t.return;try{Fd(t)}catch(s){Ye(t,d,s)}}}catch(s){Ye(t,t.return,s)}if(t===e){de=null;break}var a=t.sibling;if(a!==null){a.return=t.return,de=a;break}de=t.return}}var CP=Math.ceil,_u=Un.ReactCurrentDispatcher,zd=Un.ReactCurrentOwner,cn=Un.ReactCurrentBatchConfig,Te=0,lt=null,Ze=null,ht=0,qt=0,As=Or(0),rt=0,ia=null,vi=0,Su=0,Bd=0,sa=null,Lt=null,Nd=0,Ms=1/0,Jn=null,ku=!1,$d=null,Ir=null,Eu=!1,Fr=null,Tu=0,oa=0,Vd=null,Ou=-1,Pu=0;function Dt(){return Te&6?Ke():Ou!==-1?Ou:Ou=Ke()}function Rr(e){return e.mode&1?Te&2&&ht!==0?ht&-ht:sP.transition!==null?(Pu===0&&(Pu=Ry()),Pu):(e=Ae,e!==0||(e=window.event,e=e===void 0?16:Uy(e.type)),e):1}function _n(e,t,n,r){if(50<oa)throw oa=0,Vd=null,Error(oe(185));Do(e,n,r),(!(Te&2)||e!==lt)&&(e===lt&&(!(Te&2)&&(Su|=n),rt===4&&Lr(e,ht)),zt(e,r),n===1&&Te===0&&!(t.mode&1)&&(Ms=Ke()+500,ru&&Dr()))}function zt(e,t){var n=e.callbackNode;sO(e,t);var r=zl(e,e===lt?ht:0);if(r===0)n!==null&&jy(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&jy(n),t===1)e.tag===0?iP(Xb.bind(null,e)):D1(Xb.bind(null,e)),eP(function(){!(Te&6)&&Dr()}),n=null;else{switch(Ly(r)){case 1:n=xh;break;case 4:n=Iy;break;case 16:n=Il;break;case 536870912:n=Fy;break;default:n=Il}n=ew(n,Ub.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Ub(e,t){if(Ou=-1,Pu=0,Te&6)throw Error(oe(327));var n=e.callbackNode;if(js()&&e.callbackNode!==n)return null;var r=zl(e,e===lt?ht:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Du(e,r);else{t=r;var i=Te;Te|=2;var o=Gb();(lt!==e||ht!==t)&&(Jn=null,Ms=Ke()+500,bi(e,t));do try{kP();break}catch(a){Yb(e,a)}while(1);od(),_u.current=o,Te=i,Ze!==null?t=0:(lt=null,ht=0,t=rt)}if(t!==0){if(t===2&&(i=Ch(e),i!==0&&(r=i,t=Hd(e,i))),t===1)throw n=ia,bi(e,0),Lr(e,r),zt(e,Ke()),n;if(t===6)Lr(e,r);else{if(i=e.current.alternate,!(r&30)&&!_P(i)&&(t=Du(e,r),t===2&&(o=Ch(e),o!==0&&(r=o,t=Hd(e,o))),t===1))throw n=ia,bi(e,0),Lr(e,r),zt(e,Ke()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(oe(345));case 2:wi(e,Lt,Jn);break;case 3:if(Lr(e,r),(r&130023424)===r&&(t=Nd+500-Ke(),10<t)){if(zl(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Dt(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Kh(wi.bind(null,e,Lt,Jn),t);break}wi(e,Lt,Jn);break;case 4:if(Lr(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var d=31-vn(r);o=1<<d,d=t[d],d>i&&(i=d),r&=~o}if(r=i,r=Ke()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*CP(r/1960))-r,10<r){e.timeoutHandle=Kh(wi.bind(null,e,Lt,Jn),r);break}wi(e,Lt,Jn);break;case 5:wi(e,Lt,Jn);break;default:throw Error(oe(329))}}}return zt(e,Ke()),e.callbackNode===n?Ub.bind(null,e):null}function Hd(e,t){var n=sa;return e.current.memoizedState.isDehydrated&&(bi(e,t).flags|=256),e=Du(e,t),e!==2&&(t=Lt,Lt=n,t!==null&&Wd(t)),e}function Wd(e){Lt===null?Lt=e:Lt.push.apply(Lt,e)}function _P(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!yn(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Lr(e,t){for(t&=~Bd,t&=~Su,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-vn(t),r=1<<n;e[n]=-1,t&=~r}}function Xb(e){if(Te&6)throw Error(oe(327));js();var t=zl(e,0);if(!(t&1))return zt(e,Ke()),null;var n=Du(e,t);if(e.tag!==0&&n===2){var r=Ch(e);r!==0&&(t=r,n=Hd(e,r))}if(n===1)throw n=ia,bi(e,0),Lr(e,t),zt(e,Ke()),n;if(n===6)throw Error(oe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wi(e,Lt,Jn),zt(e,Ke()),null}function Ud(e,t){var n=Te;Te|=1;try{return e(t)}finally{Te=n,Te===0&&(Ms=Ke()+500,ru&&Dr())}}function yi(e){Fr!==null&&Fr.tag===0&&!(Te&6)&&js();var t=Te;Te|=1;var n=cn.transition,r=Ae;try{if(cn.transition=null,Ae=1,e)return e()}finally{Ae=r,cn.transition=n,Te=t,!(Te&6)&&Dr()}}function Xd(){qt=As.current,Be(As)}function bi(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,JO(n)),Ze!==null)for(n=Ze.return;n!==null;){var r=n;switch(td(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&tu();break;case 3:Os(),Be(It),Be(gt),md();break;case 5:pd(r);break;case 4:Os();break;case 13:Be(He);break;case 19:Be(He);break;case 10:ad(r.type._context);break;case 22:case 23:Xd()}n=n.return}if(lt=e,Ze=e=zr(e.current,null),ht=qt=t,rt=0,ia=null,Bd=Su=vi=0,Lt=sa=null,pi!==null){for(t=0;t<pi.length;t++)if(n=pi[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var d=o.next;o.next=i,r.next=d}n.pending=r}pi=null}return e}function Yb(e,t){do{var n=Ze;try{if(od(),pu.current=yu,gu){for(var r=We.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}gu=!1}if(mi=0,at=nt=We=null,Qo=!1,Jo=0,zd.current=null,n===null||n.return===null){rt=1,ia=t,Ze=null;break}e:{var o=e,d=n.return,a=n,s=t;if(t=ht,a.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){var u=s,h=a,l=h.tag;if(!(h.mode&1)&&(l===0||l===11||l===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var c=yb(d);if(c!==null){c.flags&=-257,bb(c,d,a,o,t),c.mode&1&&vb(o,u,t),t=c,s=u;var p=t.updateQueue;if(p===null){var m=new Set;m.add(s),t.updateQueue=m}else p.add(s);break e}else{if(!(t&1)){vb(o,u,t),Yd();break e}s=Error(oe(426))}}else if($e&&a.mode&1){var g=yb(d);if(g!==null){!(g.flags&65536)&&(g.flags|=256),bb(g,d,a,o,t),id(Ps(s,a));break e}}o=s=Ps(s,a),rt!==4&&(rt=2),sa===null?sa=[o]:sa.push(o),o=d;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var v=gb(o,s,t);z1(o,v);break e;case 1:a=s;var y=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ir===null||!Ir.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t;var w=mb(o,a,t);z1(o,w);break e}}o=o.return}while(o!==null)}qb(n)}catch(C){t=C,Ze===n&&n!==null&&(Ze=n=n.return);continue}break}while(1)}function Gb(){var e=_u.current;return _u.current=yu,e===null?yu:e}function Yd(){(rt===0||rt===3||rt===2)&&(rt=4),lt===null||!(vi&268435455)&&!(Su&268435455)||Lr(lt,ht)}function Du(e,t){var n=Te;Te|=2;var r=Gb();(lt!==e||ht!==t)&&(Jn=null,bi(e,t));do try{SP();break}catch(i){Yb(e,i)}while(1);if(od(),Te=n,_u.current=r,Ze!==null)throw Error(oe(261));return lt=null,ht=0,rt}function SP(){for(;Ze!==null;)Kb(Ze)}function kP(){for(;Ze!==null&&!qT();)Kb(Ze)}function Kb(e){var t=Jb(e.alternate,e,qt);e.memoizedProps=e.pendingProps,t===null?qb(e):Ze=t,zd.current=null}function qb(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=yP(n,t),n!==null){n.flags&=32767,Ze=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{rt=6,Ze=null;return}}else if(n=vP(n,t,qt),n!==null){Ze=n;return}if(t=t.sibling,t!==null){Ze=t;return}Ze=t=e}while(t!==null);rt===0&&(rt=5)}function wi(e,t,n){var r=Ae,i=cn.transition;try{cn.transition=null,Ae=1,EP(e,t,n,r)}finally{cn.transition=i,Ae=r}return null}function EP(e,t,n,r){do js();while(Fr!==null);if(Te&6)throw Error(oe(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(oe(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(oO(e,o),e===lt&&(Ze=lt=null,ht=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Eu||(Eu=!0,ew(Il,function(){return js(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=cn.transition,cn.transition=null;var d=Ae;Ae=1;var a=Te;Te|=4,zd.current=null,wP(e,n),Nb(n,e),XO(Yh),$l=!!Xh,Yh=Xh=null,e.current=n,xP(n),ZT(),Te=a,Ae=d,cn.transition=o}else e.current=n;if(Eu&&(Eu=!1,Fr=e,Tu=i),o=e.pendingLanes,o===0&&(Ir=null),eO(n.stateNode),zt(e,Ke()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ku)throw ku=!1,e=$d,$d=null,e;return Tu&1&&e.tag!==0&&js(),o=e.pendingLanes,o&1?e===Vd?oa++:(oa=0,Vd=e):oa=0,Dr(),null}function js(){if(Fr!==null){var e=Ly(Tu),t=cn.transition,n=Ae;try{if(cn.transition=null,Ae=16>e?16:e,Fr===null)var r=!1;else{if(e=Fr,Fr=null,Tu=0,Te&6)throw Error(oe(331));var i=Te;for(Te|=4,de=e.current;de!==null;){var o=de,d=o.child;if(de.flags&16){var a=o.deletions;if(a!==null){for(var s=0;s<a.length;s++){var u=a[s];for(de=u;de!==null;){var h=de;switch(h.tag){case 0:case 11:case 15:ra(8,h,o)}var l=h.child;if(l!==null)l.return=h,de=l;else for(;de!==null;){h=de;var f=h.sibling,c=h.return;if(Fb(h),h===u){de=null;break}if(f!==null){f.return=c,de=f;break}de=c}}}var p=o.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}de=o}}if(o.subtreeFlags&2064&&d!==null)d.return=o,de=d;else e:for(;de!==null;){if(o=de,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ra(9,o,o.return)}var v=o.sibling;if(v!==null){v.return=o.return,de=v;break e}de=o.return}}var y=e.current;for(de=y;de!==null;){d=de;var b=d.child;if(d.subtreeFlags&2064&&b!==null)b.return=d,de=b;else e:for(d=y;de!==null;){if(a=de,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Cu(9,a)}}catch(C){Ye(a,a.return,C)}if(a===d){de=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,de=w;break e}de=a.return}}if(Te=i,Dr(),Tn&&typeof Tn.onPostCommitFiberRoot=="function")try{Tn.onPostCommitFiberRoot(Fl,e)}catch{}r=!0}return r}finally{Ae=n,cn.transition=t}}return!1}function Zb(e,t,n){t=Ps(n,t),t=gb(e,t,1),e=Mr(e,t,1),t=Dt(),e!==null&&(Do(e,1,t),zt(e,t))}function Ye(e,t,n){if(e.tag===3)Zb(e,e,n);else for(;t!==null;){if(t.tag===3){Zb(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ir===null||!Ir.has(r))){e=Ps(n,e),e=mb(t,e,1),t=Mr(t,e,1),e=Dt(),t!==null&&(Do(t,1,e),zt(t,e));break}}t=t.return}}function TP(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Dt(),e.pingedLanes|=e.suspendedLanes&n,lt===e&&(ht&n)===n&&(rt===4||rt===3&&(ht&130023424)===ht&&500>Ke()-Nd?bi(e,0):Bd|=n),zt(e,t)}function Qb(e,t){t===0&&(e.mode&1?(t=Ll,Ll<<=1,!(Ll&130023424)&&(Ll=4194304)):t=1);var n=Dt();e=qn(e,t),e!==null&&(Do(e,t,n),zt(e,n))}function OP(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Qb(e,n)}function PP(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(oe(314))}r!==null&&r.delete(t),Qb(e,n)}var Jb;Jb=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||It.current)Rt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Rt=!1,mP(e,t,n);Rt=!!(e.flags&131072)}else Rt=!1,$e&&t.flags&1048576&&A1(t,su,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;wu(e,t),e=t.pendingProps;var i=xs(t,gt.current);Es(t,n),i=bd(null,t,r,e,i,n);var o=wd();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ft(r)?(o=!0,nu(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,cd(t),i.updater=fu,t.stateNode=i,i._reactInternals=t,hd(t,r,e,n),t=Od(null,t,r,!0,o,n)):(t.tag=0,$e&&o&&ed(t),Pt(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(wu(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=AP(r),e=wn(r,e),i){case 0:t=Td(null,t,r,e,n);break e;case 1:t=kb(null,t,r,e,n);break e;case 11:t=wb(null,t,r,e,n);break e;case 14:t=xb(null,t,r,wn(r.type,e),n);break e}throw Error(oe(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:wn(r,i),Td(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:wn(r,i),kb(e,t,r,i,n);case 3:e:{if(Eb(t),e===null)throw Error(oe(387));r=t.pendingProps,o=t.memoizedState,i=o.element,L1(e,t),cu(t,r,null,n);var d=t.memoizedState;if(r=d.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=Ps(Error(oe(423)),t),t=Tb(e,t,r,n,i);break e}else if(r!==i){i=Ps(Error(oe(424)),t),t=Tb(e,t,r,n,i);break e}else for(Kt=Tr(t.stateNode.containerInfo.firstChild),Gt=t,$e=!0,bn=null,n=X1(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ss(),r===i){t=Qn(e,t,n);break e}Pt(e,t,r,n)}t=t.child}return t;case 5:return Y1(t),e===null&&rd(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,d=i.children,Gh(r,i)?d=null:o!==null&&Gh(r,o)&&(t.flags|=32),Sb(e,t),Pt(e,t,d,n),t.child;case 6:return e===null&&rd(t),null;case 13:return Ob(e,t,n);case 4:return dd(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ts(t,null,r,n):Pt(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:wn(r,i),wb(e,t,r,i,n);case 7:return Pt(e,t,t.pendingProps,n),t.child;case 8:return Pt(e,t,t.pendingProps.children,n),t.child;case 12:return Pt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,d=i.value,Re(au,r._currentValue),r._currentValue=d,o!==null)if(yn(o.value,d)){if(o.children===i.children&&!It.current){t=Qn(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var a=o.dependencies;if(a!==null){d=o.child;for(var s=a.firstContext;s!==null;){if(s.context===r){if(o.tag===1){s=Zn(-1,n&-n),s.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?s.next=s:(s.next=h.next,h.next=s),u.pending=s}}o.lanes|=n,s=o.alternate,s!==null&&(s.lanes|=n),ld(o.return,n,t),a.lanes|=n;break}s=s.next}}else if(o.tag===10)d=o.type===t.type?null:o.child;else if(o.tag===18){if(d=o.return,d===null)throw Error(oe(341));d.lanes|=n,a=d.alternate,a!==null&&(a.lanes|=n),ld(d,n,t),d=o.sibling}else d=o.child;if(d!==null)d.return=o;else for(d=o;d!==null;){if(d===t){d=null;break}if(o=d.sibling,o!==null){o.return=d.return,d=o;break}d=d.return}o=d}Pt(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Es(t,n),i=ln(i),r=r(i),t.flags|=1,Pt(e,t,r,n),t.child;case 14:return r=t.type,i=wn(r,t.pendingProps),i=wn(r.type,i),xb(e,t,r,i,n);case 15:return Cb(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:wn(r,i),wu(e,t),t.tag=1,Ft(r)?(e=!0,nu(t)):e=!1,Es(t,n),V1(t,r,i),hd(t,r,i,n),Od(null,t,r,!0,e,n);case 19:return Db(e,t,n);case 22:return _b(e,t,n)}throw Error(oe(156,t.tag))};function ew(e,t){return My(e,t)}function DP(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fn(e,t,n,r){return new DP(e,t,n,r)}function Gd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function AP(e){if(typeof e=="function")return Gd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===eh)return 11;if(e===rh)return 14}return 2}function zr(e,t){var n=e.alternate;return n===null?(n=fn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Au(e,t,n,r,i,o){var d=2;if(r=e,typeof e=="function")Gd(e)&&(d=1);else if(typeof e=="string")d=5;else e:switch(e){case ls:return xi(n.children,i,o,t);case Qf:d=8,i|=8;break;case Jf:return e=fn(12,n,t,i|2),e.elementType=Jf,e.lanes=o,e;case th:return e=fn(13,n,t,i),e.elementType=th,e.lanes=o,e;case nh:return e=fn(19,n,t,i),e.elementType=nh,e.lanes=o,e;case ly:return Mu(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case oy:d=10;break e;case ay:d=9;break e;case eh:d=11;break e;case rh:d=14;break e;case br:d=16,r=null;break e}throw Error(oe(130,e==null?e:typeof e,""))}return t=fn(d,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function xi(e,t,n,r){return e=fn(7,e,r,t),e.lanes=n,e}function Mu(e,t,n,r){return e=fn(22,e,r,t),e.elementType=ly,e.lanes=n,e.stateNode={isHidden:!1},e}function Kd(e,t,n){return e=fn(6,e,null,t),e.lanes=n,e}function qd(e,t,n){return t=fn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function MP(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_h(0),this.expirationTimes=_h(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_h(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Zd(e,t,n,r,i,o,d,a,s){return e=new MP(e,t,n,a,s),t===1?(t=1,o===!0&&(t|=8)):t=0,o=fn(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},cd(o),e}function jP(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:as,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function tw(e){if(!e)return Pr;e=e._reactInternals;e:{if(ui(e)!==e||e.tag!==1)throw Error(oe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ft(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(oe(171))}if(e.tag===1){var n=e.type;if(Ft(n))return O1(e,n,t)}return t}function nw(e,t,n,r,i,o,d,a,s){return e=Zd(n,r,!0,e,i,o,d,a,s),e.context=tw(null),n=e.current,r=Dt(),i=Rr(n),o=Zn(r,i),o.callback=t??null,Mr(n,o,i),e.current.lanes=i,Do(e,i,r),zt(e,r),e}function ju(e,t,n,r){var i=t.current,o=Dt(),d=Rr(i);return n=tw(n),t.context===null?t.context=n:t.pendingContext=n,t=Zn(o,d),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Mr(i,t,d),e!==null&&(_n(e,i,d,o),uu(e,i,d)),d}function Iu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function rw(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Qd(e,t){rw(e,t),(e=e.alternate)&&rw(e,t)}function IP(){return null}var iw=typeof reportError=="function"?reportError:function(e){console.error(e)};function Jd(e){this._internalRoot=e}Fu.prototype.render=Jd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(oe(409));ju(e,t,null,null)},Fu.prototype.unmount=Jd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;yi(function(){ju(null,e,null,null)}),t[Xn]=null}};function Fu(e){this._internalRoot=e}Fu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ny();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Sr.length&&t!==0&&t<Sr[n].priority;n++);Sr.splice(n,0,e),n===0&&Hy(e)}};function ep(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ru(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function sw(){}function FP(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=Iu(d);o.call(u)}}var d=nw(t,r,e,0,null,!1,!1,"",sw);return e._reactRootContainer=d,e[Xn]=d.current,Wo(e.nodeType===8?e.parentNode:e),yi(),d}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Iu(s);a.call(u)}}var s=Zd(e,0,!1,null,null,!1,!1,"",sw);return e._reactRootContainer=s,e[Xn]=s.current,Wo(e.nodeType===8?e.parentNode:e),yi(function(){ju(t,s,n,r)}),s}function Lu(e,t,n,r,i){var o=n._reactRootContainer;if(o){var d=o;if(typeof i=="function"){var a=i;i=function(){var s=Iu(d);a.call(s)}}ju(t,d,e,i)}else d=FP(n,t,e,i,r);return Iu(d)}zy=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Po(t.pendingLanes);n!==0&&(Sh(t,n|1),zt(t,Ke()),!(Te&6)&&(Ms=Ke()+500,Dr()))}break;case 13:yi(function(){var r=qn(e,1);if(r!==null){var i=Dt();_n(r,e,1,i)}}),Qd(e,1)}},kh=function(e){if(e.tag===13){var t=qn(e,134217728);if(t!==null){var n=Dt();_n(t,e,134217728,n)}Qd(e,134217728)}},By=function(e){if(e.tag===13){var t=Rr(e),n=qn(e,t);if(n!==null){var r=Dt();_n(n,e,t,r)}Qd(e,t)}},Ny=function(){return Ae},$y=function(e,t){var n=Ae;try{return Ae=e,t()}finally{Ae=n}},vh=function(e,t,n){switch(t){case"input":if(uh(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=eu(r);if(!i)throw Error(oe(90));fy(r),uh(r,i)}}}break;case"textarea":my(e,n);break;case"select":t=n.value,t!=null&&us(e,!!n.multiple,t,!1)}},ky=Ud,Ey=yi;var RP={usingClientEntryPoint:!1,Events:[Yo,bs,eu,_y,Sy,Ud]},aa={findFiberByHostInstance:ci,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},LP={bundleType:aa.bundleType,version:aa.version,rendererPackageName:aa.rendererPackageName,rendererConfig:aa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Un.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Dy(e),e===null?null:e.stateNode},findFiberByHostInstance:aa.findFiberByHostInstance||IP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zu.isDisabled&&zu.supportsFiber)try{Fl=zu.inject(LP),Tn=zu}catch{}}Ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RP,Ut.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ep(t))throw Error(oe(200));return jP(e,t,null,n)},Ut.createRoot=function(e,t){if(!ep(e))throw Error(oe(299));var n=!1,r="",i=iw;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Zd(e,1,!1,null,null,n,!1,r,i),e[Xn]=t.current,Wo(e.nodeType===8?e.parentNode:e),new Jd(t)},Ut.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(oe(188)):(e=Object.keys(e).join(","),Error(oe(268,e)));return e=Dy(t),e=e===null?null:e.stateNode,e},Ut.flushSync=function(e){return yi(e)},Ut.hydrate=function(e,t,n){if(!Ru(t))throw Error(oe(200));return Lu(null,e,t,!0,n)},Ut.hydrateRoot=function(e,t,n){if(!ep(e))throw Error(oe(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",d=iw;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(d=n.onRecoverableError)),t=nw(t,null,e,1,n??null,i,!1,o,d),e[Xn]=t.current,Wo(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Fu(t)},Ut.render=function(e,t,n){if(!Ru(t))throw Error(oe(200));return Lu(null,e,t,!1,n)},Ut.unmountComponentAtNode=function(e){if(!Ru(e))throw Error(oe(40));return e._reactRootContainer?(yi(function(){Lu(null,null,e,!1,function(){e._reactRootContainer=null,e[Xn]=null})}),!0):!1},Ut.unstable_batchedUpdates=Ud,Ut.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ru(n))throw Error(oe(200));if(e==null||e._reactInternals===void 0)throw Error(oe(38));return Lu(e,t,n,!1,r)},Ut.version="18.2.0-next-9e3b772b8-20220608";function ow(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ow)}catch(e){console.error(e)}}ow(),J0.exports=Ut;var Is=J0.exports,aw,lw=Is;aw=lw.createRoot,lw.hydrateRoot;const uw=E.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Bu=E.createContext({}),tp=E.createContext(null),Nu=typeof document<"u",np=Nu?E.useLayoutEffect:E.useEffect,rp=E.createContext({strict:!1}),ip=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),cw="data-"+ip("framerAppearId");function zP(e,t,n,r){const{visualElement:i}=E.useContext(Bu),o=E.useContext(rp),d=E.useContext(tp),a=E.useContext(uw).reducedMotion,s=E.useRef();r=r||o.renderer,!s.current&&r&&(s.current=r(e,{visualState:t,parent:i,props:n,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:a}));const u=s.current;E.useInsertionEffect(()=>{u&&u.update(n,d)});const h=E.useRef(!!(n[cw]&&!window.HandoffComplete));return np(()=>{u&&(u.render(),h.current&&u.animationState&&u.animationState.animateChanges())}),E.useEffect(()=>{u&&(u.updateFeatures(),!h.current&&u.animationState&&u.animationState.animateChanges(),h.current&&(h.current=!1,window.HandoffComplete=!0))}),u}function fw(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function BP(e,t,n){return E.useCallback(r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):fw(n)&&(n.current=r))},[t])}function la(e){return typeof e=="string"||Array.isArray(e)}function $u(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const sp=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],op=["initial",...sp];function Vu(e){return $u(e.animate)||op.some(t=>la(e[t]))}function hw(e){return!!(Vu(e)||e.variants)}function NP(e,t){if(Vu(e)){const{initial:n,animate:r}=e;return{initial:n===!1||la(n)?n:void 0,animate:la(r)?r:void 0}}return e.inherit!==!1?t:{}}function $P(e){const{initial:t,animate:n}=NP(e,E.useContext(Bu));return E.useMemo(()=>({initial:t,animate:n}),[dw(t),dw(n)])}function dw(e){return Array.isArray(e)?e.join(" "):e}const pw={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ua={};for(const e in pw)ua[e]={isEnabled:t=>pw[e].some(n=>!!t[n])};function ap(e){for(const t in e)ua[t]={...ua[t],...e[t]}}const gw=E.createContext({}),VP=E.createContext({}),HP=Symbol.for("motionComponentSymbol");function WP({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:i}){e&&ap(e);function o(a,s){let u;const h={...E.useContext(uw),...a,layoutId:UP(a)},{isStatic:l}=h,f=$P(a),c=r(a,l);if(!l&&Nu){f.visualElement=zP(i,c,h,t);const p=E.useContext(VP),m=E.useContext(rp).strict;f.visualElement&&(u=f.visualElement.loadFeatures(h,m,e,p))}return E.createElement(Bu.Provider,{value:f},u&&f.visualElement?E.createElement(u,{visualElement:f.visualElement,...h}):null,n(i,a,BP(c,f.visualElement,s),c,l,f.visualElement))}const d=E.forwardRef(o);return d[HP]=i,d}function UP({layoutId:e}){const t=E.useContext(gw).id;return t&&e!==void 0?t+"-"+e:e}function XP(e){function t(r,i={}){return WP(e(r,i))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(r,i)=>(n.has(i)||n.set(i,t(i)),n.get(i))})}const YP=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function lp(e){return typeof e!="string"||e.includes("-")?!1:!!(YP.indexOf(e)>-1||/[A-Z]/.test(e))}const GP={},ca=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ci=new Set(ca);function mw(e,{layout:t,layoutId:n}){return Ci.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!GP[e]||e==="opacity")}const Zt=e=>!!(e&&e.getVelocity),KP={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},qP=ca.length;function ZP(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},r,i){let o="";for(let d=0;d<qP;d++){const a=ca[d];if(e[a]!==void 0){const s=KP[a]||a;o+=`${s}(${e[a]}) `}}return t&&!e.z&&(o+="translateZ(0)"),o=o.trim(),i?o=i(e,r?"":o):n&&r&&(o="none"),o}const vw=e=>t=>typeof t=="string"&&t.startsWith(e),yw=vw("--"),up=vw("var(--"),QP=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,JP=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Fs=(e,t,n)=>Math.min(Math.max(n,e),t),_i={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},fa={..._i,transform:e=>Fs(0,1,e)},Hu={..._i,default:1},ha=e=>Math.round(e*1e5)/1e5,Wu=/(-)?([\d]*\.?[\d])+/g,bw=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,eD=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function da(e){return typeof e=="string"}const pa=e=>({test:t=>da(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Br=pa("deg"),Rs=pa("%"),_e=pa("px"),tD=pa("vh"),nD=pa("vw"),ww={...Rs,parse:e=>Rs.parse(e)/100,transform:e=>Rs.transform(e*100)},xw={..._i,transform:Math.round},Cw={borderWidth:_e,borderTopWidth:_e,borderRightWidth:_e,borderBottomWidth:_e,borderLeftWidth:_e,borderRadius:_e,radius:_e,borderTopLeftRadius:_e,borderTopRightRadius:_e,borderBottomRightRadius:_e,borderBottomLeftRadius:_e,width:_e,maxWidth:_e,height:_e,maxHeight:_e,size:_e,top:_e,right:_e,bottom:_e,left:_e,padding:_e,paddingTop:_e,paddingRight:_e,paddingBottom:_e,paddingLeft:_e,margin:_e,marginTop:_e,marginRight:_e,marginBottom:_e,marginLeft:_e,rotate:Br,rotateX:Br,rotateY:Br,rotateZ:Br,scale:Hu,scaleX:Hu,scaleY:Hu,scaleZ:Hu,skew:Br,skewX:Br,skewY:Br,distance:_e,translateX:_e,translateY:_e,translateZ:_e,x:_e,y:_e,z:_e,perspective:_e,transformPerspective:_e,opacity:fa,originX:ww,originY:ww,originZ:_e,zIndex:xw,fillOpacity:fa,strokeOpacity:fa,numOctaves:xw};function cp(e,t,n,r){const{style:i,vars:o,transform:d,transformOrigin:a}=e;let s=!1,u=!1,h=!0;for(const l in t){const f=t[l];if(yw(l)){o[l]=f;continue}const c=Cw[l],p=JP(f,c);if(Ci.has(l)){if(s=!0,d[l]=p,!h)continue;f!==(c.default||0)&&(h=!1)}else l.startsWith("origin")?(u=!0,a[l]=p):i[l]=p}if(t.transform||(s||r?i.transform=ZP(e.transform,n,h,r):i.transform&&(i.transform="none")),u){const{originX:l="50%",originY:f="50%",originZ:c=0}=a;i.transformOrigin=`${l} ${f} ${c}`}}const fp=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function _w(e,t,n){for(const r in t)!Zt(t[r])&&!mw(r,n)&&(e[r]=t[r])}function rD({transformTemplate:e},t,n){return E.useMemo(()=>{const r=fp();return cp(r,t,{enableHardwareAcceleration:!n},e),Object.assign({},r.vars,r.style)},[t])}function iD(e,t,n){const r=e.style||{},i={};return _w(i,r,e),Object.assign(i,rD(e,t,n)),e.transformValues?e.transformValues(i):i}function sD(e,t,n){const r={},i=iD(e,t,n);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=i,r}const oD=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Uu(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||oD.has(e)}let Sw=e=>!Uu(e);function aD(e){e&&(Sw=t=>t.startsWith("on")?!Uu(t):e(t))}try{aD(require("@emotion/is-prop-valid").default)}catch{}function lD(e,t,n){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(Sw(i)||n===!0&&Uu(i)||!t&&!Uu(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}function kw(e,t,n){return typeof e=="string"?e:_e.transform(t+n*e)}function uD(e,t,n){const r=kw(t,e.x,e.width),i=kw(n,e.y,e.height);return`${r} ${i}`}const cD={offset:"stroke-dashoffset",array:"stroke-dasharray"},fD={offset:"strokeDashoffset",array:"strokeDasharray"};function hD(e,t,n=1,r=0,i=!0){e.pathLength=1;const o=i?cD:fD;e[o.offset]=_e.transform(-r);const d=_e.transform(t),a=_e.transform(n);e[o.array]=`${d} ${a}`}function hp(e,{attrX:t,attrY:n,attrScale:r,originX:i,originY:o,pathLength:d,pathSpacing:a=1,pathOffset:s=0,...u},h,l,f){if(cp(e,u,h,f),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:c,style:p,dimensions:m}=e;c.transform&&(m&&(p.transform=c.transform),delete c.transform),m&&(i!==void 0||o!==void 0||p.transform)&&(p.transformOrigin=uD(m,i!==void 0?i:.5,o!==void 0?o:.5)),t!==void 0&&(c.x=t),n!==void 0&&(c.y=n),r!==void 0&&(c.scale=r),d!==void 0&&hD(c,d,a,s,!1)}const Ew=()=>({...fp(),attrs:{}}),dp=e=>typeof e=="string"&&e.toLowerCase()==="svg";function dD(e,t,n,r){const i=E.useMemo(()=>{const o=Ew();return hp(o,t,{enableHardwareAcceleration:!1},dp(r),e.transformTemplate),{...o.attrs,style:{...o.style}}},[t]);if(e.style){const o={};_w(o,e.style,e),i.style={...o,...i.style}}return i}function pD(e=!1){return(n,r,i,{latestValues:o},d)=>{const s=(lp(n)?dD:sD)(r,o,d,n),h={...lD(r,typeof n=="string",e),...s,ref:i},{children:l}=r,f=E.useMemo(()=>Zt(l)?l.get():l,[l]);return E.createElement(n,{...h,children:f})}}function Tw(e,{style:t,vars:n},r,i){Object.assign(e.style,t,i&&i.getProjectionStyles(r));for(const o in n)e.style.setProperty(o,n[o])}const Ow=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Pw(e,t,n,r){Tw(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(Ow.has(i)?i:ip(i),t.attrs[i])}function pp(e,t){const{style:n}=e,r={};for(const i in n)(Zt(n[i])||t.style&&Zt(t.style[i])||mw(i,e))&&(r[i]=n[i]);return r}function Dw(e,t){const n=pp(e,t);for(const r in e)if(Zt(e[r])||Zt(t[r])){const i=ca.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[i]=e[r]}return n}function gp(e,t,n,r={},i={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,i)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,i)),t}function Aw(e){const t=E.useRef(null);return t.current===null&&(t.current=e()),t.current}const Xu=e=>Array.isArray(e),gD=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),mD=e=>Xu(e)?e[e.length-1]||0:e;function vD(e){const t=Zt(e)?e.get():e;return gD(t)?t.toValue():t}function yD({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},r,i,o){const d={latestValues:bD(r,i,o,e),renderState:t()};return n&&(d.mount=a=>n(r,a,d)),d}const Mw=e=>(t,n)=>{const r=E.useContext(Bu),i=E.useContext(tp),o=()=>yD(e,t,r,i);return n?o():Aw(o)};function bD(e,t,n,r){const i={},o=r(e,{});for(const f in o)i[f]=vD(o[f]);let{initial:d,animate:a}=e;const s=Vu(e),u=hw(e);t&&u&&!s&&e.inherit!==!1&&(d===void 0&&(d=t.initial),a===void 0&&(a=t.animate));let h=n?n.initial===!1:!1;h=h||d===!1;const l=h?a:d;return l&&typeof l!="boolean"&&!$u(l)&&(Array.isArray(l)?l:[l]).forEach(c=>{const p=gp(e,c);if(!p)return;const{transitionEnd:m,transition:g,...v}=p;for(const y in v){let b=v[y];if(Array.isArray(b)){const w=h?b.length-1:0;b=b[w]}b!==null&&(i[y]=b)}for(const y in m)i[y]=m[y]}),i}const bt=e=>e;class jw{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function wD(e){let t=new jw,n=new jw,r=0,i=!1,o=!1;const d=new WeakSet,a={schedule:(s,u=!1,h=!1)=>{const l=h&&i,f=l?t:n;return u&&d.add(s),f.add(s)&&l&&i&&(r=t.order.length),s},cancel:s=>{n.remove(s),d.delete(s)},process:s=>{if(i){o=!0;return}if(i=!0,[t,n]=[n,t],n.clear(),r=t.order.length,r)for(let u=0;u<r;u++){const h=t.order[u];h(s),d.has(h)&&(a.schedule(h),e())}i=!1,o&&(o=!1,a.process(s))}};return a}const Yu=["prepare","read","update","preRender","render","postRender"],xD=40;function CD(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=Yu.reduce((l,f)=>(l[f]=wD(()=>n=!0),l),{}),d=l=>o[l].process(i),a=()=>{const l=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(l-i.timestamp,xD),1),i.timestamp=l,i.isProcessing=!0,Yu.forEach(d),i.isProcessing=!1,n&&t&&(r=!1,e(a))},s=()=>{n=!0,r=!0,i.isProcessing||e(a)};return{schedule:Yu.reduce((l,f)=>{const c=o[f];return l[f]=(p,m=!1,g=!1)=>(n||s(),c.schedule(p,m,g)),l},{}),cancel:l=>Yu.forEach(f=>o[f].cancel(l)),state:i,steps:o}}const{schedule:wt,cancel:Gu,state:mp,steps:Y7}=CD(typeof requestAnimationFrame<"u"?requestAnimationFrame:bt,!0),_D={useVisualState:Mw({scrapeMotionValuesFromProps:Dw,createRenderState:Ew,onMount:(e,t,{renderState:n,latestValues:r})=>{wt.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),wt.render(()=>{hp(n,r,{enableHardwareAcceleration:!1},dp(t.tagName),e.transformTemplate),Pw(t,n)})}})},SD={useVisualState:Mw({scrapeMotionValuesFromProps:pp,createRenderState:fp})};function kD(e,{forwardMotionProps:t=!1},n,r){return{...lp(e)?_D:SD,preloadedFeatures:n,useRender:pD(t),createVisualElement:r,Component:e}}function Si(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const ED=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function Iw(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const TD=e=>t=>ED(t)&&e(t,Iw(t));function Ku(e,t,n,r){return Si(e,t,TD(n),r)}const OD=(e,t)=>n=>t(e(n)),ki=(...e)=>e.reduce(OD);function Fw(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const Rw=Fw("dragHorizontal"),Lw=Fw("dragVertical");function PD(e){let t=!1;if(e==="y")t=Lw();else if(e==="x")t=Rw();else{const n=Rw(),r=Lw();n&&r?t=()=>{n(),r()}:(n&&n(),r&&r())}return t}function zw(){const e=PD(!0);return e?(e(),!1):!0}class Ls{constructor(t){this.isMounted=!1,this.node=t}update(){}}function Bw(e,t){const n="pointer"+(t?"enter":"leave"),r="onHover"+(t?"Start":"End"),i=(o,d)=>{if(o.pointerType==="touch"||zw())return;const a=e.getProps();e.animationState&&a.whileHover&&e.animationState.setActive("whileHover",t),a[r]&&wt.update(()=>a[r](o,d))};return Ku(e.current,n,i,{passive:!e.getProps()[r]})}class DD extends Ls{mount(){this.unmount=ki(Bw(this.node,!0),Bw(this.node,!1))}unmount(){}}class AD extends Ls{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ki(Si(this.node.current,"focus",()=>this.onFocus()),Si(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Nw=(e,t)=>t?e===t?!0:Nw(e,t.parentElement):!1;function vp(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,Iw(n))}class MD extends Ls{constructor(){super(...arguments),this.removeStartListeners=bt,this.removeEndListeners=bt,this.removeAccessibleListeners=bt,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),o=Ku(window,"pointerup",(a,s)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:h,globalTapTarget:l}=this.node.getProps();wt.update(()=>{!l&&!Nw(this.node.current,a.target)?h&&h(a,s):u&&u(a,s)})},{passive:!(r.onTap||r.onPointerUp)}),d=Ku(window,"pointercancel",(a,s)=>this.cancelPress(a,s),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=ki(o,d),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=o=>{if(o.key!=="Enter"||this.isPressing)return;const d=a=>{a.key!=="Enter"||!this.checkPressEnd()||vp("up",(s,u)=>{const{onTap:h}=this.node.getProps();h&&wt.update(()=>h(s,u))})};this.removeEndListeners(),this.removeEndListeners=Si(this.node.current,"keyup",d),vp("down",(a,s)=>{this.startPress(a,s)})},n=Si(this.node.current,"keydown",t),r=()=>{this.isPressing&&vp("cancel",(o,d)=>this.cancelPress(o,d))},i=Si(this.node.current,"blur",r);this.removeAccessibleListeners=ki(n,i)}}startPress(t,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&wt.update(()=>r(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!zw()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&wt.update(()=>r(t,n))}mount(){const t=this.node.getProps(),n=Ku(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),r=Si(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ki(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const yp=new WeakMap,bp=new WeakMap,jD=e=>{const t=yp.get(e.target);t&&t(e)},ID=e=>{e.forEach(jD)};function FD({root:e,...t}){const n=e||document;bp.has(n)||bp.set(n,{});const r=bp.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(ID,{root:e,...t})),r[i]}function RD(e,t,n){const r=FD(t);return yp.set(e,n),r.observe(e),()=>{yp.delete(e),r.unobserve(e)}}const LD={some:0,all:1};class zD extends Ls{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:o}=t,d={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:LD[i]},a=s=>{const{isIntersecting:u}=s;if(this.isInView===u||(this.isInView=u,o&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:l}=this.node.getProps(),f=u?h:l;f&&f(s)};return RD(this.node.current,d,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(BD(t,n))&&this.startObserver()}unmount(){}}function BD({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const ND={inView:{Feature:zD},tap:{Feature:MD},focus:{Feature:AD},hover:{Feature:DD}};function $w(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function $D(e){const t={};return e.values.forEach((n,r)=>t[r]=n.get()),t}function VD(e){const t={};return e.values.forEach((n,r)=>t[r]=n.getVelocity()),t}function qu(e,t,n){const r=e.getProps();return gp(r,t,n!==void 0?n:r.custom,$D(e),VD(e))}let HD=bt,wp=bt;const Ei=e=>e*1e3,Nr=e=>e/1e3,WD={current:!1},Vw=e=>Array.isArray(e)&&typeof e[0]=="number";function Hw(e){return!!(!e||typeof e=="string"&&Ww[e]||Vw(e)||Array.isArray(e)&&e.every(Hw))}const ga=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,Ww={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ga([0,.65,.55,1]),circOut:ga([.55,0,1,.45]),backIn:ga([.31,.01,.66,-.59]),backOut:ga([.33,1.53,.69,.99])};function Uw(e){if(e)return Vw(e)?ga(e):Array.isArray(e)?e.map(Uw):Ww[e]}function UD(e,t,n,{delay:r=0,duration:i,repeat:o=0,repeatType:d="loop",ease:a,times:s}={}){const u={[t]:n};s&&(u.offset=s);const h=Uw(a);return Array.isArray(h)&&(u.easing=h),e.animate(u,{delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:o+1,direction:d==="reverse"?"alternate":"normal"})}function XD(e,{repeat:t,repeatType:n="loop"}){const r=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[r]}const Xw=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,YD=1e-7,GD=12;function KD(e,t,n,r,i){let o,d,a=0;do d=t+(n-t)/2,o=Xw(d,r,i)-e,o>0?n=d:t=d;while(Math.abs(o)>YD&&++a<GD);return d}function ma(e,t,n,r){if(e===t&&n===r)return bt;const i=o=>KD(o,0,1,e,n);return o=>o===0||o===1?o:Xw(i(o),t,r)}const qD=ma(.42,0,1,1),ZD=ma(0,0,.58,1),Yw=ma(.42,0,.58,1),QD=e=>Array.isArray(e)&&typeof e[0]!="number",Gw=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Kw=e=>t=>1-e(1-t),xp=e=>1-Math.sin(Math.acos(e)),JD=Kw(xp),eA=Gw(xp),qw=ma(.33,1.53,.69,.99),Cp=Kw(qw),tA=Gw(Cp),nA={linear:bt,easeIn:qD,easeInOut:Yw,easeOut:ZD,circIn:xp,circInOut:eA,circOut:JD,backIn:Cp,backInOut:tA,backOut:qw,anticipate:e=>(e*=2)<1?.5*Cp(e):.5*(2-Math.pow(2,-10*(e-1)))},Zw=e=>{if(Array.isArray(e)){wp(e.length===4);const[t,n,r,i]=e;return ma(t,n,r,i)}else if(typeof e=="string")return nA[e];return e},_p=(e,t)=>n=>!!(da(n)&&eD.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),Qw=(e,t,n)=>r=>{if(!da(r))return r;const[i,o,d,a]=r.match(Wu);return{[e]:parseFloat(i),[t]:parseFloat(o),[n]:parseFloat(d),alpha:a!==void 0?parseFloat(a):1}},rA=e=>Fs(0,255,e),Sp={..._i,transform:e=>Math.round(rA(e))},Ti={test:_p("rgb","red"),parse:Qw("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+Sp.transform(e)+", "+Sp.transform(t)+", "+Sp.transform(n)+", "+ha(fa.transform(r))+")"};function iA(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const kp={test:_p("#"),parse:iA,transform:Ti.transform},zs={test:_p("hsl","hue"),parse:Qw("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Rs.transform(ha(t))+", "+Rs.transform(ha(n))+", "+ha(fa.transform(r))+")"},At={test:e=>Ti.test(e)||kp.test(e)||zs.test(e),parse:e=>Ti.test(e)?Ti.parse(e):zs.test(e)?zs.parse(e):kp.parse(e),transform:e=>da(e)?e:e.hasOwnProperty("red")?Ti.transform(e):zs.transform(e)},Zu=(e,t,n)=>-n*e+n*t+e;function Ep(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function sA({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,o=0,d=0;if(!t)i=o=d=n;else{const a=n<.5?n*(1+t):n+t-n*t,s=2*n-a;i=Ep(s,a,e+1/3),o=Ep(s,a,e),d=Ep(s,a,e-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(d*255),alpha:r}}const Tp=(e,t,n)=>{const r=e*e;return Math.sqrt(Math.max(0,n*(t*t-r)+r))},oA=[kp,Ti,zs],aA=e=>oA.find(t=>t.test(e));function Jw(e){const t=aA(e);let n=t.parse(e);return t===zs&&(n=sA(n)),n}const ex=(e,t)=>{const n=Jw(e),r=Jw(t),i={...n};return o=>(i.red=Tp(n.red,r.red,o),i.green=Tp(n.green,r.green,o),i.blue=Tp(n.blue,r.blue,o),i.alpha=Zu(n.alpha,r.alpha,o),Ti.transform(i))};function lA(e){var t,n;return isNaN(e)&&da(e)&&(((t=e.match(Wu))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(bw))===null||n===void 0?void 0:n.length)||0)>0}const tx={regex:QP,countKey:"Vars",token:"${v}",parse:bt},nx={regex:bw,countKey:"Colors",token:"${c}",parse:At.parse},rx={regex:Wu,countKey:"Numbers",token:"${n}",parse:_i.parse};function Op(e,{regex:t,countKey:n,token:r,parse:i}){const o=e.tokenised.match(t);o&&(e["num"+n]=o.length,e.tokenised=e.tokenised.replace(t,r),e.values.push(...o.map(i)))}function Qu(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Op(n,tx),Op(n,nx),Op(n,rx),n}function ix(e){return Qu(e).values}function sx(e){const{values:t,numColors:n,numVars:r,tokenised:i}=Qu(e),o=t.length;return d=>{let a=i;for(let s=0;s<o;s++)s<r?a=a.replace(tx.token,d[s]):s<r+n?a=a.replace(nx.token,At.transform(d[s])):a=a.replace(rx.token,ha(d[s]));return a}}const uA=e=>typeof e=="number"?0:e;function cA(e){const t=ix(e);return sx(e)(t.map(uA))}const Bs={test:lA,parse:ix,createTransformer:sx,getAnimatableNone:cA},ox=(e,t)=>n=>`${n>0?t:e}`;function ax(e,t){return typeof e=="number"?n=>Zu(e,t,n):At.test(e)?ex(e,t):e.startsWith("var(")?ox(e,t):ux(e,t)}const lx=(e,t)=>{const n=[...e],r=n.length,i=e.map((o,d)=>ax(o,t[d]));return o=>{for(let d=0;d<r;d++)n[d]=i[d](o);return n}},fA=(e,t)=>{const n={...e,...t},r={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=ax(e[i],t[i]));return i=>{for(const o in r)n[o]=r[o](i);return n}},ux=(e,t)=>{const n=Bs.createTransformer(t),r=Qu(e),i=Qu(t);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?ki(lx(r.values,i.values),n):ox(e,t)},cx=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},fx=(e,t)=>n=>Zu(e,t,n);function hA(e){return typeof e=="number"?fx:typeof e=="string"?At.test(e)?ex:ux:Array.isArray(e)?lx:typeof e=="object"?fA:fx}function dA(e,t,n){const r=[],i=n||hA(e[0]),o=e.length-1;for(let d=0;d<o;d++){let a=i(e[d],e[d+1]);if(t){const s=Array.isArray(t)?t[d]||bt:t;a=ki(s,a)}r.push(a)}return r}function hx(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const o=e.length;if(wp(o===t.length),o===1)return()=>t[0];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());const d=dA(t,r,i),a=d.length,s=u=>{let h=0;if(a>1)for(;h<e.length-2&&!(u<e[h+1]);h++);const l=cx(e[h],e[h+1],u);return d[h](l)};return n?u=>s(Fs(e[0],e[o-1],u)):s}function pA(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=cx(0,t,r);e.push(Zu(n,1,i))}}function gA(e){const t=[0];return pA(t,e.length-1),t}function mA(e,t){return e.map(n=>n*t)}function vA(e,t){return e.map(()=>t||Yw).splice(0,e.length-1)}function Ju({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=QD(r)?r.map(Zw):Zw(r),o={done:!1,value:t[0]},d=mA(n&&n.length===t.length?n:gA(t),e),a=hx(d,t,{ease:Array.isArray(i)?i:vA(t,i)});return{calculatedDuration:e,next:s=>(o.value=a(s),o.done=s>=e,o)}}function dx(e,t){return t?e*(1e3/t):0}const yA=5;function px(e,t,n){const r=Math.max(t-yA,0);return dx(n-e(r),t-r)}const Pp=.001,bA=.01,gx=10,wA=.05,xA=1;function CA({duration:e=800,bounce:t=.25,velocity:n=0,mass:r=1}){let i,o;HD(e<=Ei(gx));let d=1-t;d=Fs(wA,xA,d),e=Fs(bA,gx,Nr(e)),d<1?(i=u=>{const h=u*d,l=h*e,f=h-n,c=Dp(u,d),p=Math.exp(-l);return Pp-f/c*p},o=u=>{const l=u*d*e,f=l*n+n,c=Math.pow(d,2)*Math.pow(u,2)*e,p=Math.exp(-l),m=Dp(Math.pow(u,2),d);return(-i(u)+Pp>0?-1:1)*((f-c)*p)/m}):(i=u=>{const h=Math.exp(-u*e),l=(u-n)*e+1;return-Pp+h*l},o=u=>{const h=Math.exp(-u*e),l=(n-u)*(e*e);return h*l});const a=5/e,s=SA(i,o,a);if(e=Ei(e),isNaN(s))return{stiffness:100,damping:10,duration:e};{const u=Math.pow(s,2)*r;return{stiffness:u,damping:d*2*Math.sqrt(r*u),duration:e}}}const _A=12;function SA(e,t,n){let r=n;for(let i=1;i<_A;i++)r=r-e(r)/t(r);return r}function Dp(e,t){return e*Math.sqrt(1-t*t)}const kA=["duration","bounce"],EA=["stiffness","damping","mass"];function mx(e,t){return t.some(n=>e[n]!==void 0)}function TA(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!mx(e,EA)&&mx(e,kA)){const n=CA(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function vx({keyframes:e,restDelta:t,restSpeed:n,...r}){const i=e[0],o=e[e.length-1],d={done:!1,value:i},{stiffness:a,damping:s,mass:u,duration:h,velocity:l,isResolvedFromDuration:f}=TA({...r,velocity:-Nr(r.velocity||0)}),c=l||0,p=s/(2*Math.sqrt(a*u)),m=o-i,g=Nr(Math.sqrt(a/u)),v=Math.abs(m)<5;n||(n=v?.01:2),t||(t=v?.005:.5);let y;if(p<1){const b=Dp(g,p);y=w=>{const C=Math.exp(-p*g*w);return o-C*((c+p*g*m)/b*Math.sin(b*w)+m*Math.cos(b*w))}}else if(p===1)y=b=>o-Math.exp(-g*b)*(m+(c+g*m)*b);else{const b=g*Math.sqrt(p*p-1);y=w=>{const C=Math.exp(-p*g*w),_=Math.min(b*w,300);return o-C*((c+p*g*m)*Math.sinh(_)+b*m*Math.cosh(_))/b}}return{calculatedDuration:f&&h||null,next:b=>{const w=y(b);if(f)d.done=b>=h;else{let C=c;b!==0&&(p<1?C=px(y,b,w):C=0);const _=Math.abs(C)<=n,S=Math.abs(o-w)<=t;d.done=_&&S}return d.value=d.done?o:w,d}}}function yx({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:d,min:a,max:s,restDelta:u=.5,restSpeed:h}){const l=e[0],f={done:!1,value:l},c=T=>a!==void 0&&T<a||s!==void 0&&T>s,p=T=>a===void 0?s:s===void 0||Math.abs(a-T)<Math.abs(s-T)?a:s;let m=n*t;const g=l+m,v=d===void 0?g:d(g);v!==g&&(m=v-l);const y=T=>-m*Math.exp(-T/r),b=T=>v+y(T),w=T=>{const I=y(T),F=b(T);f.done=Math.abs(I)<=u,f.value=f.done?v:F};let C,_;const S=T=>{c(f.value)&&(C=T,_=vx({keyframes:[f.value,p(f.value)],velocity:px(b,T,f.value),damping:i,stiffness:o,restDelta:u,restSpeed:h}))};return S(0),{calculatedDuration:null,next:T=>{let I=!1;return!_&&C===void 0&&(I=!0,w(T),S(T)),C!==void 0&&T>C?_.next(T-C):(!I&&w(T),f)}}}const OA=e=>{const t=({timestamp:n})=>e(n);return{start:()=>wt.update(t,!0),stop:()=>Gu(t),now:()=>mp.isProcessing?mp.timestamp:performance.now()}},bx=2e4;function wx(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<bx;)t+=n,r=e.next(t);return t>=bx?1/0:t}const PA={decay:yx,inertia:yx,tween:Ju,keyframes:Ju,spring:vx};function ec({autoplay:e=!0,delay:t=0,driver:n=OA,keyframes:r,type:i="keyframes",repeat:o=0,repeatDelay:d=0,repeatType:a="loop",onPlay:s,onStop:u,onComplete:h,onUpdate:l,...f}){let c=1,p=!1,m,g;const v=()=>{g=new Promise(A=>{m=A})};v();let y;const b=PA[i]||Ju;let w;b!==Ju&&typeof r[0]!="number"&&(w=hx([0,100],r,{clamp:!1}),r=[0,100]);const C=b({...f,keyframes:r});let _;a==="mirror"&&(_=b({...f,keyframes:[...r].reverse(),velocity:-(f.velocity||0)}));let S="idle",T=null,I=null,F=null;C.calculatedDuration===null&&o&&(C.calculatedDuration=wx(C));const{calculatedDuration:$}=C;let G=1/0,ne=1/0;$!==null&&(G=$+d,ne=G*(o+1)-d);let X=0;const Q=A=>{if(I===null)return;c>0&&(I=Math.min(I,A)),c<0&&(I=Math.min(A-ne/c,I)),T!==null?X=T:X=Math.round(A-I)*c;const j=X-t*(c>=0?1:-1),H=c>=0?j<0:j>ne;X=Math.max(j,0),S==="finished"&&T===null&&(X=ne);let M=X,O=C;if(o){const W=Math.min(X,ne)/G;let ee=Math.floor(W),re=W%1;!re&&W>=1&&(re=1),re===1&&ee--,ee=Math.min(ee,o+1),!!(ee%2)&&(a==="reverse"?(re=1-re,d&&(re-=d/G)):a==="mirror"&&(O=_)),M=Fs(0,1,re)*G}const R=H?{done:!1,value:r[0]}:O.next(M);w&&(R.value=w(R.value));let{done:B}=R;!H&&$!==null&&(B=c>=0?X>=ne:X<=0);const U=T===null&&(S==="finished"||S==="running"&&B);return l&&l(R.value),U&&V(),R},Z=()=>{y&&y.stop(),y=void 0},ie=()=>{S="idle",Z(),m(),v(),I=F=null},V=()=>{S="finished",h&&h(),Z(),m()},k=()=>{if(p)return;y||(y=n(Q));const A=y.now();s&&s(),T!==null?I=A-T:(!I||S==="finished")&&(I=A),S==="finished"&&v(),F=I,T=null,S="running",y.start()};e&&k();const P={then(A,j){return g.then(A,j)},get time(){return Nr(X)},set time(A){A=Ei(A),X=A,T!==null||!y||c===0?T=A:I=y.now()-A/c},get duration(){const A=C.calculatedDuration===null?wx(C):C.calculatedDuration;return Nr(A)},get speed(){return c},set speed(A){A===c||!y||(c=A,P.time=Nr(X))},get state(){return S},play:k,pause:()=>{S="paused",T=X},stop:()=>{p=!0,S!=="idle"&&(S="idle",u&&u(),ie())},cancel:()=>{F!==null&&Q(F),ie()},complete:()=>{S="finished"},sample:A=>(I=0,Q(A))};return P}function DA(e){let t;return()=>(t===void 0&&(t=e()),t)}const AA=DA(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),MA=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),tc=10,jA=2e4,IA=(e,t)=>t.type==="spring"||e==="backgroundColor"||!Hw(t.ease);function FA(e,t,{onUpdate:n,onComplete:r,...i}){if(!(AA()&&MA.has(t)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let d=!1,a,s,u=!1;const h=()=>{s=new Promise(b=>{a=b})};h();let{keyframes:l,duration:f=300,ease:c,times:p}=i;if(IA(t,i)){const b=ec({...i,repeat:0,delay:0});let w={done:!1,value:l[0]};const C=[];let _=0;for(;!w.done&&_<jA;)w=b.sample(_),C.push(w.value),_+=tc;p=void 0,l=C,f=_-tc,c="linear"}const m=UD(e.owner.current,t,l,{...i,duration:f,ease:c,times:p}),g=()=>{u=!1,m.cancel()},v=()=>{u=!0,wt.update(g),a(),h()};return m.onfinish=()=>{u||(e.set(XD(l,i)),r&&r(),v())},{then(b,w){return s.then(b,w)},attachTimeline(b){return m.timeline=b,m.onfinish=null,bt},get time(){return Nr(m.currentTime||0)},set time(b){m.currentTime=Ei(b)},get speed(){return m.playbackRate},set speed(b){m.playbackRate=b},get duration(){return Nr(f)},play:()=>{d||(m.play(),Gu(g))},pause:()=>m.pause(),stop:()=>{if(d=!0,m.playState==="idle")return;const{currentTime:b}=m;if(b){const w=ec({...i,autoplay:!1});e.setWithVelocity(w.sample(b-tc).value,w.sample(b).value,tc)}v()},complete:()=>{u||m.finish()},cancel:v}}function RA({keyframes:e,delay:t,onUpdate:n,onComplete:r}){const i=()=>(n&&n(e[e.length-1]),r&&r(),{time:0,speed:1,duration:0,play:bt,pause:bt,stop:bt,then:o=>(o(),Promise.resolve()),cancel:bt,complete:bt});return t?ec({keyframes:[0,1],duration:0,delay:t,onComplete:i}):i()}const LA={type:"spring",stiffness:500,damping:25,restSpeed:10},zA=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),BA={type:"keyframes",duration:.8},NA={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},$A=(e,{keyframes:t})=>t.length>2?BA:Ci.has(e)?e.startsWith("scale")?zA(t[1]):LA:NA,Ap=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Bs.test(t)||t==="0")&&!t.startsWith("url(")),VA=new Set(["brightness","contrast","saturate","opacity"]);function HA(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(Wu)||[];if(!r)return e;const i=n.replace(r,"");let o=VA.has(t)?1:0;return r!==n&&(o*=100),t+"("+o+i+")"}const WA=/([a-z-]*)\(.*?\)/g,Mp={...Bs,getAnimatableNone:e=>{const t=e.match(WA);return t?t.map(HA).join(" "):e}},UA={...Cw,color:At,backgroundColor:At,outlineColor:At,fill:At,stroke:At,borderColor:At,borderTopColor:At,borderRightColor:At,borderBottomColor:At,borderLeftColor:At,filter:Mp,WebkitFilter:Mp},jp=e=>UA[e];function xx(e,t){let n=jp(e);return n!==Mp&&(n=Bs),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const Cx=e=>/^0[^.\s]+$/.test(e);function XA(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||Cx(e)}function YA(e,t,n,r){const i=Ap(t,n);let o;Array.isArray(n)?o=[...n]:o=[null,n];const d=r.from!==void 0?r.from:e.get();let a;const s=[];for(let u=0;u<o.length;u++)o[u]===null&&(o[u]=u===0?d:o[u-1]),XA(o[u])&&s.push(u),typeof o[u]=="string"&&o[u]!=="none"&&o[u]!=="0"&&(a=o[u]);if(i&&s.length&&a)for(let u=0;u<s.length;u++){const h=s[u];o[h]=xx(t,a)}return o}function GA({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:d,repeatDelay:a,from:s,elapsed:u,...h}){return!!Object.keys(h).length}function _x(e,t){return e[t]||e.default||e}const KA={skipAnimations:!1},qA=(e,t,n,r={})=>i=>{const o=_x(r,e)||{},d=o.delay||r.delay||0;let{elapsed:a=0}=r;a=a-Ei(d);const s=YA(t,e,n,o),u=s[0],h=s[s.length-1],l=Ap(e,u),f=Ap(e,h);let c={keyframes:s,velocity:t.getVelocity(),ease:"easeOut",...o,delay:-a,onUpdate:p=>{t.set(p),o.onUpdate&&o.onUpdate(p)},onComplete:()=>{i(),o.onComplete&&o.onComplete()}};if(GA(o)||(c={...c,...$A(e,c)}),c.duration&&(c.duration=Ei(c.duration)),c.repeatDelay&&(c.repeatDelay=Ei(c.repeatDelay)),!l||!f||WD.current||o.type===!1||KA.skipAnimations)return RA(c);if(!r.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const p=FA(t,e,c);if(p)return p}return ec(c)};function nc(e){return!!(Zt(e)&&e.add)}const Sx=e=>/^\-?\d*\.?\d+$/.test(e);function ZA(e,t){e.indexOf(t)===-1&&e.push(t)}function QA(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class kx{constructor(){this.subscriptions=[]}add(t){return ZA(this.subscriptions,t),()=>QA(this.subscriptions,t)}notify(t,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,r);else for(let o=0;o<i;o++){const d=this.subscriptions[o];d&&d(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const JA=e=>!isNaN(parseFloat(e));class eM{constructor(t,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:o,timestamp:d}=mp;this.lastUpdated!==d&&(this.timeDelta=o,this.lastUpdated=d,wt.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>wt.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=JA(this.current),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new kx);const r=this.events[t].add(n);return t==="change"?()=>{r(),wt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=t,this.timeDelta=r}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?dx(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function va(e,t){return new eM(e,t)}const Ex=e=>t=>t.test(e),Tx=[_i,_e,Rs,Br,nD,tD,{test:e=>e==="auto",parse:e=>e}],ya=e=>Tx.find(Ex(e)),tM=[...Tx,At,Bs],nM=e=>tM.find(Ex(e));function rM(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,va(n))}function iM(e,t){const n=qu(e,t);let{transitionEnd:r={},transition:i={},...o}=n?e.makeTargetAnimatable(n,!1):{};o={...o,...r};for(const d in o){const a=mD(o[d]);rM(e,d,a)}}function sM(e,t,n){var r,i;const o=Object.keys(t).filter(a=>!e.hasValue(a)),d=o.length;if(d)for(let a=0;a<d;a++){const s=o[a],u=t[s];let h=null;Array.isArray(u)&&(h=u[0]),h===null&&(h=(i=(r=n[s])!==null&&r!==void 0?r:e.readValue(s))!==null&&i!==void 0?i:t[s]),h!=null&&(typeof h=="string"&&(Sx(h)||Cx(h))?h=parseFloat(h):!nM(h)&&Bs.test(u)&&(h=xx(s,u)),e.addValue(s,va(h,{owner:e})),n[s]===void 0&&(n[s]=h),h!==null&&e.setBaseTarget(s,h))}}function oM(e,t){return t?(t[e]||t.default||t).from:void 0}function aM(e,t,n){const r={};for(const i in e){const o=oM(i,t);if(o!==void 0)r[i]=o;else{const d=n.getValue(i);d&&(r[i]=d.get())}}return r}function lM({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function uM(e,t){const n=e.get();if(Array.isArray(t)){for(let r=0;r<t.length;r++)if(t[r]!==n)return!0}else return n!==t}function Ox(e,t,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:o=e.getDefaultTransition(),transitionEnd:d,...a}=e.makeTargetAnimatable(t);const s=e.getValue("willChange");r&&(o=r);const u=[],h=i&&e.animationState&&e.animationState.getState()[i];for(const l in a){const f=e.getValue(l),c=a[l];if(!f||c===void 0||h&&lM(h,l))continue;const p={delay:n,elapsed:0,..._x(o||{},l)};if(window.HandoffAppearAnimations){const v=e.getProps()[cw];if(v){const y=window.HandoffAppearAnimations(v,l,f,wt);y!==null&&(p.elapsed=y,p.isHandoff=!0)}}let m=!p.isHandoff&&!uM(f,c);if(p.type==="spring"&&(f.getVelocity()||p.velocity)&&(m=!1),f.animation&&(m=!1),m)continue;f.start(qA(l,f,c,e.shouldReduceMotion&&Ci.has(l)?{type:!1}:p));const g=f.animation;nc(s)&&(s.add(l),g.then(()=>s.remove(l))),u.push(g)}return d&&Promise.all(u).then(()=>{d&&iM(e,d)}),u}function Ip(e,t,n={}){const r=qu(e,t,n.custom);let{transition:i=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const o=r?()=>Promise.all(Ox(e,r,n)):()=>Promise.resolve(),d=e.variantChildren&&e.variantChildren.size?(s=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:l}=i;return cM(e,t,u+s,h,l,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[s,u]=a==="beforeChildren"?[o,d]:[d,o];return s().then(()=>u())}else return Promise.all([o(),d(n.delay)])}function cM(e,t,n=0,r=0,i=1,o){const d=[],a=(e.variantChildren.size-1)*r,s=i===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(e.variantChildren).sort(fM).forEach((u,h)=>{u.notify("AnimationStart",t),d.push(Ip(u,t,{...o,delay:n+s(h)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(d)}function fM(e,t){return e.sortNodePosition(t)}function hM(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(o=>Ip(e,o,n));r=Promise.all(i)}else if(typeof t=="string")r=Ip(e,t,n);else{const i=typeof t=="function"?qu(e,t,n.custom):t;r=Promise.all(Ox(e,i,n))}return r.then(()=>e.notify("AnimationComplete",t))}const dM=[...sp].reverse(),pM=sp.length;function gM(e){return t=>Promise.all(t.map(({animation:n,options:r})=>hM(e,n,r)))}function mM(e){let t=gM(e);const n=yM();let r=!0;const i=(s,u)=>{const h=qu(e,u);if(h){const{transition:l,transitionEnd:f,...c}=h;s={...s,...c,...f}}return s};function o(s){t=s(e)}function d(s,u){const h=e.getProps(),l=e.getVariantContext(!0)||{},f=[],c=new Set;let p={},m=1/0;for(let v=0;v<pM;v++){const y=dM[v],b=n[y],w=h[y]!==void 0?h[y]:l[y],C=la(w),_=y===u?b.isActive:null;_===!1&&(m=v);let S=w===l[y]&&w!==h[y]&&C;if(S&&r&&e.manuallyAnimateOnMount&&(S=!1),b.protectedKeys={...p},!b.isActive&&_===null||!w&&!b.prevProp||$u(w)||typeof w=="boolean")continue;let I=vM(b.prevProp,w)||y===u&&b.isActive&&!S&&C||v>m&&C,F=!1;const $=Array.isArray(w)?w:[w];let G=$.reduce(i,{});_===!1&&(G={});const{prevResolvedValues:ne={}}=b,X={...ne,...G},Q=Z=>{I=!0,c.has(Z)&&(F=!0,c.delete(Z)),b.needsAnimating[Z]=!0};for(const Z in X){const ie=G[Z],V=ne[Z];if(p.hasOwnProperty(Z))continue;let k=!1;Xu(ie)&&Xu(V)?k=!$w(ie,V):k=ie!==V,k?ie!==void 0?Q(Z):c.add(Z):ie!==void 0&&c.has(Z)?Q(Z):b.protectedKeys[Z]=!0}b.prevProp=w,b.prevResolvedValues=G,b.isActive&&(p={...p,...G}),r&&e.blockInitialAnimation&&(I=!1),I&&(!S||F)&&f.push(...$.map(Z=>({animation:Z,options:{type:y,...s}})))}if(c.size){const v={};c.forEach(y=>{const b=e.getBaseTarget(y);b!==void 0&&(v[y]=b)}),f.push({animation:v})}let g=!!f.length;return r&&(h.initial===!1||h.initial===h.animate)&&!e.manuallyAnimateOnMount&&(g=!1),r=!1,g?t(f):Promise.resolve()}function a(s,u,h){var l;if(n[s].isActive===u)return Promise.resolve();(l=e.variantChildren)===null||l===void 0||l.forEach(c=>{var p;return(p=c.animationState)===null||p===void 0?void 0:p.setActive(s,u)}),n[s].isActive=u;const f=d(h,s);for(const c in n)n[c].protectedKeys={};return f}return{animateChanges:d,setActive:a,setAnimateFunction:o,getState:()=>n}}function vM(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!$w(t,e):!1}function Oi(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function yM(){return{animate:Oi(!0),whileInView:Oi(),whileHover:Oi(),whileTap:Oi(),whileDrag:Oi(),whileFocus:Oi(),exit:Oi()}}class bM extends Ls{constructor(t){super(t),t.animationState||(t.animationState=mM(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),$u(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let wM=0;class xM extends Ls{constructor(){super(...arguments),this.id=wM++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const o=this.node.animationState.setActive("exit",!t,{custom:r??this.node.getProps().custom});n&&!t&&o.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const CM={animation:{Feature:bM},exit:{Feature:xM}},Px=()=>({min:0,max:0}),Dx=()=>({x:Px(),y:Px()});function _M({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function SM(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function kM(e,t){return _M(SM(e.getBoundingClientRect(),t))}const EM=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function TM(e){const t=EM.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]}function Fp(e,t,n=1){const[r,i]=TM(e);if(!r)return;const o=window.getComputedStyle(t).getPropertyValue(r);if(o){const d=o.trim();return Sx(d)?parseFloat(d):d}else return up(i)?Fp(i,t,n+1):i}function OM(e,{...t},n){const r=e.current;if(!(r instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(i=>{const o=i.get();if(!up(o))return;const d=Fp(o,r);d&&i.set(d)});for(const i in t){const o=t[i];if(!up(o))continue;const d=Fp(o,r);d&&(t[i]=d,n||(n={}),n[i]===void 0&&(n[i]=o))}return{target:t,transitionEnd:n}}const PM=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Ax=e=>PM.has(e),DM=e=>Object.keys(e).some(Ax),Mx=e=>e===_i||e===_e,jx=(e,t)=>parseFloat(e.split(", ")[t]),Ix=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return jx(i[1],t);{const o=r.match(/^matrix\((.+)\)$/);return o?jx(o[1],e):0}},AM=new Set(["x","y","z"]),MM=ca.filter(e=>!AM.has(e));function jM(e){const t=[];return MM.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const Ns={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:Ix(4,13),y:Ix(5,14)};Ns.translateX=Ns.x,Ns.translateY=Ns.y;const IM=(e,t,n)=>{const r=t.measureViewportBox(),i=t.current,o=getComputedStyle(i),{display:d}=o,a={};d==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(u=>{a[u]=Ns[u](r,o)}),t.render();const s=t.measureViewportBox();return n.forEach(u=>{const h=t.getValue(u);h&&h.jump(a[u]),e[u]=Ns[u](s,o)}),e},FM=(e,t,n={},r={})=>{t={...t},r={...r};const i=Object.keys(t).filter(Ax);let o=[],d=!1;const a=[];if(i.forEach(s=>{const u=e.getValue(s);if(!e.hasValue(s))return;let h=n[s],l=ya(h);const f=t[s];let c;if(Xu(f)){const p=f.length,m=f[0]===null?1:0;h=f[m],l=ya(h);for(let g=m;g<p&&f[g]!==null;g++)c?wp(ya(f[g])===c):c=ya(f[g])}else c=ya(f);if(l!==c)if(Mx(l)&&Mx(c)){const p=u.get();typeof p=="string"&&u.set(parseFloat(p)),typeof f=="string"?t[s]=parseFloat(f):Array.isArray(f)&&c===_e&&(t[s]=f.map(parseFloat))}else l!=null&&l.transform&&(c!=null&&c.transform)&&(h===0||f===0)?h===0?u.set(c.transform(h)):t[s]=l.transform(f):(d||(o=jM(e),d=!0),a.push(s),r[s]=r[s]!==void 0?r[s]:t[s],u.jump(f))}),a.length){const s=a.indexOf("height")>=0?window.pageYOffset:null,u=IM(t,e,a);return o.length&&o.forEach(([h,l])=>{e.getValue(h).set(l)}),e.render(),Nu&&s!==null&&window.scrollTo({top:s}),{target:u,transitionEnd:r}}else return{target:t,transitionEnd:r}};function RM(e,t,n,r){return DM(t)?FM(e,t,n,r):{target:t,transitionEnd:r}}const LM=(e,t,n,r)=>{const i=OM(e,t,r);return t=i.target,r=i.transitionEnd,RM(e,t,n,r)},Rp={current:null},Fx={current:!1};function zM(){if(Fx.current=!0,!!Nu)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Rp.current=e.matches;e.addListener(t),t()}else Rp.current=!1}function BM(e,t,n){const{willChange:r}=t;for(const i in t){const o=t[i],d=n[i];if(Zt(o))e.addValue(i,o),nc(r)&&r.add(i);else if(Zt(d))e.addValue(i,va(o,{owner:e})),nc(r)&&r.remove(i);else if(d!==o)if(e.hasValue(i)){const a=e.getValue(i);!a.hasAnimated&&a.set(o)}else{const a=e.getStaticValue(i);e.addValue(i,va(a!==void 0?a:o,{owner:e}))}}for(const i in n)t[i]===void 0&&e.removeValue(i);return t}const Rx=new WeakMap,Lx=Object.keys(ua),NM=Lx.length,zx=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],$M=op.length;class VM{constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:i,visualState:o},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>wt.render(this.render,!1,!0);const{latestValues:a,renderState:s}=o;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=s,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=d,this.isControllingVariants=Vu(n),this.isVariantNode=hw(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(n,{});for(const l in h){const f=h[l];a[l]!==void 0&&Zt(f)&&(f.set(a[l],!1),nc(u)&&u.add(l))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,Rx.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),Fx.current||zM(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Rp.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Rx.delete(this.current),this.projection&&this.projection.unmount(),Gu(this.notifyUpdate),Gu(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const r=Ci.has(t),i=n.on("change",d=>{this.latestValues[t]=d,this.props.onUpdate&&wt.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{i(),o()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},r,i,o){let d,a;for(let s=0;s<NM;s++){const u=Lx[s],{isEnabled:h,Feature:l,ProjectionNode:f,MeasureLayout:c}=ua[u];f&&(d=f),h(n)&&(!this.features[u]&&l&&(this.features[u]=new l(this)),c&&(a=c))}if((this.type==="html"||this.type==="svg")&&!this.projection&&d){this.projection=new d(this.latestValues,this.parent&&this.parent.projection);const{layoutId:s,layout:u,drag:h,dragConstraints:l,layoutScroll:f,layoutRoot:c}=n;this.projection.setOptions({layoutId:s,layout:u,alwaysMeasureLayout:!!h||l&&fw(l),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:o,layoutScroll:f,layoutRoot:c})}return a}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Dx()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,this.props,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<zx.length;r++){const i=zx[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o=t["on"+i];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=BM(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<$M;r++){const i=op[r],o=this.props[i];(la(o)||o===!1)&&(n[i]=o)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=va(n,{owner:this}),this.addValue(t,r)),r}readValue(t){var n;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(n=gp(this.props,r))===null||n===void 0?void 0:n[t]:void 0;if(r&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,t);return o!==void 0&&!Zt(o)?o:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new kx),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class Bx extends VM{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...r},{transformValues:i},o){let d=aM(r,t||{},this);if(i&&(n&&(n=i(n)),r&&(r=i(r)),d&&(d=i(d))),o){sM(this,r,d);const a=LM(this,r,d,n);n=a.transitionEnd,r=a.target}return{transition:t,transitionEnd:n,...r}}}function HM(e){return window.getComputedStyle(e)}class WM extends Bx{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,n){if(Ci.has(n)){const r=jp(n);return r&&r.default||0}else{const r=HM(t),i=(yw(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return kM(t,n)}build(t,n,r,i){cp(t,n,r,i.transformTemplate)}scrapeMotionValuesFromProps(t,n){return pp(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Zt(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,r,i){Tw(t,n,r,i)}}class UM extends Bx{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Ci.has(n)){const r=jp(n);return r&&r.default||0}return n=Ow.has(n)?n:ip(n),t.getAttribute(n)}measureInstanceViewportBox(){return Dx()}scrapeMotionValuesFromProps(t,n){return Dw(t,n)}build(t,n,r,i){hp(t,n,r,this.isSVGTag,i.transformTemplate)}renderInstance(t,n,r,i){Pw(t,n,r,i)}mount(t){this.isSVGTag=dp(t.tagName),super.mount(t)}}const XM=(e,t)=>lp(e)?new UM(t,{enableHardwareAcceleration:!1}):new WM(t,{enableHardwareAcceleration:!0}),xt=XP(kD);function Nx(){const e=E.useRef(!1);return np(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function YM(){const e=Nx(),[t,n]=E.useState(0),r=E.useCallback(()=>{e.current&&n(t+1)},[t]);return[E.useCallback(()=>wt.postRender(r),[r]),t]}class GM extends E.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function KM({children:e,isPresent:t}){const n=E.useId(),r=E.useRef(null),i=E.useRef({width:0,height:0,top:0,left:0});return E.useInsertionEffect(()=>{const{width:o,height:d,top:a,left:s}=i.current;if(t||!r.current||!o||!d)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${d}px !important;
            top: ${a}px !important;
            left: ${s}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),E.createElement(GM,{isPresent:t,childRef:r,sizeRef:i},E.cloneElement(e,{ref:r}))}const Lp=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:o,mode:d})=>{const a=Aw(qM),s=E.useId(),u=E.useMemo(()=>({id:s,initial:t,isPresent:n,custom:i,onExitComplete:h=>{a.set(h,!0);for(const l of a.values())if(!l)return;r&&r()},register:h=>(a.set(h,!1),()=>a.delete(h))}),o?void 0:[n]);return E.useMemo(()=>{a.forEach((h,l)=>a.set(l,!1))},[n]),E.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),d==="popLayout"&&(e=E.createElement(KM,{isPresent:n},e)),E.createElement(tp.Provider,{value:u},e)};function qM(){return new Map}function ZM(e){return E.useEffect(()=>()=>e(),[])}const Pi=e=>e.key||"";function QM(e,t){e.forEach(n=>{const r=Pi(n);t.set(r,n)})}function JM(e){const t=[];return E.Children.forEach(e,n=>{E.isValidElement(n)&&t.push(n)}),t}const er=({children:e,custom:t,initial:n=!0,onExitComplete:r,exitBeforeEnter:i,presenceAffectsLayout:o=!0,mode:d="sync"})=>{const a=E.useContext(gw).forceRender||YM()[0],s=Nx(),u=JM(e);let h=u;const l=E.useRef(new Map).current,f=E.useRef(h),c=E.useRef(new Map).current,p=E.useRef(!0);if(np(()=>{p.current=!1,QM(u,c),f.current=h}),ZM(()=>{p.current=!0,c.clear(),l.clear()}),p.current)return E.createElement(E.Fragment,null,h.map(y=>E.createElement(Lp,{key:Pi(y),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:o,mode:d},y)));h=[...h];const m=f.current.map(Pi),g=u.map(Pi),v=m.length;for(let y=0;y<v;y++){const b=m[y];g.indexOf(b)===-1&&!l.has(b)&&l.set(b,void 0)}return d==="wait"&&l.size&&(h=[]),l.forEach((y,b)=>{if(g.indexOf(b)!==-1)return;const w=c.get(b);if(!w)return;const C=m.indexOf(b);let _=y;if(!_){const S=()=>{l.delete(b);const T=Array.from(c.keys()).filter(I=>!g.includes(I));if(T.forEach(I=>c.delete(I)),f.current=u.filter(I=>{const F=Pi(I);return F===b||T.includes(F)}),!l.size){if(s.current===!1)return;a(),r&&r()}};_=E.createElement(Lp,{key:Pi(w),isPresent:!1,onExitComplete:S,custom:t,presenceAffectsLayout:o,mode:d},w),l.set(b,_)}h.splice(C,0,_)}),h=h.map(y=>{const b=y.key;return l.has(b)?y:E.createElement(Lp,{key:Pi(y),isPresent:!0,presenceAffectsLayout:o,mode:d},y)}),E.createElement(E.Fragment,null,l.size?h:h.map(y=>E.cloneElement(y)))};function e6({children:e,features:t,strict:n=!1}){const[,r]=E.useState(!zp(t)),i=E.useRef(void 0);if(!zp(t)){const{renderer:o,...d}=t;i.current=o,ap(d)}return E.useEffect(()=>{zp(t)&&t().then(({renderer:o,...d})=>{ap(d),i.current=o,r(!0)})},[]),E.createElement(rp.Provider,{value:{renderer:i.current,strict:n}},e)}function zp(e){return typeof e=="function"}const t6={renderer:XM,...CM,...ND},Qt=typeof document<"u"?ce.useLayoutEffect:()=>{},rc={prefix:String(Math.round(Math.random()*1e10)),current:0},$x=ce.createContext(rc),n6=ce.createContext(!1);let r6=!!(typeof window<"u"&&window.document&&window.document.createElement),Bp=new WeakMap;function i6(e=!1){let t=E.useContext($x),n=E.useRef(null);if(n.current===null&&!e){var r,i;let o=(i=ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||i===void 0||(r=i.ReactCurrentOwner)===null||r===void 0?void 0:r.current;if(o){let d=Bp.get(o);d==null?Bp.set(o,{id:t.current,state:o.memoizedState}):o.memoizedState!==d.state&&(t.current=d.id,Bp.delete(o))}n.current=++t.current}return n.current}function s6(e){let t=E.useContext($x);t===rc&&!r6&&console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");let n=i6(!!e),r=`react-aria${t.prefix}`;return e||`${r}-${n}`}function o6(e){let t=ce.useId(),[n]=E.useState(Np()),r=n?"react-aria":`react-aria${rc.prefix}`;return e||`${r}-${t}`}ce.useId;function a6(){return!1}function l6(){return!0}function u6(e){return()=>{}}function Np(){return typeof ce.useSyncExternalStore=="function"?ce.useSyncExternalStore(u6,a6,l6):E.useContext(n6)}let Vx=new Map;function c6(e,t){if(e===t)return e;let n=Vx.get(e);if(n)return n(t),t;let r=Vx.get(t);return r?(r(e),e):t}function f6(...e){return(...t)=>{for(let n of e)typeof n=="function"&&n(...t)}}const Ct=e=>{var t;return(t=e==null?void 0:e.ownerDocument)!==null&&t!==void 0?t:document},ic=e=>e&&"window"in e&&e.window===e?e:Ct(e).defaultView||window;function tr(...e){let t={...e[0]};for(let n=1;n<e.length;n++){let r=e[n];for(let i in r){let o=t[i],d=r[i];typeof o=="function"&&typeof d=="function"&&i[0]==="o"&&i[1]==="n"&&i.charCodeAt(2)>=65&&i.charCodeAt(2)<=90?t[i]=f6(o,d):(i==="className"||i==="UNSAFE_className")&&typeof o=="string"&&typeof d=="string"?t[i]=le(o,d):i==="id"&&o&&d?t.id=c6(o,d):t[i]=d!==void 0?d:o}}return t}function Hx(e){if(h6())e.focus({preventScroll:!0});else{let t=d6(e);e.focus(),p6(t)}}let sc=null;function h6(){if(sc==null){sc=!1;try{document.createElement("div").focus({get preventScroll(){return sc=!0,!0}})}catch{}}return sc}function d6(e){let t=e.parentNode,n=[],r=document.scrollingElement||document.documentElement;for(;t instanceof HTMLElement&&t!==r;)(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&n.push({element:t,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),t=t.parentNode;return r instanceof HTMLElement&&n.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),n}function p6(e){for(let{element:t,scrollTop:n,scrollLeft:r}of e)t.scrollTop=n,t.scrollLeft=r}function g6(e){var t;return typeof window>"u"||window.navigator==null?!1:((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.brands.some(n=>e.test(n.brand)))||e.test(window.navigator.userAgent)}function m6(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function Wx(){return m6(/^Mac/i)}function v6(){return g6(/Android/i)}let $s=new Map,$p=new Set;function Ux(){if(typeof window>"u")return;function e(r){return"propertyName"in r}let t=r=>{if(!e(r)||!r.target)return;let i=$s.get(r.target);i||(i=new Set,$s.set(r.target,i),r.target.addEventListener("transitioncancel",n,{once:!0})),i.add(r.propertyName)},n=r=>{if(!e(r)||!r.target)return;let i=$s.get(r.target);if(i&&(i.delete(r.propertyName),i.size===0&&(r.target.removeEventListener("transitioncancel",n),$s.delete(r.target)),$s.size===0)){for(let o of $p)o();$p.clear()}};document.body.addEventListener("transitionrun",t),document.body.addEventListener("transitionend",n)}typeof document<"u"&&(document.readyState!=="loading"?Ux():document.addEventListener("DOMContentLoaded",Ux));function y6(e){requestAnimationFrame(()=>{$s.size===0?e():$p.add(e)})}function Vp(){let e=E.useRef(new Map),t=E.useCallback((i,o,d,a)=>{let s=a!=null&&a.once?(...u)=>{e.current.delete(d),d(...u)}:d;e.current.set(d,{type:o,eventTarget:i,fn:s,options:a}),i.addEventListener(o,d,a)},[]),n=E.useCallback((i,o,d,a)=>{var s;let u=((s=e.current.get(d))===null||s===void 0?void 0:s.fn)||d;i.removeEventListener(o,u,a),e.current.delete(d)},[]),r=E.useCallback(()=>{e.current.forEach((i,o)=>{n(i.eventTarget,i.type,o,i.options)})},[n]);return E.useEffect(()=>r,[r]),{addGlobalListener:t,removeGlobalListener:n,removeAllGlobalListeners:r}}function Di(e){const t=E.useRef(null);return E.useMemo(()=>({get current(){return t.current},set current(n){t.current=n,typeof e=="function"?e(n):e&&(e.current=n)}}),[e])}let hn=typeof document<"u"&&window.visualViewport;function b6(){let e=Np(),[t,n]=E.useState(()=>e?{width:0,height:0}:Xx());return E.useEffect(()=>{let r=()=>{n(i=>{let o=Xx();return o.width===i.width&&o.height===i.height?i:o})};return hn?hn.addEventListener("resize",r):window.addEventListener("resize",r),()=>{hn?hn.removeEventListener("resize",r):window.removeEventListener("resize",r)}},[]),t}function Xx(){return{width:hn&&(hn==null?void 0:hn.width)||window.innerWidth,height:hn&&(hn==null?void 0:hn.height)||window.innerHeight}}function w6(e){return e.mozInputSource===0&&e.isTrusted?!0:v6()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function $r(e,t,n){let[r,i]=E.useState(e||t),o=E.useRef(e!==void 0),d=e!==void 0;E.useEffect(()=>{let u=o.current;u!==d&&console.warn(`WARN: A component changed from ${u?"controlled":"uncontrolled"} to ${d?"controlled":"uncontrolled"}.`),o.current=d},[d]);let a=d?e:r,s=E.useCallback((u,...h)=>{let l=(f,...c)=>{n&&(Object.is(a,f)||n(f,...c)),d||(a=f)};typeof u=="function"?(console.warn("We can not support a function callback. See Github Issues for details https://github.com/adobe/react-spectrum/issues/2320"),i((c,...p)=>{let m=u(d?a:c,...p);return l(m,...h),d?c:m})):(d||i(u),l(u,...h))},[d,a,n]);return[a,s]}function Ai(e,t=-1/0,n=1/0){return Math.min(Math.max(e,t),n)}function oc(e,t){let n=e,r=t.toString(),i=r.indexOf("."),o=i>=0?r.length-i:0;if(o>0){let d=Math.pow(10,o);n=Math.round(n*d)/d}return n}function x6(e,t,n,r){t=Number(t),n=Number(n);let i=(e-(isNaN(t)?0:t))%r,o=oc(Math.abs(i)*2>=r?e+Math.sign(i)*(r-Math.abs(i)):e-i,r);return isNaN(t)?!isNaN(n)&&o>n&&(o=Math.floor(oc(n/r,r))*r):o<t?o=t:!isNaN(n)&&o>n&&(o=t+Math.floor(oc((n-t)/r,r))*r),o=oc(o,r),o}function Qe(e,t,n=10){const r=Math.pow(n,t);return Math.round(e*r)/r}var we={};const Hp=Zr(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));(function(e){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var t=t||{version:"5.3.0"};if(e.fabric=t,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?t.document=document:t.document=document.implementation.createHTMLDocument(""),t.window=window;else{var n=Hp,r=new n.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;t.document=r.document,t.jsdomImplForWrapper=Hp.implForWrapper,t.nodeCanvas=Hp.Canvas,t.window=r,DOMParser=t.window.DOMParser}t.isTouchSupported="ontouchstart"in t.window||"ontouchstart"in t.document||t.window&&t.window.navigator&&t.window.navigator.maxTouchPoints>0,t.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",t.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],t.DPI=96,t.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",t.commaWsp="(?:\\s+,?\\s*|,\\s*)",t.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,t.reNonWord=/[ \n\.,;!\?\-]/,t.fontPaths={},t.iMatrix=[1,0,0,1,0,0],t.svgNS="http://www.w3.org/2000/svg",t.perfLimitSizeTotal=2097152,t.maxCacheSideLimit=4096,t.minCacheSideLimit=256,t.charWidthsCache={},t.textureSize=2048,t.disableStyleCopyPaste=!1,t.enableGLFiltering=!0,t.devicePixelRatio=t.window.devicePixelRatio||t.window.webkitDevicePixelRatio||t.window.mozDevicePixelRatio||1,t.browserShadowBlurConstant=1,t.arcToSegmentsCache={},t.boundsOfCurveCache={},t.cachesBoundsOfCurve=!0,t.forceGLPutImageData=!1,t.initFilterBackend=function(){if(t.enableGLFiltering&&t.isWebglSupported&&t.isWebglSupported(t.textureSize))return console.log("max texture size: "+t.maxTextureSize),new t.WebglFilterBackend({tileSize:t.textureSize});if(t.Canvas2dFilterBackend)return new t.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=t),function(){function a(c,p){if(this.__eventListeners[c]){var m=this.__eventListeners[c];p?m[m.indexOf(p)]=!1:t.util.array.fill(m,!1)}}function s(c,p){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var m in c)this.on(m,c[m]);else this.__eventListeners[c]||(this.__eventListeners[c]=[]),this.__eventListeners[c].push(p);return this}function u(c,p){var m=(function(){p.apply(this,arguments),this.off(c,m)}).bind(this);this.on(c,m)}function h(c,p){if(arguments.length===1)for(var m in c)u.call(this,m,c[m]);else u.call(this,c,p);return this}function l(c,p){if(!this.__eventListeners)return this;if(arguments.length===0)for(c in this.__eventListeners)a.call(this,c);else if(arguments.length===1&&typeof arguments[0]=="object")for(var m in c)a.call(this,m,c[m]);else a.call(this,c,p);return this}function f(c,p){if(!this.__eventListeners)return this;var m=this.__eventListeners[c];if(!m)return this;for(var g=0,v=m.length;g<v;g++)m[g]&&m[g].call(this,p||{});return this.__eventListeners[c]=m.filter(function(y){return y!==!1}),this}t.Observable={fire:f,on:s,once:h,off:l}}(),t.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var a=0,s=arguments.length;a<s;a++)this._onObjectAdded(arguments[a]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(a,s,u){var h=this._objects;return u?h[s]=a:h.splice(s,0,a),this._onObjectAdded&&this._onObjectAdded(a),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var a=this._objects,s,u=!1,h=0,l=arguments.length;h<l;h++)s=a.indexOf(arguments[h]),s!==-1&&(u=!0,a.splice(s,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[h]));return this.renderOnAddRemove&&u&&this.requestRenderAll(),this},forEachObject:function(a,s){for(var u=this.getObjects(),h=0,l=u.length;h<l;h++)a.call(s,u[h],h,u);return this},getObjects:function(a){return typeof a>"u"?this._objects.concat():this._objects.filter(function(s){return s.type===a})},item:function(a){return this._objects[a]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(a,s){return this._objects.indexOf(a)>-1?!0:s?this._objects.some(function(u){return typeof u.contains=="function"&&u.contains(a,!0)}):!1},complexity:function(){return this._objects.reduce(function(a,s){return a+=s.complexity?s.complexity():0,a},0)}},t.CommonMethods={_setOptions:function(a){for(var s in a)this.set(s,a[s])},_initGradient:function(a,s){a&&a.colorStops&&!(a instanceof t.Gradient)&&this.set(s,new t.Gradient(a))},_initPattern:function(a,s,u){a&&a.source&&!(a instanceof t.Pattern)?this.set(s,new t.Pattern(a,u)):u&&u()},_setObject:function(a){for(var s in a)this._set(s,a[s])},set:function(a,s){return typeof a=="object"?this._setObject(a):this._set(a,s),this},_set:function(a,s){this[a]=s},toggle:function(a){var s=this.get(a);return typeof s=="boolean"&&this.set(a,!s),this},get:function(a){return this[a]}},function(a){var s=Math.sqrt,u=Math.atan2,h=Math.pow,l=Math.PI/180,f=Math.PI/2;t.util={cos:function(c){if(c===0)return 1;c<0&&(c=-c);var p=c/f;switch(p){case 1:case 3:return 0;case 2:return-1}return Math.cos(c)},sin:function(c){if(c===0)return 0;var p=c/f,m=1;switch(c<0&&(m=-1),p){case 1:return m;case 2:return 0;case 3:return-m}return Math.sin(c)},removeFromArray:function(c,p){var m=c.indexOf(p);return m!==-1&&c.splice(m,1),c},getRandomInt:function(c,p){return Math.floor(Math.random()*(p-c+1))+c},degreesToRadians:function(c){return c*l},radiansToDegrees:function(c){return c/l},rotatePoint:function(c,p,m){var g=new t.Point(c.x-p.x,c.y-p.y),v=t.util.rotateVector(g,m);return new t.Point(v.x,v.y).addEquals(p)},rotateVector:function(c,p){var m=t.util.sin(p),g=t.util.cos(p),v=c.x*g-c.y*m,y=c.x*m+c.y*g;return{x:v,y}},createVector:function(c,p){return new t.Point(p.x-c.x,p.y-c.y)},calcAngleBetweenVectors:function(c,p){return Math.acos((c.x*p.x+c.y*p.y)/(Math.hypot(c.x,c.y)*Math.hypot(p.x,p.y)))},getHatVector:function(c){return new t.Point(c.x,c.y).multiply(1/Math.hypot(c.x,c.y))},getBisector:function(c,p,m){var g=t.util.createVector(c,p),v=t.util.createVector(c,m),y=t.util.calcAngleBetweenVectors(g,v),b=t.util.calcAngleBetweenVectors(t.util.rotateVector(g,y),v),w=y*(b===0?1:-1)/2;return{vector:t.util.getHatVector(t.util.rotateVector(g,w)),angle:y}},projectStrokeOnPoints:function(c,p,m){var g=[],v=p.strokeWidth/2,y=p.strokeUniform?new t.Point(1/p.scaleX,1/p.scaleY):new t.Point(1,1),b=function(w){var C=v/Math.hypot(w.x,w.y);return new t.Point(w.x*C*y.x,w.y*C*y.y)};return c.length<=1||c.forEach(function(w,C){var _=new t.Point(w.x,w.y),S,T;C===0?(T=c[C+1],S=m?b(t.util.createVector(T,_)).addEquals(_):c[c.length-1]):C===c.length-1?(S=c[C-1],T=m?b(t.util.createVector(S,_)).addEquals(_):c[0]):(S=c[C-1],T=c[C+1]);var I=t.util.getBisector(_,S,T),F=I.vector,$=I.angle,G,ne;if(p.strokeLineJoin==="miter"&&(G=-v/Math.sin($/2),ne=new t.Point(F.x*G*y.x,F.y*G*y.y),Math.hypot(ne.x,ne.y)/v<=p.strokeMiterLimit)){g.push(_.add(ne)),g.push(_.subtract(ne));return}G=-v*Math.SQRT2,ne=new t.Point(F.x*G*y.x,F.y*G*y.y),g.push(_.add(ne)),g.push(_.subtract(ne))}),g},transformPoint:function(c,p,m){return m?new t.Point(p[0]*c.x+p[2]*c.y,p[1]*c.x+p[3]*c.y):new t.Point(p[0]*c.x+p[2]*c.y+p[4],p[1]*c.x+p[3]*c.y+p[5])},makeBoundingBoxFromPoints:function(c,p){if(p)for(var m=0;m<c.length;m++)c[m]=t.util.transformPoint(c[m],p);var g=[c[0].x,c[1].x,c[2].x,c[3].x],v=t.util.array.min(g),y=t.util.array.max(g),b=y-v,w=[c[0].y,c[1].y,c[2].y,c[3].y],C=t.util.array.min(w),_=t.util.array.max(w),S=_-C;return{left:v,top:C,width:b,height:S}},invertTransform:function(c){var p=1/(c[0]*c[3]-c[1]*c[2]),m=[p*c[3],-p*c[1],-p*c[2],p*c[0]],g=t.util.transformPoint({x:c[4],y:c[5]},m,!0);return m[4]=-g.x,m[5]=-g.y,m},toFixed:function(c,p){return parseFloat(Number(c).toFixed(p))},parseUnit:function(c,p){var m=/\D{0,2}$/.exec(c),g=parseFloat(c);switch(p||(p=t.Text.DEFAULT_SVG_FONT_SIZE),m[0]){case"mm":return g*t.DPI/25.4;case"cm":return g*t.DPI/2.54;case"in":return g*t.DPI;case"pt":return g*t.DPI/72;case"pc":return g*t.DPI/72*12;case"em":return g*p;default:return g}},falseFunction:function(){return!1},getKlass:function(c,p){return c=t.util.string.camelize(c.charAt(0).toUpperCase()+c.slice(1)),t.util.resolveNamespace(p)[c]},getSvgAttributes:function(c){var p=["instantiated_by_use","style","id","class"];switch(c){case"linearGradient":p=p.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":p=p.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":p=p.concat(["offset","stop-color","stop-opacity"]);break}return p},resolveNamespace:function(c){if(!c)return t;var p=c.split("."),m=p.length,g,v=a||t.window;for(g=0;g<m;++g)v=v[p[g]];return v},loadImage:function(c,p,m,g){if(!c){p&&p.call(m,c);return}var v=t.util.createImage(),y=function(){p&&p.call(m,v,!1),v=v.onload=v.onerror=null};v.onload=y,v.onerror=function(){t.log("Error loading "+v.src),p&&p.call(m,null,!0),v=v.onload=v.onerror=null},c.indexOf("data")!==0&&g!==void 0&&g!==null&&(v.crossOrigin=g),c.substring(0,14)==="data:image/svg"&&(v.onload=null,t.util.loadImageInDom(v,y)),v.src=c},loadImageInDom:function(c,p){var m=t.document.createElement("div");m.style.width=m.style.height="1px",m.style.left=m.style.top="-100%",m.style.position="absolute",m.appendChild(c),t.document.querySelector("body").appendChild(m),c.onload=function(){p(),m.parentNode.removeChild(m),m=null}},enlivenObjects:function(c,p,m,g){c=c||[];var v=[],y=0,b=c.length;function w(){++y===b&&p&&p(v.filter(function(C){return C}))}if(!b){p&&p(v);return}c.forEach(function(C,_){if(!C||!C.type){w();return}var S=t.util.getKlass(C.type,m);S.fromObject(C,function(T,I){I||(v[_]=T),g&&g(C,T,I),w()})})},enlivenObjectEnlivables:function(c,p,m){var g=t.Object.ENLIVEN_PROPS.filter(function(v){return!!c[v]});t.util.enlivenObjects(g.map(function(v){return c[v]}),function(v){var y={};g.forEach(function(b,w){y[b]=v[w],p&&(p[b]=v[w])}),m&&m(y)})},enlivenPatterns:function(c,p){c=c||[];function m(){++v===y&&p&&p(g)}var g=[],v=0,y=c.length;if(!y){p&&p(g);return}c.forEach(function(b,w){b&&b.source?new t.Pattern(b,function(C){g[w]=C,m()}):(g[w]=b,m())})},groupSVGElements:function(c,p,m){var g;return c&&c.length===1?(typeof m<"u"&&(c[0].sourcePath=m),c[0]):(p&&(p.width&&p.height?p.centerPoint={x:p.width/2,y:p.height/2}:(delete p.width,delete p.height)),g=new t.Group(c,p),typeof m<"u"&&(g.sourcePath=m),g)},populateWithProperties:function(c,p,m){if(m&&Array.isArray(m))for(var g=0,v=m.length;g<v;g++)m[g]in c&&(p[m[g]]=c[m[g]])},createCanvasElement:function(){return t.document.createElement("canvas")},copyCanvasElement:function(c){var p=t.util.createCanvasElement();return p.width=c.width,p.height=c.height,p.getContext("2d").drawImage(c,0,0),p},toDataURL:function(c,p,m){return c.toDataURL("image/"+p,m)},createImage:function(){return t.document.createElement("img")},multiplyTransformMatrices:function(c,p,m){return[c[0]*p[0]+c[2]*p[1],c[1]*p[0]+c[3]*p[1],c[0]*p[2]+c[2]*p[3],c[1]*p[2]+c[3]*p[3],m?0:c[0]*p[4]+c[2]*p[5]+c[4],m?0:c[1]*p[4]+c[3]*p[5]+c[5]]},qrDecompose:function(c){var p=u(c[1],c[0]),m=h(c[0],2)+h(c[1],2),g=s(m),v=(c[0]*c[3]-c[2]*c[1])/g,y=u(c[0]*c[2]+c[1]*c[3],m);return{angle:p/l,scaleX:g,scaleY:v,skewX:y/l,skewY:0,translateX:c[4],translateY:c[5]}},calcRotateMatrix:function(c){if(!c.angle)return t.iMatrix.concat();var p=t.util.degreesToRadians(c.angle),m=t.util.cos(p),g=t.util.sin(p);return[m,g,-g,m,0,0]},calcDimensionsMatrix:function(c){var p=typeof c.scaleX>"u"?1:c.scaleX,m=typeof c.scaleY>"u"?1:c.scaleY,g=[c.flipX?-p:p,0,0,c.flipY?-m:m,0,0],v=t.util.multiplyTransformMatrices,y=t.util.degreesToRadians;return c.skewX&&(g=v(g,[1,0,Math.tan(y(c.skewX)),1],!0)),c.skewY&&(g=v(g,[1,Math.tan(y(c.skewY)),0,1],!0)),g},composeMatrix:function(c){var p=[1,0,0,1,c.translateX||0,c.translateY||0],m=t.util.multiplyTransformMatrices;return c.angle&&(p=m(p,t.util.calcRotateMatrix(c))),(c.scaleX!==1||c.scaleY!==1||c.skewX||c.skewY||c.flipX||c.flipY)&&(p=m(p,t.util.calcDimensionsMatrix(c))),p},resetObjectTransform:function(c){c.scaleX=1,c.scaleY=1,c.skewX=0,c.skewY=0,c.flipX=!1,c.flipY=!1,c.rotate(0)},saveObjectTransform:function(c){return{scaleX:c.scaleX,scaleY:c.scaleY,skewX:c.skewX,skewY:c.skewY,angle:c.angle,left:c.left,flipX:c.flipX,flipY:c.flipY,top:c.top}},isTransparent:function(c,p,m,g){g>0&&(p>g?p-=g:p=0,m>g?m-=g:m=0);var v=!0,y,b,w=c.getImageData(p,m,g*2||1,g*2||1),C=w.data.length;for(y=3;y<C&&(b=w.data[y],v=b<=0,v!==!1);y+=4);return w=null,v},parsePreserveAspectRatioAttribute:function(c){var p="meet",m="Mid",g="Mid",v=c.split(" "),y;return v&&v.length&&(p=v.pop(),p!=="meet"&&p!=="slice"?(y=p,p="meet"):v.length&&(y=v.pop())),m=y!=="none"?y.slice(1,4):"none",g=y!=="none"?y.slice(5,8):"none",{meetOrSlice:p,alignX:m,alignY:g}},clearFabricFontCache:function(c){c=(c||"").toLowerCase(),c?t.charWidthsCache[c]&&delete t.charWidthsCache[c]:t.charWidthsCache={}},limitDimsByArea:function(c,p){var m=Math.sqrt(p*c),g=Math.floor(p/m);return{x:Math.floor(m),y:g}},capValue:function(c,p,m){return Math.max(c,Math.min(p,m))},findScaleToFit:function(c,p){return Math.min(p.width/c.width,p.height/c.height)},findScaleToCover:function(c,p){return Math.max(p.width/c.width,p.height/c.height)},matrixToSVG:function(c){return"matrix("+c.map(function(p){return t.util.toFixed(p,t.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(c,p){var m=t.util.invertTransform(p),g=t.util.multiplyTransformMatrices(m,c.calcOwnMatrix());t.util.applyTransformToObject(c,g)},addTransformToObject:function(c,p){t.util.applyTransformToObject(c,t.util.multiplyTransformMatrices(p,c.calcOwnMatrix()))},applyTransformToObject:function(c,p){var m=t.util.qrDecompose(p),g=new t.Point(m.translateX,m.translateY);c.flipX=!1,c.flipY=!1,c.set("scaleX",m.scaleX),c.set("scaleY",m.scaleY),c.skewX=m.skewX,c.skewY=m.skewY,c.angle=m.angle,c.setPositionByOrigin(g,"center","center")},sizeAfterTransform:function(c,p,m){var g=c/2,v=p/2,y=[{x:-g,y:-v},{x:g,y:-v},{x:-g,y:v},{x:g,y:v}],b=t.util.calcDimensionsMatrix(m),w=t.util.makeBoundingBoxFromPoints(y,b);return{x:w.width,y:w.height}},mergeClipPaths:function(c,p){var m=c,g=p;m.inverted&&!g.inverted&&(m=p,g=c),t.util.applyTransformToObject(g,t.util.multiplyTransformMatrices(t.util.invertTransform(m.calcTransformMatrix()),g.calcTransformMatrix()));var v=m.inverted&&g.inverted;return v&&(m.inverted=g.inverted=!1),new t.Group([m],{clipPath:g,inverted:v})},hasStyleChanged:function(c,p,m){return m=m||!1,c.fill!==p.fill||c.stroke!==p.stroke||c.strokeWidth!==p.strokeWidth||c.fontSize!==p.fontSize||c.fontFamily!==p.fontFamily||c.fontWeight!==p.fontWeight||c.fontStyle!==p.fontStyle||c.textBackgroundColor!==p.textBackgroundColor||c.deltaY!==p.deltaY||m&&(c.overline!==p.overline||c.underline!==p.underline||c.linethrough!==p.linethrough)},stylesToArray:function(m,p){for(var m=t.util.object.clone(m,!0),g=p.split(`
`),v=-1,y={},b=[],w=0;w<g.length;w++){if(!m[w]){v+=g[w].length;continue}for(var C=0;C<g[w].length;C++){v++;var _=m[w][C];if(_&&Object.keys(_).length>0){var S=t.util.hasStyleChanged(y,_,!0);S?b.push({start:v,end:v+1,style:_}):b[b.length-1].end++}y=_||{}}}return b},stylesFromArray:function(c,p){if(!Array.isArray(c))return c;for(var m=p.split(`
`),g=-1,v=0,y={},b=0;b<m.length;b++)for(var w=0;w<m[b].length;w++)g++,c[v]&&c[v].start<=g&&g<c[v].end&&(y[b]=y[b]||{},y[b][w]=Object.assign({},c[v].style),g===c[v].end-1&&v++);return y}}}(e),function(){var a=Array.prototype.join,s={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},u={m:"l",M:"L"};function h(k,P,A,j,H,M,O,R,B,U,W){var ee=t.util.cos(k),re=t.util.sin(k),ue=t.util.cos(P),Y=t.util.sin(P),z=A*H*ue-j*M*Y+O,K=j*H*ue+A*M*Y+R,te=U+B*(-A*H*re-j*M*ee),N=W+B*(-j*H*re+A*M*ee),q=z+B*(A*H*Y+j*M*ue),ae=K+B*(j*H*Y-A*M*ue);return["C",te,N,q,ae,z,K]}function l(k,P,A,j,H,M,O){var R=Math.PI,B=O*R/180,U=t.util.sin(B),W=t.util.cos(B),ee=0,re=0;A=Math.abs(A),j=Math.abs(j);var ue=-W*k*.5-U*P*.5,Y=-W*P*.5+U*k*.5,z=A*A,K=j*j,te=Y*Y,N=ue*ue,q=z*K-z*te-K*N,ae=0;if(q<0){var ye=Math.sqrt(1-q/(z*K));A*=ye,j*=ye}else ae=(H===M?-1:1)*Math.sqrt(q/(z*te+K*N));var ge=ae*A*Y/j,J=-ae*j*ue/A,pe=W*ge-U*J+k*.5,xe=U*ge+W*J+P*.5,ke=f(1,0,(ue-ge)/A,(Y-J)/j),Le=f((ue-ge)/A,(Y-J)/j,(-ue-ge)/A,(-Y-J)/j);M===0&&Le>0?Le-=2*R:M===1&&Le<0&&(Le+=2*R);for(var Me=Math.ceil(Math.abs(Le/R*2)),Mt=[],et=Le/Me,Vi=8/3*Math.sin(et/4)*Math.sin(et/4)/Math.sin(et/2),Ha=ke+et,Ln=0;Ln<Me;Ln++)Mt[Ln]=h(ke,Ha,W,U,A,j,pe,xe,Vi,ee,re),ee=Mt[Ln][5],re=Mt[Ln][6],ke=Ha,Ha+=et;return Mt}function f(k,P,A,j){var H=Math.atan2(P,k),M=Math.atan2(j,A);return M>=H?M-H:2*Math.PI-(H-M)}function c(k,P,A,j,H,M,O,R){var B;if(t.cachesBoundsOfCurve&&(B=a.call(arguments),t.boundsOfCurveCache[B]))return t.boundsOfCurveCache[B];var U=Math.sqrt,W=Math.min,ee=Math.max,re=Math.abs,ue=[],Y=[[],[]],z,K,te,N,q,ae,ye,ge;K=6*k-12*A+6*H,z=-3*k+9*A-9*H+3*O,te=3*A-3*k;for(var J=0;J<2;++J){if(J>0&&(K=6*P-12*j+6*M,z=-3*P+9*j-9*M+3*R,te=3*j-3*P),re(z)<1e-12){if(re(K)<1e-12)continue;N=-te/K,0<N&&N<1&&ue.push(N);continue}ye=K*K-4*te*z,!(ye<0)&&(ge=U(ye),q=(-K+ge)/(2*z),0<q&&q<1&&ue.push(q),ae=(-K-ge)/(2*z),0<ae&&ae<1&&ue.push(ae))}for(var pe,xe,ke=ue.length,Le=ke,Me;ke--;)N=ue[ke],Me=1-N,pe=Me*Me*Me*k+3*Me*Me*N*A+3*Me*N*N*H+N*N*N*O,Y[0][ke]=pe,xe=Me*Me*Me*P+3*Me*Me*N*j+3*Me*N*N*M+N*N*N*R,Y[1][ke]=xe;Y[0][Le]=k,Y[1][Le]=P,Y[0][Le+1]=O,Y[1][Le+1]=R;var Mt=[{x:W.apply(null,Y[0]),y:W.apply(null,Y[1])},{x:ee.apply(null,Y[0]),y:ee.apply(null,Y[1])}];return t.cachesBoundsOfCurve&&(t.boundsOfCurveCache[B]=Mt),Mt}function p(k,P,A){for(var j=A[1],H=A[2],M=A[3],O=A[4],R=A[5],B=A[6],U=A[7],W=l(B-k,U-P,j,H,O,R,M),ee=0,re=W.length;ee<re;ee++)W[ee][1]+=k,W[ee][2]+=P,W[ee][3]+=k,W[ee][4]+=P,W[ee][5]+=k,W[ee][6]+=P;return W}function m(k){var P=0,A=0,j=k.length,H=0,M=0,O,R,B,U=[],W,ee,re;for(R=0;R<j;++R){switch(B=!1,O=k[R].slice(0),O[0]){case"l":O[0]="L",O[1]+=P,O[2]+=A;case"L":P=O[1],A=O[2];break;case"h":O[1]+=P;case"H":O[0]="L",O[2]=A,P=O[1];break;case"v":O[1]+=A;case"V":O[0]="L",A=O[1],O[1]=P,O[2]=A;break;case"m":O[0]="M",O[1]+=P,O[2]+=A;case"M":P=O[1],A=O[2],H=O[1],M=O[2];break;case"c":O[0]="C",O[1]+=P,O[2]+=A,O[3]+=P,O[4]+=A,O[5]+=P,O[6]+=A;case"C":ee=O[3],re=O[4],P=O[5],A=O[6];break;case"s":O[0]="S",O[1]+=P,O[2]+=A,O[3]+=P,O[4]+=A;case"S":W==="C"?(ee=2*P-ee,re=2*A-re):(ee=P,re=A),P=O[3],A=O[4],O[0]="C",O[5]=O[3],O[6]=O[4],O[3]=O[1],O[4]=O[2],O[1]=ee,O[2]=re,ee=O[3],re=O[4];break;case"q":O[0]="Q",O[1]+=P,O[2]+=A,O[3]+=P,O[4]+=A;case"Q":ee=O[1],re=O[2],P=O[3],A=O[4];break;case"t":O[0]="T",O[1]+=P,O[2]+=A;case"T":W==="Q"?(ee=2*P-ee,re=2*A-re):(ee=P,re=A),O[0]="Q",P=O[1],A=O[2],O[1]=ee,O[2]=re,O[3]=P,O[4]=A;break;case"a":O[0]="A",O[6]+=P,O[7]+=A;case"A":B=!0,U=U.concat(p(P,A,O)),P=O[6],A=O[7];break;case"z":case"Z":P=H,A=M;break}B||U.push(O),W=O[0]}return U}function g(k,P,A,j){return Math.sqrt((A-k)*(A-k)+(j-P)*(j-P))}function v(k){return k*k*k}function y(k){return 3*k*k*(1-k)}function b(k){return 3*k*(1-k)*(1-k)}function w(k){return(1-k)*(1-k)*(1-k)}function C(k,P,A,j,H,M,O,R){return function(B){var U=v(B),W=y(B),ee=b(B),re=w(B);return{x:O*U+H*W+A*ee+k*re,y:R*U+M*W+j*ee+P*re}}}function _(k,P,A,j,H,M,O,R){return function(B){var U=1-B,W=3*U*U*(A-k)+6*U*B*(H-A)+3*B*B*(O-H),ee=3*U*U*(j-P)+6*U*B*(M-j)+3*B*B*(R-M);return Math.atan2(ee,W)}}function S(k){return k*k}function T(k){return 2*k*(1-k)}function I(k){return(1-k)*(1-k)}function F(k,P,A,j,H,M){return function(O){var R=S(O),B=T(O),U=I(O);return{x:H*R+A*B+k*U,y:M*R+j*B+P*U}}}function $(k,P,A,j,H,M){return function(O){var R=1-O,B=2*R*(A-k)+2*O*(H-A),U=2*R*(j-P)+2*O*(M-j);return Math.atan2(U,B)}}function G(k,P,A){var j={x:P,y:A},H,M=0,O;for(O=1;O<=100;O+=1)H=k(O/100),M+=g(j.x,j.y,H.x,H.y),j=H;return M}function ne(k,P){for(var A=0,j=0,H=k.iterator,M={x:k.x,y:k.y},O,R,B=.01,U=k.angleFinder,W;j<P&&B>1e-4;)O=H(A),W=A,R=g(M.x,M.y,O.x,O.y),R+j>P?(A-=B,B/=2):(M=O,A+=B,j+=R);return O.angle=U(W),O}function X(k){for(var P=0,A=k.length,j,H=0,M=0,O=0,R=0,B=[],U,W,ee,re=0;re<A;re++){switch(j=k[re],W={x:H,y:M,command:j[0]},j[0]){case"M":W.length=0,O=H=j[1],R=M=j[2];break;case"L":W.length=g(H,M,j[1],j[2]),H=j[1],M=j[2];break;case"C":U=C(H,M,j[1],j[2],j[3],j[4],j[5],j[6]),ee=_(H,M,j[1],j[2],j[3],j[4],j[5],j[6]),W.iterator=U,W.angleFinder=ee,W.length=G(U,H,M),H=j[5],M=j[6];break;case"Q":U=F(H,M,j[1],j[2],j[3],j[4]),ee=$(H,M,j[1],j[2],j[3],j[4]),W.iterator=U,W.angleFinder=ee,W.length=G(U,H,M),H=j[3],M=j[4];break;case"Z":case"z":W.destX=O,W.destY=R,W.length=g(H,M,O,R),H=O,M=R;break}P+=W.length,B.push(W)}return B.push({length:P,x:H,y:M}),B}function Q(k,P,A){A||(A=X(k));for(var j=0;P-A[j].length>0&&j<A.length-2;)P-=A[j].length,j++;var H=A[j],M=P/H.length,O=H.command,R=k[j],B;switch(O){case"M":return{x:H.x,y:H.y,angle:0};case"Z":case"z":return B=new t.Point(H.x,H.y).lerp(new t.Point(H.destX,H.destY),M),B.angle=Math.atan2(H.destY-H.y,H.destX-H.x),B;case"L":return B=new t.Point(H.x,H.y).lerp(new t.Point(R[1],R[2]),M),B.angle=Math.atan2(R[2]-H.y,R[1]-H.x),B;case"C":return ne(H,P);case"Q":return ne(H,P)}}function Z(k){var P=[],A=[],j,H,M=t.rePathCommand,O="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",R="("+O+")"+t.commaWsp,B="([01])"+t.commaWsp+"?",U=R+"?"+R+"?"+R+B+B+R+"?("+O+")",W=new RegExp(U,"g"),ee,re,ue;if(!k||!k.match)return P;ue=k.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var Y=0,z,K=ue.length;Y<K;Y++){j=ue[Y],re=j.slice(1).trim(),A.length=0;var te=j.charAt(0);if(z=[te],te.toLowerCase()==="a")for(var N;N=W.exec(re);)for(var q=1;q<N.length;q++)A.push(N[q]);else for(;ee=M.exec(re);)A.push(ee[0]);for(var q=0,ae=A.length;q<ae;q++)H=parseFloat(A[q]),isNaN(H)||z.push(H);var ye=s[te.toLowerCase()],ge=u[te]||te;if(z.length-1>ye)for(var J=1,pe=z.length;J<pe;J+=ye)P.push([te].concat(z.slice(J,J+ye))),te=ge;else P.push(z)}return P}function ie(k,P){var A=[],j,H=new t.Point(k[0].x,k[0].y),M=new t.Point(k[1].x,k[1].y),O=k.length,R=1,B=0,U=O>2;for(P=P||0,U&&(R=k[2].x<M.x?-1:k[2].x===M.x?0:1,B=k[2].y<M.y?-1:k[2].y===M.y?0:1),A.push(["M",H.x-R*P,H.y-B*P]),j=1;j<O;j++){if(!H.eq(M)){var W=H.midPointFrom(M);A.push(["Q",H.x,H.y,W.x,W.y])}H=k[j],j+1<k.length&&(M=k[j+1])}return U&&(R=H.x>k[j-2].x?1:H.x===k[j-2].x?0:-1,B=H.y>k[j-2].y?1:H.y===k[j-2].y?0:-1),A.push(["L",H.x+R*P,H.y+B*P]),A}function V(k,P,A){return A&&(P=t.util.multiplyTransformMatrices(P,[1,0,0,1,-A.x,-A.y])),k.map(function(j){for(var H=j.slice(0),M={},O=1;O<j.length-1;O+=2)M.x=j[O],M.y=j[O+1],M=t.util.transformPoint(M,P),H[O]=M.x,H[O+1]=M.y;return H})}t.util.joinPath=function(k){return k.map(function(P){return P.join(" ")}).join(" ")},t.util.parsePath=Z,t.util.makePathSimpler=m,t.util.getSmoothPathFromPoints=ie,t.util.getPathSegmentsInfo=X,t.util.getBoundsOfCurve=c,t.util.getPointOnPath=Q,t.util.transformPath=V}(),function(){var a=Array.prototype.slice;function s(c,p){for(var m=a.call(arguments,2),g=[],v=0,y=c.length;v<y;v++)g[v]=m.length?c[v][p].apply(c[v],m):c[v][p].call(c[v]);return g}function u(c,p){return f(c,p,function(m,g){return m>=g})}function h(c,p){return f(c,p,function(m,g){return m<g})}function l(c,p){for(var m=c.length;m--;)c[m]=p;return c}function f(c,p,m){if(!(!c||c.length===0)){var g=c.length-1,v=p?c[g][p]:c[g];if(p)for(;g--;)m(c[g][p],v)&&(v=c[g][p]);else for(;g--;)m(c[g],v)&&(v=c[g]);return v}}t.util.array={fill:l,invoke:s,min:h,max:u}}(),function(){function a(u,h,l){if(l)if(!t.isLikelyNode&&h instanceof Element)u=h;else if(h instanceof Array){u=[];for(var f=0,c=h.length;f<c;f++)u[f]=a({},h[f],l)}else if(h&&typeof h=="object")for(var p in h)p==="canvas"||p==="group"?u[p]=null:h.hasOwnProperty(p)&&(u[p]=a({},h[p],l));else u=h;else for(var p in h)u[p]=h[p];return u}function s(u,h){return a({},u,h)}t.util.object={extend:a,clone:s},t.util.object.extend(t.util,t.Observable)}(),function(){function a(f){return f.replace(/-+(.)?/g,function(c,p){return p?p.toUpperCase():""})}function s(f,c){return f.charAt(0).toUpperCase()+(c?f.slice(1):f.slice(1).toLowerCase())}function u(f){return f.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function h(f){var c=0,p,m=[];for(c=0,p;c<f.length;c++)(p=l(f,c))!==!1&&m.push(p);return m}function l(f,c){var p=f.charCodeAt(c);if(isNaN(p))return"";if(p<55296||p>57343)return f.charAt(c);if(55296<=p&&p<=56319){if(f.length<=c+1)throw"High surrogate without following low surrogate";var m=f.charCodeAt(c+1);if(56320>m||m>57343)throw"High surrogate without following low surrogate";return f.charAt(c)+f.charAt(c+1)}if(c===0)throw"Low surrogate without preceding high surrogate";var g=f.charCodeAt(c-1);if(55296>g||g>56319)throw"Low surrogate without preceding high surrogate";return!1}t.util.string={camelize:a,capitalize:s,escapeXml:u,graphemeSplit:h}}(),function(){var a=Array.prototype.slice,s=function(){},u=function(){for(var p in{toString:1})if(p==="toString")return!1;return!0}(),h=function(p,m,g){for(var v in m)v in p.prototype&&typeof p.prototype[v]=="function"&&(m[v]+"").indexOf("callSuper")>-1?p.prototype[v]=function(y){return function(){var b=this.constructor.superclass;this.constructor.superclass=g;var w=m[y].apply(this,arguments);if(this.constructor.superclass=b,y!=="initialize")return w}}(v):p.prototype[v]=m[v],u&&(m.toString!==Object.prototype.toString&&(p.prototype.toString=m.toString),m.valueOf!==Object.prototype.valueOf&&(p.prototype.valueOf=m.valueOf))};function l(){}function f(p){for(var m=null,g=this;g.constructor.superclass;){var v=g.constructor.superclass.prototype[p];if(g[p]!==v){m=v;break}g=g.constructor.superclass.prototype}return m?arguments.length>1?m.apply(this,a.call(arguments,1)):m.call(this):console.log("tried to callSuper "+p+", method not found in prototype chain",this)}function c(){var p=null,m=a.call(arguments,0);typeof m[0]=="function"&&(p=m.shift());function g(){this.initialize.apply(this,arguments)}g.superclass=p,g.subclasses=[],p&&(l.prototype=p.prototype,g.prototype=new l,p.subclasses.push(g));for(var v=0,y=m.length;v<y;v++)h(g,m[v],p);return g.prototype.initialize||(g.prototype.initialize=s),g.prototype.constructor=g,g.prototype.callSuper=f,g}t.util.createClass=c}(),function(){var a=!!t.document.createElement("div").attachEvent,s=["touchstart","touchmove","touchend"];t.util.addListener=function(h,l,f,c){h&&h.addEventListener(l,f,a?!1:c)},t.util.removeListener=function(h,l,f,c){h&&h.removeEventListener(l,f,a?!1:c)};function u(h){var l=h.changedTouches;return l&&l[0]?l[0]:h}t.util.getPointer=function(h){var l=h.target,f=t.util.getScrollLeftTop(l),c=u(h);return{x:c.clientX+f.left,y:c.clientY+f.top}},t.util.isTouchEvent=function(h){return s.indexOf(h.type)>-1||h.pointerType==="touch"}}(),function(){function a(c,p){var m=c.style;if(!m)return c;if(typeof p=="string")return c.style.cssText+=";"+p,p.indexOf("opacity")>-1?f(c,p.match(/opacity:\s*(\d?\.?\d*)/)[1]):c;for(var g in p)if(g==="opacity")f(c,p[g]);else{var v=g==="float"||g==="cssFloat"?typeof m.styleFloat>"u"?"cssFloat":"styleFloat":g;m.setProperty(v,p[g])}return c}var s=t.document.createElement("div"),u=typeof s.style.opacity=="string",h=typeof s.style.filter=="string",l=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,f=function(c){return c};u?f=function(c,p){return c.style.opacity=p,c}:h&&(f=function(c,p){var m=c.style;return c.currentStyle&&!c.currentStyle.hasLayout&&(m.zoom=1),l.test(m.filter)?(p=p>=.9999?"":"alpha(opacity="+p*100+")",m.filter=m.filter.replace(l,p)):m.filter+=" alpha(opacity="+p*100+")",c}),t.util.setStyle=a}(),function(){var a=Array.prototype.slice;function s(w){return typeof w=="string"?t.document.getElementById(w):w}var u,h=function(w){return a.call(w,0)};try{u=h(t.document.childNodes)instanceof Array}catch{}u||(h=function(w){for(var C=new Array(w.length),_=w.length;_--;)C[_]=w[_];return C});function l(w,C){var _=t.document.createElement(w);for(var S in C)S==="class"?_.className=C[S]:S==="for"?_.htmlFor=C[S]:_.setAttribute(S,C[S]);return _}function f(w,C){w&&(" "+w.className+" ").indexOf(" "+C+" ")===-1&&(w.className+=(w.className?" ":"")+C)}function c(w,C,_){return typeof C=="string"&&(C=l(C,_)),w.parentNode&&w.parentNode.replaceChild(C,w),C.appendChild(w),C}function p(w){for(var C=0,_=0,S=t.document.documentElement,T=t.document.body||{scrollLeft:0,scrollTop:0};w&&(w.parentNode||w.host)&&(w=w.parentNode||w.host,w===t.document?(C=T.scrollLeft||S.scrollLeft||0,_=T.scrollTop||S.scrollTop||0):(C+=w.scrollLeft||0,_+=w.scrollTop||0),!(w.nodeType===1&&w.style.position==="fixed")););return{left:C,top:_}}function m(w){var C,_=w&&w.ownerDocument,S={left:0,top:0},T={left:0,top:0},I,F={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!_)return T;for(var $ in F)T[F[$]]+=parseInt(g(w,$),10)||0;return C=_.documentElement,typeof w.getBoundingClientRect<"u"&&(S=w.getBoundingClientRect()),I=p(w),{left:S.left+I.left-(C.clientLeft||0)+T.left,top:S.top+I.top-(C.clientTop||0)+T.top}}var g;t.document.defaultView&&t.document.defaultView.getComputedStyle?g=function(w,C){var _=t.document.defaultView.getComputedStyle(w,null);return _?_[C]:void 0}:g=function(w,C){var _=w.style[C];return!_&&w.currentStyle&&(_=w.currentStyle[C]),_},function(){var w=t.document.documentElement.style,C="userSelect"in w?"userSelect":"MozUserSelect"in w?"MozUserSelect":"WebkitUserSelect"in w?"WebkitUserSelect":"KhtmlUserSelect"in w?"KhtmlUserSelect":"";function _(T){return typeof T.onselectstart<"u"&&(T.onselectstart=t.util.falseFunction),C?T.style[C]="none":typeof T.unselectable=="string"&&(T.unselectable="on"),T}function S(T){return typeof T.onselectstart<"u"&&(T.onselectstart=null),C?T.style[C]="":typeof T.unselectable=="string"&&(T.unselectable=""),T}t.util.makeElementUnselectable=_,t.util.makeElementSelectable=S}();function v(w){var C=t.jsdomImplForWrapper(w);return C._canvas||C._image}function y(w){if(t.isLikelyNode){var C=t.jsdomImplForWrapper(w);C&&(C._image=null,C._canvas=null,C._currentSrc=null,C._attributes=null,C._classList=null)}}function b(w,C){w.imageSmoothingEnabled=w.imageSmoothingEnabled||w.webkitImageSmoothingEnabled||w.mozImageSmoothingEnabled||w.msImageSmoothingEnabled||w.oImageSmoothingEnabled,w.imageSmoothingEnabled=C}t.util.setImageSmoothing=b,t.util.getById=s,t.util.toArray=h,t.util.addClass=f,t.util.makeElement=l,t.util.wrapElement=c,t.util.getScrollLeftTop=p,t.util.getElementOffset=m,t.util.getNodeCanvas=v,t.util.cleanUpJsdomNode=y}(),function(){function a(h,l){return h+(/\?/.test(h)?"&":"?")+l}function s(){}function u(h,l){l||(l={});var f=l.method?l.method.toUpperCase():"GET",c=l.onComplete||function(){},p=new t.window.XMLHttpRequest,m=l.body||l.parameters;return p.onreadystatechange=function(){p.readyState===4&&(c(p),p.onreadystatechange=s)},f==="GET"&&(m=null,typeof l.parameters=="string"&&(h=a(h,l.parameters))),p.open(f,h,!0),(f==="POST"||f==="PUT")&&p.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),p.send(m),p}t.util.request=u}(),t.log=console.log,t.warn=console.warn,function(){var a=t.util.object.extend,s=t.util.object.clone,u=[];t.util.object.extend(u,{cancelAll:function(){var v=this.splice(0);return v.forEach(function(y){y.cancel()}),v},cancelByCanvas:function(v){if(!v)return[];var y=this.filter(function(b){return typeof b.target=="object"&&b.target.canvas===v});return y.forEach(function(b){b.cancel()}),y},cancelByTarget:function(v){var y=this.findAnimationsByTarget(v);return y.forEach(function(b){b.cancel()}),y},findAnimationIndex:function(v){return this.indexOf(this.findAnimation(v))},findAnimation:function(v){return this.find(function(y){return y.cancel===v})},findAnimationsByTarget:function(v){return v?this.filter(function(y){return y.target===v}):[]}});function h(){return!1}function l(v,y,b,w){return-b*Math.cos(v/w*(Math.PI/2))+b+y}function f(v){v||(v={});var y=!1,b,w=function(){var C=t.runningAnimations.indexOf(b);return C>-1&&t.runningAnimations.splice(C,1)[0]};return b=a(s(v),{cancel:function(){return y=!0,w()},currentValue:"startValue"in v?v.startValue:0,completionRate:0,durationRate:0}),t.runningAnimations.push(b),m(function(C){var _=C||+new Date,S=v.duration||500,T=_+S,I,F=v.onChange||h,$=v.abort||h,G=v.onComplete||h,ne=v.easing||l,X="startValue"in v?v.startValue.length>0:!1,Q="startValue"in v?v.startValue:0,Z="endValue"in v?v.endValue:100,ie=v.byValue||(X?Q.map(function(V,k){return Z[k]-Q[k]}):Z-Q);v.onStart&&v.onStart(),function V(k){I=k||+new Date;var P=I>T?S:I-_,A=P/S,j=X?Q.map(function(M,O){return ne(P,Q[O],ie[O],S)}):ne(P,Q,ie,S),H=Math.abs(X?(j[0]-Q[0])/ie[0]:(j-Q)/ie);if(b.currentValue=X?j.slice():j,b.completionRate=H,b.durationRate=A,!y){if($(j,H,A)){w();return}if(I>T){b.currentValue=X?Z.slice():Z,b.completionRate=1,b.durationRate=1,F(X?Z.slice():Z,1,1),G(Z,1,1),w();return}else F(j,H,A),m(V)}}(_)}),b.cancel}var c=t.window.requestAnimationFrame||t.window.webkitRequestAnimationFrame||t.window.mozRequestAnimationFrame||t.window.oRequestAnimationFrame||t.window.msRequestAnimationFrame||function(v){return t.window.setTimeout(v,1e3/60)},p=t.window.cancelAnimationFrame||t.window.clearTimeout;function m(){return c.apply(t.window,arguments)}function g(){return p.apply(t.window,arguments)}t.util.animate=f,t.util.requestAnimFrame=m,t.util.cancelAnimFrame=g,t.runningAnimations=u}(),function(){function a(u,h,l){var f="rgba("+parseInt(u[0]+l*(h[0]-u[0]),10)+","+parseInt(u[1]+l*(h[1]-u[1]),10)+","+parseInt(u[2]+l*(h[2]-u[2]),10);return f+=","+(u&&h?parseFloat(u[3]+l*(h[3]-u[3])):1),f+=")",f}function s(u,h,l,f){var c=new t.Color(u).getSource(),p=new t.Color(h).getSource(),m=f.onComplete,g=f.onChange;return f=f||{},t.util.animate(t.util.object.extend(f,{duration:l||500,startValue:c,endValue:p,byValue:p,easing:function(v,y,b,w){var C=f.colorEasing?f.colorEasing(v,w):1-Math.cos(v/w*(Math.PI/2));return a(y,b,C)},onComplete:function(v,y,b){if(m)return m(a(p,p,0),y,b)},onChange:function(v,y,b){if(g){if(Array.isArray(v))return g(a(v,v,0),y,b);g(v,y,b)}}}))}t.util.animateColor=s}(),function(){function a(k,P,A,j){return k<Math.abs(P)?(k=P,j=A/4):P===0&&k===0?j=A/(2*Math.PI)*Math.asin(1):j=A/(2*Math.PI)*Math.asin(P/k),{a:k,c:P,p:A,s:j}}function s(k,P,A){return k.a*Math.pow(2,10*(P-=1))*Math.sin((P*A-k.s)*(2*Math.PI)/k.p)}function u(k,P,A,j){return A*((k=k/j-1)*k*k+1)+P}function h(k,P,A,j){return k/=j/2,k<1?A/2*k*k*k+P:A/2*((k-=2)*k*k+2)+P}function l(k,P,A,j){return A*(k/=j)*k*k*k+P}function f(k,P,A,j){return-A*((k=k/j-1)*k*k*k-1)+P}function c(k,P,A,j){return k/=j/2,k<1?A/2*k*k*k*k+P:-A/2*((k-=2)*k*k*k-2)+P}function p(k,P,A,j){return A*(k/=j)*k*k*k*k+P}function m(k,P,A,j){return A*((k=k/j-1)*k*k*k*k+1)+P}function g(k,P,A,j){return k/=j/2,k<1?A/2*k*k*k*k*k+P:A/2*((k-=2)*k*k*k*k+2)+P}function v(k,P,A,j){return-A*Math.cos(k/j*(Math.PI/2))+A+P}function y(k,P,A,j){return A*Math.sin(k/j*(Math.PI/2))+P}function b(k,P,A,j){return-A/2*(Math.cos(Math.PI*k/j)-1)+P}function w(k,P,A,j){return k===0?P:A*Math.pow(2,10*(k/j-1))+P}function C(k,P,A,j){return k===j?P+A:A*(-Math.pow(2,-10*k/j)+1)+P}function _(k,P,A,j){return k===0?P:k===j?P+A:(k/=j/2,k<1?A/2*Math.pow(2,10*(k-1))+P:A/2*(-Math.pow(2,-10*--k)+2)+P)}function S(k,P,A,j){return-A*(Math.sqrt(1-(k/=j)*k)-1)+P}function T(k,P,A,j){return A*Math.sqrt(1-(k=k/j-1)*k)+P}function I(k,P,A,j){return k/=j/2,k<1?-A/2*(Math.sqrt(1-k*k)-1)+P:A/2*(Math.sqrt(1-(k-=2)*k)+1)+P}function F(k,P,A,j){var H=1.70158,M=0,O=A;if(k===0)return P;if(k/=j,k===1)return P+A;M||(M=j*.3);var R=a(O,A,M,H);return-s(R,k,j)+P}function $(k,P,A,j){var H=1.70158,M=0,O=A;if(k===0)return P;if(k/=j,k===1)return P+A;M||(M=j*.3);var R=a(O,A,M,H);return R.a*Math.pow(2,-10*k)*Math.sin((k*j-R.s)*(2*Math.PI)/R.p)+R.c+P}function G(k,P,A,j){var H=1.70158,M=0,O=A;if(k===0)return P;if(k/=j/2,k===2)return P+A;M||(M=j*(.3*1.5));var R=a(O,A,M,H);return k<1?-.5*s(R,k,j)+P:R.a*Math.pow(2,-10*(k-=1))*Math.sin((k*j-R.s)*(2*Math.PI)/R.p)*.5+R.c+P}function ne(k,P,A,j,H){return H===void 0&&(H=1.70158),A*(k/=j)*k*((H+1)*k-H)+P}function X(k,P,A,j,H){return H===void 0&&(H=1.70158),A*((k=k/j-1)*k*((H+1)*k+H)+1)+P}function Q(k,P,A,j,H){return H===void 0&&(H=1.70158),k/=j/2,k<1?A/2*(k*k*(((H*=1.525)+1)*k-H))+P:A/2*((k-=2)*k*(((H*=1.525)+1)*k+H)+2)+P}function Z(k,P,A,j){return A-ie(j-k,0,A,j)+P}function ie(k,P,A,j){return(k/=j)<1/2.75?A*(7.5625*k*k)+P:k<2/2.75?A*(7.5625*(k-=1.5/2.75)*k+.75)+P:k<2.5/2.75?A*(7.5625*(k-=2.25/2.75)*k+.9375)+P:A*(7.5625*(k-=2.625/2.75)*k+.984375)+P}function V(k,P,A,j){return k<j/2?Z(k*2,0,A,j)*.5+P:ie(k*2-j,0,A,j)*.5+A*.5+P}t.util.ease={easeInQuad:function(k,P,A,j){return A*(k/=j)*k+P},easeOutQuad:function(k,P,A,j){return-A*(k/=j)*(k-2)+P},easeInOutQuad:function(k,P,A,j){return k/=j/2,k<1?A/2*k*k+P:-A/2*(--k*(k-2)-1)+P},easeInCubic:function(k,P,A,j){return A*(k/=j)*k*k+P},easeOutCubic:u,easeInOutCubic:h,easeInQuart:l,easeOutQuart:f,easeInOutQuart:c,easeInQuint:p,easeOutQuint:m,easeInOutQuint:g,easeInSine:v,easeOutSine:y,easeInOutSine:b,easeInExpo:w,easeOutExpo:C,easeInOutExpo:_,easeInCirc:S,easeOutCirc:T,easeInOutCirc:I,easeInElastic:F,easeOutElastic:$,easeInOutElastic:G,easeInBack:ne,easeOutBack:X,easeInOutBack:Q,easeInBounce:Z,easeOutBounce:ie,easeInOutBounce:V}}(),function(a){var s=a.fabric||(a.fabric={}),u=s.util.object.extend,h=s.util.object.clone,l=s.util.toFixed,f=s.util.parseUnit,c=s.util.multiplyTransformMatrices,p=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],m=["symbol","image","marker","pattern","view","svg"],g=["pattern","defs","symbol","metadata","clipPath","mask","desc"],v=["symbol","g","a","svg","clipPath","defs"],y={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},b={stroke:"strokeOpacity",fill:"fillOpacity"},w="font-size",C="clip-path";s.svgValidTagNamesRegEx=T(p),s.svgViewBoxElementsRegEx=T(m),s.svgInvalidAncestorsRegEx=T(g),s.svgValidParentsRegEx=T(v),s.cssRules={},s.gradientDefs={},s.clipPaths={};function _(M){return M in y?y[M]:M}function S(M,O,R,B){var U=Array.isArray(O),W;if((M==="fill"||M==="stroke")&&O==="none")O="";else{if(M==="strokeUniform")return O==="non-scaling-stroke";if(M==="strokeDashArray")O==="none"?O=null:O=O.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(M==="transformMatrix")R&&R.transformMatrix?O=c(R.transformMatrix,s.parseTransformAttribute(O)):O=s.parseTransformAttribute(O);else if(M==="visible")O=O!=="none"&&O!=="hidden",R&&R.visible===!1&&(O=!1);else if(M==="opacity")O=parseFloat(O),R&&typeof R.opacity<"u"&&(O*=R.opacity);else if(M==="textAnchor")O=O==="start"?"left":O==="end"?"right":"center";else if(M==="charSpacing")W=f(O,B)/B*1e3;else if(M==="paintFirst"){var ee=O.indexOf("fill"),re=O.indexOf("stroke"),O="fill";(ee>-1&&re>-1&&re<ee||ee===-1&&re>-1)&&(O="stroke")}else{if(M==="href"||M==="xlink:href"||M==="font")return O;if(M==="imageSmoothing")return O==="optimizeQuality";W=U?O.map(f):f(O,B)}}return!U&&isNaN(W)?O:W}function T(M){return new RegExp("^("+M.join("|")+")\\b","i")}function I(M){for(var O in b)if(!(typeof M[b[O]]>"u"||M[O]==="")){if(typeof M[O]>"u"){if(!s.Object.prototype[O])continue;M[O]=s.Object.prototype[O]}if(M[O].indexOf("url(")!==0){var R=new s.Color(M[O]);M[O]=R.setAlpha(l(R.getAlpha()*M[b[O]],2)).toRgba()}}return M}function F(M,O){var R,B=[],U,W,ee;for(W=0,ee=O.length;W<ee;W++)R=O[W],U=M.getElementsByTagName(R),B=B.concat(Array.prototype.slice.call(U));return B}s.parseTransformAttribute=function(){function M(J,pe){var xe=s.util.cos(pe[0]),ke=s.util.sin(pe[0]),Le=0,Me=0;pe.length===3&&(Le=pe[1],Me=pe[2]),J[0]=xe,J[1]=ke,J[2]=-ke,J[3]=xe,J[4]=Le-(xe*Le-ke*Me),J[5]=Me-(ke*Le+xe*Me)}function O(J,pe){var xe=pe[0],ke=pe.length===2?pe[1]:pe[0];J[0]=xe,J[3]=ke}function R(J,pe,xe){J[xe]=Math.tan(s.util.degreesToRadians(pe[0]))}function B(J,pe){J[4]=pe[0],pe.length===2&&(J[5]=pe[1])}var U=s.iMatrix,W=s.reNum,ee=s.commaWsp,re="(?:(skewX)\\s*\\(\\s*("+W+")\\s*\\))",ue="(?:(skewY)\\s*\\(\\s*("+W+")\\s*\\))",Y="(?:(rotate)\\s*\\(\\s*("+W+")(?:"+ee+"("+W+")"+ee+"("+W+"))?\\s*\\))",z="(?:(scale)\\s*\\(\\s*("+W+")(?:"+ee+"("+W+"))?\\s*\\))",K="(?:(translate)\\s*\\(\\s*("+W+")(?:"+ee+"("+W+"))?\\s*\\))",te="(?:(matrix)\\s*\\(\\s*("+W+")"+ee+"("+W+")"+ee+"("+W+")"+ee+"("+W+")"+ee+"("+W+")"+ee+"("+W+")\\s*\\))",N="(?:"+te+"|"+K+"|"+z+"|"+Y+"|"+re+"|"+ue+")",q="(?:"+N+"(?:"+ee+"*"+N+")*)",ae="^\\s*(?:"+q+"?)\\s*$",ye=new RegExp(ae),ge=new RegExp(N,"g");return function(J){var pe=U.concat(),xe=[];if(!J||J&&!ye.test(J))return pe;J.replace(ge,function(Le){var Me=new RegExp(N).exec(Le).filter(function(Vi){return!!Vi}),Mt=Me[1],et=Me.slice(2).map(parseFloat);switch(Mt){case"translate":B(pe,et);break;case"rotate":et[0]=s.util.degreesToRadians(et[0]),M(pe,et);break;case"scale":O(pe,et);break;case"skewX":R(pe,et,2);break;case"skewY":R(pe,et,1);break;case"matrix":pe=et;break}xe.push(pe.concat()),pe=U.concat()});for(var ke=xe[0];xe.length>1;)xe.shift(),ke=s.util.multiplyTransformMatrices(ke,xe[0]);return ke}}();function $(M,O){var R,B;M.replace(/;\s*$/,"").split(";").forEach(function(U){var W=U.split(":");R=W[0].trim().toLowerCase(),B=W[1].trim(),O[R]=B})}function G(M,O){var R,B;for(var U in M)typeof M[U]>"u"||(R=U.toLowerCase(),B=M[U],O[R]=B)}function ne(M,O){var R={};for(var B in s.cssRules[O])if(X(M,B.split(" ")))for(var U in s.cssRules[O][B])R[U]=s.cssRules[O][B][U];return R}function X(M,O){var R,B=!0;return R=Z(M,O.pop()),R&&O.length&&(B=Q(M,O)),R&&B&&O.length===0}function Q(M,O){for(var R,B=!0;M.parentNode&&M.parentNode.nodeType===1&&O.length;)B&&(R=O.pop()),M=M.parentNode,B=Z(M,R);return O.length===0}function Z(M,O){var R=M.nodeName,B=M.getAttribute("class"),U=M.getAttribute("id"),W,ee;if(W=new RegExp("^"+R,"i"),O=O.replace(W,""),U&&O.length&&(W=new RegExp("#"+U+"(?![a-zA-Z\\-]+)","i"),O=O.replace(W,"")),B&&O.length)for(B=B.split(" "),ee=B.length;ee--;)W=new RegExp("\\."+B[ee]+"(?![a-zA-Z\\-]+)","i"),O=O.replace(W,"");return O.length===0}function ie(M,O){var R;if(M.getElementById&&(R=M.getElementById(O)),R)return R;var B,U,W,ee=M.getElementsByTagName("*");for(U=0,W=ee.length;U<W;U++)if(B=ee[U],O===B.getAttribute("id"))return B}function V(M){for(var O=F(M,["use","svg:use"]),R=0;O.length&&R<O.length;){var B=O[R],U=B.getAttribute("xlink:href")||B.getAttribute("href");if(U===null)return;var W=U.slice(1),ee=B.getAttribute("x")||0,re=B.getAttribute("y")||0,ue=ie(M,W).cloneNode(!0),Y=(ue.getAttribute("transform")||"")+" translate("+ee+", "+re+")",z,K=O.length,te,N,q,ae,ye=s.svgNS;if(P(ue),/^svg$/i.test(ue.nodeName)){var ge=ue.ownerDocument.createElementNS(ye,"g");for(N=0,q=ue.attributes,ae=q.length;N<ae;N++)te=q.item(N),ge.setAttributeNS(ye,te.nodeName,te.nodeValue);for(;ue.firstChild;)ge.appendChild(ue.firstChild);ue=ge}for(N=0,q=B.attributes,ae=q.length;N<ae;N++)te=q.item(N),!(te.nodeName==="x"||te.nodeName==="y"||te.nodeName==="xlink:href"||te.nodeName==="href")&&(te.nodeName==="transform"?Y=te.nodeValue+" "+Y:ue.setAttribute(te.nodeName,te.nodeValue));ue.setAttribute("transform",Y),ue.setAttribute("instantiated_by_use","1"),ue.removeAttribute("id"),z=B.parentNode,z.replaceChild(ue,B),O.length===K&&R++}}var k=new RegExp("^\\s*("+s.reNum+"+)\\s*,?\\s*("+s.reNum+"+)\\s*,?\\s*("+s.reNum+"+)\\s*,?\\s*("+s.reNum+"+)\\s*$");function P(M){if(!s.svgViewBoxElementsRegEx.test(M.nodeName))return{};var O=M.getAttribute("viewBox"),R=1,B=1,U=0,W=0,ee,re,ue,Y,z=M.getAttribute("width"),K=M.getAttribute("height"),te=M.getAttribute("x")||0,N=M.getAttribute("y")||0,q=M.getAttribute("preserveAspectRatio")||"",ae=!O||!(O=O.match(k)),ye=!z||!K||z==="100%"||K==="100%",ge=ae&&ye,J={},pe="",xe=0,ke=0;if(J.width=0,J.height=0,J.toBeParsed=ge,ae&&(te||N)&&M.parentNode&&M.parentNode.nodeName!=="#document"&&(pe=" translate("+f(te)+" "+f(N)+") ",ue=(M.getAttribute("transform")||"")+pe,M.setAttribute("transform",ue),M.removeAttribute("x"),M.removeAttribute("y")),ge)return J;if(ae)return J.width=f(z),J.height=f(K),J;if(U=-parseFloat(O[1]),W=-parseFloat(O[2]),ee=parseFloat(O[3]),re=parseFloat(O[4]),J.minX=U,J.minY=W,J.viewBoxWidth=ee,J.viewBoxHeight=re,ye?(J.width=ee,J.height=re):(J.width=f(z),J.height=f(K),R=J.width/ee,B=J.height/re),q=s.util.parsePreserveAspectRatioAttribute(q),q.alignX!=="none"&&(q.meetOrSlice==="meet"&&(B=R=R>B?B:R),q.meetOrSlice==="slice"&&(B=R=R>B?R:B),xe=J.width-ee*R,ke=J.height-re*R,q.alignX==="Mid"&&(xe/=2),q.alignY==="Mid"&&(ke/=2),q.alignX==="Min"&&(xe=0),q.alignY==="Min"&&(ke=0)),R===1&&B===1&&U===0&&W===0&&te===0&&N===0)return J;if((te||N)&&M.parentNode.nodeName!=="#document"&&(pe=" translate("+f(te)+" "+f(N)+") "),ue=pe+" matrix("+R+" 0 0 "+B+" "+(U*R+xe)+" "+(W*B+ke)+") ",M.nodeName==="svg"){for(Y=M.ownerDocument.createElementNS(s.svgNS,"g");M.firstChild;)Y.appendChild(M.firstChild);M.appendChild(Y)}else Y=M,Y.removeAttribute("x"),Y.removeAttribute("y"),ue=Y.getAttribute("transform")+ue;return Y.setAttribute("transform",ue),J}function A(M,O){for(;M&&(M=M.parentNode);)if(M.nodeName&&O.test(M.nodeName.replace("svg:",""))&&!M.getAttribute("instantiated_by_use"))return!0;return!1}s.parseSVGDocument=function(M,O,R,B){if(M){V(M);var U=s.Object.__uid++,W,ee,re=P(M),ue=s.util.toArray(M.getElementsByTagName("*"));if(re.crossOrigin=B&&B.crossOrigin,re.svgUid=U,ue.length===0&&s.isLikelyNode){ue=M.selectNodes('//*[name(.)!="svg"]');var Y=[];for(W=0,ee=ue.length;W<ee;W++)Y[W]=ue[W];ue=Y}var z=ue.filter(function(te){return P(te),s.svgValidTagNamesRegEx.test(te.nodeName.replace("svg:",""))&&!A(te,s.svgInvalidAncestorsRegEx)});if(!z||z&&!z.length){O&&O([],{});return}var K={};ue.filter(function(te){return te.nodeName.replace("svg:","")==="clipPath"}).forEach(function(te){var N=te.getAttribute("id");K[N]=s.util.toArray(te.getElementsByTagName("*")).filter(function(q){return s.svgValidTagNamesRegEx.test(q.nodeName.replace("svg:",""))})}),s.gradientDefs[U]=s.getGradientDefs(M),s.cssRules[U]=s.getCSSRules(M),s.clipPaths[U]=K,s.parseElements(z,function(te,N){O&&(O(te,re,N,ue),delete s.gradientDefs[U],delete s.cssRules[U],delete s.clipPaths[U])},h(re),R,B)}};function j(M,O){var R=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],B="xlink:href",U=O.getAttribute(B).slice(1),W=ie(M,U);if(W&&W.getAttribute(B)&&j(M,W),R.forEach(function(re){W&&!O.hasAttribute(re)&&W.hasAttribute(re)&&O.setAttribute(re,W.getAttribute(re))}),!O.children.length)for(var ee=W.cloneNode(!0);ee.firstChild;)O.appendChild(ee.firstChild);O.removeAttribute(B)}var H=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+s.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+s.reNum+"))?\\s+(.*)");u(s,{parseFontDeclaration:function(M,O){var R=M.match(H);if(R){var B=R[1],U=R[3],W=R[4],ee=R[5],re=R[6];B&&(O.fontStyle=B),U&&(O.fontWeight=isNaN(parseFloat(U))?U:parseFloat(U)),W&&(O.fontSize=f(W)),re&&(O.fontFamily=re),ee&&(O.lineHeight=ee==="normal"?1:ee)}},getGradientDefs:function(M){var O=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],R=F(M,O),B,U=0,W={};for(U=R.length;U--;)B=R[U],B.getAttribute("xlink:href")&&j(M,B),W[B.getAttribute("id")]=B;return W},parseAttributes:function(M,O,R){if(M){var B,U={},W,ee;typeof R>"u"&&(R=M.getAttribute("svgUid")),M.parentNode&&s.svgValidParentsRegEx.test(M.parentNode.nodeName)&&(U=s.parseAttributes(M.parentNode,O,R));var re=O.reduce(function(q,ae){return B=M.getAttribute(ae),B&&(q[ae]=B),q},{}),ue=u(ne(M,R),s.parseStyleAttribute(M));re=u(re,ue),ue[C]&&M.setAttribute(C,ue[C]),W=ee=U.fontSize||s.Text.DEFAULT_SVG_FONT_SIZE,re[w]&&(re[w]=W=f(re[w],ee));var Y,z,K={};for(var te in re)Y=_(te),z=S(Y,re[te],U,W),K[Y]=z;K&&K.font&&s.parseFontDeclaration(K.font,K);var N=u(U,K);return s.svgValidParentsRegEx.test(M.nodeName)?N:I(N)}},parseElements:function(M,O,R,B,U){new s.ElementsParser(M,O,R,B,U).parse()},parseStyleAttribute:function(M){var O={},R=M.getAttribute("style");return R&&(typeof R=="string"?$(R,O):G(R,O)),O},parsePointsAttribute:function(M){if(!M)return null;M=M.replace(/,/g," ").trim(),M=M.split(/\s+/);var O=[],R,B;for(R=0,B=M.length;R<B;R+=2)O.push({x:parseFloat(M[R]),y:parseFloat(M[R+1])});return O},getCSSRules:function(M){var O=M.getElementsByTagName("style"),R,B,U={},W;for(R=0,B=O.length;R<B;R++){var ee=O[R].textContent;ee=ee.replace(/\/\*[\s\S]*?\*\//g,""),ee.trim()!==""&&(W=ee.split("}"),W=W.filter(function(re){return re.trim()}),W.forEach(function(re){var ue=re.split("{"),Y={},z=ue[1].trim(),K=z.split(";").filter(function(ae){return ae.trim()});for(R=0,B=K.length;R<B;R++){var te=K[R].split(":"),N=te[0].trim(),q=te[1].trim();Y[N]=q}re=ue[0].trim(),re.split(",").forEach(function(ae){ae=ae.replace(/^svg/i,"").trim(),ae!==""&&(U[ae]?s.util.object.extend(U[ae],Y):U[ae]=s.util.object.clone(Y))})}))}return U},loadSVGFromURL:function(M,O,R,B){M=M.replace(/^\n\s*/,"").trim(),new s.util.request(M,{method:"get",onComplete:U});function U(W){var ee=W.responseXML;if(!ee||!ee.documentElement)return O&&O(null),!1;s.parseSVGDocument(ee.documentElement,function(re,ue,Y,z){O&&O(re,ue,Y,z)},R,B)}},loadSVGFromString:function(M,O,R,B){var U=new s.window.DOMParser,W=U.parseFromString(M.trim(),"text/xml");s.parseSVGDocument(W.documentElement,function(ee,re,ue,Y){O(ee,re,ue,Y)},R,B)}})}(e),t.ElementsParser=function(a,s,u,h,l,f){this.elements=a,this.callback=s,this.options=u,this.reviver=h,this.svgUid=u&&u.svgUid||0,this.parsingOptions=l,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=f},function(a){a.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},a.createObjects=function(){var s=this;this.elements.forEach(function(u,h){u.setAttribute("svgUid",s.svgUid),s.createObject(u,h)})},a.findTag=function(s){return t[t.util.string.capitalize(s.tagName.replace("svg:",""))]},a.createObject=function(s,u){var h=this.findTag(s);if(h&&h.fromElement)try{h.fromElement(s,this.createCallback(u,s),this.options)}catch(l){t.log(l)}else this.checkIfDone()},a.createCallback=function(s,u){var h=this;return function(l){var f;h.resolveGradient(l,u,"fill"),h.resolveGradient(l,u,"stroke"),l instanceof t.Image&&l._originalElement&&(f=l.parsePreserveAspectRatioAttribute(u)),l._removeTransformMatrix(f),h.resolveClipPath(l,u),h.reviver&&h.reviver(u,l),h.instances[s]=l,h.checkIfDone()}},a.extractPropertyDefinition=function(s,u,h){var l=s[u],f=this.regexUrl;if(f.test(l)){f.lastIndex=0;var c=f.exec(l)[1];return f.lastIndex=0,t[h][this.svgUid][c]}},a.resolveGradient=function(s,u,h){var l=this.extractPropertyDefinition(s,h,"gradientDefs");if(l){var f=u.getAttribute(h+"-opacity"),c=t.Gradient.fromElement(l,s,f,this.options);s.set(h,c)}},a.createClipPathCallback=function(s,u){return function(h){h._removeTransformMatrix(),h.fillRule=h.clipRule,u.push(h)}},a.resolveClipPath=function(s,u){var h=this.extractPropertyDefinition(s,"clipPath","clipPaths"),l,f,c,p,m,g;if(h){p=[],c=t.util.invertTransform(s.calcTransformMatrix());for(var v=h[0].parentNode,y=u;y.parentNode&&y.getAttribute("clip-path")!==s.clipPath;)y=y.parentNode;y.parentNode.appendChild(v);for(var b=0;b<h.length;b++)l=h[b],f=this.findTag(l),f.fromElement(l,this.createClipPathCallback(s,p),this.options);p.length===1?h=p[0]:h=new t.Group(p),m=t.util.multiplyTransformMatrices(c,h.calcTransformMatrix()),h.clipPath&&this.resolveClipPath(h,y);var g=t.util.qrDecompose(m);h.flipX=!1,h.flipY=!1,h.set("scaleX",g.scaleX),h.set("scaleY",g.scaleY),h.angle=g.angle,h.skewX=g.skewX,h.skewY=0,h.setPositionByOrigin({x:g.translateX,y:g.translateY},"center","center"),s.clipPath=h}else delete s.clipPath},a.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(s){return s!=null}),this.callback(this.instances,this.elements))}}(t.ElementsParser.prototype),function(a){var s=a.fabric||(a.fabric={});if(s.Point){s.warn("fabric.Point is already defined");return}s.Point=u;function u(h,l){this.x=h,this.y=l}u.prototype={type:"point",constructor:u,add:function(h){return new u(this.x+h.x,this.y+h.y)},addEquals:function(h){return this.x+=h.x,this.y+=h.y,this},scalarAdd:function(h){return new u(this.x+h,this.y+h)},scalarAddEquals:function(h){return this.x+=h,this.y+=h,this},subtract:function(h){return new u(this.x-h.x,this.y-h.y)},subtractEquals:function(h){return this.x-=h.x,this.y-=h.y,this},scalarSubtract:function(h){return new u(this.x-h,this.y-h)},scalarSubtractEquals:function(h){return this.x-=h,this.y-=h,this},multiply:function(h){return new u(this.x*h,this.y*h)},multiplyEquals:function(h){return this.x*=h,this.y*=h,this},divide:function(h){return new u(this.x/h,this.y/h)},divideEquals:function(h){return this.x/=h,this.y/=h,this},eq:function(h){return this.x===h.x&&this.y===h.y},lt:function(h){return this.x<h.x&&this.y<h.y},lte:function(h){return this.x<=h.x&&this.y<=h.y},gt:function(h){return this.x>h.x&&this.y>h.y},gte:function(h){return this.x>=h.x&&this.y>=h.y},lerp:function(h,l){return typeof l>"u"&&(l=.5),l=Math.max(Math.min(1,l),0),new u(this.x+(h.x-this.x)*l,this.y+(h.y-this.y)*l)},distanceFrom:function(h){var l=this.x-h.x,f=this.y-h.y;return Math.sqrt(l*l+f*f)},midPointFrom:function(h){return this.lerp(h)},min:function(h){return new u(Math.min(this.x,h.x),Math.min(this.y,h.y))},max:function(h){return new u(Math.max(this.x,h.x),Math.max(this.y,h.y))},toString:function(){return this.x+","+this.y},setXY:function(h,l){return this.x=h,this.y=l,this},setX:function(h){return this.x=h,this},setY:function(h){return this.y=h,this},setFromPoint:function(h){return this.x=h.x,this.y=h.y,this},swap:function(h){var l=this.x,f=this.y;this.x=h.x,this.y=h.y,h.x=l,h.y=f},clone:function(){return new u(this.x,this.y)}}}(e),function(a){var s=a.fabric||(a.fabric={});if(s.Intersection){s.warn("fabric.Intersection is already defined");return}function u(h){this.status=h,this.points=[]}s.Intersection=u,s.Intersection.prototype={constructor:u,appendPoint:function(h){return this.points.push(h),this},appendPoints:function(h){return this.points=this.points.concat(h),this}},s.Intersection.intersectLineLine=function(h,l,f,c){var p,m=(c.x-f.x)*(h.y-f.y)-(c.y-f.y)*(h.x-f.x),g=(l.x-h.x)*(h.y-f.y)-(l.y-h.y)*(h.x-f.x),v=(c.y-f.y)*(l.x-h.x)-(c.x-f.x)*(l.y-h.y);if(v!==0){var y=m/v,b=g/v;0<=y&&y<=1&&0<=b&&b<=1?(p=new u("Intersection"),p.appendPoint(new s.Point(h.x+y*(l.x-h.x),h.y+y*(l.y-h.y)))):p=new u}else m===0||g===0?p=new u("Coincident"):p=new u("Parallel");return p},s.Intersection.intersectLinePolygon=function(h,l,f){var c=new u,p=f.length,m,g,v,y;for(y=0;y<p;y++)m=f[y],g=f[(y+1)%p],v=u.intersectLineLine(h,l,m,g),c.appendPoints(v.points);return c.points.length>0&&(c.status="Intersection"),c},s.Intersection.intersectPolygonPolygon=function(h,l){var f=new u,c=h.length,p;for(p=0;p<c;p++){var m=h[p],g=h[(p+1)%c],v=u.intersectLinePolygon(m,g,l);f.appendPoints(v.points)}return f.points.length>0&&(f.status="Intersection"),f},s.Intersection.intersectPolygonRectangle=function(h,l,f){var c=l.min(f),p=l.max(f),m=new s.Point(p.x,c.y),g=new s.Point(c.x,p.y),v=u.intersectLinePolygon(c,m,h),y=u.intersectLinePolygon(m,p,h),b=u.intersectLinePolygon(p,g,h),w=u.intersectLinePolygon(g,c,h),C=new u;return C.appendPoints(v.points),C.appendPoints(y.points),C.appendPoints(b.points),C.appendPoints(w.points),C.points.length>0&&(C.status="Intersection"),C}}(e),function(a){var s=a.fabric||(a.fabric={});if(s.Color){s.warn("fabric.Color is already defined.");return}function u(l){l?this._tryParsingColor(l):this.setSource([0,0,0,1])}s.Color=u,s.Color.prototype={_tryParsingColor:function(l){var f;l in u.colorNameMap&&(l=u.colorNameMap[l]),l==="transparent"&&(f=[255,255,255,0]),f||(f=u.sourceFromHex(l)),f||(f=u.sourceFromRgb(l)),f||(f=u.sourceFromHsl(l)),f||(f=[0,0,0,1]),f&&this.setSource(f)},_rgbToHsl:function(l,f,c){l/=255,f/=255,c/=255;var p,m,g,v=s.util.array.max([l,f,c]),y=s.util.array.min([l,f,c]);if(g=(v+y)/2,v===y)p=m=0;else{var b=v-y;switch(m=g>.5?b/(2-v-y):b/(v+y),v){case l:p=(f-c)/b+(f<c?6:0);break;case f:p=(c-l)/b+2;break;case c:p=(l-f)/b+4;break}p/=6}return[Math.round(p*360),Math.round(m*100),Math.round(g*100)]},getSource:function(){return this._source},setSource:function(l){this._source=l},toRgb:function(){var l=this.getSource();return"rgb("+l[0]+","+l[1]+","+l[2]+")"},toRgba:function(){var l=this.getSource();return"rgba("+l[0]+","+l[1]+","+l[2]+","+l[3]+")"},toHsl:function(){var l=this.getSource(),f=this._rgbToHsl(l[0],l[1],l[2]);return"hsl("+f[0]+","+f[1]+"%,"+f[2]+"%)"},toHsla:function(){var l=this.getSource(),f=this._rgbToHsl(l[0],l[1],l[2]);return"hsla("+f[0]+","+f[1]+"%,"+f[2]+"%,"+l[3]+")"},toHex:function(){var l=this.getSource(),f,c,p;return f=l[0].toString(16),f=f.length===1?"0"+f:f,c=l[1].toString(16),c=c.length===1?"0"+c:c,p=l[2].toString(16),p=p.length===1?"0"+p:p,f.toUpperCase()+c.toUpperCase()+p.toUpperCase()},toHexa:function(){var l=this.getSource(),f;return f=Math.round(l[3]*255),f=f.toString(16),f=f.length===1?"0"+f:f,this.toHex()+f.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(l){var f=this.getSource();return f[3]=l,this.setSource(f),this},toGrayscale:function(){var l=this.getSource(),f=parseInt((l[0]*.3+l[1]*.59+l[2]*.11).toFixed(0),10),c=l[3];return this.setSource([f,f,f,c]),this},toBlackWhite:function(l){var f=this.getSource(),c=(f[0]*.3+f[1]*.59+f[2]*.11).toFixed(0),p=f[3];return l=l||127,c=Number(c)<Number(l)?0:255,this.setSource([c,c,c,p]),this},overlayWith:function(l){l instanceof u||(l=new u(l));var f=[],c=this.getAlpha(),p=.5,m=this.getSource(),g=l.getSource(),v;for(v=0;v<3;v++)f.push(Math.round(m[v]*(1-p)+g[v]*p));return f[3]=c,this.setSource(f),this}},s.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,s.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,s.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,s.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function h(l,f,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?l+(f-l)*6*c:c<1/2?f:c<2/3?l+(f-l)*(2/3-c)*6:l}s.Color.fromRgb=function(l){return u.fromSource(u.sourceFromRgb(l))},s.Color.sourceFromRgb=function(l){var f=l.match(u.reRGBa);if(f){var c=parseInt(f[1],10)/(/%$/.test(f[1])?100:1)*(/%$/.test(f[1])?255:1),p=parseInt(f[2],10)/(/%$/.test(f[2])?100:1)*(/%$/.test(f[2])?255:1),m=parseInt(f[3],10)/(/%$/.test(f[3])?100:1)*(/%$/.test(f[3])?255:1);return[parseInt(c,10),parseInt(p,10),parseInt(m,10),f[4]?parseFloat(f[4]):1]}},s.Color.fromRgba=u.fromRgb,s.Color.fromHsl=function(l){return u.fromSource(u.sourceFromHsl(l))},s.Color.sourceFromHsl=function(l){var f=l.match(u.reHSLa);if(f){var c=(parseFloat(f[1])%360+360)%360/360,p=parseFloat(f[2])/(/%$/.test(f[2])?100:1),m=parseFloat(f[3])/(/%$/.test(f[3])?100:1),g,v,y;if(p===0)g=v=y=m;else{var b=m<=.5?m*(p+1):m+p-m*p,w=m*2-b;g=h(w,b,c+1/3),v=h(w,b,c),y=h(w,b,c-1/3)}return[Math.round(g*255),Math.round(v*255),Math.round(y*255),f[4]?parseFloat(f[4]):1]}},s.Color.fromHsla=u.fromHsl,s.Color.fromHex=function(l){return u.fromSource(u.sourceFromHex(l))},s.Color.sourceFromHex=function(l){if(l.match(u.reHex)){var f=l.slice(l.indexOf("#")+1),c=f.length===3||f.length===4,p=f.length===8||f.length===4,m=c?f.charAt(0)+f.charAt(0):f.substring(0,2),g=c?f.charAt(1)+f.charAt(1):f.substring(2,4),v=c?f.charAt(2)+f.charAt(2):f.substring(4,6),y=p?c?f.charAt(3)+f.charAt(3):f.substring(6,8):"FF";return[parseInt(m,16),parseInt(g,16),parseInt(v,16),parseFloat((parseInt(y,16)/255).toFixed(2))]}},s.Color.fromSource=function(l){var f=new u;return f.setSource(l),f}}(e),function(a){var s=a.fabric||(a.fabric={}),u=["e","se","s","sw","w","nw","n","ne","e"],h=["ns","nesw","ew","nwse"],l={},f="left",c="top",p="right",m="bottom",g="center",v={top:m,bottom:c,left:p,right:f,center:g},y=s.util.radiansToDegrees,b=Math.sign||function(Y){return(Y>0)-(Y<0)||+Y};function w(Y,z){var K=Y.angle+y(Math.atan2(z.y,z.x))+360;return Math.round(K%360/45)}function C(Y,z){var K=z.transform.target,te=K.canvas,N=s.util.object.clone(z);N.target=K,te&&te.fire("object:"+Y,N),K.fire(Y,z)}function _(Y,z){var K=z.canvas,te=K.uniScaleKey,N=Y[te];return K.uniformScaling&&!N||!K.uniformScaling&&N}function S(Y){return Y.originX===g&&Y.originY===g}function T(Y,z,K){var te=Y.lockScalingX,N=Y.lockScalingY;return!!(te&&N||!z&&(te||N)&&K||te&&z==="x"||N&&z==="y")}function I(Y,z,K){var te="not-allowed",N=_(Y,K),q="";if(z.x!==0&&z.y===0?q="x":z.x===0&&z.y!==0&&(q="y"),T(K,q,N))return te;var ae=w(K,z);return u[ae]+"-resize"}function F(Y,z,K){var te="not-allowed";if(z.x!==0&&K.lockSkewingY||z.y!==0&&K.lockSkewingX)return te;var N=w(K,z)%4;return h[N]+"-resize"}function $(Y,z,K){return Y[K.canvas.altActionKey]?l.skewCursorStyleHandler(Y,z,K):l.scaleCursorStyleHandler(Y,z,K)}function G(Y,z,K){var te=Y[K.canvas.altActionKey];if(z.x===0)return te?"skewX":"scaleY";if(z.y===0)return te?"skewY":"scaleX"}function ne(Y,z,K){return K.lockRotation?"not-allowed":z.cursorStyle}function X(Y,z,K,te){return{e:Y,transform:z,pointer:{x:K,y:te}}}function Q(Y){return function(z,K,te,N){var q=K.target,ae=q.getCenterPoint(),ye=q.translateToOriginPoint(ae,K.originX,K.originY),ge=Y(z,K,te,N);return q.setPositionByOrigin(ye,K.originX,K.originY),ge}}function Z(Y,z){return function(K,te,N,q){var ae=z(K,te,N,q);return ae&&C(Y,X(K,te,N,q)),ae}}function ie(Y,z,K,te,N){var q=Y.target,ae=q.controls[Y.corner],ye=q.canvas.getZoom(),ge=q.padding/ye,J=q.toLocalPoint(new s.Point(te,N),z,K);return J.x>=ge&&(J.x-=ge),J.x<=-ge&&(J.x+=ge),J.y>=ge&&(J.y-=ge),J.y<=ge&&(J.y+=ge),J.x-=ae.offsetX,J.y-=ae.offsetY,J}function V(Y){return Y.flipX!==Y.flipY}function k(Y,z,K,te,N){if(Y[z]!==0){var q=Y._getTransformedDimensions()[te],ae=N/q*Y[K];Y.set(K,ae)}}function P(Y,z,K,te){var N=z.target,q=N._getTransformedDimensions(0,N.skewY),ae=ie(z,z.originX,z.originY,K,te),ye=Math.abs(ae.x*2)-q.x,ge=N.skewX,J;ye<2?J=0:(J=y(Math.atan2(ye/N.scaleX,q.y/N.scaleY)),z.originX===f&&z.originY===m&&(J=-J),z.originX===p&&z.originY===c&&(J=-J),V(N)&&(J=-J));var pe=ge!==J;if(pe){var xe=N._getTransformedDimensions().y;N.set("skewX",J),k(N,"skewY","scaleY","y",xe)}return pe}function A(Y,z,K,te){var N=z.target,q=N._getTransformedDimensions(N.skewX,0),ae=ie(z,z.originX,z.originY,K,te),ye=Math.abs(ae.y*2)-q.y,ge=N.skewY,J;ye<2?J=0:(J=y(Math.atan2(ye/N.scaleY,q.x/N.scaleX)),z.originX===f&&z.originY===m&&(J=-J),z.originX===p&&z.originY===c&&(J=-J),V(N)&&(J=-J));var pe=ge!==J;if(pe){var xe=N._getTransformedDimensions().x;N.set("skewY",J),k(N,"skewX","scaleX","x",xe)}return pe}function j(Y,z,K,te){var N=z.target,q=N.skewX,ae,ye=z.originY;if(N.lockSkewingX)return!1;if(q===0){var ge=ie(z,g,g,K,te);ge.x>0?ae=f:ae=p}else q>0&&(ae=ye===c?f:p),q<0&&(ae=ye===c?p:f),V(N)&&(ae=ae===f?p:f);z.originX=ae;var J=Z("skewing",Q(P));return J(Y,z,K,te)}function H(Y,z,K,te){var N=z.target,q=N.skewY,ae,ye=z.originX;if(N.lockSkewingY)return!1;if(q===0){var ge=ie(z,g,g,K,te);ge.y>0?ae=c:ae=m}else q>0&&(ae=ye===f?c:m),q<0&&(ae=ye===f?m:c),V(N)&&(ae=ae===c?m:c);z.originY=ae;var J=Z("skewing",Q(A));return J(Y,z,K,te)}function M(Y,z,K,te){var N=z,q=N.target,ae=q.translateToOriginPoint(q.getCenterPoint(),N.originX,N.originY);if(q.lockRotation)return!1;var ye=Math.atan2(N.ey-ae.y,N.ex-ae.x),ge=Math.atan2(te-ae.y,K-ae.x),J=y(ge-ye+N.theta),pe=!0;if(q.snapAngle>0){var xe=q.snapAngle,ke=q.snapThreshold||xe,Le=Math.ceil(J/xe)*xe,Me=Math.floor(J/xe)*xe;Math.abs(J-Me)<ke?J=Me:Math.abs(J-Le)<ke&&(J=Le)}return J<0&&(J=360+J),J%=360,pe=q.angle!==J,q.angle=J,pe}function O(Y,z,K,te,N){N=N||{};var q=z.target,ae=q.lockScalingX,ye=q.lockScalingY,ge=N.by,J,pe,xe,ke,Le=_(Y,q),Me=T(q,ge,Le),Mt,et,Vi=z.gestureScale;if(Me)return!1;if(Vi)pe=z.scaleX*Vi,xe=z.scaleY*Vi;else{if(J=ie(z,z.originX,z.originY,K,te),Mt=ge!=="y"?b(J.x):1,et=ge!=="x"?b(J.y):1,z.signX||(z.signX=Mt),z.signY||(z.signY=et),q.lockScalingFlip&&(z.signX!==Mt||z.signY!==et))return!1;if(ke=q._getTransformedDimensions(),Le&&!ge){var Ha=Math.abs(J.x)+Math.abs(J.y),Ln=z.original,f7=Math.abs(ke.x*Ln.scaleX/q.scaleX)+Math.abs(ke.y*Ln.scaleY/q.scaleY),SS=Ha/f7;pe=Ln.scaleX*SS,xe=Ln.scaleY*SS}else pe=Math.abs(J.x*q.scaleX/ke.x),xe=Math.abs(J.y*q.scaleY/ke.y);S(z)&&(pe*=2,xe*=2),z.signX!==Mt&&ge!=="y"&&(z.originX=v[z.originX],pe*=-1,z.signX=Mt),z.signY!==et&&ge!=="x"&&(z.originY=v[z.originY],xe*=-1,z.signY=et)}var h7=q.scaleX,d7=q.scaleY;return ge?(ge==="x"&&q.set("scaleX",pe),ge==="y"&&q.set("scaleY",xe)):(!ae&&q.set("scaleX",pe),!ye&&q.set("scaleY",xe)),h7!==q.scaleX||d7!==q.scaleY}function R(Y,z,K,te){return O(Y,z,K,te)}function B(Y,z,K,te){return O(Y,z,K,te,{by:"x"})}function U(Y,z,K,te){return O(Y,z,K,te,{by:"y"})}function W(Y,z,K,te){return Y[z.target.canvas.altActionKey]?l.skewHandlerX(Y,z,K,te):l.scalingY(Y,z,K,te)}function ee(Y,z,K,te){return Y[z.target.canvas.altActionKey]?l.skewHandlerY(Y,z,K,te):l.scalingX(Y,z,K,te)}function re(Y,z,K,te){var N=z.target,q=ie(z,z.originX,z.originY,K,te),ae=N.strokeWidth/(N.strokeUniform?N.scaleX:1),ye=S(z)?2:1,ge=N.width,J=Math.abs(q.x*ye/N.scaleX)-ae;return N.set("width",Math.max(J,0)),ge!==J}function ue(Y,z,K,te){var N=z.target,q=K-z.offsetX,ae=te-z.offsetY,ye=!N.get("lockMovementX")&&N.left!==q,ge=!N.get("lockMovementY")&&N.top!==ae;return ye&&N.set("left",q),ge&&N.set("top",ae),(ye||ge)&&C("moving",X(Y,z,K,te)),ye||ge}l.scaleCursorStyleHandler=I,l.skewCursorStyleHandler=F,l.scaleSkewCursorStyleHandler=$,l.rotationWithSnapping=Z("rotating",Q(M)),l.scalingEqually=Z("scaling",Q(R)),l.scalingX=Z("scaling",Q(B)),l.scalingY=Z("scaling",Q(U)),l.scalingYOrSkewingX=W,l.scalingXOrSkewingY=ee,l.changeWidth=Z("resizing",Q(re)),l.skewHandlerX=j,l.skewHandlerY=H,l.dragHandler=ue,l.scaleOrSkewActionName=G,l.rotationStyleHandler=ne,l.fireEvent=C,l.wrapWithFixedAnchor=Q,l.wrapWithFireEvent=Z,l.getLocalPoint=ie,s.controlsUtils=l}(e),function(a){var s=a.fabric||(a.fabric={}),u=s.util.degreesToRadians,h=s.controlsUtils;function l(c,p,m,g,v){g=g||{};var y=this.sizeX||g.cornerSize||v.cornerSize,b=this.sizeY||g.cornerSize||v.cornerSize,w=typeof g.transparentCorners<"u"?g.transparentCorners:v.transparentCorners,C=w?"stroke":"fill",_=!w&&(g.cornerStrokeColor||v.cornerStrokeColor),S=p,T=m,I;c.save(),c.fillStyle=g.cornerColor||v.cornerColor,c.strokeStyle=g.cornerStrokeColor||v.cornerStrokeColor,y>b?(I=y,c.scale(1,b/y),T=m*y/b):b>y?(I=b,c.scale(y/b,1),S=p*b/y):I=y,c.lineWidth=1,c.beginPath(),c.arc(S,T,I/2,0,2*Math.PI,!1),c[C](),_&&c.stroke(),c.restore()}function f(c,p,m,g,v){g=g||{};var y=this.sizeX||g.cornerSize||v.cornerSize,b=this.sizeY||g.cornerSize||v.cornerSize,w=typeof g.transparentCorners<"u"?g.transparentCorners:v.transparentCorners,C=w?"stroke":"fill",_=!w&&(g.cornerStrokeColor||v.cornerStrokeColor),S=y/2,T=b/2;c.save(),c.fillStyle=g.cornerColor||v.cornerColor,c.strokeStyle=g.cornerStrokeColor||v.cornerStrokeColor,c.lineWidth=1,c.translate(p,m),c.rotate(u(v.angle)),c[C+"Rect"](-S,-T,y,b),_&&c.strokeRect(-S,-T,y,b),c.restore()}h.renderCircleControl=l,h.renderSquareControl=f}(e),function(a){var s=a.fabric||(a.fabric={});function u(h){for(var l in h)this[l]=h[l]}s.Control=u,s.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(h,l){return l.cursorStyle},getActionName:function(h,l){return l.actionName},getVisibility:function(h,l){var f=h._controlsVisibility;return f&&typeof f[l]<"u"?f[l]:this.visible},setVisibility:function(h){this.visible=h},positionHandler:function(h,l){var f=s.util.transformPoint({x:this.x*h.x+this.offsetX,y:this.y*h.y+this.offsetY},l);return f},calcCornerCoords:function(h,l,f,c,p){var m,g,v,y,b=p?this.touchSizeX:this.sizeX,w=p?this.touchSizeY:this.sizeY;if(b&&w&&b!==w){var C=Math.atan2(w,b),_=Math.sqrt(b*b+w*w)/2,S=C-s.util.degreesToRadians(h),T=Math.PI/2-C-s.util.degreesToRadians(h);m=_*s.util.cos(S),g=_*s.util.sin(S),v=_*s.util.cos(T),y=_*s.util.sin(T)}else{var I=b&&w?b:l;_=I*.7071067812;var S=s.util.degreesToRadians(45-h);m=v=_*s.util.cos(S),g=y=_*s.util.sin(S)}return{tl:{x:f-y,y:c-v},tr:{x:f+m,y:c-g},bl:{x:f-m,y:c+g},br:{x:f+y,y:c+v}}},render:function(h,l,f,c,p){switch(c=c||{},c.cornerStyle||p.cornerStyle){case"circle":s.controlsUtils.renderCircleControl.call(this,h,l,f,c,p);break;default:s.controlsUtils.renderSquareControl.call(this,h,l,f,c,p)}}}}(e),function(){function a(f,c){var p=f.getAttribute("style"),m=f.getAttribute("offset")||0,g,v,y,b;if(m=parseFloat(m)/(/%$/.test(m)?100:1),m=m<0?0:m>1?1:m,p){var w=p.split(/\s*;\s*/);for(w[w.length-1]===""&&w.pop(),b=w.length;b--;){var C=w[b].split(/\s*:\s*/),_=C[0].trim(),S=C[1].trim();_==="stop-color"?g=S:_==="stop-opacity"&&(y=S)}}return g||(g=f.getAttribute("stop-color")||"rgb(0,0,0)"),y||(y=f.getAttribute("stop-opacity")),g=new t.Color(g),v=g.getAlpha(),y=isNaN(parseFloat(y))?1:parseFloat(y),y*=v*c,{offset:m,color:g.toRgb(),opacity:y}}function s(f){return{x1:f.getAttribute("x1")||0,y1:f.getAttribute("y1")||0,x2:f.getAttribute("x2")||"100%",y2:f.getAttribute("y2")||0}}function u(f){return{x1:f.getAttribute("fx")||f.getAttribute("cx")||"50%",y1:f.getAttribute("fy")||f.getAttribute("cy")||"50%",r1:0,x2:f.getAttribute("cx")||"50%",y2:f.getAttribute("cy")||"50%",r2:f.getAttribute("r")||"50%"}}var h=t.util.object.clone;t.Gradient=t.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(f){f||(f={}),f.coords||(f.coords={});var c,p=this;Object.keys(f).forEach(function(m){p[m]=f[m]}),this.id?this.id+="_"+t.Object.__uid++:this.id=t.Object.__uid++,c={x1:f.coords.x1||0,y1:f.coords.y1||0,x2:f.coords.x2||0,y2:f.coords.y2||0},this.type==="radial"&&(c.r1=f.coords.r1||0,c.r2=f.coords.r2||0),this.coords=c,this.colorStops=f.colorStops.slice()},addColorStop:function(f){for(var c in f){var p=new t.Color(f[c]);this.colorStops.push({offset:parseFloat(c),color:p.toRgb(),opacity:p.getAlpha()})}return this},toObject:function(f){var c={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return t.util.populateWithProperties(this,c,f),c},toSVG:function(f,v){var p=h(this.coords,!0),m,g,v=v||{},y,b,w=h(this.colorStops,!0),C=p.r1>p.r2,_=this.gradientTransform?this.gradientTransform.concat():t.iMatrix.concat(),S=-this.offsetX,T=-this.offsetY,I=!!v.additionalTransform,F=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(w.sort(function(Q,Z){return Q.offset-Z.offset}),F==="objectBoundingBox"?(S/=f.width,T/=f.height):(S+=f.width/2,T+=f.height/2),f.type==="path"&&this.gradientUnits!=="percentage"&&(S-=f.pathOffset.x,T-=f.pathOffset.y),_[4]-=S,_[5]-=T,b='id="SVGID_'+this.id+'" gradientUnits="'+F+'"',b+=' gradientTransform="'+(I?v.additionalTransform+" ":"")+t.util.matrixToSVG(_)+'" ',this.type==="linear"?y=["<linearGradient ",b,' x1="',p.x1,'" y1="',p.y1,'" x2="',p.x2,'" y2="',p.y2,`">
`]:this.type==="radial"&&(y=["<radialGradient ",b,' cx="',C?p.x1:p.x2,'" cy="',C?p.y1:p.y2,'" r="',C?p.r1:p.r2,'" fx="',C?p.x2:p.x1,'" fy="',C?p.y2:p.y1,`">
`]),this.type==="radial"){if(C)for(w=w.concat(),w.reverse(),m=0,g=w.length;m<g;m++)w[m].offset=1-w[m].offset;var $=Math.min(p.r1,p.r2);if($>0){var G=Math.max(p.r1,p.r2),ne=$/G;for(m=0,g=w.length;m<g;m++)w[m].offset+=ne*(1-w[m].offset)}}for(m=0,g=w.length;m<g;m++){var X=w[m];y.push("<stop ",'offset="',X.offset*100+"%",'" style="stop-color:',X.color,typeof X.opacity<"u"?";stop-opacity: "+X.opacity:";",`"/>
`)}return y.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),y.join("")},toLive:function(f){var c,p=t.util.object.clone(this.coords),m,g;if(this.type){for(this.type==="linear"?c=f.createLinearGradient(p.x1,p.y1,p.x2,p.y2):this.type==="radial"&&(c=f.createRadialGradient(p.x1,p.y1,p.r1,p.x2,p.y2,p.r2)),m=0,g=this.colorStops.length;m<g;m++){var v=this.colorStops[m].color,y=this.colorStops[m].opacity,b=this.colorStops[m].offset;typeof y<"u"&&(v=new t.Color(v).setAlpha(y).toRgba()),c.addColorStop(b,v)}return c}}}),t.util.object.extend(t.Gradient,{fromElement:function(f,c,p,m){var g=parseFloat(p)/(/%$/.test(p)?100:1);g=g<0?0:g>1?1:g,isNaN(g)&&(g=1);var v=f.getElementsByTagName("stop"),y,b=f.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",w=f.getAttribute("gradientTransform")||"",C=[],_,S,T=0,I=0,F;for(f.nodeName==="linearGradient"||f.nodeName==="LINEARGRADIENT"?(y="linear",_=s(f)):(y="radial",_=u(f)),S=v.length;S--;)C.push(a(v[S],g));F=t.parseTransformAttribute(w),l(c,_,m,b),b==="pixels"&&(T=-c.left,I=-c.top);var $=new t.Gradient({id:f.getAttribute("id"),type:y,coords:_,colorStops:C,gradientUnits:b,gradientTransform:F,offsetX:T,offsetY:I});return $}});function l(f,c,p,m){var g,v;Object.keys(c).forEach(function(y){g=c[y],g==="Infinity"?v=1:g==="-Infinity"?v=0:(v=parseFloat(c[y],10),typeof g=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(g)&&(v*=.01,m==="pixels"&&((y==="x1"||y==="x2"||y==="r2")&&(v*=p.viewBoxWidth||p.width),(y==="y1"||y==="y2")&&(v*=p.viewBoxHeight||p.height)))),c[y]=v})}}(),function(){var a=t.util.toFixed;t.Pattern=t.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(s,u){if(s||(s={}),this.id=t.Object.__uid++,this.setOptions(s),!s.source||s.source&&typeof s.source!="string"){u&&u(this);return}else{var h=this;this.source=t.util.createImage(),t.util.loadImage(s.source,function(l,f){h.source=l,u&&u(h,f)},null,this.crossOrigin)}},toObject:function(s){var u=t.Object.NUM_FRACTION_DIGITS,h,l;return typeof this.source.src=="string"?h=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(h=this.source.toDataURL()),l={type:"pattern",source:h,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:a(this.offsetX,u),offsetY:a(this.offsetY,u),patternTransform:this.patternTransform?this.patternTransform.concat():null},t.util.populateWithProperties(this,l,s),l},toSVG:function(s){var u=typeof this.source=="function"?this.source():this.source,h=u.width/s.width,l=u.height/s.height,f=this.offsetX/s.width,c=this.offsetY/s.height,p="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(l=1,c&&(l+=Math.abs(c))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(h=1,f&&(h+=Math.abs(f))),u.src?p=u.src:u.toDataURL&&(p=u.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+f+'" y="'+c+'" width="'+h+'" height="'+l+`">
<image x="0" y="0" width="`+u.width+'" height="'+u.height+'" xlink:href="'+p+`"></image>
</pattern>
`},setOptions:function(s){for(var u in s)this[u]=s[u]},toLive:function(s){var u=this.source;return!u||typeof u.src<"u"&&(!u.complete||u.naturalWidth===0||u.naturalHeight===0)?"":s.createPattern(u,this.repeat)}})}(),function(a){var s=a.fabric||(a.fabric={}),u=s.util.toFixed;if(s.Shadow){s.warn("fabric.Shadow is already defined.");return}s.Shadow=s.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(h){typeof h=="string"&&(h=this._parseShadow(h));for(var l in h)this[l]=h[l];this.id=s.Object.__uid++},_parseShadow:function(h){var l=h.trim(),f=s.Shadow.reOffsetsAndBlur.exec(l)||[],c=l.replace(s.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:c.trim(),offsetX:parseFloat(f[1],10)||0,offsetY:parseFloat(f[2],10)||0,blur:parseFloat(f[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(h){var l=40,f=40,c=s.Object.NUM_FRACTION_DIGITS,p=s.util.rotateVector({x:this.offsetX,y:this.offsetY},s.util.degreesToRadians(-h.angle)),m=20,g=new s.Color(this.color);return h.width&&h.height&&(l=u((Math.abs(p.x)+this.blur)/h.width,c)*100+m,f=u((Math.abs(p.y)+this.blur)/h.height,c)*100+m),h.flipX&&(p.x*=-1),h.flipY&&(p.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+f+'%" height="'+(100+2*f)+'%" x="-'+l+'%" width="'+(100+2*l)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+u(this.blur?this.blur/2:0,c)+`"></feGaussianBlur>
	<feOffset dx="`+u(p.x,c)+'" dy="'+u(p.y,c)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+g.toRgb()+'" flood-opacity="'+g.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var h={},l=s.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(f){this[f]!==l[f]&&(h[f]=this[f])},this),h}}),s.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(e),function(){if(t.StaticCanvas){t.warn("fabric.StaticCanvas is already defined.");return}var a=t.util.object.extend,s=t.util.getElementOffset,u=t.util.removeFromArray,h=t.util.toFixed,l=t.util.transformPoint,f=t.util.invertTransform,c=t.util.getNodeCanvas,p=t.util.createCanvasElement,m=new Error("Could not initialize `canvas` element");t.StaticCanvas=t.util.createClass(t.CommonMethods,{initialize:function(g,v){v||(v={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(g,v)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:t.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(g,v){var y=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(g),this._initOptions(v),this.interactive||this._initRetinaScaling(),v.overlayImage&&this.setOverlayImage(v.overlayImage,y),v.backgroundImage&&this.setBackgroundImage(v.backgroundImage,y),v.backgroundColor&&this.setBackgroundColor(v.backgroundColor,y),v.overlayColor&&this.setOverlayColor(v.overlayColor,y),this.calcOffset()},_isRetinaScaling:function(){return t.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,t.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var g=t.devicePixelRatio;this.__initRetinaScaling(g,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(g,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(g,v,y){v.setAttribute("width",this.width*g),v.setAttribute("height",this.height*g),y.scale(g,g)},calcOffset:function(){return this._offset=s(this.lowerCanvasEl),this},setOverlayImage:function(g,v,y){return this.__setBgOverlayImage("overlayImage",g,v,y)},setBackgroundImage:function(g,v,y){return this.__setBgOverlayImage("backgroundImage",g,v,y)},setOverlayColor:function(g,v){return this.__setBgOverlayColor("overlayColor",g,v)},setBackgroundColor:function(g,v){return this.__setBgOverlayColor("backgroundColor",g,v)},__setBgOverlayImage:function(g,v,y,b){return typeof v=="string"?t.util.loadImage(v,function(w,C){if(w){var _=new t.Image(w,b);this[g]=_,_.canvas=this}y&&y(w,C)},this,b&&b.crossOrigin):(b&&v.setOptions(b),this[g]=v,v&&(v.canvas=this),y&&y(v,!1)),this},__setBgOverlayColor:function(g,v,y){return this[g]=v,this._initGradient(v,g),this._initPattern(v,g,y),this},_createCanvasElement:function(){var g=p();if(!g||(g.style||(g.style={}),typeof g.getContext>"u"))throw m;return g},_initOptions:function(g){var v=this.lowerCanvasEl;this._setOptions(g),this.width=this.width||parseInt(v.width,10)||0,this.height=this.height||parseInt(v.height,10)||0,this.lowerCanvasEl.style&&(v.width=this.width,v.height=this.height,v.style.width=this.width+"px",v.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(g){g&&g.getContext?this.lowerCanvasEl=g:this.lowerCanvasEl=t.util.getById(g)||this._createCanvasElement(),t.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(g,v){return this.setDimensions({width:g},v)},setHeight:function(g,v){return this.setDimensions({height:g},v)},setDimensions:function(g,v){var y;v=v||{};for(var b in g)y=g[b],v.cssOnly||(this._setBackstoreDimension(b,g[b]),y+="px",this.hasLostContext=!0),v.backstoreOnly||this._setCssDimension(b,y);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),v.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(g,v){return this.lowerCanvasEl[g]=v,this.upperCanvasEl&&(this.upperCanvasEl[g]=v),this.cacheCanvasEl&&(this.cacheCanvasEl[g]=v),this[g]=v,this},_setCssDimension:function(g,v){return this.lowerCanvasEl.style[g]=v,this.upperCanvasEl&&(this.upperCanvasEl.style[g]=v),this.wrapperEl&&(this.wrapperEl.style[g]=v),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(g){var v=this._activeObject,y=this.backgroundImage,b=this.overlayImage,w,C,_;for(this.viewportTransform=g,C=0,_=this._objects.length;C<_;C++)w=this._objects[C],w.group||w.setCoords(!0);return v&&v.setCoords(),y&&y.setCoords(!0),b&&b.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(g,v){var y=g,b=this.viewportTransform.slice(0);g=l(g,f(this.viewportTransform)),b[0]=v,b[3]=v;var w=l(g,b);return b[4]+=y.x-w.x,b[5]+=y.y-w.y,this.setViewportTransform(b)},setZoom:function(g){return this.zoomToPoint(new t.Point(0,0),g),this},absolutePan:function(g){var v=this.viewportTransform.slice(0);return v[4]=-g.x,v[5]=-g.y,this.setViewportTransform(v)},relativePan:function(g){return this.absolutePan(new t.Point(-g.x-this.viewportTransform[4],-g.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(g){this.stateful&&g.setupState(),g._set("canvas",this),g.setCoords(),this.fire("object:added",{target:g}),g.fire("added")},_onObjectRemoved:function(g){this.fire("object:removed",{target:g}),g.fire("removed"),delete g.canvas},clearContext:function(g){return g.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var g=this.contextContainer;return this.renderCanvas(g,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=t.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var g={},v=this.width,y=this.height,b=f(this.viewportTransform);return g.tl=l({x:0,y:0},b),g.br=l({x:v,y},b),g.tr=new t.Point(g.br.x,g.tl.y),g.bl=new t.Point(g.tl.x,g.br.y),this.vptCoords=g,g},cancelRequestedRender:function(){this.isRendering&&(t.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(g,v){var y=this.viewportTransform,b=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(g),t.util.setImageSmoothing(g,this.imageSmoothingEnabled),this.fire("before:render",{ctx:g}),this._renderBackground(g),g.save(),g.transform(y[0],y[1],y[2],y[3],y[4],y[5]),this._renderObjects(g,v),g.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(g),b&&(b.canvas=this,b.shouldCache(),b._transformDone=!0,b.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(g)),this._renderOverlay(g),this.controlsAboveOverlay&&this.interactive&&this.drawControls(g),this.fire("after:render",{ctx:g})},drawClipPathOnCanvas:function(g){var v=this.viewportTransform,y=this.clipPath;g.save(),g.transform(v[0],v[1],v[2],v[3],v[4],v[5]),g.globalCompositeOperation="destination-in",y.transform(g),g.scale(1/y.zoomX,1/y.zoomY),g.drawImage(y._cacheCanvas,-y.cacheTranslationX,-y.cacheTranslationY),g.restore()},_renderObjects:function(g,v){var y,b;for(y=0,b=v.length;y<b;++y)v[y]&&v[y].render(g)},_renderBackgroundOrOverlay:function(g,v){var y=this[v+"Color"],b=this[v+"Image"],w=this.viewportTransform,C=this[v+"Vpt"];if(!(!y&&!b)){if(y){g.save(),g.beginPath(),g.moveTo(0,0),g.lineTo(this.width,0),g.lineTo(this.width,this.height),g.lineTo(0,this.height),g.closePath(),g.fillStyle=y.toLive?y.toLive(g,this):y,C&&g.transform(w[0],w[1],w[2],w[3],w[4],w[5]),g.transform(1,0,0,1,y.offsetX||0,y.offsetY||0);var _=y.gradientTransform||y.patternTransform;_&&g.transform(_[0],_[1],_[2],_[3],_[4],_[5]),g.fill(),g.restore()}b&&(g.save(),C&&g.transform(w[0],w[1],w[2],w[3],w[4],w[5]),b.render(g),g.restore())}},_renderBackground:function(g){this._renderBackgroundOrOverlay(g,"background")},_renderOverlay:function(g){this._renderBackgroundOrOverlay(g,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new t.Point(this.width/2,this.height/2)},centerObjectH:function(g){return this._centerObject(g,new t.Point(this.getCenterPoint().x,g.getCenterPoint().y))},centerObjectV:function(g){return this._centerObject(g,new t.Point(g.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(g){var v=this.getCenterPoint();return this._centerObject(g,v)},viewportCenterObject:function(g){var v=this.getVpCenter();return this._centerObject(g,v)},viewportCenterObjectH:function(g){var v=this.getVpCenter();return this._centerObject(g,new t.Point(v.x,g.getCenterPoint().y)),this},viewportCenterObjectV:function(g){var v=this.getVpCenter();return this._centerObject(g,new t.Point(g.getCenterPoint().x,v.y))},getVpCenter:function(){var g=this.getCenterPoint(),v=f(this.viewportTransform);return l(g,v)},_centerObject:function(g,v){return g.setPositionByOrigin(v,"center","center"),g.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(g){return this.toDatalessObject(g)},toObject:function(g){return this._toObjectMethod("toObject",g)},toDatalessObject:function(g){return this._toObjectMethod("toDatalessObject",g)},_toObjectMethod:function(g,v){var y=this.clipPath,b={version:t.version,objects:this._toObjects(g,v)};return y&&!y.excludeFromExport&&(b.clipPath=this._toObject(this.clipPath,g,v)),a(b,this.__serializeBgOverlay(g,v)),t.util.populateWithProperties(this,b,v),b},_toObjects:function(g,v){return this._objects.filter(function(y){return!y.excludeFromExport}).map(function(y){return this._toObject(y,g,v)},this)},_toObject:function(g,v,y){var b;this.includeDefaultValues||(b=g.includeDefaultValues,g.includeDefaultValues=!1);var w=g[v](y);return this.includeDefaultValues||(g.includeDefaultValues=b),w},__serializeBgOverlay:function(g,v){var y={},b=this.backgroundImage,w=this.overlayImage,C=this.backgroundColor,_=this.overlayColor;return C&&C.toObject?C.excludeFromExport||(y.background=C.toObject(v)):C&&(y.background=C),_&&_.toObject?_.excludeFromExport||(y.overlay=_.toObject(v)):_&&(y.overlay=_),b&&!b.excludeFromExport&&(y.backgroundImage=this._toObject(b,g,v)),w&&!w.excludeFromExport&&(y.overlayImage=this._toObject(w,g,v)),y},svgViewportTransformation:!0,toSVG:function(g,v){g||(g={}),g.reviver=v;var y=[];return this._setSVGPreamble(y,g),this._setSVGHeader(y,g),this.clipPath&&y.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(y,"background"),this._setSVGBgOverlayImage(y,"backgroundImage",v),this._setSVGObjects(y,v),this.clipPath&&y.push(`</g>
`),this._setSVGBgOverlayColor(y,"overlay"),this._setSVGBgOverlayImage(y,"overlayImage",v),y.push("</svg>"),y.join("")},_setSVGPreamble:function(g,v){v.suppressPreamble||g.push('<?xml version="1.0" encoding="',v.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(g,v){var y=v.width||this.width,b=v.height||this.height,w,C='viewBox="0 0 '+this.width+" "+this.height+'" ',_=t.Object.NUM_FRACTION_DIGITS;v.viewBox?C='viewBox="'+v.viewBox.x+" "+v.viewBox.y+" "+v.viewBox.width+" "+v.viewBox.height+'" ':this.svgViewportTransformation&&(w=this.viewportTransform,C='viewBox="'+h(-w[4]/w[0],_)+" "+h(-w[5]/w[3],_)+" "+h(this.width/w[0],_)+" "+h(this.height/w[3],_)+'" '),g.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',y,'" ','height="',b,'" ',C,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",t.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(v),`</defs>
`)},createSVGClipPathMarkup:function(g){var v=this.clipPath;return v?(v.clipPathId="CLIPPATH_"+t.Object.__uid++,'<clipPath id="'+v.clipPathId+`" >
`+this.clipPath.toClipPathSVG(g.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var g=this,v=["background","overlay"].map(function(y){var b=g[y+"Color"];if(b&&b.toLive){var w=g[y+"Vpt"],C=g.viewportTransform,_={width:g.width/(w?C[0]:1),height:g.height/(w?C[3]:1)};return b.toSVG(_,{additionalTransform:w?t.util.matrixToSVG(C):""})}});return v.join("")},createSVGFontFacesMarkup:function(){var g="",v={},y,b,w,C,_,S,T,I,F,$=t.fontPaths,G=[];for(this._objects.forEach(function X(Q){G.push(Q),Q._objects&&Q._objects.forEach(X)}),I=0,F=G.length;I<F;I++)if(y=G[I],b=y.fontFamily,!(y.type.indexOf("text")===-1||v[b]||!$[b])&&(v[b]=!0,!!y.styles)){w=y.styles;for(_ in w){C=w[_];for(T in C)S=C[T],b=S.fontFamily,!v[b]&&$[b]&&(v[b]=!0)}}for(var ne in v)g+=[`		@font-face {
`,"			font-family: '",ne,`';
`,"			src: url('",$[ne],`');
`,`		}
`].join("");return g&&(g=['	<style type="text/css">',`<![CDATA[
`,g,"]]>",`</style>
`].join("")),g},_setSVGObjects:function(g,v){var y,b,w,C=this._objects;for(b=0,w=C.length;b<w;b++)y=C[b],!y.excludeFromExport&&this._setSVGObject(g,y,v)},_setSVGObject:function(g,v,y){g.push(v.toSVG(y))},_setSVGBgOverlayImage:function(g,v,y){this[v]&&!this[v].excludeFromExport&&this[v].toSVG&&g.push(this[v].toSVG(y))},_setSVGBgOverlayColor:function(g,v){var y=this[v+"Color"],b=this.viewportTransform,w=this.width,C=this.height;if(y)if(y.toLive){var _=y.repeat,S=t.util.invertTransform(b),T=this[v+"Vpt"],I=T?t.util.matrixToSVG(S):"";g.push('<rect transform="'+I+" translate(",w/2,",",C/2,')"',' x="',y.offsetX-w/2,'" y="',y.offsetY-C/2,'" ','width="',_==="repeat-y"||_==="no-repeat"?y.source.width:w,'" height="',_==="repeat-x"||_==="no-repeat"?y.source.height:C,'" fill="url(#SVGID_'+y.id+')"',`></rect>
`)}else g.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',y,'"',`></rect>
`)},sendToBack:function(g){if(!g)return this;var v=this._activeObject,y,b,w;if(g===v&&g.type==="activeSelection")for(w=v._objects,y=w.length;y--;)b=w[y],u(this._objects,b),this._objects.unshift(b);else u(this._objects,g),this._objects.unshift(g);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(g){if(!g)return this;var v=this._activeObject,y,b,w;if(g===v&&g.type==="activeSelection")for(w=v._objects,y=0;y<w.length;y++)b=w[y],u(this._objects,b),this._objects.push(b);else u(this._objects,g),this._objects.push(g);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(g,v){if(!g)return this;var y=this._activeObject,b,w,C,_,S,T=0;if(g===y&&g.type==="activeSelection")for(S=y._objects,b=0;b<S.length;b++)w=S[b],C=this._objects.indexOf(w),C>0+T&&(_=C-1,u(this._objects,w),this._objects.splice(_,0,w)),T++;else C=this._objects.indexOf(g),C!==0&&(_=this._findNewLowerIndex(g,C,v),u(this._objects,g),this._objects.splice(_,0,g));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(g,v,y){var b,w;if(y)for(b=v,w=v-1;w>=0;--w){var C=g.intersectsWithObject(this._objects[w])||g.isContainedWithinObject(this._objects[w])||this._objects[w].isContainedWithinObject(g);if(C){b=w;break}}else b=v-1;return b},bringForward:function(g,v){if(!g)return this;var y=this._activeObject,b,w,C,_,S,T=0;if(g===y&&g.type==="activeSelection")for(S=y._objects,b=S.length;b--;)w=S[b],C=this._objects.indexOf(w),C<this._objects.length-1-T&&(_=C+1,u(this._objects,w),this._objects.splice(_,0,w)),T++;else C=this._objects.indexOf(g),C!==this._objects.length-1&&(_=this._findNewUpperIndex(g,C,v),u(this._objects,g),this._objects.splice(_,0,g));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(g,v,y){var b,w,C;if(y)for(b=v,w=v+1,C=this._objects.length;w<C;++w){var _=g.intersectsWithObject(this._objects[w])||g.isContainedWithinObject(this._objects[w])||this._objects[w].isContainedWithinObject(g);if(_){b=w;break}}else b=v+1;return b},moveTo:function(g,v){return u(this._objects,g),this._objects.splice(v,0,g),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(t.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(g){g.dispose&&g.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),t.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),t.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),a(t.StaticCanvas.prototype,t.Observable),a(t.StaticCanvas.prototype,t.Collection),a(t.StaticCanvas.prototype,t.DataURLExporter),a(t.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(g){var v=p();if(!v||!v.getContext)return null;var y=v.getContext("2d");if(!y)return null;switch(g){case"setLineDash":return typeof y.setLineDash<"u";default:return null}}}),t.StaticCanvas.prototype.toJSON=t.StaticCanvas.prototype.toObject,t.isLikelyNode&&(t.StaticCanvas.prototype.createPNGStream=function(){var g=c(this.lowerCanvasEl);return g&&g.createPNGStream()},t.StaticCanvas.prototype.createJPEGStream=function(g){var v=c(this.lowerCanvasEl);return v&&v.createJPEGStream(g)})}(),t.BaseBrush=t.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(a){a.strokeStyle=this.color,a.lineWidth=this.width,a.lineCap=this.strokeLineCap,a.miterLimit=this.strokeMiterLimit,a.lineJoin=this.strokeLineJoin,a.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(a){var s=this.canvas.viewportTransform;a.save(),a.transform(s[0],s[1],s[2],s[3],s[4],s[5])},_setShadow:function(){if(this.shadow){var a=this.canvas,s=this.shadow,u=a.contextTop,h=a.getZoom();a&&a._isRetinaScaling()&&(h*=t.devicePixelRatio),u.shadowColor=s.color,u.shadowBlur=s.blur*h,u.shadowOffsetX=s.offsetX*h,u.shadowOffsetY=s.offsetY*h}},needsFullRender:function(){var a=new t.Color(this.color);return a.getAlpha()<1||!!this.shadow},_resetShadow:function(){var a=this.canvas.contextTop;a.shadowColor="",a.shadowBlur=a.shadowOffsetX=a.shadowOffsetY=0},_isOutSideCanvas:function(a){return a.x<0||a.x>this.canvas.getWidth()||a.y<0||a.y>this.canvas.getHeight()}}),function(){t.PencilBrush=t.util.createClass(t.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(a){this.canvas=a,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(a,s,u){var h=s.midPointFrom(u);return a.quadraticCurveTo(s.x,s.y,h.x,h.y),h},onMouseDown:function(a,s){this.canvas._isMainEvent(s.e)&&(this.drawStraightLine=s.e[this.straightLineKey],this._prepareForDrawing(a),this._captureDrawingPath(a),this._render())},onMouseMove:function(a,s){if(this.canvas._isMainEvent(s.e)&&(this.drawStraightLine=s.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(a))&&this._captureDrawingPath(a)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var u=this._points,h=u.length,l=this.canvas.contextTop;this._saveAndTransform(l),this.oldEnd&&(l.beginPath(),l.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(l,u[h-2],u[h-1],!0),l.stroke(),l.restore()}},onMouseUp:function(a){return this.canvas._isMainEvent(a.e)?(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(a){var s=new t.Point(a.x,a.y);this._reset(),this._addPoint(s),this.canvas.contextTop.moveTo(s.x,s.y)},_addPoint:function(a){return this._points.length>1&&a.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(a),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(a){var s=new t.Point(a.x,a.y);return this._addPoint(s)},_render:function(a){var s,u,h=this._points[0],l=this._points[1];if(a=a||this.canvas.contextTop,this._saveAndTransform(a),a.beginPath(),this._points.length===2&&h.x===l.x&&h.y===l.y){var f=this.width/1e3;h=new t.Point(h.x,h.y),l=new t.Point(l.x,l.y),h.x-=f,l.x+=f}for(a.moveTo(h.x,h.y),s=1,u=this._points.length;s<u;s++)this._drawSegment(a,h,l),h=this._points[s],l=this._points[s+1];a.lineTo(h.x,h.y),a.stroke(),a.restore()},convertPointsToSVGPath:function(a){var s=this.width/1e3;return t.util.getSmoothPathFromPoints(a,s)},_isEmptySVGPath:function(a){var s=t.util.joinPath(a);return s==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(a){var s=new t.Path(a,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,s.shadow=new t.Shadow(this.shadow)),s},decimatePoints:function(a,s){if(a.length<=2)return a;var u=this.canvas.getZoom(),h=Math.pow(s/u,2),l,f=a.length-1,c=a[0],p=[c],m;for(l=1;l<f-1;l++)m=Math.pow(c.x-a[l].x,2)+Math.pow(c.y-a[l].y,2),m>=h&&(c=a[l],p.push(c));return p.push(a[f]),p},_finalizeAndAddPath:function(){var a=this.canvas.contextTop;a.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var s=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(s)){this.canvas.requestRenderAll();return}var u=this.createPath(s);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:u}),this.canvas.add(u),this.canvas.requestRenderAll(),u.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:u})}})}(),t.CircleBrush=t.util.createClass(t.BaseBrush,{width:10,initialize:function(a){this.canvas=a,this.points=[]},drawDot:function(a){var s=this.addPoint(a),u=this.canvas.contextTop;this._saveAndTransform(u),this.dot(u,s),u.restore()},dot:function(a,s){a.fillStyle=s.fill,a.beginPath(),a.arc(s.x,s.y,s.radius,0,Math.PI*2,!1),a.closePath(),a.fill()},onMouseDown:function(a){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(a)},_render:function(){var a=this.canvas.contextTop,s,u,h=this.points;for(this._saveAndTransform(a),s=0,u=h.length;s<u;s++)this.dot(a,h[s]);a.restore()},onMouseMove:function(a){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(a)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(a),this._render()):this.drawDot(a))},onMouseUp:function(){var a=this.canvas.renderOnAddRemove,s,u;this.canvas.renderOnAddRemove=!1;var h=[];for(s=0,u=this.points.length;s<u;s++){var l=this.points[s],f=new t.Circle({radius:l.radius,left:l.x,top:l.y,originX:"center",originY:"center",fill:l.fill});this.shadow&&(f.shadow=new t.Shadow(this.shadow)),h.push(f)}var c=new t.Group(h);c.canvas=this.canvas,this.canvas.fire("before:path:created",{path:c}),this.canvas.add(c),this.canvas.fire("path:created",{path:c}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=a,this.canvas.requestRenderAll()},addPoint:function(a){var s=new t.Point(a.x,a.y),u=t.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,h=new t.Color(this.color).setAlpha(t.util.getRandomInt(0,100)/100).toRgba();return s.radius=u,s.fill=h,this.points.push(s),s}}),t.SprayBrush=t.util.createClass(t.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(a){this.canvas=a,this.sprayChunks=[]},onMouseDown:function(a){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(a),this.render(this.sprayChunkPoints)},onMouseMove:function(a){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(a)||(this.addSprayChunk(a),this.render(this.sprayChunkPoints))},onMouseUp:function(){var a=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var s=[],u=0,h=this.sprayChunks.length;u<h;u++)for(var l=this.sprayChunks[u],f=0,c=l.length;f<c;f++){var p=new t.Rect({width:l[f].width,height:l[f].width,left:l[f].x+1,top:l[f].y+1,originX:"center",originY:"center",fill:this.color});s.push(p)}this.optimizeOverlapping&&(s=this._getOptimizedRects(s));var m=new t.Group(s);this.shadow&&m.set("shadow",new t.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:m}),this.canvas.add(m),this.canvas.fire("path:created",{path:m}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=a,this.canvas.requestRenderAll()},_getOptimizedRects:function(a){var s={},u,h,l;for(h=0,l=a.length;h<l;h++)u=a[h].left+""+a[h].top,s[u]||(s[u]=a[h]);var f=[];for(u in s)f.push(s[u]);return f},render:function(a){var s=this.canvas.contextTop,u,h;for(s.fillStyle=this.color,this._saveAndTransform(s),u=0,h=a.length;u<h;u++){var l=a[u];typeof l.opacity<"u"&&(s.globalAlpha=l.opacity),s.fillRect(l.x,l.y,l.width,l.width)}s.restore()},_render:function(){var a=this.canvas.contextTop,s,u;for(a.fillStyle=this.color,this._saveAndTransform(a),s=0,u=this.sprayChunks.length;s<u;s++)this.render(this.sprayChunks[s]);a.restore()},addSprayChunk:function(a){this.sprayChunkPoints=[];var s,u,h,l=this.width/2,f;for(f=0;f<this.density;f++){s=t.util.getRandomInt(a.x-l,a.x+l),u=t.util.getRandomInt(a.y-l,a.y+l),this.dotWidthVariance?h=t.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):h=this.dotWidth;var c=new t.Point(s,u);c.width=h,this.randomOpacity&&(c.opacity=t.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(c)}this.sprayChunks.push(this.sprayChunkPoints)}}),t.PatternBrush=t.util.createClass(t.PencilBrush,{getPatternSrc:function(){var a=20,s=5,u=t.util.createCanvasElement(),h=u.getContext("2d");return u.width=u.height=a+s,h.fillStyle=this.color,h.beginPath(),h.arc(a/2,a/2,a/2,0,Math.PI*2,!1),h.closePath(),h.fill(),u},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(a){return a.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(a){this.callSuper("_setBrushStyles",a),a.strokeStyle=this.getPattern(a)},createPath:function(a){var s=this.callSuper("createPath",a),u=s._getLeftTopCoords().scalarAdd(s.strokeWidth/2);return s.stroke=new t.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-u.x,offsetY:-u.y}),s}}),function(){var a=t.util.getPointer,s=t.util.degreesToRadians,u=t.util.isTouchEvent;t.Canvas=t.util.createClass(t.StaticCanvas,{initialize:function(l,f){f||(f={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(l,f),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=t.PencilBrush&&new t.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var l=this.getActiveObjects(),f,c,p;if(l.length>0&&!this.preserveObjectStacking){c=[],p=[];for(var m=0,g=this._objects.length;m<g;m++)f=this._objects[m],l.indexOf(f)===-1?c.push(f):p.push(f);l.length>1&&(this._activeObject._objects=p),c.push.apply(c,p)}else c=this._objects;return c},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var l=this.contextContainer;return this.renderCanvas(l,this._chooseObjectsToRender()),this},renderTopLayer:function(l){l.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(l),this.contextTopDirty=!0),l.restore()},renderTop:function(){var l=this.contextTop;return this.clearContext(l),this.renderTopLayer(l),this.fire("after:render"),this},_normalizePointer:function(l,f){var c=l.calcTransformMatrix(),p=t.util.invertTransform(c),m=this.restorePointerVpt(f);return t.util.transformPoint(m,p)},isTargetTransparent:function(l,f,c){if(l.shouldCache()&&l._cacheCanvas&&l!==this._activeObject){var p=this._normalizePointer(l,{x:f,y:c}),m=Math.max(l.cacheTranslationX+p.x*l.zoomX,0),g=Math.max(l.cacheTranslationY+p.y*l.zoomY,0),w=t.util.isTransparent(l._cacheContext,Math.round(m),Math.round(g),this.targetFindTolerance);return w}var v=this.contextCache,y=l.selectionBackgroundColor,b=this.viewportTransform;l.selectionBackgroundColor="",this.clearContext(v),v.save(),v.transform(b[0],b[1],b[2],b[3],b[4],b[5]),l.render(v),v.restore(),l.selectionBackgroundColor=y;var w=t.util.isTransparent(v,f,c,this.targetFindTolerance);return w},_isSelectionKeyPressed:function(l){var f=!1;return Array.isArray(this.selectionKey)?f=!!this.selectionKey.find(function(c){return l[c]===!0}):f=l[this.selectionKey],f},_shouldClearSelection:function(l,f){var c=this.getActiveObjects(),p=this._activeObject;return!f||f&&p&&c.length>1&&c.indexOf(f)===-1&&p!==f&&!this._isSelectionKeyPressed(l)||f&&!f.evented||f&&!f.selectable&&p&&p!==f},_shouldCenterTransform:function(l,f,c){if(l){var p;return f==="scale"||f==="scaleX"||f==="scaleY"||f==="resizing"?p=this.centeredScaling||l.centeredScaling:f==="rotate"&&(p=this.centeredRotation||l.centeredRotation),p?!c:c}},_getOriginFromCorner:function(l,f){var c={x:l.originX,y:l.originY};return f==="ml"||f==="tl"||f==="bl"?c.x="right":(f==="mr"||f==="tr"||f==="br")&&(c.x="left"),f==="tl"||f==="mt"||f==="tr"?c.y="bottom":(f==="bl"||f==="mb"||f==="br")&&(c.y="top"),c},_getActionFromCorner:function(l,f,c,p){if(!f||!l)return"drag";var m=p.controls[f];return m.getActionName(c,m,p)},_setupCurrentTransform:function(l,f,c){if(f){var p=this.getPointer(l),m=f.__corner,g=f.controls[m],v=c&&m?g.getActionHandler(l,f,g):t.controlsUtils.dragHandler,y=this._getActionFromCorner(c,m,l,f),b=this._getOriginFromCorner(f,m),w=l[this.centeredKey],C={target:f,action:y,actionHandler:v,corner:m,scaleX:f.scaleX,scaleY:f.scaleY,skewX:f.skewX,skewY:f.skewY,offsetX:p.x-f.left,offsetY:p.y-f.top,originX:b.x,originY:b.y,ex:p.x,ey:p.y,lastX:p.x,lastY:p.y,theta:s(f.angle),width:f.width*f.scaleX,shiftKey:l.shiftKey,altKey:w,original:t.util.saveObjectTransform(f)};this._shouldCenterTransform(f,y,w)&&(C.originX="center",C.originY="center"),C.original.originX=b.x,C.original.originY=b.y,this._currentTransform=C,this._beforeTransform(l)}},setCursor:function(l){this.upperCanvasEl.style.cursor=l},_drawSelection:function(l){var f=this._groupSelector,c=new t.Point(f.ex,f.ey),p=t.util.transformPoint(c,this.viewportTransform),m=new t.Point(f.ex+f.left,f.ey+f.top),g=t.util.transformPoint(m,this.viewportTransform),v=Math.min(p.x,g.x),y=Math.min(p.y,g.y),b=Math.max(p.x,g.x),w=Math.max(p.y,g.y),C=this.selectionLineWidth/2;this.selectionColor&&(l.fillStyle=this.selectionColor,l.fillRect(v,y,b-v,w-y)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(l.lineWidth=this.selectionLineWidth,l.strokeStyle=this.selectionBorderColor,v+=C,y+=C,b-=C,w-=C,t.Object.prototype._setLineDash.call(this,l,this.selectionDashArray),l.strokeRect(v,y,b-v,w-y))},findTarget:function(l,f){if(!this.skipTargetFind){var c=!0,p=this.getPointer(l,c),m=this._activeObject,g=this.getActiveObjects(),v,y,b=u(l),w=g.length>1&&!f||g.length===1;if(this.targets=[],w&&m._findTargetCorner(p,b)||g.length>1&&!f&&m===this._searchPossibleTargets([m],p))return m;if(g.length===1&&m===this._searchPossibleTargets([m],p))if(this.preserveObjectStacking)v=m,y=this.targets,this.targets=[];else return m;var C=this._searchPossibleTargets(this._objects,p);return l[this.altSelectionKey]&&C&&v&&C!==v&&(C=v,this.targets=y),C}},_checkTarget:function(l,f,c){if(f&&f.visible&&f.evented&&f.containsPoint(l))if((this.perPixelTargetFind||f.perPixelTargetFind)&&!f.isEditing){var p=this.isTargetTransparent(f,c.x,c.y);if(!p)return!0}else return!0},_searchPossibleTargets:function(l,f){for(var c,p=l.length,m;p--;){var g=l[p],v=g.group?this._normalizePointer(g.group,f):f;if(this._checkTarget(v,g,f)){c=l[p],c.subTargetCheck&&c instanceof t.Group&&(m=this._searchPossibleTargets(c._objects,f),m&&this.targets.push(m));break}}return c},restorePointerVpt:function(l){return t.util.transformPoint(l,t.util.invertTransform(this.viewportTransform))},getPointer:function(l,f){if(this._absolutePointer&&!f)return this._absolutePointer;if(this._pointer&&f)return this._pointer;var c=a(l),p=this.upperCanvasEl,m=p.getBoundingClientRect(),g=m.width||0,v=m.height||0,y;(!g||!v)&&("top"in m&&"bottom"in m&&(v=Math.abs(m.top-m.bottom)),"right"in m&&"left"in m&&(g=Math.abs(m.right-m.left))),this.calcOffset(),c.x=c.x-this._offset.left,c.y=c.y-this._offset.top,f||(c=this.restorePointerVpt(c));var b=this.getRetinaScaling();return b!==1&&(c.x/=b,c.y/=b),g===0||v===0?y={width:1,height:1}:y={width:p.width/g,height:p.height/v},{x:c.x*y.width,y:c.y*y.height}},_createUpperCanvas:function(){var l=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),f=this.lowerCanvasEl,c=this.upperCanvasEl;c?c.className="":(c=this._createCanvasElement(),this.upperCanvasEl=c),t.util.addClass(c,"upper-canvas "+l),this.wrapperEl.appendChild(c),this._copyCanvasStyle(f,c),this._applyCanvasStyle(c),this.contextTop=c.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=t.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),t.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),t.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(l){var f=this.width||l.width,c=this.height||l.height;t.util.setStyle(l,{position:"absolute",width:f+"px",height:c+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),l.width=f,l.height=c,t.util.makeElementUnselectable(l)},_copyCanvasStyle:function(l,f){f.style.cssText=l.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var l=this._activeObject;return l?l.type==="activeSelection"&&l._objects?l._objects.slice(0):[l]:[]},_onObjectRemoved:function(l){l===this._activeObject&&(this.fire("before:selection:cleared",{target:l}),this._discardActiveObject(),this.fire("selection:cleared",{target:l}),l.fire("deselected")),l===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",l)},_fireSelectionEvents:function(l,f){var c=!1,p=this.getActiveObjects(),m=[],g=[];l.forEach(function(v){p.indexOf(v)===-1&&(c=!0,v.fire("deselected",{e:f,target:v}),g.push(v))}),p.forEach(function(v){l.indexOf(v)===-1&&(c=!0,v.fire("selected",{e:f,target:v}),m.push(v))}),l.length>0&&p.length>0?c&&this.fire("selection:updated",{e:f,selected:m,deselected:g}):p.length>0?this.fire("selection:created",{e:f,selected:m}):l.length>0&&this.fire("selection:cleared",{e:f,deselected:g})},setActiveObject:function(l,f){var c=this.getActiveObjects();return this._setActiveObject(l,f),this._fireSelectionEvents(c,f),this},_setActiveObject:function(l,f){return this._activeObject===l||!this._discardActiveObject(f,l)||l.onSelect({e:f})?!1:(this._activeObject=l,!0)},_discardActiveObject:function(l,f){var c=this._activeObject;if(c){if(c.onDeselect({e:l,object:f}))return!1;this._activeObject=null}return!0},discardActiveObject:function(l){var f=this.getActiveObjects(),c=this.getActiveObject();return f.length&&this.fire("before:selection:cleared",{target:c,e:l}),this._discardActiveObject(l),this._fireSelectionEvents(f,l),this},dispose:function(){var l=this.wrapperEl;return this.removeListeners(),l.removeChild(this.upperCanvasEl),l.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach((function(f){t.util.cleanUpJsdomNode(this[f]),this[f]=void 0}).bind(this)),l.parentNode&&l.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,t.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(l){var f=this._activeObject;f&&f._renderControls(l)},_toObject:function(l,f,c){var p=this._realizeGroupTransformOnObject(l),m=this.callSuper("_toObject",l,f,c);return this._unwindGroupTransformOnObject(l,p),m},_realizeGroupTransformOnObject:function(l){if(l.group&&l.group.type==="activeSelection"&&this._activeObject===l.group){var f=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],c={};return f.forEach(function(p){c[p]=l[p]}),t.util.addTransformToObject(l,this._activeObject.calcOwnMatrix()),c}else return null},_unwindGroupTransformOnObject:function(l,f){f&&l.set(f)},_setSVGObject:function(l,f,c){var p=this._realizeGroupTransformOnObject(f);this.callSuper("_setSVGObject",l,f,c),this._unwindGroupTransformOnObject(f,p)},setViewportTransform:function(l){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),t.StaticCanvas.prototype.setViewportTransform.call(this,l)}});for(var h in t.StaticCanvas)h!=="prototype"&&(t.Canvas[h]=t.StaticCanvas[h])}(),function(){var a=t.util.addListener,s=t.util.removeListener,u=3,h=2,l=1,f={passive:!1};function c(p,m){return p.button&&p.button===m-1}t.util.object.extend(t.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(a,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(p,m){var g=this.upperCanvasEl,v=this._getEventPrefix();p(t.window,"resize",this._onResize),p(g,v+"down",this._onMouseDown),p(g,v+"move",this._onMouseMove,f),p(g,v+"out",this._onMouseOut),p(g,v+"enter",this._onMouseEnter),p(g,"wheel",this._onMouseWheel),p(g,"contextmenu",this._onContextMenu),p(g,"dblclick",this._onDoubleClick),p(g,"dragover",this._onDragOver),p(g,"dragenter",this._onDragEnter),p(g,"dragleave",this._onDragLeave),p(g,"drop",this._onDrop),this.enablePointerEvents||p(g,"touchstart",this._onTouchStart,f),typeof eventjs<"u"&&m in eventjs&&(eventjs[m](g,"gesture",this._onGesture),eventjs[m](g,"drag",this._onDrag),eventjs[m](g,"orientation",this._onOrientationChange),eventjs[m](g,"shake",this._onShake),eventjs[m](g,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(s,"remove");var p=this._getEventPrefix();s(t.document,p+"up",this._onMouseUp),s(t.document,"touchend",this._onTouchEnd,f),s(t.document,p+"move",this._onMouseMove,f),s(t.document,"touchmove",this._onMouseMove,f)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(p,m){this.__onTransformGesture&&this.__onTransformGesture(p,m)},_onDrag:function(p,m){this.__onDrag&&this.__onDrag(p,m)},_onMouseWheel:function(p){this.__onMouseWheel(p)},_onMouseOut:function(p){var m=this._hoveredTarget;this.fire("mouse:out",{target:m,e:p}),this._hoveredTarget=null,m&&m.fire("mouseout",{e:p});var g=this;this._hoveredTargets.forEach(function(v){g.fire("mouse:out",{target:m,e:p}),v&&m.fire("mouseout",{e:p})}),this._hoveredTargets=[]},_onMouseEnter:function(p){!this._currentTransform&&!this.findTarget(p)&&(this.fire("mouse:over",{target:null,e:p}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(p,m){this.__onOrientationChange&&this.__onOrientationChange(p,m)},_onShake:function(p,m){this.__onShake&&this.__onShake(p,m)},_onLongPress:function(p,m){this.__onLongPress&&this.__onLongPress(p,m)},_onDragOver:function(p){p.preventDefault();var m=this._simpleEventHandler("dragover",p);this._fireEnterLeaveEvents(m,p)},_onDrop:function(p){return this._simpleEventHandler("drop:before",p),this._simpleEventHandler("drop",p)},_onContextMenu:function(p){return this.stopContextMenu&&(p.stopPropagation(),p.preventDefault()),!1},_onDoubleClick:function(p){this._cacheTransformEventData(p),this._handleEvent(p,"dblclick"),this._resetTransformEventData(p)},getPointerId:function(p){var m=p.changedTouches;return m?m[0]&&m[0].identifier:this.enablePointerEvents?p.pointerId:-1},_isMainEvent:function(p){return p.isPrimary===!0?!0:p.isPrimary===!1?!1:p.type==="touchend"&&p.touches.length===0?!0:p.changedTouches?p.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(p){p.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(p)),this.__onMouseDown(p),this._resetTransformEventData();var m=this.upperCanvasEl,g=this._getEventPrefix();a(t.document,"touchend",this._onTouchEnd,f),a(t.document,"touchmove",this._onMouseMove,f),s(m,g+"down",this._onMouseDown)},_onMouseDown:function(p){this.__onMouseDown(p),this._resetTransformEventData();var m=this.upperCanvasEl,g=this._getEventPrefix();s(m,g+"move",this._onMouseMove,f),a(t.document,g+"up",this._onMouseUp),a(t.document,g+"move",this._onMouseMove,f)},_onTouchEnd:function(p){if(!(p.touches.length>0)){this.__onMouseUp(p),this._resetTransformEventData(),this.mainTouchId=null;var m=this._getEventPrefix();s(t.document,"touchend",this._onTouchEnd,f),s(t.document,"touchmove",this._onMouseMove,f);var g=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){a(g.upperCanvasEl,m+"down",g._onMouseDown),g._willAddMouseDown=0},400)}},_onMouseUp:function(p){this.__onMouseUp(p),this._resetTransformEventData();var m=this.upperCanvasEl,g=this._getEventPrefix();this._isMainEvent(p)&&(s(t.document,g+"up",this._onMouseUp),s(t.document,g+"move",this._onMouseMove,f),a(m,g+"move",this._onMouseMove,f))},_onMouseMove:function(p){!this.allowTouchScrolling&&p.preventDefault&&p.preventDefault(),this.__onMouseMove(p)},_onResize:function(){this.calcOffset()},_shouldRender:function(p){var m=this._activeObject;return!!m!=!!p||m&&p&&m!==p?!0:(m&&m.isEditing,!1)},__onMouseUp:function(p){var m,g=this._currentTransform,v=this._groupSelector,y=!1,b=!v||v.left===0&&v.top===0;if(this._cacheTransformEventData(p),m=this._target,this._handleEvent(p,"up:before"),c(p,u)){this.fireRightClick&&this._handleEvent(p,"up",u,b);return}if(c(p,h)){this.fireMiddleClick&&this._handleEvent(p,"up",h,b),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(p);return}if(this._isMainEvent(p)){if(g&&(this._finalizeCurrentTransform(p),y=g.actionPerformed),!b){var w=m===this._activeObject;this._maybeGroupObjects(p),y||(y=this._shouldRender(m)||!w&&m===this._activeObject)}var C,_;if(m){if(C=m._findTargetCorner(this.getPointer(p,!0),t.util.isTouchEvent(p)),m.selectable&&m!==this._activeObject&&m.activeOn==="up")this.setActiveObject(m,p),y=!0;else{var S=m.controls[C],T=S&&S.getMouseUpHandler(p,m,S);T&&(_=this.getPointer(p),T(p,g,_.x,_.y))}m.isMoving=!1}if(g&&(g.target!==m||g.corner!==C)){var I=g.target&&g.target.controls[g.corner],F=I&&I.getMouseUpHandler(p,m,S);_=_||this.getPointer(p),F&&F(p,g,_.x,_.y)}this._setCursorFromEvent(p,m),this._handleEvent(p,"up",l,b),this._groupSelector=null,this._currentTransform=null,m&&(m.__corner=0),y?this.requestRenderAll():b||this.renderTop()}},_simpleEventHandler:function(p,m){var g=this.findTarget(m),v=this.targets,y={e:m,target:g,subTargets:v};if(this.fire(p,y),g&&g.fire(p,y),!v)return g;for(var b=0;b<v.length;b++)v[b].fire(p,y);return g},_handleEvent:function(p,m,g,v){var y=this._target,b=this.targets||[],w={e:p,target:y,subTargets:b,button:g||l,isClick:v||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};m==="up"&&(w.currentTarget=this.findTarget(p),w.currentSubTargets=this.targets),this.fire("mouse:"+m,w),y&&y.fire("mouse"+m,w);for(var C=0;C<b.length;C++)b[C].fire("mouse"+m,w)},_finalizeCurrentTransform:function(p){var m=this._currentTransform,g=m.target,v={e:p,target:g,transform:m,action:m.action};g._scaling&&(g._scaling=!1),g.setCoords(),(m.actionPerformed||this.stateful&&g.hasStateChanged())&&this._fire("modified",v)},_onMouseDownInDrawingMode:function(p){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(p).requestRenderAll();var m=this.getPointer(p);this.freeDrawingBrush.onMouseDown(m,{e:p,pointer:m}),this._handleEvent(p,"down")},_onMouseMoveInDrawingMode:function(p){if(this._isCurrentlyDrawing){var m=this.getPointer(p);this.freeDrawingBrush.onMouseMove(m,{e:p,pointer:m})}this.setCursor(this.freeDrawingCursor),this._handleEvent(p,"move")},_onMouseUpInDrawingMode:function(p){var m=this.getPointer(p);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:p,pointer:m}),this._handleEvent(p,"up")},__onMouseDown:function(p){this._cacheTransformEventData(p),this._handleEvent(p,"down:before");var m=this._target;if(c(p,u)){this.fireRightClick&&this._handleEvent(p,"down",u);return}if(c(p,h)){this.fireMiddleClick&&this._handleEvent(p,"down",h);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(p);return}if(this._isMainEvent(p)&&!this._currentTransform){var g=this._pointer;this._previousPointer=g;var v=this._shouldRender(m),y=this._shouldGroup(p,m);if(this._shouldClearSelection(p,m)?this.discardActiveObject(p):y&&(this._handleGrouping(p,m),m=this._activeObject),this.selection&&(!m||!m.selectable&&!m.isEditing&&m!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),m){var b=m===this._activeObject;m.selectable&&m.activeOn==="down"&&this.setActiveObject(m,p);var w=m._findTargetCorner(this.getPointer(p,!0),t.util.isTouchEvent(p));if(m.__corner=w,m===this._activeObject&&(w||!y)){this._setupCurrentTransform(p,m,b);var C=m.controls[w],g=this.getPointer(p),_=C&&C.getMouseDownHandler(p,m,C);_&&_(p,this._currentTransform,g.x,g.y)}}this._handleEvent(p,"down"),(v||y)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(p){this._resetTransformEventData(),this._pointer=this.getPointer(p,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(p)||null},_beforeTransform:function(p){var m=this._currentTransform;this.stateful&&m.target.saveState(),this.fire("before:transform",{e:p,transform:m})},__onMouseMove:function(p){this._handleEvent(p,"move:before"),this._cacheTransformEventData(p);var m,g;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(p);return}if(this._isMainEvent(p)){var v=this._groupSelector;v?(g=this._absolutePointer,v.left=g.x-v.ex,v.top=g.y-v.ey,this.renderTop()):this._currentTransform?this._transformObject(p):(m=this.findTarget(p)||null,this._setCursorFromEvent(p,m),this._fireOverOutEvents(m,p)),this._handleEvent(p,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(p,m){var g=this._hoveredTarget,v=this._hoveredTargets,y=this.targets,b=Math.max(v.length,y.length);this.fireSyntheticInOutEvents(p,m,{oldTarget:g,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var w=0;w<b;w++)this.fireSyntheticInOutEvents(y[w],m,{oldTarget:v[w],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=p,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(p,m){var g=this._draggedoverTarget,v=this._hoveredTargets,y=this.targets,b=Math.max(v.length,y.length);this.fireSyntheticInOutEvents(p,m,{oldTarget:g,evtOut:"dragleave",evtIn:"dragenter"});for(var w=0;w<b;w++)this.fireSyntheticInOutEvents(y[w],m,{oldTarget:v[w],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=p},fireSyntheticInOutEvents:function(p,m,g){var v,y,b=g.oldTarget,w,C,_=b!==p,S=g.canvasEvtIn,T=g.canvasEvtOut;_&&(v={e:m,target:p,previousTarget:b},y={e:m,target:b,nextTarget:p}),C=p&&_,w=b&&_,w&&(T&&this.fire(T,y),b.fire(g.evtOut,y)),C&&(S&&this.fire(S,v),p.fire(g.evtIn,v))},__onMouseWheel:function(p){this._cacheTransformEventData(p),this._handleEvent(p,"wheel"),this._resetTransformEventData()},_transformObject:function(p){var m=this.getPointer(p),g=this._currentTransform;g.reset=!1,g.shiftKey=p.shiftKey,g.altKey=p[this.centeredKey],this._performTransformAction(p,g,m),g.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(p,m,g){var v=g.x,y=g.y,b=m.action,w=!1,C=m.actionHandler;C&&(w=C(p,m,v,y)),b==="drag"&&w&&(m.target.isMoving=!0,this.setCursor(m.target.moveCursor||this.moveCursor)),m.actionPerformed=m.actionPerformed||w},_fire:t.controlsUtils.fireEvent,_setCursorFromEvent:function(p,m){if(!m)return this.setCursor(this.defaultCursor),!1;var g=m.hoverCursor||this.hoverCursor,v=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,y=(!v||!v.contains(m))&&m._findTargetCorner(this.getPointer(p,!0));y?this.setCursor(this.getCornerCursor(y,m,p)):(m.subTargetCheck&&this.targets.concat().reverse().map(function(b){g=b.hoverCursor||g}),this.setCursor(g))},getCornerCursor:function(p,m,g){var v=m.controls[p];return v.cursorStyleHandler(g,v,m)}})}(),function(){var a=Math.min,s=Math.max;t.util.object.extend(t.Canvas.prototype,{_shouldGroup:function(u,h){var l=this._activeObject;return l&&this._isSelectionKeyPressed(u)&&h&&h.selectable&&this.selection&&(l!==h||l.type==="activeSelection")&&!h.onSelect({e:u})},_handleGrouping:function(u,h){var l=this._activeObject;l.__corner||h===l&&(h=this.findTarget(u,!0),!h||!h.selectable)||(l&&l.type==="activeSelection"?this._updateActiveSelection(h,u):this._createActiveSelection(h,u))},_updateActiveSelection:function(u,h){var l=this._activeObject,f=l._objects.slice(0);l.contains(u)?(l.removeWithUpdate(u),this._hoveredTarget=u,this._hoveredTargets=this.targets.concat(),l.size()===1&&this._setActiveObject(l.item(0),h)):(l.addWithUpdate(u),this._hoveredTarget=l,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(f,h)},_createActiveSelection:function(u,h){var l=this.getActiveObjects(),f=this._createGroup(u);this._hoveredTarget=f,this._setActiveObject(f,h),this._fireSelectionEvents(l,h)},_createGroup:function(u){var h=this._objects,l=h.indexOf(this._activeObject)<h.indexOf(u),f=l?[this._activeObject,u]:[u,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new t.ActiveSelection(f,{canvas:this})},_groupSelectedObjects:function(u){var h=this._collectObjects(u),l;h.length===1?this.setActiveObject(h[0],u):h.length>1&&(l=new t.ActiveSelection(h.reverse(),{canvas:this}),this.setActiveObject(l,u))},_collectObjects:function(u){for(var h=[],l,f=this._groupSelector.ex,c=this._groupSelector.ey,p=f+this._groupSelector.left,m=c+this._groupSelector.top,g=new t.Point(a(f,p),a(c,m)),v=new t.Point(s(f,p),s(c,m)),y=!this.selectionFullyContained,b=f===p&&c===m,w=this._objects.length;w--&&(l=this._objects[w],!(!(!l||!l.selectable||!l.visible)&&(y&&l.intersectsWithRect(g,v,!0)||l.isContainedWithinRect(g,v,!0)||y&&l.containsPoint(g,null,!0)||y&&l.containsPoint(v,null,!0))&&(h.push(l),b))););return h.length>1&&(h=h.filter(function(C){return!C.onSelect({e:u})})),h},_maybeGroupObjects:function(u){this.selection&&this._groupSelector&&this._groupSelectedObjects(u),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){t.util.object.extend(t.StaticCanvas.prototype,{toDataURL:function(a){a||(a={});var s=a.format||"png",u=a.quality||1,h=(a.multiplier||1)*(a.enableRetinaScaling?this.getRetinaScaling():1),l=this.toCanvasElement(h,a);return t.util.toDataURL(l,s,u)},toCanvasElement:function(a,s){a=a||1,s=s||{};var u=(s.width||this.width)*a,h=(s.height||this.height)*a,l=this.getZoom(),f=this.width,c=this.height,p=l*a,m=this.viewportTransform,g=(m[4]-(s.left||0))*a,v=(m[5]-(s.top||0))*a,y=this.interactive,b=[p,0,0,p,g,v],w=this.enableRetinaScaling,C=t.util.createCanvasElement(),_=this.contextTop;return C.width=u,C.height=h,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=b,this.width=u,this.height=h,this.calcViewportBoundaries(),this.renderCanvas(C.getContext("2d"),this._objects),this.viewportTransform=m,this.width=f,this.height=c,this.calcViewportBoundaries(),this.interactive=y,this.enableRetinaScaling=w,this.contextTop=_,C}})}(),t.util.object.extend(t.StaticCanvas.prototype,{loadFromJSON:function(a,s,u){if(a){var h=typeof a=="string"?JSON.parse(a):t.util.object.clone(a),l=this,f=h.clipPath,c=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete h.clipPath,this._enlivenObjects(h.objects,function(p){l.clear(),l._setBgOverlay(h,function(){f?l._enlivenObjects([f],function(m){l.clipPath=m[0],l.__setupCanvas.call(l,h,p,c,s)}):l.__setupCanvas.call(l,h,p,c,s)})},u),this}},__setupCanvas:function(a,s,u,h){var l=this;s.forEach(function(f,c){l.insertAt(f,c)}),this.renderOnAddRemove=u,delete a.objects,delete a.backgroundImage,delete a.overlayImage,delete a.background,delete a.overlay,this._setOptions(a),this.renderAll(),h&&h()},_setBgOverlay:function(a,s){var u={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!a.backgroundImage&&!a.overlayImage&&!a.background&&!a.overlay){s&&s();return}var h=function(){u.backgroundImage&&u.overlayImage&&u.backgroundColor&&u.overlayColor&&s&&s()};this.__setBgOverlay("backgroundImage",a.backgroundImage,u,h),this.__setBgOverlay("overlayImage",a.overlayImage,u,h),this.__setBgOverlay("backgroundColor",a.background,u,h),this.__setBgOverlay("overlayColor",a.overlay,u,h)},__setBgOverlay:function(a,s,u,h){var l=this;if(!s){u[a]=!0,h&&h();return}a==="backgroundImage"||a==="overlayImage"?t.util.enlivenObjects([s],function(f){l[a]=f[0],u[a]=!0,h&&h()}):this["set"+t.util.string.capitalize(a,!0)](s,function(){u[a]=!0,h&&h()})},_enlivenObjects:function(a,s,u){if(!a||a.length===0){s&&s([]);return}t.util.enlivenObjects(a,function(h){s&&s(h)},null,u)},_toDataURL:function(a,s){this.clone(function(u){s(u.toDataURL(a))})},_toDataURLWithMultiplier:function(a,s,u){this.clone(function(h){u(h.toDataURLWithMultiplier(a,s))})},clone:function(a,s){var u=JSON.stringify(this.toJSON(s));this.cloneWithoutData(function(h){h.loadFromJSON(u,function(){a&&a(h)})})},cloneWithoutData:function(a){var s=t.util.createCanvasElement();s.width=this.width,s.height=this.height;var u=new t.Canvas(s);this.backgroundImage?(u.setBackgroundImage(this.backgroundImage.src,function(){u.renderAll(),a&&a(u)}),u.backgroundImageOpacity=this.backgroundImageOpacity,u.backgroundImageStretch=this.backgroundImageStretch):a&&a(u)}}),function(a){var s=a.fabric||(a.fabric={}),u=s.util.object.extend,h=s.util.object.clone,l=s.util.toFixed,f=s.util.string.capitalize,c=s.util.degreesToRadians,p=!s.isLikelyNode,m=2;s.Object||(s.Object=s.util.createClass(s.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:p,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(g){g&&this.setOptions(g)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=s.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(g){var v=s.perfLimitSizeTotal,y=g.width,b=g.height,w=s.maxCacheSideLimit,C=s.minCacheSideLimit;if(y<=w&&b<=w&&y*b<=v)return y<C&&(g.width=C),b<C&&(g.height=C),g;var _=y/b,S=s.util.limitDimsByArea(_,v),T=s.util.capValue,I=T(C,S.x,w),F=T(C,S.y,w);return y>I&&(g.zoomX/=y/I,g.width=I,g.capped=!0),b>F&&(g.zoomY/=b/F,g.height=F,g.capped=!0),g},_getCacheCanvasDimensions:function(){var g=this.getTotalObjectScaling(),v=this._getTransformedDimensions(0,0),y=v.x*g.scaleX/this.scaleX,b=v.y*g.scaleY/this.scaleY;return{width:y+m,height:b+m,zoomX:g.scaleX,zoomY:g.scaleY,x:y,y:b}},_updateCacheCanvas:function(){var g=this.canvas;if(this.noScaleCache&&g&&g._currentTransform){var v=g._currentTransform.target,y=g._currentTransform.action;if(this===v&&y.slice&&y.slice(0,5)==="scale")return!1}var b=this._cacheCanvas,w=this._limitCacheSize(this._getCacheCanvasDimensions()),C=s.minCacheSideLimit,_=w.width,S=w.height,T,I,F=w.zoomX,$=w.zoomY,G=_!==this.cacheWidth||S!==this.cacheHeight,ne=this.zoomX!==F||this.zoomY!==$,X=G||ne,Q=0,Z=0,ie=!1;if(G){var V=this._cacheCanvas.width,k=this._cacheCanvas.height,P=_>V||S>k,A=(_<V*.9||S<k*.9)&&V>C&&k>C;ie=P||A,P&&!w.capped&&(_>C||S>C)&&(Q=_*.1,Z=S*.1)}return this instanceof s.Text&&this.path&&(X=!0,ie=!0,Q+=this.getHeightOfLine(0)*this.zoomX,Z+=this.getHeightOfLine(0)*this.zoomY),X?(ie?(b.width=Math.ceil(_+Q),b.height=Math.ceil(S+Z)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,b.width,b.height)),T=w.x/2,I=w.y/2,this.cacheTranslationX=Math.round(b.width/2-T)+T,this.cacheTranslationY=Math.round(b.height/2-I)+I,this.cacheWidth=_,this.cacheHeight=S,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(F,$),this.zoomX=F,this.zoomY=$,!0):!1},setOptions:function(g){this._setOptions(g),this._initGradient(g.fill,"fill"),this._initGradient(g.stroke,"stroke"),this._initPattern(g.fill,"fill"),this._initPattern(g.stroke,"stroke")},transform:function(g){var v=this.group&&!this.group._transformDone||this.group&&this.canvas&&g===this.canvas.contextTop,y=this.calcTransformMatrix(!v);g.transform(y[0],y[1],y[2],y[3],y[4],y[5])},toObject:function(g){var v=s.Object.NUM_FRACTION_DIGITS,y={type:this.type,version:s.version,originX:this.originX,originY:this.originY,left:l(this.left,v),top:l(this.top,v),width:l(this.width,v),height:l(this.height,v),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:l(this.strokeWidth,v),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:l(this.strokeMiterLimit,v),scaleX:l(this.scaleX,v),scaleY:l(this.scaleY,v),angle:l(this.angle,v),flipX:this.flipX,flipY:this.flipY,opacity:l(this.opacity,v),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:l(this.skewX,v),skewY:l(this.skewY,v)};return this.clipPath&&!this.clipPath.excludeFromExport&&(y.clipPath=this.clipPath.toObject(g),y.clipPath.inverted=this.clipPath.inverted,y.clipPath.absolutePositioned=this.clipPath.absolutePositioned),s.util.populateWithProperties(this,y,g),this.includeDefaultValues||(y=this._removeDefaultValues(y)),y},toDatalessObject:function(g){return this.toObject(g)},_removeDefaultValues:function(g){var v=s.util.getKlass(g.type).prototype,y=v.stateProperties;return y.forEach(function(b){b==="left"||b==="top"||(g[b]===v[b]&&delete g[b],Array.isArray(g[b])&&Array.isArray(v[b])&&g[b].length===0&&v[b].length===0&&delete g[b])}),g},toString:function(){return"#<fabric."+f(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var g=s.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(g.scaleX),scaleY:Math.abs(g.scaleY)}},getTotalObjectScaling:function(){var g=this.getObjectScaling(),v=g.scaleX,y=g.scaleY;if(this.canvas){var b=this.canvas.getZoom(),w=this.canvas.getRetinaScaling();v*=b*w,y*=b*w}return{scaleX:v,scaleY:y}},getObjectOpacity:function(){var g=this.opacity;return this.group&&(g*=this.group.getObjectOpacity()),g},_set:function(g,v){var y=g==="scaleX"||g==="scaleY",b=this[g]!==v,w=!1;return y&&(v=this._constrainScale(v)),g==="scaleX"&&v<0?(this.flipX=!this.flipX,v*=-1):g==="scaleY"&&v<0?(this.flipY=!this.flipY,v*=-1):g==="shadow"&&v&&!(v instanceof s.Shadow)?v=new s.Shadow(v):g==="dirty"&&this.group&&this.group.set("dirty",v),this[g]=v,b&&(w=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(g)>-1?(this.dirty=!0,w&&this.group.set("dirty",!0)):w&&this.stateProperties.indexOf(g)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:s.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(g){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(g.save(),this._setupCompositeOperation(g),this.drawSelectionBackground(g),this.transform(g),this._setOpacity(g),this._setShadow(g,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(g)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(g),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),g.restore())},renderCache:function(g){g=g||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,g.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(g,v){if(g.save(),v.inverted?g.globalCompositeOperation="destination-out":g.globalCompositeOperation="destination-in",v.absolutePositioned){var y=s.util.invertTransform(this.calcTransformMatrix());g.transform(y[0],y[1],y[2],y[3],y[4],y[5])}v.transform(g),g.scale(1/v.zoomX,1/v.zoomY),g.drawImage(v._cacheCanvas,-v.cacheTranslationX,-v.cacheTranslationY),g.restore()},drawObject:function(g,v){var y=this.fill,b=this.stroke;v?(this.fill="black",this.stroke="",this._setClippingProperties(g)):this._renderBackground(g),this._render(g),this._drawClipPath(g,this.clipPath),this.fill=y,this.stroke=b},_drawClipPath:function(g,v){v&&(v.canvas=this.canvas,v.shouldCache(),v._transformDone=!0,v.renderCache({forClipping:!0}),this.drawClipPathOnCache(g,v))},drawCacheOnCanvas:function(g){g.scale(1/this.zoomX,1/this.zoomY),g.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(g){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!g&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!g){var v=this.cacheWidth/this.zoomX,y=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-v/2,-y/2,v,y)}return!0}return!1},_renderBackground:function(g){if(this.backgroundColor){var v=this._getNonTransformedDimensions();g.fillStyle=this.backgroundColor,g.fillRect(-v.x/2,-v.y/2,v.x,v.y),this._removeShadow(g)}},_setOpacity:function(g){this.group&&!this.group._transformDone?g.globalAlpha=this.getObjectOpacity():g.globalAlpha*=this.opacity},_setStrokeStyles:function(g,v){var y=v.stroke;y&&(g.lineWidth=v.strokeWidth,g.lineCap=v.strokeLineCap,g.lineDashOffset=v.strokeDashOffset,g.lineJoin=v.strokeLineJoin,g.miterLimit=v.strokeMiterLimit,y.toLive?y.gradientUnits==="percentage"||y.gradientTransform||y.patternTransform?this._applyPatternForTransformedGradient(g,y):(g.strokeStyle=y.toLive(g,this),this._applyPatternGradientTransform(g,y)):g.strokeStyle=v.stroke)},_setFillStyles:function(g,v){var y=v.fill;y&&(y.toLive?(g.fillStyle=y.toLive(g,this),this._applyPatternGradientTransform(g,v.fill)):g.fillStyle=y)},_setClippingProperties:function(g){g.globalAlpha=1,g.strokeStyle="transparent",g.fillStyle="#000000"},_setLineDash:function(g,v){!v||v.length===0||(1&v.length&&v.push.apply(v,v),g.setLineDash(v))},_renderControls:function(g,v){var y=this.getViewportTransform(),b=this.calcTransformMatrix(),w,C,_;v=v||{},C=typeof v.hasBorders<"u"?v.hasBorders:this.hasBorders,_=typeof v.hasControls<"u"?v.hasControls:this.hasControls,b=s.util.multiplyTransformMatrices(y,b),w=s.util.qrDecompose(b),g.save(),g.translate(w.translateX,w.translateY),g.lineWidth=1*this.borderScaleFactor,this.group||(g.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(w.angle-=180),g.rotate(c(this.group?w.angle:this.angle)),v.forActiveSelection||this.group?C&&this.drawBordersInGroup(g,w,v):C&&this.drawBorders(g,v),_&&this.drawControls(g,v),g.restore()},_setShadow:function(g){if(this.shadow){var v=this.shadow,y=this.canvas,b,w=y&&y.viewportTransform[0]||1,C=y&&y.viewportTransform[3]||1;v.nonScaling?b={scaleX:1,scaleY:1}:b=this.getObjectScaling(),y&&y._isRetinaScaling()&&(w*=s.devicePixelRatio,C*=s.devicePixelRatio),g.shadowColor=v.color,g.shadowBlur=v.blur*s.browserShadowBlurConstant*(w+C)*(b.scaleX+b.scaleY)/4,g.shadowOffsetX=v.offsetX*w*b.scaleX,g.shadowOffsetY=v.offsetY*C*b.scaleY}},_removeShadow:function(g){this.shadow&&(g.shadowColor="",g.shadowBlur=g.shadowOffsetX=g.shadowOffsetY=0)},_applyPatternGradientTransform:function(g,v){if(!v||!v.toLive)return{offsetX:0,offsetY:0};var y=v.gradientTransform||v.patternTransform,b=-this.width/2+v.offsetX||0,w=-this.height/2+v.offsetY||0;return v.gradientUnits==="percentage"?g.transform(this.width,0,0,this.height,b,w):g.transform(1,0,0,1,b,w),y&&g.transform(y[0],y[1],y[2],y[3],y[4],y[5]),{offsetX:b,offsetY:w}},_renderPaintInOrder:function(g){this.paintFirst==="stroke"?(this._renderStroke(g),this._renderFill(g)):(this._renderFill(g),this._renderStroke(g))},_render:function(){},_renderFill:function(g){this.fill&&(g.save(),this._setFillStyles(g,this),this.fillRule==="evenodd"?g.fill("evenodd"):g.fill(),g.restore())},_renderStroke:function(g){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(g),g.save(),this.strokeUniform&&this.group){var v=this.getObjectScaling();g.scale(1/v.scaleX,1/v.scaleY)}else this.strokeUniform&&g.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(g,this.strokeDashArray),this._setStrokeStyles(g,this),g.stroke(),g.restore()}},_applyPatternForTransformedGradient:function(g,v){var y=this._limitCacheSize(this._getCacheCanvasDimensions()),b=s.util.createCanvasElement(),w,C=this.canvas.getRetinaScaling(),_=y.x/this.scaleX/C,S=y.y/this.scaleY/C;b.width=_,b.height=S,w=b.getContext("2d"),w.beginPath(),w.moveTo(0,0),w.lineTo(_,0),w.lineTo(_,S),w.lineTo(0,S),w.closePath(),w.translate(_/2,S/2),w.scale(y.zoomX/this.scaleX/C,y.zoomY/this.scaleY/C),this._applyPatternGradientTransform(w,v),w.fillStyle=v.toLive(g),w.fill(),g.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),g.scale(C*this.scaleX/y.zoomX,C*this.scaleY/y.zoomY),g.strokeStyle=w.createPattern(b,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var g=s.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",g.scaleX),this.set("scaleY",g.scaleY),this.angle=g.angle,this.skewX=g.skewX,this.skewY=0}},_removeTransformMatrix:function(g){var v=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),v=s.util.transformPoint(v,this.transformMatrix)),this.transformMatrix=null,g&&(this.scaleX*=g.scaleX,this.scaleY*=g.scaleY,this.cropX=g.cropX,this.cropY=g.cropY,v.x+=g.offsetLeft,v.y+=g.offsetTop,this.width=g.width,this.height=g.height),this.setPositionByOrigin(v,"center","center")},clone:function(g,v){var y=this.toObject(v);this.constructor.fromObject?this.constructor.fromObject(y,g):s.Object._fromObject("Object",y,g)},cloneAsImage:function(g,v){var y=this.toCanvasElement(v);return g&&g(new s.Image(y)),this},toCanvasElement:function(g){g||(g={});var v=s.util,y=v.saveObjectTransform(this),b=this.group,w=this.shadow,C=Math.abs,_=(g.multiplier||1)*(g.enableRetinaScaling?s.devicePixelRatio:1);delete this.group,g.withoutTransform&&v.resetObjectTransform(this),g.withoutShadow&&(this.shadow=null);var S=s.util.createCanvasElement(),T=this.getBoundingRect(!0,!0),I=this.shadow,F,$={x:0,y:0},G,ne,X;I&&(G=I.blur,I.nonScaling?F={scaleX:1,scaleY:1}:F=this.getObjectScaling(),$.x=2*Math.round(C(I.offsetX)+G)*C(F.scaleX),$.y=2*Math.round(C(I.offsetY)+G)*C(F.scaleY)),ne=T.width+$.x,X=T.height+$.y,S.width=Math.ceil(ne),S.height=Math.ceil(X);var Q=new s.StaticCanvas(S,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});g.format==="jpeg"&&(Q.backgroundColor="#fff"),this.setPositionByOrigin(new s.Point(Q.width/2,Q.height/2),"center","center");var Z=this.canvas;Q.add(this);var ie=Q.toCanvasElement(_||1,g);return this.shadow=w,this.set("canvas",Z),b&&(this.group=b),this.set(y).setCoords(),Q._objects=[],Q.dispose(),Q=null,ie},toDataURL:function(g){return g||(g={}),s.util.toDataURL(this.toCanvasElement(g),g.format||"png",g.quality||1)},isType:function(g){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===g},complexity:function(){return 1},toJSON:function(g){return this.toObject(g)},rotate:function(g){var v=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return v&&this._setOriginToCenter(),this.set("angle",g),v&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(g,v){v=v||this.canvas.getPointer(g);var y=new s.Point(v.x,v.y),b=this._getLeftTopCoords();return this.angle&&(y=s.util.rotatePoint(y,b,c(-this.angle))),{x:y.x-b.x,y:y.y-b.y}},_setupCompositeOperation:function(g){this.globalCompositeOperation&&(g.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){s.runningAnimations&&s.runningAnimations.cancelByTarget(this)}}),s.util.createAccessors&&s.util.createAccessors(s.Object),u(s.Object.prototype,s.Observable),s.Object.NUM_FRACTION_DIGITS=2,s.Object.ENLIVEN_PROPS=["clipPath"],s.Object._fromObject=function(g,v,y,b){var w=s[g];v=h(v,!0),s.util.enlivenPatterns([v.fill,v.stroke],function(C){typeof C[0]<"u"&&(v.fill=C[0]),typeof C[1]<"u"&&(v.stroke=C[1]),s.util.enlivenObjectEnlivables(v,v,function(){var _=b?new w(v[b],v):new w(v);y&&y(_)})})},s.Object.__uid=0)}(e),function(){var a=t.util.degreesToRadians,s={left:-.5,center:0,right:.5},u={top:-.5,center:0,bottom:.5};t.util.object.extend(t.Object.prototype,{translateToGivenOrigin:function(h,l,f,c,p){var m=h.x,g=h.y,v,y,b;return typeof l=="string"?l=s[l]:l-=.5,typeof c=="string"?c=s[c]:c-=.5,v=c-l,typeof f=="string"?f=u[f]:f-=.5,typeof p=="string"?p=u[p]:p-=.5,y=p-f,(v||y)&&(b=this._getTransformedDimensions(),m=h.x+v*b.x,g=h.y+y*b.y),new t.Point(m,g)},translateToCenterPoint:function(h,l,f){var c=this.translateToGivenOrigin(h,l,f,"center","center");return this.angle?t.util.rotatePoint(c,h,a(this.angle)):c},translateToOriginPoint:function(h,l,f){var c=this.translateToGivenOrigin(h,"center","center",l,f);return this.angle?t.util.rotatePoint(c,h,a(this.angle)):c},getCenterPoint:function(){var h=new t.Point(this.left,this.top);return this.translateToCenterPoint(h,this.originX,this.originY)},getPointByOrigin:function(h,l){var f=this.getCenterPoint();return this.translateToOriginPoint(f,h,l)},toLocalPoint:function(h,l,f){var c=this.getCenterPoint(),p,m;return typeof l<"u"&&typeof f<"u"?p=this.translateToGivenOrigin(c,"center","center",l,f):p=new t.Point(this.left,this.top),m=new t.Point(h.x,h.y),this.angle&&(m=t.util.rotatePoint(m,c,-a(this.angle))),m.subtractEquals(p)},setPositionByOrigin:function(h,l,f){var c=this.translateToCenterPoint(h,l,f),p=this.translateToOriginPoint(c,this.originX,this.originY);this.set("left",p.x),this.set("top",p.y)},adjustPosition:function(h){var l=a(this.angle),f=this.getScaledWidth(),c=t.util.cos(l)*f,p=t.util.sin(l)*f,m,g;typeof this.originX=="string"?m=s[this.originX]:m=this.originX-.5,typeof h=="string"?g=s[h]:g=h-.5,this.left+=c*(g-m),this.top+=p*(g-m),this.setCoords(),this.originX=h},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var h=this.getCenterPoint();this.originX="center",this.originY="center",this.left=h.x,this.top=h.y},_resetOrigin:function(){var h=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=h.x,this.top=h.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function a(f){return[new t.Point(f.tl.x,f.tl.y),new t.Point(f.tr.x,f.tr.y),new t.Point(f.br.x,f.br.y),new t.Point(f.bl.x,f.bl.y)]}var s=t.util,u=s.degreesToRadians,h=s.multiplyTransformMatrices,l=s.transformPoint;s.object.extend(t.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(f,c){return c?f?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),f?this.aCoords:this.lineCoords)},getCoords:function(f,c){return a(this._getCoords(f,c))},intersectsWithRect:function(f,c,p,m){var g=this.getCoords(p,m),v=t.Intersection.intersectPolygonRectangle(g,f,c);return v.status==="Intersection"},intersectsWithObject:function(f,c,p){var m=t.Intersection.intersectPolygonPolygon(this.getCoords(c,p),f.getCoords(c,p));return m.status==="Intersection"||f.isContainedWithinObject(this,c,p)||this.isContainedWithinObject(f,c,p)},isContainedWithinObject:function(f,c,p){for(var m=this.getCoords(c,p),g=c?f.aCoords:f.lineCoords,v=0,y=f._getImageLines(g);v<4;v++)if(!f.containsPoint(m[v],y))return!1;return!0},isContainedWithinRect:function(f,c,p,m){var g=this.getBoundingRect(p,m);return g.left>=f.x&&g.left+g.width<=c.x&&g.top>=f.y&&g.top+g.height<=c.y},containsPoint:function(f,v,p,m){var g=this._getCoords(p,m),v=v||this._getImageLines(g),y=this._findCrossPoints(f,v);return y!==0&&y%2===1},isOnScreen:function(f){if(!this.canvas)return!1;var c=this.canvas.vptCoords.tl,p=this.canvas.vptCoords.br,m=this.getCoords(!0,f);return m.some(function(g){return g.x<=p.x&&g.x>=c.x&&g.y<=p.y&&g.y>=c.y})||this.intersectsWithRect(c,p,!0,f)?!0:this._containsCenterOfCanvas(c,p,f)},_containsCenterOfCanvas:function(f,c,p){var m={x:(f.x+c.x)/2,y:(f.y+c.y)/2};return!!this.containsPoint(m,null,!0,p)},isPartiallyOnScreen:function(f){if(!this.canvas)return!1;var c=this.canvas.vptCoords.tl,p=this.canvas.vptCoords.br;if(this.intersectsWithRect(c,p,!0,f))return!0;var m=this.getCoords(!0,f).every(function(g){return(g.x>=p.x||g.x<=c.x)&&(g.y>=p.y||g.y<=c.y)});return m&&this._containsCenterOfCanvas(c,p,f)},_getImageLines:function(f){var c={topline:{o:f.tl,d:f.tr},rightline:{o:f.tr,d:f.br},bottomline:{o:f.br,d:f.bl},leftline:{o:f.bl,d:f.tl}};return c},_findCrossPoints:function(f,c){var p,m,g,v,y,b=0,w;for(var C in c)if(w=c[C],!(w.o.y<f.y&&w.d.y<f.y)&&!(w.o.y>=f.y&&w.d.y>=f.y)&&(w.o.x===w.d.x&&w.o.x>=f.x?y=w.o.x:(p=0,m=(w.d.y-w.o.y)/(w.d.x-w.o.x),g=f.y-p*f.x,v=w.o.y-m*w.o.x,y=-(g-v)/(p-m)),y>=f.x&&(b+=1),b===2))break;return b},getBoundingRect:function(f,c){var p=this.getCoords(f,c);return s.makeBoundingBoxFromPoints(p)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(f){return Math.abs(f)<this.minScaleLimit?f<0?-this.minScaleLimit:this.minScaleLimit:f===0?1e-4:f},scale:function(f){return this._set("scaleX",f),this._set("scaleY",f),this.setCoords()},scaleToWidth:function(f,c){var p=this.getBoundingRect(c).width/this.getScaledWidth();return this.scale(f/this.width/p)},scaleToHeight:function(f,c){var p=this.getBoundingRect(c).height/this.getScaledHeight();return this.scale(f/this.height/p)},calcLineCoords:function(){var f=this.getViewportTransform(),c=this.padding,p=u(this.angle),m=s.cos(p),g=s.sin(p),v=m*c,y=g*c,b=v+y,w=v-y,C=this.calcACoords(),_={tl:l(C.tl,f),tr:l(C.tr,f),bl:l(C.bl,f),br:l(C.br,f)};return c&&(_.tl.x-=w,_.tl.y-=b,_.tr.x+=b,_.tr.y-=w,_.bl.x-=b,_.bl.y+=w,_.br.x+=w,_.br.y+=b),_},calcOCoords:function(){var f=this._calcRotateMatrix(),c=this._calcTranslateMatrix(),p=this.getViewportTransform(),m=h(p,c),g=h(m,f),g=h(g,[1/p[0],0,0,1/p[3],0,0]),v=this._calculateCurrentDimensions(),y={};return this.forEachControl(function(b,w,C){y[w]=b.positionHandler(v,g,C)}),y},calcACoords:function(){var f=this._calcRotateMatrix(),c=this._calcTranslateMatrix(),p=h(c,f),m=this._getTransformedDimensions(),g=m.x/2,v=m.y/2;return{tl:l({x:-g,y:-v},p),tr:l({x:g,y:-v},p),bl:l({x:-g,y:v},p),br:l({x:g,y:v},p)}},setCoords:function(f){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),f?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return s.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var f=this.getCenterPoint();return[1,0,0,1,f.x,f.y]},transformMatrixKey:function(f){var c="_",p="";return!f&&this.group&&(p=this.group.transformMatrixKey(f)+c),p+this.top+c+this.left+c+this.scaleX+c+this.scaleY+c+this.skewX+c+this.skewY+c+this.angle+c+this.originX+c+this.originY+c+this.width+c+this.height+c+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(f){var c=this.calcOwnMatrix();if(f||!this.group)return c;var p=this.transformMatrixKey(f),m=this.matrixCache||(this.matrixCache={});return m.key===p?m.value:(this.group&&(c=h(this.group.calcTransformMatrix(!1),c)),m.key=p,m.value=c,c)},calcOwnMatrix:function(){var f=this.transformMatrixKey(!0),c=this.ownMatrixCache||(this.ownMatrixCache={});if(c.key===f)return c.value;var p=this._calcTranslateMatrix(),m={angle:this.angle,translateX:p[4],translateY:p[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return c.key=f,c.value=s.composeMatrix(m),c.value},_getNonTransformedDimensions:function(){var f=this.strokeWidth,c=this.width+f,p=this.height+f;return{x:c,y:p}},_getTransformedDimensions:function(f,c){typeof f>"u"&&(f=this.skewX),typeof c>"u"&&(c=this.skewY);var p,m,g,v=f===0&&c===0;if(this.strokeUniform?(m=this.width,g=this.height):(p=this._getNonTransformedDimensions(),m=p.x,g=p.y),v)return this._finalizeDimensions(m*this.scaleX,g*this.scaleY);var y=s.sizeAfterTransform(m,g,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:f,skewY:c});return this._finalizeDimensions(y.x,y.y)},_finalizeDimensions:function(f,c){return this.strokeUniform?{x:f+this.strokeWidth,y:c+this.strokeWidth}:{x:f,y:c}},_calculateCurrentDimensions:function(){var f=this.getViewportTransform(),c=this._getTransformedDimensions(),p=l(c,f,!0);return p.scalarAdd(2*this.padding)}})}(),t.util.object.extend(t.Object.prototype,{sendToBack:function(){return this.group?t.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?t.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(a){return this.group?t.StaticCanvas.prototype.sendBackwards.call(this.group,this,a):this.canvas&&this.canvas.sendBackwards(this,a),this},bringForward:function(a){return this.group?t.StaticCanvas.prototype.bringForward.call(this.group,this,a):this.canvas&&this.canvas.bringForward(this,a),this},moveTo:function(a){return this.group&&this.group.type!=="activeSelection"?t.StaticCanvas.prototype.moveTo.call(this.group,this,a):this.canvas&&this.canvas.moveTo(this,a),this}}),function(){function a(u,h){if(h){if(h.toLive)return u+": url(#SVGID_"+h.id+"); ";var l=new t.Color(h),f=u+": "+l.toRgb()+"; ",c=l.getAlpha();return c!==1&&(f+=u+"-opacity: "+c.toString()+"; "),f}else return u+": none; "}var s=t.util.toFixed;t.util.object.extend(t.Object.prototype,{getSvgStyles:function(u){var h=this.fillRule?this.fillRule:"nonzero",l=this.strokeWidth?this.strokeWidth:"0",f=this.strokeDashArray?this.strokeDashArray.join(" "):"none",c=this.strokeDashOffset?this.strokeDashOffset:"0",p=this.strokeLineCap?this.strokeLineCap:"butt",m=this.strokeLineJoin?this.strokeLineJoin:"miter",g=this.strokeMiterLimit?this.strokeMiterLimit:"4",v=typeof this.opacity<"u"?this.opacity:"1",y=this.visible?"":" visibility: hidden;",b=u?"":this.getSvgFilter(),w=a("fill",this.fill),C=a("stroke",this.stroke);return[C,"stroke-width: ",l,"; ","stroke-dasharray: ",f,"; ","stroke-linecap: ",p,"; ","stroke-dashoffset: ",c,"; ","stroke-linejoin: ",m,"; ","stroke-miterlimit: ",g,"; ",w,"fill-rule: ",h,"; ","opacity: ",v,";",b,y].join("")},getSvgSpanStyles:function(u,h){var l="; ",c=u.fontFamily?"font-family: "+(u.fontFamily.indexOf("'")===-1&&u.fontFamily.indexOf('"')===-1?"'"+u.fontFamily+"'":u.fontFamily)+l:"",f=u.strokeWidth?"stroke-width: "+u.strokeWidth+l:"",c=c,p=u.fontSize?"font-size: "+u.fontSize+"px"+l:"",m=u.fontStyle?"font-style: "+u.fontStyle+l:"",g=u.fontWeight?"font-weight: "+u.fontWeight+l:"",v=u.fill?a("fill",u.fill):"",y=u.stroke?a("stroke",u.stroke):"",b=this.getSvgTextDecoration(u),w=u.deltaY?"baseline-shift: "+-u.deltaY+"; ":"";return b&&(b="text-decoration: "+b+l),[y,f,c,p,m,g,b,v,w,h?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(u){return["overline","underline","line-through"].filter(function(h){return u[h.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(u,h){var l=u?this.calcTransformMatrix():this.calcOwnMatrix(),f='transform="'+t.util.matrixToSVG(l);return f+(h||"")+'" '},_setSVGBg:function(u){if(this.backgroundColor){var h=t.Object.NUM_FRACTION_DIGITS;u.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',s(-this.width/2,h),'" y="',s(-this.height/2,h),'" width="',s(this.width,h),'" height="',s(this.height,h),`"></rect>
`)}},toSVG:function(u){return this._createBaseSVGMarkup(this._toSVG(u),{reviver:u})},toClipPathSVG:function(u){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(u),{reviver:u})},_createBaseClipPathSVGMarkup:function(u,h){h=h||{};var l=h.reviver,f=h.additionalTransform||"",c=[this.getSvgTransform(!0,f),this.getSvgCommons()].join(""),p=u.indexOf("COMMON_PARTS");return u[p]=c,l?l(u.join("")):u.join("")},_createBaseSVGMarkup:function(u,h){h=h||{};var l=h.noStyle,f=h.reviver,c=l?"":'style="'+this.getSvgStyles()+'" ',p=h.withShadow?'style="'+this.getSvgFilter()+'" ':"",m=this.clipPath,g=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",v=m&&m.absolutePositioned,y=this.stroke,b=this.fill,w=this.shadow,C,_=[],S,T=u.indexOf("COMMON_PARTS"),I=h.additionalTransform;return m&&(m.clipPathId="CLIPPATH_"+t.Object.__uid++,S='<clipPath id="'+m.clipPathId+`" >
`+m.toClipPathSVG(f)+`</clipPath>
`),v&&_.push("<g ",p,this.getSvgCommons(),` >
`),_.push("<g ",this.getSvgTransform(!1),v?"":p+this.getSvgCommons(),` >
`),C=[c,g,l?"":this.addPaintOrder()," ",I?'transform="'+I+'" ':""].join(""),u[T]=C,b&&b.toLive&&_.push(b.toSVG(this)),y&&y.toLive&&_.push(y.toSVG(this)),w&&_.push(w.toSVG(this)),m&&_.push(S),_.push(u.join("")),_.push(`</g>
`),v&&_.push(`</g>
`),f?f(_.join("")):_.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var a=t.util.object.extend,s="stateProperties";function u(l,f,c){var p={},m=!0;c.forEach(function(g){p[g]=l[g]}),a(l[f],p,m)}function h(l,f,c){if(l===f)return!0;if(Array.isArray(l)){if(!Array.isArray(f)||l.length!==f.length)return!1;for(var p=0,m=l.length;p<m;p++)if(!h(l[p],f[p]))return!1;return!0}else if(l&&typeof l=="object"){var g=Object.keys(l),v;if(!f||typeof f!="object"||!c&&g.length!==Object.keys(f).length)return!1;for(var p=0,m=g.length;p<m;p++)if(v=g[p],!(v==="canvas"||v==="group")&&!h(l[v],f[v]))return!1;return!0}}t.util.object.extend(t.Object.prototype,{hasStateChanged:function(l){l=l||s;var f="_"+l;return Object.keys(this[f]).length<this[l].length?!0:!h(this[f],this,!0)},saveState:function(l){var f=l&&l.propertySet||s,c="_"+f;return this[c]?(u(this,c,this[f]),l&&l.stateProperties&&u(this,c,l.stateProperties),this):this.setupState(l)},setupState:function(l){l=l||{};var f=l.propertySet||s;return l.propertySet=f,this["_"+f]={},this.saveState(l),this}})}(),function(){var a=t.util.degreesToRadians;t.util.object.extend(t.Object.prototype,{_findTargetCorner:function(s,u){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var h=s.x,l=s.y,f,c,p=Object.keys(this.oCoords),m=p.length-1,g;for(this.__corner=0;m>=0;m--)if(g=p[m],!!this.isControlVisible(g)&&(c=this._getImageLines(u?this.oCoords[g].touchCorner:this.oCoords[g].corner),f=this._findCrossPoints({x:h,y:l},c),f!==0&&f%2===1))return this.__corner=g,g;return!1},forEachControl:function(s){for(var u in this.controls)s(this.controls[u],u,this)},_setCornerCoords:function(){var s=this.oCoords;for(var u in s){var h=this.controls[u];s[u].corner=h.calcCornerCoords(this.angle,this.cornerSize,s[u].x,s[u].y,!1),s[u].touchCorner=h.calcCornerCoords(this.angle,this.touchCornerSize,s[u].x,s[u].y,!0)}},drawSelectionBackground:function(s){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;s.save();var u=this.getCenterPoint(),h=this._calculateCurrentDimensions(),l=this.canvas.viewportTransform;return s.translate(u.x,u.y),s.scale(1/l[0],1/l[3]),s.rotate(a(this.angle)),s.fillStyle=this.selectionBackgroundColor,s.fillRect(-h.x/2,-h.y/2,h.x,h.y),s.restore(),this},drawBorders:function(s,u){u=u||{};var h=this._calculateCurrentDimensions(),l=this.borderScaleFactor,f=h.x+l,c=h.y+l,p=typeof u.hasControls<"u"?u.hasControls:this.hasControls,m=!1;return s.save(),s.strokeStyle=u.borderColor||this.borderColor,this._setLineDash(s,u.borderDashArray||this.borderDashArray),s.strokeRect(-f/2,-c/2,f,c),p&&(s.beginPath(),this.forEachControl(function(g,v,y){g.withConnection&&g.getVisibility(y,v)&&(m=!0,s.moveTo(g.x*f,g.y*c),s.lineTo(g.x*f+g.offsetX,g.y*c+g.offsetY))}),m&&s.stroke()),s.restore(),this},drawBordersInGroup:function(s,u,h){h=h||{};var l=t.util.sizeAfterTransform(this.width,this.height,u),f=this.strokeWidth,c=this.strokeUniform,p=this.borderScaleFactor,m=l.x+f*(c?this.canvas.getZoom():u.scaleX)+p,g=l.y+f*(c?this.canvas.getZoom():u.scaleY)+p;return s.save(),this._setLineDash(s,h.borderDashArray||this.borderDashArray),s.strokeStyle=h.borderColor||this.borderColor,s.strokeRect(-m/2,-g/2,m,g),s.restore(),this},drawControls:function(s,u){u=u||{},s.save();var h=this.canvas.getRetinaScaling(),l,f;return s.setTransform(h,0,0,h,0,0),s.strokeStyle=s.fillStyle=u.cornerColor||this.cornerColor,this.transparentCorners||(s.strokeStyle=u.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(s,u.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(l=this.group.calcTransformMatrix()),this.forEachControl(function(c,p,m){f=m.oCoords[p],c.getVisibility(m,p)&&(l&&(f=t.util.transformPoint(f,l)),c.render(s,f.x,f.y,u,m))}),s.restore(),this},isControlVisible:function(s){return this.controls[s]&&this.controls[s].getVisibility(this,s)},setControlVisible:function(s,u){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[s]=u,this},setControlsVisibility:function(s){s||(s={});for(var u in s)this.setControlVisible(u,s[u]);return this},onDeselect:function(){},onSelect:function(){}})}(),t.util.object.extend(t.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(a,s){s=s||{};var u=function(){},h=s.onComplete||u,l=s.onChange||u,f=this;return t.util.animate({target:this,startValue:a.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(c){a.set("left",c),f.requestRenderAll(),l()},onComplete:function(){a.setCoords(),h()}})},fxCenterObjectV:function(a,s){s=s||{};var u=function(){},h=s.onComplete||u,l=s.onChange||u,f=this;return t.util.animate({target:this,startValue:a.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(c){a.set("top",c),f.requestRenderAll(),l()},onComplete:function(){a.setCoords(),h()}})},fxRemove:function(a,s){s=s||{};var u=function(){},h=s.onComplete||u,l=s.onChange||u,f=this;return t.util.animate({target:this,startValue:a.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(c){a.set("opacity",c),f.requestRenderAll(),l()},onComplete:function(){f.remove(a),h()}})}}),t.util.object.extend(t.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var a=[],s,u,h=[];for(s in arguments[0])a.push(s);for(var l=0,f=a.length;l<f;l++)s=a[l],u=l!==f-1,h.push(this._animate(s,arguments[0][s],arguments[1],u));return h}else return this._animate.apply(this,arguments)},_animate:function(a,s,u,h){var l=this,f;s=s.toString(),u?u=t.util.object.clone(u):u={},~a.indexOf(".")&&(f=a.split("."));var c=l.colorProperties.indexOf(a)>-1||f&&l.colorProperties.indexOf(f[1])>-1,p=f?this.get(f[0])[f[1]]:this.get(a);"from"in u||(u.from=p),c||(~s.indexOf("=")?s=p+parseFloat(s.replace("=","")):s=parseFloat(s));var m={target:this,startValue:u.from,endValue:s,byValue:u.by,easing:u.easing,duration:u.duration,abort:u.abort&&function(g,v,y){return u.abort.call(l,g,v,y)},onChange:function(g,v,y){f?l[f[0]][f[1]]=g:l.set(a,g),!h&&u.onChange&&u.onChange(g,v,y)},onComplete:function(g,v,y){h||(l.setCoords(),u.onComplete&&u.onComplete(g,v,y))}};return c?t.util.animateColor(m.startValue,m.endValue,m.duration,m):t.util.animate(m)}}),function(a){var s=a.fabric||(a.fabric={}),u=s.util.object.extend,h=s.util.object.clone,l={x1:1,x2:1,y1:1,y2:1};if(s.Line){s.warn("fabric.Line is already defined");return}s.Line=s.util.createClass(s.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:s.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(c,p){c||(c=[0,0,0,0]),this.callSuper("initialize",p),this.set("x1",c[0]),this.set("y1",c[1]),this.set("x2",c[2]),this.set("y2",c[3]),this._setWidthHeight(p)},_setWidthHeight:function(c){c||(c={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in c?c.left:this._getLeftToOriginX(),this.top="top"in c?c.top:this._getTopToOriginY()},_set:function(c,p){return this.callSuper("_set",c,p),typeof l[c]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:f({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:f({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(c){c.beginPath();var p=this.calcLinePoints();c.moveTo(p.x1,p.y1),c.lineTo(p.x2,p.y2),c.lineWidth=this.strokeWidth;var m=c.strokeStyle;c.strokeStyle=this.stroke||c.fillStyle,this.stroke&&this._renderStroke(c),c.strokeStyle=m},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(c){return u(this.callSuper("toObject",c),this.calcLinePoints())},_getNonTransformedDimensions:function(){var c=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(c.y-=this.strokeWidth),this.height===0&&(c.x-=this.strokeWidth)),c},calcLinePoints:function(){var c=this.x1<=this.x2?-1:1,p=this.y1<=this.y2?-1:1,m=c*this.width*.5,g=p*this.height*.5,v=c*this.width*-.5,y=p*this.height*-.5;return{x1:m,x2:v,y1:g,y2:y}},_toSVG:function(){var c=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',c.x1,'" y1="',c.y1,'" x2="',c.x2,'" y2="',c.y2,`" />
`]}}),s.Line.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),s.Line.fromElement=function(c,p,m){m=m||{};var g=s.parseAttributes(c,s.Line.ATTRIBUTE_NAMES),v=[g.x1||0,g.y1||0,g.x2||0,g.y2||0];p(new s.Line(v,u(g,m)))},s.Line.fromObject=function(c,p){function m(v){delete v.points,p&&p(v)}var g=h(c,!0);g.points=[c.x1,c.y1,c.x2,c.y2],s.Object._fromObject("Line",g,m,"points")};function f(c,p){var m=c.origin,g=c.axis1,v=c.axis2,y=c.dimension,b=p.nearest,w=p.center,C=p.farthest;return function(){switch(this.get(m)){case b:return Math.min(this.get(g),this.get(v));case w:return Math.min(this.get(g),this.get(v))+.5*this.get(y);case C:return Math.max(this.get(g),this.get(v))}}}}(e),function(a){var s=a.fabric||(a.fabric={}),u=s.util.degreesToRadians;if(s.Circle){s.warn("fabric.Circle is already defined.");return}s.Circle=s.util.createClass(s.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:s.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(l,f){return this.callSuper("_set",l,f),l==="radius"&&this.setRadius(f),this},toObject:function(l){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(l))},_toSVG:function(){var l,f=0,c=0,p=(this.endAngle-this.startAngle)%360;if(p===0)l=["<circle ","COMMON_PARTS",'cx="'+f+'" cy="'+c+'" ','r="',this.radius,`" />
`];else{var m=u(this.startAngle),g=u(this.endAngle),v=this.radius,y=s.util.cos(m)*v,b=s.util.sin(m)*v,w=s.util.cos(g)*v,C=s.util.sin(g)*v,_=p>180?"1":"0";l=['<path d="M '+y+" "+b," A "+v+" "+v," 0 ",+_+" 1"," "+w+" "+C,'" ',"COMMON_PARTS",` />
`]}return l},_render:function(l){l.beginPath(),l.arc(0,0,this.radius,u(this.startAngle),u(this.endAngle),!1),this._renderPaintInOrder(l)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(l){return this.radius=l,this.set("width",l*2).set("height",l*2)}}),s.Circle.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),s.Circle.fromElement=function(l,f){var c=s.parseAttributes(l,s.Circle.ATTRIBUTE_NAMES);if(!h(c))throw new Error("value of `r` attribute is required and can not be negative");c.left=(c.left||0)-c.radius,c.top=(c.top||0)-c.radius,f(new s.Circle(c))};function h(l){return"radius"in l&&l.radius>=0}s.Circle.fromObject=function(l,f){s.Object._fromObject("Circle",l,f)}}(e),function(a){var s=a.fabric||(a.fabric={});if(s.Triangle){s.warn("fabric.Triangle is already defined");return}s.Triangle=s.util.createClass(s.Object,{type:"triangle",width:100,height:100,_render:function(u){var h=this.width/2,l=this.height/2;u.beginPath(),u.moveTo(-h,l),u.lineTo(0,-l),u.lineTo(h,l),u.closePath(),this._renderPaintInOrder(u)},_toSVG:function(){var u=this.width/2,h=this.height/2,l=[-u+" "+h,"0 "+-h,u+" "+h].join(",");return["<polygon ","COMMON_PARTS",'points="',l,'" />']}}),s.Triangle.fromObject=function(u,h){return s.Object._fromObject("Triangle",u,h)}}(e),function(a){var s=a.fabric||(a.fabric={}),u=Math.PI*2;if(s.Ellipse){s.warn("fabric.Ellipse is already defined.");return}s.Ellipse=s.util.createClass(s.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:s.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(h){this.callSuper("initialize",h),this.set("rx",h&&h.rx||0),this.set("ry",h&&h.ry||0)},_set:function(h,l){switch(this.callSuper("_set",h,l),h){case"rx":this.rx=l,this.set("width",l*2);break;case"ry":this.ry=l,this.set("height",l*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(h){return this.callSuper("toObject",["rx","ry"].concat(h))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(h){h.beginPath(),h.save(),h.transform(1,0,0,this.ry/this.rx,0,0),h.arc(0,0,this.rx,0,u,!1),h.restore(),this._renderPaintInOrder(h)}}),s.Ellipse.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),s.Ellipse.fromElement=function(h,l){var f=s.parseAttributes(h,s.Ellipse.ATTRIBUTE_NAMES);f.left=(f.left||0)-f.rx,f.top=(f.top||0)-f.ry,l(new s.Ellipse(f))},s.Ellipse.fromObject=function(h,l){s.Object._fromObject("Ellipse",h,l)}}(e),function(a){var s=a.fabric||(a.fabric={}),u=s.util.object.extend;if(s.Rect){s.warn("fabric.Rect is already defined");return}s.Rect=s.util.createClass(s.Object,{stateProperties:s.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:s.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(h){this.callSuper("initialize",h),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(h){var l=this.rx?Math.min(this.rx,this.width/2):0,f=this.ry?Math.min(this.ry,this.height/2):0,c=this.width,p=this.height,m=-this.width/2,g=-this.height/2,v=l!==0||f!==0,y=1-.5522847498;h.beginPath(),h.moveTo(m+l,g),h.lineTo(m+c-l,g),v&&h.bezierCurveTo(m+c-y*l,g,m+c,g+y*f,m+c,g+f),h.lineTo(m+c,g+p-f),v&&h.bezierCurveTo(m+c,g+p-y*f,m+c-y*l,g+p,m+c-l,g+p),h.lineTo(m+l,g+p),v&&h.bezierCurveTo(m+y*l,g+p,m,g+p-y*f,m,g+p-f),h.lineTo(m,g+f),v&&h.bezierCurveTo(m,g+y*f,m+y*l,g,m+l,g),h.closePath(),this._renderPaintInOrder(h)},toObject:function(h){return this.callSuper("toObject",["rx","ry"].concat(h))},_toSVG:function(){var h=-this.width/2,l=-this.height/2;return["<rect ","COMMON_PARTS",'x="',h,'" y="',l,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),s.Rect.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),s.Rect.fromElement=function(h,l,f){if(!h)return l(null);f=f||{};var c=s.parseAttributes(h,s.Rect.ATTRIBUTE_NAMES);c.left=c.left||0,c.top=c.top||0,c.height=c.height||0,c.width=c.width||0;var p=new s.Rect(u(f?s.util.object.clone(f):{},c));p.visible=p.visible&&p.width>0&&p.height>0,l(p)},s.Rect.fromObject=function(h,l){return s.Object._fromObject("Rect",h,l)}}(e),function(a){var s=a.fabric||(a.fabric={}),u=s.util.object.extend,h=s.util.array.min,l=s.util.array.max,f=s.util.toFixed,c=s.util.projectStrokeOnPoints;if(s.Polyline){s.warn("fabric.Polyline is already defined");return}s.Polyline=s.util.createClass(s.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:s.Object.prototype.cacheProperties.concat("points"),initialize:function(p,m){m=m||{},this.points=p||[],this.callSuper("initialize",m),this._setPositionDimensions(m)},_projectStrokeOnPoints:function(){return c(this.points,this,!0)},_setPositionDimensions:function(p){var m=this._calcDimensions(p),g,v=this.exactBoundingBox?this.strokeWidth:0;this.width=m.width-v,this.height=m.height-v,p.fromSVG||(g=this.translateToGivenOrigin({x:m.left-this.strokeWidth/2+v/2,y:m.top-this.strokeWidth/2+v/2},"left","top",this.originX,this.originY)),typeof p.left>"u"&&(this.left=p.fromSVG?m.left:g.x),typeof p.top>"u"&&(this.top=p.fromSVG?m.top:g.y),this.pathOffset={x:m.left+this.width/2+v/2,y:m.top+this.height/2+v/2}},_calcDimensions:function(){var p=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,m=h(p,"x")||0,g=h(p,"y")||0,v=l(p,"x")||0,y=l(p,"y")||0,b=v-m,w=y-g;return{left:m,top:g,width:b,height:w}},toObject:function(p){return u(this.callSuper("toObject",p),{points:this.points.concat()})},_toSVG:function(){for(var p=[],m=this.pathOffset.x,g=this.pathOffset.y,v=s.Object.NUM_FRACTION_DIGITS,y=0,b=this.points.length;y<b;y++)p.push(f(this.points[y].x-m,v),",",f(this.points[y].y-g,v)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',p.join(""),`" />
`]},commonRender:function(p){var m,g=this.points.length,v=this.pathOffset.x,y=this.pathOffset.y;if(!g||isNaN(this.points[g-1].y))return!1;p.beginPath(),p.moveTo(this.points[0].x-v,this.points[0].y-y);for(var b=0;b<g;b++)m=this.points[b],p.lineTo(m.x-v,m.y-y);return!0},_render:function(p){this.commonRender(p)&&this._renderPaintInOrder(p)},complexity:function(){return this.get("points").length}}),s.Polyline.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat(),s.Polyline.fromElementGenerator=function(p){return function(m,g,v){if(!m)return g(null);v||(v={});var y=s.parsePointsAttribute(m.getAttribute("points")),b=s.parseAttributes(m,s[p].ATTRIBUTE_NAMES);b.fromSVG=!0,g(new s[p](y,u(b,v)))}},s.Polyline.fromElement=s.Polyline.fromElementGenerator("Polyline"),s.Polyline.fromObject=function(p,m){return s.Object._fromObject("Polyline",p,m,"points")}}(e),function(a){var s=a.fabric||(a.fabric={}),u=s.util.projectStrokeOnPoints;if(s.Polygon){s.warn("fabric.Polygon is already defined");return}s.Polygon=s.util.createClass(s.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return u(this.points,this)},_render:function(h){this.commonRender(h)&&(h.closePath(),this._renderPaintInOrder(h))}}),s.Polygon.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat(),s.Polygon.fromElement=s.Polyline.fromElementGenerator("Polygon"),s.Polygon.fromObject=function(h,l){s.Object._fromObject("Polygon",h,l,"points")}}(e),function(a){var s=a.fabric||(a.fabric={}),u=s.util.array.min,h=s.util.array.max,l=s.util.object.extend,f=s.util.object.clone,c=s.util.toFixed;if(s.Path){s.warn("fabric.Path is already defined");return}s.Path=s.util.createClass(s.Object,{type:"path",path:null,cacheProperties:s.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:s.Object.prototype.stateProperties.concat("path"),initialize:function(p,m){m=f(m||{}),delete m.path,this.callSuper("initialize",m),this._setPath(p||[],m)},_setPath:function(p,m){this.path=s.util.makePathSimpler(Array.isArray(p)?p:s.util.parsePath(p)),s.Polyline.prototype._setPositionDimensions.call(this,m||{})},_renderPathCommands:function(p){var m,g=0,v=0,y=0,b=0,w=0,C=0,_=-this.pathOffset.x,S=-this.pathOffset.y;p.beginPath();for(var T=0,I=this.path.length;T<I;++T)switch(m=this.path[T],m[0]){case"L":y=m[1],b=m[2],p.lineTo(y+_,b+S);break;case"M":y=m[1],b=m[2],g=y,v=b,p.moveTo(y+_,b+S);break;case"C":y=m[5],b=m[6],w=m[3],C=m[4],p.bezierCurveTo(m[1]+_,m[2]+S,w+_,C+S,y+_,b+S);break;case"Q":p.quadraticCurveTo(m[1]+_,m[2]+S,m[3]+_,m[4]+S),y=m[3],b=m[4],w=m[1],C=m[2];break;case"z":case"Z":y=g,b=v,p.closePath();break}},_render:function(p){this._renderPathCommands(p),this._renderPaintInOrder(p)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(p){return l(this.callSuper("toObject",p),{path:this.path.map(function(m){return m.slice()})})},toDatalessObject:function(p){var m=this.toObject(["sourcePath"].concat(p));return m.sourcePath&&delete m.path,m},_toSVG:function(){var p=s.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',p,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var p=s.Object.NUM_FRACTION_DIGITS;return" translate("+c(-this.pathOffset.x,p)+", "+c(-this.pathOffset.y,p)+")"},toClipPathSVG:function(p){var m=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:p,additionalTransform:m})},toSVG:function(p){var m=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:p,additionalTransform:m})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var p=[],m=[],g,v=0,y=0,b=0,w=0,C,_=0,S=this.path.length;_<S;++_){switch(g=this.path[_],g[0]){case"L":b=g[1],w=g[2],C=[];break;case"M":b=g[1],w=g[2],v=b,y=w,C=[];break;case"C":C=s.util.getBoundsOfCurve(b,w,g[1],g[2],g[3],g[4],g[5],g[6]),b=g[5],w=g[6];break;case"Q":C=s.util.getBoundsOfCurve(b,w,g[1],g[2],g[1],g[2],g[3],g[4]),b=g[3],w=g[4];break;case"z":case"Z":b=v,w=y;break}C.forEach(function(X){p.push(X.x),m.push(X.y)}),p.push(b),m.push(w)}var T=u(p)||0,I=u(m)||0,F=h(p)||0,$=h(m)||0,G=F-T,ne=$-I;return{left:T,top:I,width:G,height:ne}}}),s.Path.fromObject=function(p,m){if(typeof p.sourcePath=="string"){var g=p.sourcePath;s.loadSVGFromURL(g,function(v){var y=v[0];y.setOptions(p),p.clipPath?s.util.enlivenObjects([p.clipPath],function(b){y.clipPath=b[0],m&&m(y)}):m&&m(y)})}else s.Object._fromObject("Path",p,m,"path")},s.Path.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat(["d"]),s.Path.fromElement=function(p,m,g){var v=s.parseAttributes(p,s.Path.ATTRIBUTE_NAMES);v.fromSVG=!0,m(new s.Path(v.d,l(v,g)))}}(e),function(a){var s=a.fabric||(a.fabric={}),u=s.util.array.min,h=s.util.array.max;s.Group||(s.Group=s.util.createClass(s.Object,s.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(l,f,c){f=f||{},this._objects=[],c&&this.callSuper("initialize",f),this._objects=l||[];for(var p=this._objects.length;p--;)this._objects[p].group=this;if(c)this._updateObjectsACoords();else{var m=f&&f.centerPoint;f.originX!==void 0&&(this.originX=f.originX),f.originY!==void 0&&(this.originY=f.originY),m||this._calcBounds(),this._updateObjectsCoords(m),delete f.centerPoint,this.callSuper("initialize",f)}this.setCoords()},_updateObjectsACoords:function(){for(var l=!0,f=this._objects.length;f--;)this._objects[f].setCoords(l)},_updateObjectsCoords:function(f){for(var f=f||this.getCenterPoint(),c=this._objects.length;c--;)this._updateObjectCoords(this._objects[c],f)},_updateObjectCoords:function(l,f){var c=l.left,p=l.top,m=!0;l.set({left:c-f.x,top:p-f.y}),l.group=this,l.setCoords(m)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(l){var f=!!this.group;return this._restoreObjectsState(),s.util.resetObjectTransform(this),l&&(f&&s.util.removeTransformFromObject(l,this.group.calcTransformMatrix()),this._objects.push(l),l.group=this,l._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,f?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(l){return this._restoreObjectsState(),s.util.resetObjectTransform(this),this.remove(l),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(l){this.dirty=!0,l.group=this,l._set("canvas",this.canvas)},_onObjectRemoved:function(l){this.dirty=!0,delete l.group},_set:function(l,f){var c=this._objects.length;if(this.useSetOnGroup)for(;c--;)this._objects[c].setOnGroup(l,f);if(l==="canvas")for(;c--;)this._objects[c]._set(l,f);s.Object.prototype._set.call(this,l,f)},toObject:function(l){var f=this.includeDefaultValues,c=this._objects.filter(function(m){return!m.excludeFromExport}).map(function(m){var g=m.includeDefaultValues;m.includeDefaultValues=f;var v=m.toObject(l);return m.includeDefaultValues=g,v}),p=s.Object.prototype.toObject.call(this,l);return p.objects=c,p},toDatalessObject:function(l){var f,c=this.sourcePath;if(c)f=c;else{var p=this.includeDefaultValues;f=this._objects.map(function(g){var v=g.includeDefaultValues;g.includeDefaultValues=p;var y=g.toDatalessObject(l);return g.includeDefaultValues=v,y})}var m=s.Object.prototype.toDatalessObject.call(this,l);return m.objects=f,m},render:function(l){this._transformDone=!0,this.callSuper("render",l),this._transformDone=!1},shouldCache:function(){var l=s.Object.prototype.shouldCache.call(this);if(l){for(var f=0,c=this._objects.length;f<c;f++)if(this._objects[f].willDrawShadow())return this.ownCaching=!1,!1}return l},willDrawShadow:function(){if(s.Object.prototype.willDrawShadow.call(this))return!0;for(var l=0,f=this._objects.length;l<f;l++)if(this._objects[l].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(l){for(var f=0,c=this._objects.length;f<c;f++)this._objects[f].render(l);this._drawClipPath(l,this.clipPath)},isCacheDirty:function(l){if(this.callSuper("isCacheDirty",l))return!0;if(!this.statefullCache)return!1;for(var f=0,c=this._objects.length;f<c;f++)if(this._objects[f].isCacheDirty(!0)){if(this._cacheCanvas){var p=this.cacheWidth/this.zoomX,m=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-p/2,-m/2,p,m)}return!0}return!1},_restoreObjectsState:function(){var l=this.calcOwnMatrix();return this._objects.forEach(function(f){s.util.addTransformToObject(f,l),delete f.group,f.setCoords()}),this},destroy:function(){return this._objects.forEach(function(l){l.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(l){l.dispose&&l.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var l=this._objects,f=this.canvas;this._objects=[];var c=this.toObject();delete c.objects;var p=new s.ActiveSelection([]);return p.set(c),p.type="activeSelection",f.remove(this),l.forEach(function(m){m.group=p,m.dirty=!0,f.add(m)}),p.canvas=f,p._objects=l,f._activeObject=p,p.setCoords(),p}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var l=!0;return this.forEachObject(function(f){f.setCoords(l)}),this},_calcBounds:function(l){for(var f=[],c=[],p,m,g,v=["tr","br","bl","tl"],y=0,b=this._objects.length,w,C=v.length;y<b;++y){for(p=this._objects[y],g=p.calcACoords(),w=0;w<C;w++)m=v[w],f.push(g[m].x),c.push(g[m].y);p.aCoords=g}this._getBounds(f,c,l)},_getBounds:function(l,f,c){var p=new s.Point(u(l),u(f)),m=new s.Point(h(l),h(f)),g=p.y||0,v=p.x||0,y=m.x-p.x||0,b=m.y-p.y||0;this.width=y,this.height=b,c||this.setPositionByOrigin({x:v,y:g},"left","top")},_toSVG:function(l){for(var f=["<g ","COMMON_PARTS",` >
`],c=0,p=this._objects.length;c<p;c++)f.push("		",this._objects[c].toSVG(l));return f.push(`</g>
`),f},getSvgStyles:function(){var l=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",f=this.visible?"":" visibility: hidden;";return[l,this.getSvgFilter(),f].join("")},toClipPathSVG:function(l){for(var f=[],c=0,p=this._objects.length;c<p;c++)f.push("	",this._objects[c].toClipPathSVG(l));return this._createBaseClipPathSVGMarkup(f,{reviver:l})}}),s.Group.fromObject=function(l,f){var c=l.objects,p=s.util.object.clone(l,!0);if(delete p.objects,typeof c=="string"){s.loadSVGFromURL(c,function(m){var g=s.util.groupSVGElements(m,l,c),v=p.clipPath;delete p.clipPath,g.set(p),v?s.util.enlivenObjects([v],function(y){g.clipPath=y[0],f&&f(g)}):f&&f(g)});return}s.util.enlivenObjects(c,function(m){s.util.enlivenObjectEnlivables(l,p,function(){f&&f(new s.Group(m,p,!0))})})})}(e),function(a){var s=a.fabric||(a.fabric={});s.ActiveSelection||(s.ActiveSelection=s.util.createClass(s.Group,{type:"activeSelection",initialize:function(u,h){h=h||{},this._objects=u||[];for(var l=this._objects.length;l--;)this._objects[l].group=this;h.originX&&(this.originX=h.originX),h.originY&&(this.originY=h.originY),this._calcBounds(),this._updateObjectsCoords(),s.Object.prototype.initialize.call(this,h),this.setCoords()},toGroup:function(){var u=this._objects.concat();this._objects=[];var h=s.Object.prototype.toObject.call(this),l=new s.Group([]);if(delete h.type,l.set(h),u.forEach(function(c){c.canvas.remove(c),c.group=l}),l._objects=u,!this.canvas)return l;var f=this.canvas;return f.add(l),f._activeObject=l,l.setCoords(),l},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(u,h,l){u.save(),u.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",u,h),l=l||{},typeof l.hasControls>"u"&&(l.hasControls=!1),l.forActiveSelection=!0;for(var f=0,c=this._objects.length;f<c;f++)this._objects[f]._renderControls(u,l);u.restore()}}),s.ActiveSelection.fromObject=function(u,h){s.util.enlivenObjects(u.objects,function(l){delete u.objects,h&&h(new s.ActiveSelection(l,u,!0))})})}(e),function(a){var s=t.util.object.extend;if(a.fabric||(a.fabric={}),a.fabric.Image){t.warn("fabric.Image is already defined.");return}t.Image=t.util.createClass(t.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:t.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:t.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(u,h){h||(h={}),this.filters=[],this.cacheKey="texture"+t.Object.__uid++,this.callSuper("initialize",h),this._initElement(u,h)},getElement:function(){return this._element||{}},setElement:function(u,h){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=u,this._originalElement=u,this._initConfig(h),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(u){var h=t.filterBackend;h&&h.evictCachesForKey&&h.evictCachesForKey(u)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((function(u){t.util.cleanUpJsdomNode(this[u]),this[u]=void 0}).bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var u=this.getElement();return{width:u.naturalWidth||u.width,height:u.naturalHeight||u.height}},_stroke:function(u){if(!(!this.stroke||this.strokeWidth===0)){var h=this.width/2,l=this.height/2;u.beginPath(),u.moveTo(-h,-l),u.lineTo(h,-l),u.lineTo(h,l),u.lineTo(-h,l),u.lineTo(-h,-l),u.closePath()}},toObject:function(u){var h=[];this.filters.forEach(function(f){f&&h.push(f.toObject())});var l=s(this.callSuper("toObject",["cropX","cropY"].concat(u)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:h});return this.resizeFilter&&(l.resizeFilter=this.resizeFilter.toObject()),l},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var u=[],h=[],l,f=this._element,c=-this.width/2,p=-this.height/2,m="",g="";if(!f)return[];if(this.hasCrop()){var v=t.Object.__uid++;u.push('<clipPath id="imageCrop_'+v+`">
`,'	<rect x="'+c+'" y="'+p+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),m=' clip-path="url(#imageCrop_'+v+')" '}if(this.imageSmoothing||(g='" image-rendering="optimizeSpeed'),h.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',c-this.cropX,'" y="',p-this.cropY,'" width="',f.width||f.naturalWidth,'" height="',f.height||f.height,g,'"',m,`></image>
`),this.stroke||this.strokeDashArray){var y=this.fill;this.fill=null,l=["	<rect ",'x="',c,'" y="',p,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=y}return this.paintFirst!=="fill"?u=u.concat(l,h):u=u.concat(h,l),u},getSrc:function(u){var h=u?this._element:this._originalElement;return h?h.toDataURL?h.toDataURL():this.srcFromAttribute?h.getAttribute("src"):h.src:this.src||""},setSrc:function(u,h,l){return t.util.loadImage(u,function(f,c){this.setElement(f,l),this._setWidthHeight(),h&&h(this,c)},this,l&&l.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var u=this.resizeFilter,h=this.minimumScaleTrigger,l=this.getTotalObjectScaling(),f=l.scaleX,c=l.scaleY,p=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!u||f>h&&c>h){this._element=p,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=f,this._lastScaleY=c;return}t.filterBackend||(t.filterBackend=t.initFilterBackend());var m=t.util.createCanvasElement(),g=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,v=p.width,y=p.height;m.width=v,m.height=y,this._element=m,this._lastScaleX=u.scaleX=f,this._lastScaleY=u.scaleY=c,t.filterBackend.applyFilters([u],p,v,y,this._element,g),this._filterScalingX=m.width/this._originalElement.width,this._filterScalingY=m.height/this._originalElement.height},applyFilters:function(u){if(u=u||this.filters||[],u=u.filter(function(p){return p&&!p.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),u.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var h=this._originalElement,l=h.naturalWidth||h.width,f=h.naturalHeight||h.height;if(this._element===this._originalElement){var c=t.util.createCanvasElement();c.width=l,c.height=f,this._element=c,this._filteredEl=c}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,l,f),this._lastScaleX=1,this._lastScaleY=1;return t.filterBackend||(t.filterBackend=t.initFilterBackend()),t.filterBackend.applyFilters(u,this._originalElement,l,f,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(u){t.util.setImageSmoothing(u,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(u),this._renderPaintInOrder(u)},drawCacheOnCanvas:function(u){t.util.setImageSmoothing(u,this.imageSmoothing),t.Object.prototype.drawCacheOnCanvas.call(this,u)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(u){var h=this._element;if(h){var l=this._filterScalingX,f=this._filterScalingY,c=this.width,p=this.height,m=Math.min,g=Math.max,v=g(this.cropX,0),y=g(this.cropY,0),b=h.naturalWidth||h.width,w=h.naturalHeight||h.height,C=v*l,_=y*f,S=m(c*l,b-C),T=m(p*f,w-_),I=-c/2,F=-p/2,$=m(c,b/l-v),G=m(p,w/f-y);h&&u.drawImage(h,C,_,S,T,I,F,$,G)}},_needsResize:function(){var u=this.getTotalObjectScaling();return u.scaleX!==this._lastScaleX||u.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(u,h){this.setElement(t.util.getById(u),h),t.util.addClass(this.getElement(),t.Image.CSS_CANVAS)},_initConfig:function(u){u||(u={}),this.setOptions(u),this._setWidthHeight(u)},_initFilters:function(u,h){u&&u.length?t.util.enlivenObjects(u,function(l){h&&h(l)},"fabric.Image.filters"):h&&h()},_setWidthHeight:function(u){u||(u={});var h=this.getElement();this.width=u.width||h.naturalWidth||h.width||0,this.height=u.height||h.naturalHeight||h.height||0},parsePreserveAspectRatioAttribute:function(){var u=t.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),h=this._element.width,l=this._element.height,f=1,c=1,p=0,m=0,g=0,v=0,y,b=this.width,w=this.height,C={width:b,height:w};return u&&(u.alignX!=="none"||u.alignY!=="none")?(u.meetOrSlice==="meet"&&(f=c=t.util.findScaleToFit(this._element,C),y=(b-h*f)/2,u.alignX==="Min"&&(p=-y),u.alignX==="Max"&&(p=y),y=(w-l*c)/2,u.alignY==="Min"&&(m=-y),u.alignY==="Max"&&(m=y)),u.meetOrSlice==="slice"&&(f=c=t.util.findScaleToCover(this._element,C),y=h-b/f,u.alignX==="Mid"&&(g=y/2),u.alignX==="Max"&&(g=y),y=l-w/c,u.alignY==="Mid"&&(v=y/2),u.alignY==="Max"&&(v=y),h=b/f,l=w/c)):(f=b/h,c=w/l),{width:h,height:l,scaleX:f,scaleY:c,offsetLeft:p,offsetTop:m,cropX:g,cropY:v}}}),t.Image.CSS_CANVAS="canvas-img",t.Image.prototype.getSvgSrc=t.Image.prototype.getSrc,t.Image.fromObject=function(u,h){var l=t.util.object.clone(u);t.util.loadImage(l.src,function(f,c){if(c){h&&h(null,!0);return}t.Image.prototype._initFilters.call(l,l.filters,function(p){l.filters=p||[],t.Image.prototype._initFilters.call(l,[l.resizeFilter],function(m){l.resizeFilter=m[0],t.util.enlivenObjectEnlivables(l,l,function(){var g=new t.Image(f,l);h(g,!1)})})})},null,l.crossOrigin)},t.Image.fromURL=function(u,h,l){t.util.loadImage(u,function(f,c){h&&h(new t.Image(f,l),c)},null,l&&l.crossOrigin)},t.Image.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),t.Image.fromElement=function(u,h,l){var f=t.parseAttributes(u,t.Image.ATTRIBUTE_NAMES);t.Image.fromURL(f["xlink:href"],h,s(l?t.util.object.clone(l):{},f))}}(e),t.util.object.extend(t.Object.prototype,{_getAngleValueForStraighten:function(){var a=this.angle%360;return a>0?Math.round((a-1)/90)*90:Math.round(a/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(a){a=a||{};var s=function(){},u=a.onComplete||s,h=a.onChange||s,l=this;return t.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(f){l.rotate(f),h()},onComplete:function(){l.setCoords(),u()}})}}),t.util.object.extend(t.StaticCanvas.prototype,{straightenObject:function(a){return a.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(a){return a.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function a(u,h){var l="precision "+h+` float;
void main(){}`,f=u.createShader(u.FRAGMENT_SHADER);return u.shaderSource(f,l),u.compileShader(f),!!u.getShaderParameter(f,u.COMPILE_STATUS)}t.isWebglSupported=function(u){if(t.isLikelyNode)return!1;u=u||t.WebglFilterBackend.prototype.tileSize;var h=document.createElement("canvas"),l=h.getContext("webgl")||h.getContext("experimental-webgl"),f=!1;if(l){t.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE),f=t.maxTextureSize>=u;for(var c=["highp","mediump","lowp"],p=0;p<3;p++)if(a(l,c[p])){t.webGlPrecision=c[p];break}}return this.isSupported=f,f},t.WebglFilterBackend=s;function s(u){u&&u.tileSize&&(this.tileSize=u.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}s.prototype={tileSize:2048,resources:{},setupGLContext:function(u,h){this.dispose(),this.createWebGLCanvas(u,h),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(u,h)},chooseFastestCopyGLTo2DMethod:function(u,h){var l=typeof window.performance<"u",f;try{new ImageData(1,1),f=!0}catch{f=!1}var c=typeof ArrayBuffer<"u",p=typeof Uint8ClampedArray<"u";if(l&&f&&c&&p){var m=t.util.createCanvasElement(),g=new ArrayBuffer(u*h*4);if(t.forceGLPutImageData){this.imageBuffer=g,this.copyGLTo2D=d;return}var v={imageBuffer:g,destinationWidth:u,destinationHeight:h,targetCanvas:m},y,b,w;m.width=u,m.height=h,y=window.performance.now(),o.call(v,this.gl,v),b=window.performance.now()-y,y=window.performance.now(),d.call(v,this.gl,v),w=window.performance.now()-y,b>w?(this.imageBuffer=g,this.copyGLTo2D=d):this.copyGLTo2D=o}},createWebGLCanvas:function(u,h){var l=t.util.createCanvasElement();l.width=u,l.height=h;var f={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},c=l.getContext("webgl",f);c||(c=l.getContext("experimental-webgl",f)),c&&(c.clearColor(0,0,0,0),this.canvas=l,this.gl=c)},applyFilters:function(u,h,l,f,c,p){var m=this.gl,g;p&&(g=this.getCachedTexture(p,h));var v={originalWidth:h.width||h.originalWidth,originalHeight:h.height||h.originalHeight,sourceWidth:l,sourceHeight:f,destinationWidth:l,destinationHeight:f,context:m,sourceTexture:this.createTexture(m,l,f,!g&&h),targetTexture:this.createTexture(m,l,f),originalTexture:g||this.createTexture(m,l,f,!g&&h),passes:u.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:c},y=m.createFramebuffer();return m.bindFramebuffer(m.FRAMEBUFFER,y),u.forEach(function(b){b&&b.applyTo(v)}),i(v),this.copyGLTo2D(m,v),m.bindTexture(m.TEXTURE_2D,null),m.deleteTexture(v.sourceTexture),m.deleteTexture(v.targetTexture),m.deleteFramebuffer(y),c.getContext("2d").setTransform(1,0,0,1,0,0),v},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(u,h,l,f,c){var p=u.createTexture();return u.bindTexture(u.TEXTURE_2D,p),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,c||u.NEAREST),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,c||u.NEAREST),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE),f?u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,f):u.texImage2D(u.TEXTURE_2D,0,u.RGBA,h,l,0,u.RGBA,u.UNSIGNED_BYTE,null),p},getCachedTexture:function(u,h){if(this.textureCache[u])return this.textureCache[u];var l=this.createTexture(this.gl,h.width,h.height,h);return this.textureCache[u]=l,l},evictCachesForKey:function(u){this.textureCache[u]&&(this.gl.deleteTexture(this.textureCache[u]),delete this.textureCache[u])},copyGLTo2D:o,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var u=this.gl,h={renderer:"",vendor:""};if(!u)return h;var l=u.getExtension("WEBGL_debug_renderer_info");if(l){var f=u.getParameter(l.UNMASKED_RENDERER_WEBGL),c=u.getParameter(l.UNMASKED_VENDOR_WEBGL);f&&(h.renderer=f.toLowerCase()),c&&(h.vendor=c.toLowerCase())}return this.gpuInfo=h,h}}}();function i(a){var s=a.targetCanvas,u=s.width,h=s.height,l=a.destinationWidth,f=a.destinationHeight;(u!==l||h!==f)&&(s.width=l,s.height=f)}function o(a,s){var u=a.canvas,h=s.targetCanvas,l=h.getContext("2d");l.translate(0,h.height),l.scale(1,-1);var f=u.height-h.height;l.drawImage(u,0,f,h.width,h.height,0,0,h.width,h.height)}function d(a,s){var u=s.targetCanvas,h=u.getContext("2d"),l=s.destinationWidth,f=s.destinationHeight,c=l*f*4,p=new Uint8Array(this.imageBuffer,0,c),m=new Uint8ClampedArray(this.imageBuffer,0,c);a.readPixels(0,0,l,f,a.RGBA,a.UNSIGNED_BYTE,p);var g=new ImageData(m,l,f);h.putImageData(g,0,0)}(function(){var a=function(){};t.Canvas2dFilterBackend=s;function s(){}s.prototype={evictCachesForKey:a,dispose:a,clearWebGLCaches:a,resources:{},applyFilters:function(u,h,l,f,c){var p=c.getContext("2d");p.drawImage(h,0,0,l,f);var m=p.getImageData(0,0,l,f),g=p.getImageData(0,0,l,f),v={sourceWidth:l,sourceHeight:f,imageData:m,originalEl:h,originalImageData:g,canvasEl:c,ctx:p,filterBackend:this};return u.forEach(function(y){y.applyTo(v)}),(v.imageData.width!==l||v.imageData.height!==f)&&(c.width=v.imageData.width,c.height=v.imageData.height),p.putImageData(v.imageData,0,0),v}}})(),t.Image=t.Image||{},t.Image.filters=t.Image.filters||{},t.Image.filters.BaseFilter=t.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(a){a&&this.setOptions(a)},setOptions:function(a){for(var s in a)this[s]=a[s]},createProgram:function(a,s,u){s=s||this.fragmentSource,u=u||this.vertexSource,t.webGlPrecision!=="highp"&&(s=s.replace(/precision highp float/g,"precision "+t.webGlPrecision+" float"));var h=a.createShader(a.VERTEX_SHADER);if(a.shaderSource(h,u),a.compileShader(h),!a.getShaderParameter(h,a.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+a.getShaderInfoLog(h));var l=a.createShader(a.FRAGMENT_SHADER);if(a.shaderSource(l,s),a.compileShader(l),!a.getShaderParameter(l,a.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+a.getShaderInfoLog(l));var f=a.createProgram();if(a.attachShader(f,h),a.attachShader(f,l),a.linkProgram(f),!a.getProgramParameter(f,a.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+a.getProgramInfoLog(f));var c=this.getAttributeLocations(a,f),p=this.getUniformLocations(a,f)||{};return p.uStepW=a.getUniformLocation(f,"uStepW"),p.uStepH=a.getUniformLocation(f,"uStepH"),{program:f,attributeLocations:c,uniformLocations:p}},getAttributeLocations:function(a,s){return{aPosition:a.getAttribLocation(s,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(a,s,u){var h=s.aPosition,l=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,l),a.enableVertexAttribArray(h),a.vertexAttribPointer(h,2,a.FLOAT,!1,0,0),a.bufferData(a.ARRAY_BUFFER,u,a.STATIC_DRAW)},_setupFrameBuffer:function(a){var s=a.context,u,h;a.passes>1?(u=a.destinationWidth,h=a.destinationHeight,(a.sourceWidth!==u||a.sourceHeight!==h)&&(s.deleteTexture(a.targetTexture),a.targetTexture=a.filterBackend.createTexture(s,u,h)),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,a.targetTexture,0)):(s.bindFramebuffer(s.FRAMEBUFFER,null),s.finish())},_swapTextures:function(a){a.passes--,a.pass++;var s=a.targetTexture;a.targetTexture=a.sourceTexture,a.sourceTexture=s},isNeutralState:function(){var a=this.mainParameter,s=t.Image.filters[this.type].prototype;if(a)if(Array.isArray(s[a])){for(var u=s[a].length;u--;)if(this[a][u]!==s[a][u])return!1;return!0}else return s[a]===this[a];else return!1},applyTo:function(a){a.webgl?(this._setupFrameBuffer(a),this.applyToWebGL(a),this._swapTextures(a)):this.applyTo2d(a)},retrieveShader:function(a){return a.programCache.hasOwnProperty(this.type)||(a.programCache[this.type]=this.createProgram(a.context)),a.programCache[this.type]},applyToWebGL:function(a){var s=a.context,u=this.retrieveShader(a);a.pass===0&&a.originalTexture?s.bindTexture(s.TEXTURE_2D,a.originalTexture):s.bindTexture(s.TEXTURE_2D,a.sourceTexture),s.useProgram(u.program),this.sendAttributeData(s,u.attributeLocations,a.aPosition),s.uniform1f(u.uniformLocations.uStepW,1/a.sourceWidth),s.uniform1f(u.uniformLocations.uStepH,1/a.sourceHeight),this.sendUniformData(s,u.uniformLocations),s.viewport(0,0,a.destinationWidth,a.destinationHeight),s.drawArrays(s.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(a,s,u){a.activeTexture(u),a.bindTexture(a.TEXTURE_2D,s),a.activeTexture(a.TEXTURE0)},unbindAdditionalTexture:function(a,s){a.activeTexture(s),a.bindTexture(a.TEXTURE_2D,null),a.activeTexture(a.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(a){this[this.mainParameter]=a},sendUniformData:function(){},createHelpLayer:function(a){if(!a.helpLayer){var s=document.createElement("canvas");s.width=a.sourceWidth,s.height=a.sourceHeight,a.helpLayer=s}},toObject:function(){var a={type:this.type},s=this.mainParameter;return s&&(a[s]=this[s]),a},toJSON:function(){return this.toObject()}}),t.Image.filters.BaseFilter.fromObject=function(a,s){var u=new t.Image.filters[a.type](a);return s&&s(u),u},function(a){var s=a.fabric||(a.fabric={}),u=s.Image.filters,h=s.util.createClass;u.ColorMatrix=h(u.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(l){this.callSuper("initialize",l),this.matrix=this.matrix.slice(0)},applyTo2d:function(l){var f=l.imageData,c=f.data,p=c.length,m=this.matrix,g,v,y,b,w,C=this.colorsOnly;for(w=0;w<p;w+=4)g=c[w],v=c[w+1],y=c[w+2],C?(c[w]=g*m[0]+v*m[1]+y*m[2]+m[4]*255,c[w+1]=g*m[5]+v*m[6]+y*m[7]+m[9]*255,c[w+2]=g*m[10]+v*m[11]+y*m[12]+m[14]*255):(b=c[w+3],c[w]=g*m[0]+v*m[1]+y*m[2]+b*m[3]+m[4]*255,c[w+1]=g*m[5]+v*m[6]+y*m[7]+b*m[8]+m[9]*255,c[w+2]=g*m[10]+v*m[11]+y*m[12]+b*m[13]+m[14]*255,c[w+3]=g*m[15]+v*m[16]+y*m[17]+b*m[18]+m[19]*255)},getUniformLocations:function(l,f){return{uColorMatrix:l.getUniformLocation(f,"uColorMatrix"),uConstants:l.getUniformLocation(f,"uConstants")}},sendUniformData:function(l,f){var c=this.matrix,p=[c[0],c[1],c[2],c[3],c[5],c[6],c[7],c[8],c[10],c[11],c[12],c[13],c[15],c[16],c[17],c[18]],m=[c[4],c[9],c[14],c[19]];l.uniformMatrix4fv(f.uColorMatrix,!1,p),l.uniform4fv(f.uConstants,m)}}),s.Image.filters.ColorMatrix.fromObject=s.Image.filters.BaseFilter.fromObject}(e),function(a){var s=a.fabric||(a.fabric={}),u=s.Image.filters,h=s.util.createClass;u.Brightness=h(u.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(l){if(this.brightness!==0){var f=l.imageData,c=f.data,p,m=c.length,g=Math.round(this.brightness*255);for(p=0;p<m;p+=4)c[p]=c[p]+g,c[p+1]=c[p+1]+g,c[p+2]=c[p+2]+g}},getUniformLocations:function(l,f){return{uBrightness:l.getUniformLocation(f,"uBrightness")}},sendUniformData:function(l,f){l.uniform1f(f.uBrightness,this.brightness)}}),s.Image.filters.Brightness.fromObject=s.Image.filters.BaseFilter.fromObject}(e),function(a){var s=a.fabric||(a.fabric={}),u=s.util.object.extend,h=s.Image.filters,l=s.util.createClass;h.Convolute=l(h.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(f){var c=Math.sqrt(this.matrix.length),p=this.type+"_"+c+"_"+(this.opaque?1:0),m=this.fragmentSource[p];return f.programCache.hasOwnProperty(p)||(f.programCache[p]=this.createProgram(f.context,m)),f.programCache[p]},applyTo2d:function(f){var c=f.imageData,p=c.data,m=this.matrix,g=Math.round(Math.sqrt(m.length)),v=Math.floor(g/2),y=c.width,b=c.height,w=f.ctx.createImageData(y,b),C=w.data,_=this.opaque?1:0,S,T,I,F,$,G,ne,X,Q,Z,ie,V,k;for(ie=0;ie<b;ie++)for(Z=0;Z<y;Z++){for($=(ie*y+Z)*4,S=0,T=0,I=0,F=0,k=0;k<g;k++)for(V=0;V<g;V++)ne=ie+k-v,G=Z+V-v,!(ne<0||ne>=b||G<0||G>=y)&&(X=(ne*y+G)*4,Q=m[k*g+V],S+=p[X]*Q,T+=p[X+1]*Q,I+=p[X+2]*Q,_||(F+=p[X+3]*Q));C[$]=S,C[$+1]=T,C[$+2]=I,_?C[$+3]=p[$+3]:C[$+3]=F}f.imageData=w},getUniformLocations:function(f,c){return{uMatrix:f.getUniformLocation(c,"uMatrix"),uOpaque:f.getUniformLocation(c,"uOpaque"),uHalfSize:f.getUniformLocation(c,"uHalfSize"),uSize:f.getUniformLocation(c,"uSize")}},sendUniformData:function(f,c){f.uniform1fv(c.uMatrix,this.matrix)},toObject:function(){return u(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),s.Image.filters.Convolute.fromObject=s.Image.filters.BaseFilter.fromObject}(e),function(a){var s=a.fabric||(a.fabric={}),u=s.Image.filters,h=s.util.createClass;u.Grayscale=h(u.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(l){var f=l.imageData,c=f.data,p,m=c.length,g,v=this.mode;for(p=0;p<m;p+=4)v==="average"?g=(c[p]+c[p+1]+c[p+2])/3:v==="lightness"?g=(Math.min(c[p],c[p+1],c[p+2])+Math.max(c[p],c[p+1],c[p+2]))/2:v==="luminosity"&&(g=.21*c[p]+.72*c[p+1]+.07*c[p+2]),c[p]=g,c[p+1]=g,c[p+2]=g},retrieveShader:function(l){var f=this.type+"_"+this.mode;if(!l.programCache.hasOwnProperty(f)){var c=this.fragmentSource[this.mode];l.programCache[f]=this.createProgram(l.context,c)}return l.programCache[f]},getUniformLocations:function(l,f){return{uMode:l.getUniformLocation(f,"uMode")}},sendUniformData:function(l,f){var c=1;l.uniform1i(f.uMode,c)},isNeutralState:function(){return!1}}),s.Image.filters.Grayscale.fromObject=s.Image.filters.BaseFilter.fromObject}(e),function(a){var s=a.fabric||(a.fabric={}),u=s.Image.filters,h=s.util.createClass;u.Invert=h(u.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(l){var f=l.imageData,c=f.data,p,m=c.length;for(p=0;p<m;p+=4)c[p]=255-c[p],c[p+1]=255-c[p+1],c[p+2]=255-c[p+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(l,f){return{uInvert:l.getUniformLocation(f,"uInvert")}},sendUniformData:function(l,f){l.uniform1i(f.uInvert,this.invert)}}),s.Image.filters.Invert.fromObject=s.Image.filters.BaseFilter.fromObject}(e),function(a){var s=a.fabric||(a.fabric={}),u=s.util.object.extend,h=s.Image.filters,l=s.util.createClass;h.Noise=l(h.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(f){if(this.noise!==0){var c=f.imageData,p=c.data,m,g=p.length,v=this.noise,y;for(m=0,g=p.length;m<g;m+=4)y=(.5-Math.random())*v,p[m]+=y,p[m+1]+=y,p[m+2]+=y}},getUniformLocations:function(f,c){return{uNoise:f.getUniformLocation(c,"uNoise"),uSeed:f.getUniformLocation(c,"uSeed")}},sendUniformData:function(f,c){f.uniform1f(c.uNoise,this.noise/255),f.uniform1f(c.uSeed,Math.random())},toObject:function(){return u(this.callSuper("toObject"),{noise:this.noise})}}),s.Image.filters.Noise.fromObject=s.Image.filters.BaseFilter.fromObject}(e),function(a){var s=a.fabric||(a.fabric={}),u=s.Image.filters,h=s.util.createClass;u.Pixelate=h(u.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(l){var f=l.imageData,c=f.data,p=f.height,m=f.width,g,v,y,b,w,C,_,S,T,I,F;for(v=0;v<p;v+=this.blocksize)for(y=0;y<m;y+=this.blocksize)for(g=v*4*m+y*4,b=c[g],w=c[g+1],C=c[g+2],_=c[g+3],I=Math.min(v+this.blocksize,p),F=Math.min(y+this.blocksize,m),S=v;S<I;S++)for(T=y;T<F;T++)g=S*4*m+T*4,c[g]=b,c[g+1]=w,c[g+2]=C,c[g+3]=_},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(l,f){return{uBlocksize:l.getUniformLocation(f,"uBlocksize"),uStepW:l.getUniformLocation(f,"uStepW"),uStepH:l.getUniformLocation(f,"uStepH")}},sendUniformData:function(l,f){l.uniform1f(f.uBlocksize,this.blocksize)}}),s.Image.filters.Pixelate.fromObject=s.Image.filters.BaseFilter.fromObject}(e),function(a){var s=a.fabric||(a.fabric={}),u=s.util.object.extend,h=s.Image.filters,l=s.util.createClass;h.RemoveColor=l(h.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(f){var c=f.imageData,p=c.data,m,g=this.distance*255,v,y,b,w=new s.Color(this.color).getSource(),C=[w[0]-g,w[1]-g,w[2]-g],_=[w[0]+g,w[1]+g,w[2]+g];for(m=0;m<p.length;m+=4)v=p[m],y=p[m+1],b=p[m+2],v>C[0]&&y>C[1]&&b>C[2]&&v<_[0]&&y<_[1]&&b<_[2]&&(p[m+3]=0)},getUniformLocations:function(f,c){return{uLow:f.getUniformLocation(c,"uLow"),uHigh:f.getUniformLocation(c,"uHigh")}},sendUniformData:function(f,c){var p=new s.Color(this.color).getSource(),m=parseFloat(this.distance),g=[0+p[0]/255-m,0+p[1]/255-m,0+p[2]/255-m,1],v=[p[0]/255+m,p[1]/255+m,p[2]/255+m,1];f.uniform4fv(c.uLow,g),f.uniform4fv(c.uHigh,v)},toObject:function(){return u(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),s.Image.filters.RemoveColor.fromObject=s.Image.filters.BaseFilter.fromObject}(e),function(a){var s=a.fabric||(a.fabric={}),u=s.Image.filters,h=s.util.createClass,l={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var f in l)u[f]=h(u.ColorMatrix,{type:f,matrix:l[f],mainParameter:!1,colorsOnly:!0}),s.Image.filters[f].fromObject=s.Image.filters.BaseFilter.fromObject}(e),function(a){var s=a.fabric,u=s.Image.filters,h=s.util.createClass;u.BlendColor=h(u.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(l){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[l]+`}
}`},retrieveShader:function(l){var f=this.type+"_"+this.mode,c;return l.programCache.hasOwnProperty(f)||(c=this.buildSource(this.mode),l.programCache[f]=this.createProgram(l.context,c)),l.programCache[f]},applyTo2d:function(l){var f=l.imageData,c=f.data,p=c.length,m,g,v,y,b,w,C,_=1-this.alpha;C=new s.Color(this.color).getSource(),m=C[0]*this.alpha,g=C[1]*this.alpha,v=C[2]*this.alpha;for(var S=0;S<p;S+=4)switch(y=c[S],b=c[S+1],w=c[S+2],this.mode){case"multiply":c[S]=y*m/255,c[S+1]=b*g/255,c[S+2]=w*v/255;break;case"screen":c[S]=255-(255-y)*(255-m)/255,c[S+1]=255-(255-b)*(255-g)/255,c[S+2]=255-(255-w)*(255-v)/255;break;case"add":c[S]=y+m,c[S+1]=b+g,c[S+2]=w+v;break;case"diff":case"difference":c[S]=Math.abs(y-m),c[S+1]=Math.abs(b-g),c[S+2]=Math.abs(w-v);break;case"subtract":c[S]=y-m,c[S+1]=b-g,c[S+2]=w-v;break;case"darken":c[S]=Math.min(y,m),c[S+1]=Math.min(b,g),c[S+2]=Math.min(w,v);break;case"lighten":c[S]=Math.max(y,m),c[S+1]=Math.max(b,g),c[S+2]=Math.max(w,v);break;case"overlay":c[S]=m<128?2*y*m/255:255-2*(255-y)*(255-m)/255,c[S+1]=g<128?2*b*g/255:255-2*(255-b)*(255-g)/255,c[S+2]=v<128?2*w*v/255:255-2*(255-w)*(255-v)/255;break;case"exclusion":c[S]=m+y-2*m*y/255,c[S+1]=g+b-2*g*b/255,c[S+2]=v+w-2*v*w/255;break;case"tint":c[S]=m+y*_,c[S+1]=g+b*_,c[S+2]=v+w*_}},getUniformLocations:function(l,f){return{uColor:l.getUniformLocation(f,"uColor")}},sendUniformData:function(l,f){var c=new s.Color(this.color).getSource();c[0]=this.alpha*c[0]/255,c[1]=this.alpha*c[1]/255,c[2]=this.alpha*c[2]/255,c[3]=this.alpha,l.uniform4fv(f.uColor,c)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),s.Image.filters.BlendColor.fromObject=s.Image.filters.BaseFilter.fromObject}(e),function(a){var s=a.fabric,u=s.Image.filters,h=s.util.createClass;u.BlendImage=h(u.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(l){var f=this.type+"_"+this.mode,c=this.fragmentSource[this.mode];return l.programCache.hasOwnProperty(f)||(l.programCache[f]=this.createProgram(l.context,c)),l.programCache[f]},applyToWebGL:function(l){var f=l.context,c=this.createTexture(l.filterBackend,this.image);this.bindAdditionalTexture(f,c,f.TEXTURE1),this.callSuper("applyToWebGL",l),this.unbindAdditionalTexture(f,f.TEXTURE1)},createTexture:function(l,f){return l.getCachedTexture(f.cacheKey,f._element)},calculateMatrix:function(){var l=this.image,f=l._element.width,c=l._element.height;return[1/l.scaleX,0,0,0,1/l.scaleY,0,-l.left/f,-l.top/c,1]},applyTo2d:function(l){var f=l.imageData,c=l.filterBackend.resources,p=f.data,m=p.length,g=f.width,v=f.height,y,b,w,C,_,S,T,I,F,$,G=this.image,ne;c.blendImage||(c.blendImage=s.util.createCanvasElement()),F=c.blendImage,$=F.getContext("2d"),F.width!==g||F.height!==v?(F.width=g,F.height=v):$.clearRect(0,0,g,v),$.setTransform(G.scaleX,0,0,G.scaleY,G.left,G.top),$.drawImage(G._element,0,0,g,v),ne=$.getImageData(0,0,g,v).data;for(var X=0;X<m;X+=4)switch(_=p[X],S=p[X+1],T=p[X+2],I=p[X+3],y=ne[X],b=ne[X+1],w=ne[X+2],C=ne[X+3],this.mode){case"multiply":p[X]=_*y/255,p[X+1]=S*b/255,p[X+2]=T*w/255,p[X+3]=I*C/255;break;case"mask":p[X+3]=C;break}},getUniformLocations:function(l,f){return{uTransformMatrix:l.getUniformLocation(f,"uTransformMatrix"),uImage:l.getUniformLocation(f,"uImage")}},sendUniformData:function(l,f){var c=this.calculateMatrix();l.uniform1i(f.uImage,1),l.uniformMatrix3fv(f.uTransformMatrix,!1,c)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),s.Image.filters.BlendImage.fromObject=function(l,f){s.Image.fromObject(l.image,function(c){var p=s.util.object.clone(l);p.image=c,f(new s.Image.filters.BlendImage(p))})}}(e),function(a){var s=a.fabric||(a.fabric={}),u=Math.pow,h=Math.floor,l=Math.sqrt,f=Math.abs,c=Math.round,p=Math.sin,m=Math.ceil,g=s.Image.filters,v=s.util.createClass;g.Resize=v(g.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(y,b){return{uDelta:y.getUniformLocation(b,"uDelta"),uTaps:y.getUniformLocation(b,"uTaps")}},sendUniformData:function(y,b){y.uniform2fv(b.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),y.uniform1fv(b.uTaps,this.taps)},retrieveShader:function(y){var b=this.getFilterWindow(),w=this.type+"_"+b;if(!y.programCache.hasOwnProperty(w)){var C=this.generateShader(b);y.programCache[w]=this.createProgram(y.context,C)}return y.programCache[w]},getFilterWindow:function(){var y=this.tempScale;return Math.ceil(this.lanczosLobes/y)},getTaps:function(){for(var y=this.lanczosCreate(this.lanczosLobes),b=this.tempScale,w=this.getFilterWindow(),C=new Array(w),_=1;_<=w;_++)C[_-1]=y(_*b);return C},generateShader:function(C){for(var b=new Array(C),w=this.fragmentSourceTOP,C,_=1;_<=C;_++)b[_-1]=_+".0 * uDelta";return w+="uniform float uTaps["+C+`];
`,w+=`void main() {
`,w+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,w+=`  float sum = 1.0;
`,b.forEach(function(S,T){w+="  color += texture2D(uTexture, vTexCoord + "+S+") * uTaps["+T+`];
`,w+="  color += texture2D(uTexture, vTexCoord - "+S+") * uTaps["+T+`];
`,w+="  sum += 2.0 * uTaps["+T+`];
`}),w+=`  gl_FragColor = color / sum;
`,w+="}",w},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(y){y.webgl?(y.passes++,this.width=y.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=y.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),y.destinationWidth=this.dW,this._setupFrameBuffer(y),this.applyToWebGL(y),this._swapTextures(y),y.sourceWidth=y.destinationWidth,this.height=y.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),y.destinationHeight=this.dH,this._setupFrameBuffer(y),this.applyToWebGL(y),this._swapTextures(y),y.sourceHeight=y.destinationHeight):this.applyTo2d(y)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(y){return function(b){if(b>=y||b<=-y)return 0;if(b<11920929e-14&&b>-11920929e-14)return 1;b*=Math.PI;var w=b/y;return p(b)/b*p(w)/w}},applyTo2d:function(y){var b=y.imageData,w=this.scaleX,C=this.scaleY;this.rcpScaleX=1/w,this.rcpScaleY=1/C;var _=b.width,S=b.height,T=c(_*w),I=c(S*C),F;this.resizeType==="sliceHack"?F=this.sliceByTwo(y,_,S,T,I):this.resizeType==="hermite"?F=this.hermiteFastResize(y,_,S,T,I):this.resizeType==="bilinear"?F=this.bilinearFiltering(y,_,S,T,I):this.resizeType==="lanczos"&&(F=this.lanczosResize(y,_,S,T,I)),y.imageData=F},sliceByTwo:function(y,b,w,C,_){var S=y.imageData,T=.5,I=!1,F=!1,$=b*T,G=w*T,ne=s.filterBackend.resources,X,Q,Z=0,ie=0,V=b,k=0;for(ne.sliceByTwo||(ne.sliceByTwo=document.createElement("canvas")),X=ne.sliceByTwo,(X.width<b*1.5||X.height<w)&&(X.width=b*1.5,X.height=w),Q=X.getContext("2d"),Q.clearRect(0,0,b*1.5,w),Q.putImageData(S,0,0),C=h(C),_=h(_);!I||!F;)b=$,w=G,C<h($*T)?$=h($*T):($=C,I=!0),_<h(G*T)?G=h(G*T):(G=_,F=!0),Q.drawImage(X,Z,ie,b,w,V,k,$,G),Z=V,ie=k,k+=G;return Q.getImageData(Z,ie,C,_)},lanczosResize:function(y,b,w,C,_){function S(A){var j,H,M,O,R,B,U,W,ee,re,ue;for(k.x=(A+.5)*G,P.x=h(k.x),j=0;j<_;j++){for(k.y=(j+.5)*ne,P.y=h(k.y),R=0,B=0,U=0,W=0,ee=0,H=P.x-Z;H<=P.x+Z;H++)if(!(H<0||H>=b)){re=h(1e3*f(H-k.x)),V[re]||(V[re]={});for(var Y=P.y-ie;Y<=P.y+ie;Y++)Y<0||Y>=w||(ue=h(1e3*f(Y-k.y)),V[re][ue]||(V[re][ue]=$(l(u(re*X,2)+u(ue*Q,2))/1e3)),M=V[re][ue],M>0&&(O=(Y*b+H)*4,R+=M,B+=M*T[O],U+=M*T[O+1],W+=M*T[O+2],ee+=M*T[O+3]))}O=(j*C+A)*4,F[O]=B/R,F[O+1]=U/R,F[O+2]=W/R,F[O+3]=ee/R}return++A<C?S(A):I}var T=y.imageData.data,I=y.ctx.createImageData(C,_),F=I.data,$=this.lanczosCreate(this.lanczosLobes),G=this.rcpScaleX,ne=this.rcpScaleY,X=2/this.rcpScaleX,Q=2/this.rcpScaleY,Z=m(G*this.lanczosLobes/2),ie=m(ne*this.lanczosLobes/2),V={},k={},P={};return S(0)},bilinearFiltering:function(y,b,w,C,_){var S,T,I,F,$,G,ne,X,Q,Z,ie,V,k=0,P,A=this.rcpScaleX,j=this.rcpScaleY,H=4*(b-1),M=y.imageData,O=M.data,R=y.ctx.createImageData(C,_),B=R.data;for(ne=0;ne<_;ne++)for(X=0;X<C;X++)for($=h(A*X),G=h(j*ne),Q=A*X-$,Z=j*ne-G,P=4*(G*b+$),ie=0;ie<4;ie++)S=O[P+ie],T=O[P+4+ie],I=O[P+H+ie],F=O[P+H+4+ie],V=S*(1-Q)*(1-Z)+T*Q*(1-Z)+I*Z*(1-Q)+F*Q*Z,B[k++]=V;return R},hermiteFastResize:function(y,b,w,C,_){for(var S=this.rcpScaleX,T=this.rcpScaleY,I=m(S/2),F=m(T/2),$=y.imageData,G=$.data,ne=y.ctx.createImageData(C,_),X=ne.data,Q=0;Q<_;Q++)for(var Z=0;Z<C;Z++){for(var ie=(Z+Q*C)*4,V=0,k=0,P=0,A=0,j=0,H=0,M=0,O=(Q+.5)*T,R=h(Q*T);R<(Q+1)*T;R++)for(var B=f(O-(R+.5))/F,U=(Z+.5)*S,W=B*B,ee=h(Z*S);ee<(Z+1)*S;ee++){var re=f(U-(ee+.5))/I,ue=l(W+re*re);ue>1&&ue<-1||(V=2*ue*ue*ue-3*ue*ue+1,V>0&&(re=4*(ee+R*b),M+=V*G[re+3],P+=V,G[re+3]<255&&(V=V*G[re+3]/250),A+=V*G[re],j+=V*G[re+1],H+=V*G[re+2],k+=V))}X[ie]=A/k,X[ie+1]=j/k,X[ie+2]=H/k,X[ie+3]=M/P}return ne},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),s.Image.filters.Resize.fromObject=s.Image.filters.BaseFilter.fromObject}(e),function(a){var s=a.fabric||(a.fabric={}),u=s.Image.filters,h=s.util.createClass;u.Contrast=h(u.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(l){if(this.contrast!==0){var f=l.imageData,c,m,p=f.data,m=p.length,g=Math.floor(this.contrast*255),v=259*(g+255)/(255*(259-g));for(c=0;c<m;c+=4)p[c]=v*(p[c]-128)+128,p[c+1]=v*(p[c+1]-128)+128,p[c+2]=v*(p[c+2]-128)+128}},getUniformLocations:function(l,f){return{uContrast:l.getUniformLocation(f,"uContrast")}},sendUniformData:function(l,f){l.uniform1f(f.uContrast,this.contrast)}}),s.Image.filters.Contrast.fromObject=s.Image.filters.BaseFilter.fromObject}(e),function(a){var s=a.fabric||(a.fabric={}),u=s.Image.filters,h=s.util.createClass;u.Saturation=h(u.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(l){if(this.saturation!==0){var f=l.imageData,c=f.data,p=c.length,m=-this.saturation,g,v;for(g=0;g<p;g+=4)v=Math.max(c[g],c[g+1],c[g+2]),c[g]+=v!==c[g]?(v-c[g])*m:0,c[g+1]+=v!==c[g+1]?(v-c[g+1])*m:0,c[g+2]+=v!==c[g+2]?(v-c[g+2])*m:0}},getUniformLocations:function(l,f){return{uSaturation:l.getUniformLocation(f,"uSaturation")}},sendUniformData:function(l,f){l.uniform1f(f.uSaturation,-this.saturation)}}),s.Image.filters.Saturation.fromObject=s.Image.filters.BaseFilter.fromObject}(e),function(a){var s=a.fabric||(a.fabric={}),u=s.Image.filters,h=s.util.createClass;u.Vibrance=h(u.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(l){if(this.vibrance!==0){var f=l.imageData,c=f.data,p=c.length,m=-this.vibrance,g,v,y,b;for(g=0;g<p;g+=4)v=Math.max(c[g],c[g+1],c[g+2]),y=(c[g]+c[g+1]+c[g+2])/3,b=Math.abs(v-y)*2/255*m,c[g]+=v!==c[g]?(v-c[g])*b:0,c[g+1]+=v!==c[g+1]?(v-c[g+1])*b:0,c[g+2]+=v!==c[g+2]?(v-c[g+2])*b:0}},getUniformLocations:function(l,f){return{uVibrance:l.getUniformLocation(f,"uVibrance")}},sendUniformData:function(l,f){l.uniform1f(f.uVibrance,-this.vibrance)}}),s.Image.filters.Vibrance.fromObject=s.Image.filters.BaseFilter.fromObject}(e),function(a){var s=a.fabric||(a.fabric={}),u=s.Image.filters,h=s.util.createClass;u.Blur=h(u.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(l){l.webgl?(this.aspectRatio=l.sourceWidth/l.sourceHeight,l.passes++,this._setupFrameBuffer(l),this.horizontal=!0,this.applyToWebGL(l),this._swapTextures(l),this._setupFrameBuffer(l),this.horizontal=!1,this.applyToWebGL(l),this._swapTextures(l)):this.applyTo2d(l)},applyTo2d:function(l){l.imageData=this.simpleBlur(l)},simpleBlur:function(l){var f=l.filterBackend.resources,c,p,m=l.imageData.width,g=l.imageData.height;f.blurLayer1||(f.blurLayer1=s.util.createCanvasElement(),f.blurLayer2=s.util.createCanvasElement()),c=f.blurLayer1,p=f.blurLayer2,(c.width!==m||c.height!==g)&&(p.width=c.width=m,p.height=c.height=g);var v=c.getContext("2d"),y=p.getContext("2d"),b=15,w,C,_,S,T=this.blur*.06*.5;for(v.putImageData(l.imageData,0,0),y.clearRect(0,0,m,g),S=-b;S<=b;S++)w=(Math.random()-.5)/4,C=S/b,_=T*C*m+w,y.globalAlpha=1-Math.abs(C),y.drawImage(c,_,w),v.drawImage(p,0,0),y.globalAlpha=1,y.clearRect(0,0,p.width,p.height);for(S=-b;S<=b;S++)w=(Math.random()-.5)/4,C=S/b,_=T*C*g+w,y.globalAlpha=1-Math.abs(C),y.drawImage(c,w,_),v.drawImage(p,0,0),y.globalAlpha=1,y.clearRect(0,0,p.width,p.height);l.ctx.drawImage(c,0,0);var I=l.ctx.getImageData(0,0,c.width,c.height);return v.globalAlpha=1,v.clearRect(0,0,c.width,c.height),I},getUniformLocations:function(l,f){return{delta:l.getUniformLocation(f,"uDelta")}},sendUniformData:function(l,f){var c=this.chooseRightDelta();l.uniform2fv(f.delta,c)},chooseRightDelta:function(){var l=1,f=[0,0],c;return this.horizontal?this.aspectRatio>1&&(l=1/this.aspectRatio):this.aspectRatio<1&&(l=this.aspectRatio),c=l*this.blur*.12,this.horizontal?f[0]=c:f[1]=c,f}}),u.Blur.fromObject=s.Image.filters.BaseFilter.fromObject}(e),function(a){var s=a.fabric||(a.fabric={}),u=s.Image.filters,h=s.util.createClass;u.Gamma=h(u.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(l){this.gamma=[1,1,1],u.BaseFilter.prototype.initialize.call(this,l)},applyTo2d:function(l){var f=l.imageData,c=f.data,p=this.gamma,m=c.length,g=1/p[0],v=1/p[1],y=1/p[2],b;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),b=0,m=256;b<m;b++)this.rVals[b]=Math.pow(b/255,g)*255,this.gVals[b]=Math.pow(b/255,v)*255,this.bVals[b]=Math.pow(b/255,y)*255;for(b=0,m=c.length;b<m;b+=4)c[b]=this.rVals[c[b]],c[b+1]=this.gVals[c[b+1]],c[b+2]=this.bVals[c[b+2]]},getUniformLocations:function(l,f){return{uGamma:l.getUniformLocation(f,"uGamma")}},sendUniformData:function(l,f){l.uniform3fv(f.uGamma,this.gamma)}}),s.Image.filters.Gamma.fromObject=s.Image.filters.BaseFilter.fromObject}(e),function(a){var s=a.fabric||(a.fabric={}),u=s.Image.filters,h=s.util.createClass;u.Composed=h(u.BaseFilter,{type:"Composed",subFilters:[],initialize:function(l){this.callSuper("initialize",l),this.subFilters=this.subFilters.slice(0)},applyTo:function(l){l.passes+=this.subFilters.length-1,this.subFilters.forEach(function(f){f.applyTo(l)})},toObject:function(){return s.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(l){return l.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(l){return!l.isNeutralState()})}}),s.Image.filters.Composed.fromObject=function(l,f){var c=l.subFilters||[],p=c.map(function(g){return new s.Image.filters[g.type](g)}),m=new s.Image.filters.Composed({subFilters:p});return f&&f(m),m}}(e),function(a){var s=a.fabric||(a.fabric={}),u=s.Image.filters,h=s.util.createClass;u.HueRotation=h(u.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var l=this.rotation*Math.PI,f=s.util.cos(l),c=s.util.sin(l),p=1/3,m=Math.sqrt(p)*c,g=1-f;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=f+g/3,this.matrix[1]=p*g-m,this.matrix[2]=p*g+m,this.matrix[5]=p*g+m,this.matrix[6]=f+p*g,this.matrix[7]=p*g-m,this.matrix[10]=p*g-m,this.matrix[11]=p*g+m,this.matrix[12]=f+p*g},isNeutralState:function(l){return this.calculateMatrix(),u.BaseFilter.prototype.isNeutralState.call(this,l)},applyTo:function(l){this.calculateMatrix(),u.BaseFilter.prototype.applyTo.call(this,l)}}),s.Image.filters.HueRotation.fromObject=s.Image.filters.BaseFilter.fromObject}(e),function(a){var s=a.fabric||(a.fabric={}),u=s.util.object.clone;if(s.Text){s.warn("fabric.Text is already defined");return}var h="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");s.Text=s.util.createClass(s.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:s.Object.prototype.stateProperties.concat(h),cacheProperties:s.Object.prototype.cacheProperties.concat(h),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(l,f){this.styles=f?f.styles||{}:{},this.text=l,this.__skipDimension=!0,this.callSuper("initialize",f),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var l=this.path;l&&(l.segmentsInfo=s.util.getPathSegmentsInfo(l.path))},getMeasuringContext:function(){return s._measuringContext||(s._measuringContext=this.canvas&&this.canvas.contextCache||s.util.createCanvasElement().getContext("2d")),s._measuringContext},_splitText:function(){var l=this._splitTextIntoLines(this.text);return this.textLines=l.lines,this._textLines=l.graphemeLines,this._unwrappedTextLines=l._unwrappedLines,this._text=l.graphemeText,l},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var l,f,c,p,m,g,v,y=0,b=this._textLines.length;y<b;y++)if(!(this.textAlign!=="justify"&&(y===b-1||this.isEndOfWrapping(y)))&&(p=0,m=this._textLines[y],f=this.getLineWidth(y),f<this.width&&(v=this.textLines[y].match(this._reSpacesAndTabs)))){c=v.length,l=(this.width-f)/c;for(var w=0,C=m.length;w<=C;w++)g=this.__charBounds[y][w],this._reSpaceAndTab.test(m[w])?(g.width+=l,g.kernedWidth+=l,g.left+=p,p+=l):g.left+=p}},isEndOfWrapping:function(l){return l===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var l=this.callSuper("_getCacheCanvasDimensions"),f=this.fontSize;return l.width+=f*l.zoomX,l.height+=f*l.zoomY,l},_render:function(l){var f=this.path;f&&!f.isNotVisible()&&f._render(l),this._setTextStyles(l),this._renderTextLinesBackground(l),this._renderTextDecoration(l,"underline"),this._renderText(l),this._renderTextDecoration(l,"overline"),this._renderTextDecoration(l,"linethrough")},_renderText:function(l){this.paintFirst==="stroke"?(this._renderTextStroke(l),this._renderTextFill(l)):(this._renderTextFill(l),this._renderTextStroke(l))},_setTextStyles:function(l,f,c){if(l.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":l.textBaseline="middle";break;case"ascender":l.textBaseline="top";break;case"descender":l.textBaseline="bottom";break}l.font=this._getFontDeclaration(f,c)},calcTextWidth:function(){for(var l=this.getLineWidth(0),f=1,c=this._textLines.length;f<c;f++){var p=this.getLineWidth(f);p>l&&(l=p)}return l},_renderTextLine:function(l,f,c,p,m,g){this._renderChars(l,f,c,p,m,g)},_renderTextLinesBackground:function(l){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var f,c,p=l.fillStyle,m,g,v=this._getLeftOffset(),y=this._getTopOffset(),b=0,w=0,C,_,S=this.path,T,I=0,F=this._textLines.length;I<F;I++){if(f=this.getHeightOfLine(I),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",I)){y+=f;continue}m=this._textLines[I],c=this._getLineLeftOffset(I),w=0,b=0,g=this.getValueOfPropertyAt(I,0,"textBackgroundColor");for(var $=0,G=m.length;$<G;$++)C=this.__charBounds[I][$],_=this.getValueOfPropertyAt(I,$,"textBackgroundColor"),S?(l.save(),l.translate(C.renderLeft,C.renderTop),l.rotate(C.angle),l.fillStyle=_,_&&l.fillRect(-C.width/2,-f/this.lineHeight*(1-this._fontSizeFraction),C.width,f/this.lineHeight),l.restore()):_!==g?(T=v+c+b,this.direction==="rtl"&&(T=this.width-T-w),l.fillStyle=g,g&&l.fillRect(T,y,w,f/this.lineHeight),b=C.left,w=C.width,g=_):w+=C.kernedWidth;_&&!S&&(T=v+c+b,this.direction==="rtl"&&(T=this.width-T-w),l.fillStyle=_,l.fillRect(T,y,w,f/this.lineHeight)),y+=f}l.fillStyle=p,this._removeShadow(l)}},getFontCache:function(l){var f=l.fontFamily.toLowerCase();s.charWidthsCache[f]||(s.charWidthsCache[f]={});var c=s.charWidthsCache[f],p=l.fontStyle.toLowerCase()+"_"+(l.fontWeight+"").toLowerCase();return c[p]||(c[p]={}),c[p]},_measureChar:function(l,f,c,p){var m=this.getFontCache(f),g=this._getFontDeclaration(f),v=this._getFontDeclaration(p),y=c+l,b=g===v,w,C,_,S=f.fontSize/this.CACHE_FONT_SIZE,T;if(c&&m[c]!==void 0&&(_=m[c]),m[l]!==void 0&&(T=w=m[l]),b&&m[y]!==void 0&&(C=m[y],T=C-_),w===void 0||_===void 0||C===void 0){var I=this.getMeasuringContext();this._setTextStyles(I,f,!0)}return w===void 0&&(T=w=I.measureText(l).width,m[l]=w),_===void 0&&b&&c&&(_=I.measureText(c).width,m[c]=_),b&&C===void 0&&(C=I.measureText(y).width,m[y]=C,T=C-_),{width:w*S,kernedWidth:T*S}},getHeightOfChar:function(l,f){return this.getValueOfPropertyAt(l,f,"fontSize")},measureLine:function(l){var f=this._measureLine(l);return this.charSpacing!==0&&(f.width-=this._getWidthOfCharSpacing()),f.width<0&&(f.width=0),f},_measureLine:function(l){var f=0,c,p,m=this._textLines[l],g,v,y=0,b=new Array(m.length),w=0,C,_,S=this.path,T=this.pathSide==="right";for(this.__charBounds[l]=b,c=0;c<m.length;c++)p=m[c],v=this._getGraphemeBox(p,l,c,g),b[c]=v,f+=v.kernedWidth,g=p;if(b[c]={left:v?v.left+v.width:0,width:0,kernedWidth:0,height:this.fontSize},S){switch(_=S.segmentsInfo[S.segmentsInfo.length-1].length,C=s.util.getPointOnPath(S.path,0,S.segmentsInfo),C.x+=S.pathOffset.x,C.y+=S.pathOffset.y,this.textAlign){case"left":w=T?_-f:0;break;case"center":w=(_-f)/2;break;case"right":w=T?0:_-f;break}for(w+=this.pathStartOffset*(T?-1:1),c=T?m.length-1:0;T?c>=0:c<m.length;T?c--:c++)v=b[c],w>_?w%=_:w<0&&(w+=_),this._setGraphemeOnPath(w,v,C),w+=v.kernedWidth}return{width:f,numOfSpaces:y}},_setGraphemeOnPath:function(l,f,c){var p=l+f.kernedWidth/2,m=this.path,g=s.util.getPointOnPath(m.path,p,m.segmentsInfo);f.renderLeft=g.x-c.x,f.renderTop=g.y-c.y,f.angle=g.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(l,f,c,p,m){var g=this.getCompleteStyleDeclaration(f,c),v=p?this.getCompleteStyleDeclaration(f,c-1):{},y=this._measureChar(l,g,p,v),b=y.kernedWidth,w=y.width,C;this.charSpacing!==0&&(C=this._getWidthOfCharSpacing(),w+=C,b+=C);var _={width:w,left:0,height:g.fontSize,kernedWidth:b,deltaY:g.deltaY};if(c>0&&!m){var S=this.__charBounds[f][c-1];_.left=S.left+S.width+y.kernedWidth-y.width}return _},getHeightOfLine:function(l){if(this.__lineHeights[l])return this.__lineHeights[l];for(var f=this._textLines[l],c=this.getHeightOfChar(l,0),p=1,m=f.length;p<m;p++)c=Math.max(this.getHeightOfChar(l,p),c);return this.__lineHeights[l]=c*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var l,f=0,c=0,p=this._textLines.length;c<p;c++)l=this.getHeightOfLine(c),f+=c===p-1?l/this.lineHeight:l;return f},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(l,f){l.save();for(var c=0,p=this._getLeftOffset(),m=this._getTopOffset(),g=0,v=this._textLines.length;g<v;g++){var y=this.getHeightOfLine(g),b=y/this.lineHeight,w=this._getLineLeftOffset(g);this._renderTextLine(f,l,this._textLines[g],p+w,m+c+b,g),c+=y}l.restore()},_renderTextFill:function(l){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(l,"fillText")},_renderTextStroke:function(l){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(l),l.save(),this._setLineDash(l,this.strokeDashArray),l.beginPath(),this._renderTextCommon(l,"strokeText"),l.closePath(),l.restore())},_renderChars:function(l,f,c,p,m,g){var v=this.getHeightOfLine(g),y=this.textAlign.indexOf("justify")!==-1,b,w,C="",_,S=0,T,I=this.path,F=!y&&this.charSpacing===0&&this.isEmptyStyles(g)&&!I,$=this.direction==="ltr",G=this.direction==="ltr"?1:-1,ne,X=f.canvas.getAttribute("dir");if(f.save(),X!==this.direction&&(f.canvas.setAttribute("dir",$?"ltr":"rtl"),f.direction=$?"ltr":"rtl",f.textAlign=$?"left":"right"),m-=v*this._fontSizeFraction/this.lineHeight,F){this._renderChar(l,f,g,0,c.join(""),p,m,v),f.restore();return}for(var Q=0,Z=c.length-1;Q<=Z;Q++)T=Q===Z||this.charSpacing||I,C+=c[Q],_=this.__charBounds[g][Q],S===0?(p+=G*(_.kernedWidth-_.width),S+=_.width):S+=_.kernedWidth,y&&!T&&this._reSpaceAndTab.test(c[Q])&&(T=!0),T||(b=b||this.getCompleteStyleDeclaration(g,Q),w=this.getCompleteStyleDeclaration(g,Q+1),T=s.util.hasStyleChanged(b,w,!1)),T&&(I?(f.save(),f.translate(_.renderLeft,_.renderTop),f.rotate(_.angle),this._renderChar(l,f,g,Q,C,-S/2,0,v),f.restore()):(ne=p,this._renderChar(l,f,g,Q,C,ne,m,v)),C="",b=w,p+=G*S,S=0);f.restore()},_applyPatternGradientTransformText:function(l){var f=s.util.createCanvasElement(),c,p=this.width+this.strokeWidth,m=this.height+this.strokeWidth;return f.width=p,f.height=m,c=f.getContext("2d"),c.beginPath(),c.moveTo(0,0),c.lineTo(p,0),c.lineTo(p,m),c.lineTo(0,m),c.closePath(),c.translate(p/2,m/2),c.fillStyle=l.toLive(c),this._applyPatternGradientTransform(c,l),c.fill(),c.createPattern(f,"no-repeat")},handleFiller:function(l,f,c){var p,m;return c.toLive?c.gradientUnits==="percentage"||c.gradientTransform||c.patternTransform?(p=-this.width/2,m=-this.height/2,l.translate(p,m),l[f]=this._applyPatternGradientTransformText(c),{offsetX:p,offsetY:m}):(l[f]=c.toLive(l,this),this._applyPatternGradientTransform(l,c)):(l[f]=c,{offsetX:0,offsetY:0})},_setStrokeStyles:function(l,f){return l.lineWidth=f.strokeWidth,l.lineCap=this.strokeLineCap,l.lineDashOffset=this.strokeDashOffset,l.lineJoin=this.strokeLineJoin,l.miterLimit=this.strokeMiterLimit,this.handleFiller(l,"strokeStyle",f.stroke)},_setFillStyles:function(l,f){return this.handleFiller(l,"fillStyle",f.fill)},_renderChar:function(l,f,c,p,m,g,v){var y=this._getStyleDeclaration(c,p),b=this.getCompleteStyleDeclaration(c,p),w=l==="fillText"&&b.fill,C=l==="strokeText"&&b.stroke&&b.strokeWidth,_,S;!C&&!w||(f.save(),w&&(_=this._setFillStyles(f,b)),C&&(S=this._setStrokeStyles(f,b)),f.font=this._getFontDeclaration(b),y&&y.textBackgroundColor&&this._removeShadow(f),y&&y.deltaY&&(v+=y.deltaY),w&&f.fillText(m,g-_.offsetX,v-_.offsetY),C&&f.strokeText(m,g-S.offsetX,v-S.offsetY),f.restore())},setSuperscript:function(l,f){return this._setScript(l,f,this.superscript)},setSubscript:function(l,f){return this._setScript(l,f,this.subscript)},_setScript:function(l,f,c){var p=this.get2DCursorLocation(l,!0),m=this.getValueOfPropertyAt(p.lineIndex,p.charIndex,"fontSize"),g=this.getValueOfPropertyAt(p.lineIndex,p.charIndex,"deltaY"),v={fontSize:m*c.size,deltaY:g+m*c.baseline};return this.setSelectionStyles(v,l,f),this},_getLineLeftOffset:function(l){var f=this.getLineWidth(l),c=this.width-f,p=this.textAlign,m=this.direction,v,g=0,v=this.isEndOfWrapping(l);return p==="justify"||p==="justify-center"&&!v||p==="justify-right"&&!v||p==="justify-left"&&!v?0:(p==="center"&&(g=c/2),p==="right"&&(g=c),p==="justify-center"&&(g=c/2),p==="justify-right"&&(g=c),m==="rtl"&&(g-=c),g)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var l=this._forceClearCache;return l||(l=this.hasStateChanged("_dimensionAffectingProps")),l&&(this.dirty=!0,this._forceClearCache=!1),l},getLineWidth:function(l){if(this.__lineWidths[l]!==void 0)return this.__lineWidths[l];var f=this.measureLine(l),c=f.width;return this.__lineWidths[l]=c,c},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(l,f,c){var p=this._getStyleDeclaration(l,f);return p&&typeof p[c]<"u"?p[c]:this[c]},_renderTextDecoration:function(l,f){if(!(!this[f]&&!this.styleHas(f))){for(var c,p,m,g,v,y,b,w,C=this._getLeftOffset(),_=this._getTopOffset(),S,T,I,F,$,G,ne,X,Q=this.path,Z=this._getWidthOfCharSpacing(),ie=this.offsets[f],V=0,k=this._textLines.length;V<k;V++){if(c=this.getHeightOfLine(V),!this[f]&&!this.styleHas(f,V)){_+=c;continue}b=this._textLines[V],G=c/this.lineHeight,g=this._getLineLeftOffset(V),T=0,I=0,w=this.getValueOfPropertyAt(V,0,f),X=this.getValueOfPropertyAt(V,0,"fill"),S=_+G*(1-this._fontSizeFraction),p=this.getHeightOfChar(V,0),v=this.getValueOfPropertyAt(V,0,"deltaY");for(var P=0,A=b.length;P<A;P++)if(F=this.__charBounds[V][P],$=this.getValueOfPropertyAt(V,P,f),ne=this.getValueOfPropertyAt(V,P,"fill"),m=this.getHeightOfChar(V,P),y=this.getValueOfPropertyAt(V,P,"deltaY"),Q&&$&&ne)l.save(),l.fillStyle=X,l.translate(F.renderLeft,F.renderTop),l.rotate(F.angle),l.fillRect(-F.kernedWidth/2,ie*m+y,F.kernedWidth,this.fontSize/15),l.restore();else if(($!==w||ne!==X||m!==p||y!==v)&&I>0){var j=C+g+T;this.direction==="rtl"&&(j=this.width-j-I),w&&X&&(l.fillStyle=X,l.fillRect(j,S+ie*p+v,I,this.fontSize/15)),T=F.left,I=F.width,w=$,X=ne,p=m,v=y}else I+=F.kernedWidth;var j=C+g+T;this.direction==="rtl"&&(j=this.width-j-I),l.fillStyle=ne,$&&ne&&l.fillRect(j,S+ie*p+v,I-Z,this.fontSize/15),_+=c}this._removeShadow(l)}},_getFontDeclaration:function(l,f){var c=l||this,p=this.fontFamily,m=s.Text.genericFonts.indexOf(p.toLowerCase())>-1,g=p===void 0||p.indexOf("'")>-1||p.indexOf(",")>-1||p.indexOf('"')>-1||m?c.fontFamily:'"'+c.fontFamily+'"';return[s.isLikelyNode?c.fontWeight:c.fontStyle,s.isLikelyNode?c.fontStyle:c.fontWeight,f?this.CACHE_FONT_SIZE+"px":c.fontSize+"px",g].join(" ")},render:function(l){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",l)))},_splitTextIntoLines:function(l){for(var f=l.split(this._reNewline),c=new Array(f.length),p=[`
`],m=[],g=0;g<f.length;g++)c[g]=s.util.string.graphemeSplit(f[g]),m=m.concat(c[g],p);return m.pop(),{_unwrappedLines:c,lines:f,graphemeText:m,graphemeLines:c}},toObject:function(l){var f=h.concat(l),c=this.callSuper("toObject",f);return c.styles=s.util.stylesToArray(this.styles,this.text),c.path&&(c.path=this.path.toObject()),c},set:function(l,f){this.callSuper("set",l,f);var c=!1,p=!1;if(typeof l=="object")for(var m in l)m==="path"&&this.setPathInfo(),c=c||this._dimensionAffectingProps.indexOf(m)!==-1,p=p||m==="path";else c=this._dimensionAffectingProps.indexOf(l)!==-1,p=l==="path";return p&&this.setPathInfo(),c&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),s.Text.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),s.Text.DEFAULT_SVG_FONT_SIZE=16,s.Text.fromElement=function(l,f,c){if(!l)return f(null);var p=s.parseAttributes(l,s.Text.ATTRIBUTE_NAMES),m=p.textAnchor||"left";if(c=s.util.object.extend(c?u(c):{},p),c.top=c.top||0,c.left=c.left||0,p.textDecoration){var g=p.textDecoration;g.indexOf("underline")!==-1&&(c.underline=!0),g.indexOf("overline")!==-1&&(c.overline=!0),g.indexOf("line-through")!==-1&&(c.linethrough=!0),delete c.textDecoration}"dx"in p&&(c.left+=p.dx),"dy"in p&&(c.top+=p.dy),"fontSize"in c||(c.fontSize=s.Text.DEFAULT_SVG_FONT_SIZE);var v="";"textContent"in l?v=l.textContent:"firstChild"in l&&l.firstChild!==null&&"data"in l.firstChild&&l.firstChild.data!==null&&(v=l.firstChild.data),v=v.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var y=c.strokeWidth;c.strokeWidth=0;var b=new s.Text(v,c),w=b.getScaledHeight()/b.height,C=(b.height+b.strokeWidth)*b.lineHeight-b.height,_=C*w,S=b.getScaledHeight()+_,T=0;m==="center"&&(T=b.getScaledWidth()/2),m==="right"&&(T=b.getScaledWidth()),b.set({left:b.left-T,top:b.top-(S-b.fontSize*(.07+b._fontSizeFraction))/b.lineHeight,strokeWidth:typeof y<"u"?y:1}),f(b)},s.Text.fromObject=function(l,f){var c=u(l),p=l.path;return delete c.path,s.Object._fromObject("Text",c,function(m){m.styles=s.util.stylesFromArray(l.styles,l.text),p?s.Object._fromObject("Path",p,function(g){m.set("path",g),f(m)},"path"):f(m)},"text")},s.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],s.util.createAccessors&&s.util.createAccessors(s.Text)}(e),function(){t.util.object.extend(t.Text.prototype,{isEmptyStyles:function(a){if(!this.styles||typeof a<"u"&&!this.styles[a])return!0;var s=typeof a>"u"?this.styles:{line:this.styles[a]};for(var u in s)for(var h in s[u])for(var l in s[u][h])return!1;return!0},styleHas:function(a,s){if(!this.styles||!a||a===""||typeof s<"u"&&!this.styles[s])return!1;var u=typeof s>"u"?this.styles:{0:this.styles[s]};for(var h in u)for(var l in u[h])if(typeof u[h][l][a]<"u")return!0;return!1},cleanStyle:function(a){if(!this.styles||!a||a==="")return!1;var s=this.styles,u=0,h,l,f=!0,c=0,p;for(var m in s){h=0;for(var g in s[m]){var p=s[m][g],v=p.hasOwnProperty(a);u++,v?(l?p[a]!==l&&(f=!1):l=p[a],p[a]===this[a]&&delete p[a]):f=!1,Object.keys(p).length!==0?h++:delete s[m][g]}h===0&&delete s[m]}for(var y=0;y<this._textLines.length;y++)c+=this._textLines[y].length;f&&u===c&&(this[a]=l,this.removeStyle(a))},removeStyle:function(a){if(!(!this.styles||!a||a==="")){var s=this.styles,u,h,l;for(h in s){u=s[h];for(l in u)delete u[l][a],Object.keys(u[l]).length===0&&delete u[l];Object.keys(u).length===0&&delete s[h]}}},_extendStyles:function(a,s){var u=this.get2DCursorLocation(a);this._getLineStyle(u.lineIndex)||this._setLineStyle(u.lineIndex),this._getStyleDeclaration(u.lineIndex,u.charIndex)||this._setStyleDeclaration(u.lineIndex,u.charIndex,{}),t.util.object.extend(this._getStyleDeclaration(u.lineIndex,u.charIndex),s)},get2DCursorLocation:function(a,s){typeof a>"u"&&(a=this.selectionStart);for(var u=s?this._unwrappedTextLines:this._textLines,h=u.length,l=0;l<h;l++){if(a<=u[l].length)return{lineIndex:l,charIndex:a};a-=u[l].length+this.missingNewlineOffset(l)}return{lineIndex:l-1,charIndex:u[l-1].length<a?u[l-1].length:a}},getSelectionStyles:function(a,s,u){typeof a>"u"&&(a=this.selectionStart||0),typeof s>"u"&&(s=this.selectionEnd||a);for(var h=[],l=a;l<s;l++)h.push(this.getStyleAtPosition(l,u));return h},getStyleAtPosition:function(a,s){var u=this.get2DCursorLocation(a),h=s?this.getCompleteStyleDeclaration(u.lineIndex,u.charIndex):this._getStyleDeclaration(u.lineIndex,u.charIndex);return h||{}},setSelectionStyles:function(a,s,u){typeof s>"u"&&(s=this.selectionStart||0),typeof u>"u"&&(u=this.selectionEnd||s);for(var h=s;h<u;h++)this._extendStyles(h,a);return this._forceClearCache=!0,this},_getStyleDeclaration:function(a,s){var u=this.styles&&this.styles[a];return u?u[s]:null},getCompleteStyleDeclaration:function(a,s){for(var u=this._getStyleDeclaration(a,s)||{},h={},l,f=0;f<this._styleProperties.length;f++)l=this._styleProperties[f],h[l]=typeof u[l]>"u"?this[l]:u[l];return h},_setStyleDeclaration:function(a,s,u){this.styles[a][s]=u},_deleteStyleDeclaration:function(a,s){delete this.styles[a][s]},_getLineStyle:function(a){return!!this.styles[a]},_setLineStyle:function(a){this.styles[a]={}},_deleteLineStyle:function(a){delete this.styles[a]}})}(),function(){function a(s){s.textDecoration&&(s.textDecoration.indexOf("underline")>-1&&(s.underline=!0),s.textDecoration.indexOf("line-through")>-1&&(s.linethrough=!0),s.textDecoration.indexOf("overline")>-1&&(s.overline=!0),delete s.textDecoration)}t.IText=t.util.createClass(t.Text,t.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(s,u){this.callSuper("initialize",s,u),this.initBehavior()},setSelectionStart:function(s){s=Math.max(s,0),this._updateAndFire("selectionStart",s)},setSelectionEnd:function(s){s=Math.min(s,this.text.length),this._updateAndFire("selectionEnd",s)},_updateAndFire:function(s,u){this[s]!==u&&(this._fireSelectionChanged(),this[s]=u),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(s){this.clearContextTop(),this.callSuper("render",s),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(s){this.callSuper("_render",s)},clearContextTop:function(s){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var u=this.canvas.contextTop,h=this.canvas.viewportTransform;u.save(),u.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this.transform(u),this._clearTextArea(u),s||u.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var s=this._getCursorBoundaries(),u=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(s,u):this.renderSelection(s,u),u.restore()}},_clearTextArea:function(s){var u=this.width+4,h=this.height+4;s.clearRect(-u/2,-h/2,u,h)},_getCursorBoundaries:function(s){typeof s>"u"&&(s=this.selectionStart);var u=this._getLeftOffset(),h=this._getTopOffset(),l=this._getCursorBoundariesOffsets(s);return{left:u,top:h,leftOffset:l.left,topOffset:l.top}},_getCursorBoundariesOffsets:function(s){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var u,h,l,f=0,c=0,p,m=this.get2DCursorLocation(s);l=m.charIndex,h=m.lineIndex;for(var g=0;g<h;g++)f+=this.getHeightOfLine(g);u=this._getLineLeftOffset(h);var v=this.__charBounds[h][l];return v&&(c=v.left),this.charSpacing!==0&&l===this._textLines[h].length&&(c-=this._getWidthOfCharSpacing()),p={top:f,left:u+(c>0?c:0)},this.direction==="rtl"&&(p.left*=-1),this.cursorOffsetCache=p,this.cursorOffsetCache},renderCursor:function(s,u){var h=this.get2DCursorLocation(),l=h.lineIndex,f=h.charIndex>0?h.charIndex-1:0,c=this.getValueOfPropertyAt(l,f,"fontSize"),p=this.scaleX*this.canvas.getZoom(),m=this.cursorWidth/p,g=s.topOffset,v=this.getValueOfPropertyAt(l,f,"deltaY");g+=(1-this._fontSizeFraction)*this.getHeightOfLine(l)/this.lineHeight-c*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(s,u),u.fillStyle=this.cursorColor||this.getValueOfPropertyAt(l,f,"fill"),u.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,u.fillRect(s.left+s.leftOffset-m/2,g+s.top+v,m,c)},renderSelection:function(s,u){for(var h=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,l=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,f=this.textAlign.indexOf("justify")!==-1,c=this.get2DCursorLocation(h),p=this.get2DCursorLocation(l),m=c.lineIndex,g=p.lineIndex,v=c.charIndex<0?0:c.charIndex,y=p.charIndex<0?0:p.charIndex,b=m;b<=g;b++){var w=this._getLineLeftOffset(b)||0,C=this.getHeightOfLine(b),_=0,S=0,T=0;if(b===m&&(S=this.__charBounds[m][v].left),b>=m&&b<g)T=f&&!this.isEndOfWrapping(b)?this.width:this.getLineWidth(b)||5;else if(b===g)if(y===0)T=this.__charBounds[g][y].left;else{var I=this._getWidthOfCharSpacing();T=this.__charBounds[g][y-1].left+this.__charBounds[g][y-1].width-I}_=C,(this.lineHeight<1||b===g&&this.lineHeight>1)&&(C/=this.lineHeight);var F=s.left+w+S,$=T-S,G=C,ne=0;this.inCompositionMode?(u.fillStyle=this.compositionColor||"black",G=1,ne=C):u.fillStyle=this.selectionColor,this.direction==="rtl"&&(F=this.width-F-$),u.fillRect(F,s.top+s.topOffset+ne,$,G),s.topOffset+=_}},getCurrentCharFontSize:function(){var s=this._getCurrentCharIndex();return this.getValueOfPropertyAt(s.l,s.c,"fontSize")},getCurrentCharColor:function(){var s=this._getCurrentCharIndex();return this.getValueOfPropertyAt(s.l,s.c,"fill")},_getCurrentCharIndex:function(){var s=this.get2DCursorLocation(this.selectionStart,!0),u=s.charIndex>0?s.charIndex-1:0;return{l:s.lineIndex,c:u}}}),t.IText.fromObject=function(s,u){var h=t.util.stylesFromArray(s.styles,s.text),l=Object.assign({},s,{styles:h});if(a(l),l.styles)for(var f in l.styles)for(var c in l.styles[f])a(l.styles[f][c]);t.Object._fromObject("IText",l,u,"text")}}(),function(){var a=t.util.object.clone;t.util.object.extend(t.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var s=this;this.on("added",function(){var u=s.canvas;u&&(u._hasITextHandlers||(u._hasITextHandlers=!0,s._initCanvasHandlers(u)),u._iTextInstances=u._iTextInstances||[],u._iTextInstances.push(s))})},initRemovedHandler:function(){var s=this;this.on("removed",function(){var u=s.canvas;u&&(u._iTextInstances=u._iTextInstances||[],t.util.removeFromArray(u._iTextInstances,s),u._iTextInstances.length===0&&(u._hasITextHandlers=!1,s._removeCanvasHandlers(u)))})},_initCanvasHandlers:function(s){s._mouseUpITextHandler=function(){s._iTextInstances&&s._iTextInstances.forEach(function(u){u.__isMousedown=!1})},s.on("mouse:up",s._mouseUpITextHandler)},_removeCanvasHandlers:function(s){s.off("mouse:up",s._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(s,u,h,l){var f;return f={isAborted:!1,abort:function(){this.isAborted=!0}},s.animate("_currentCursorOpacity",u,{duration:h,onComplete:function(){f.isAborted||s[l]()},onChange:function(){s.canvas&&s.selectionStart===s.selectionEnd&&s.renderCursorOrSelection()},abort:function(){return f.isAborted}}),f},_onTickComplete:function(){var s=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){s._currentTickCompleteState=s._animateCursor(s,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(s){var u=this,h=s?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){u._tick()},h)},abortCursorAnimation:function(){var s=this._currentTickState||this._currentTickCompleteState,u=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,s&&u&&u.clearContext(u.contextTop||u.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(s){var u=0,h=s-1;if(this._reSpace.test(this._text[h]))for(;this._reSpace.test(this._text[h]);)u++,h--;for(;/\S/.test(this._text[h])&&h>-1;)u++,h--;return s-u},findWordBoundaryRight:function(s){var u=0,h=s;if(this._reSpace.test(this._text[h]))for(;this._reSpace.test(this._text[h]);)u++,h++;for(;/\S/.test(this._text[h])&&h<this._text.length;)u++,h++;return s+u},findLineBoundaryLeft:function(s){for(var u=0,h=s-1;!/\n/.test(this._text[h])&&h>-1;)u++,h--;return s-u},findLineBoundaryRight:function(s){for(var u=0,h=s;!/\n/.test(this._text[h])&&h<this._text.length;)u++,h++;return s+u},searchWordBoundary:function(s,u){for(var h=this._text,l=this._reSpace.test(h[s])?s-1:s,f=h[l],c=t.reNonWord;!c.test(f)&&l>0&&l<h.length;)l+=u,f=h[l];return c.test(f)&&(l+=u===1?0:1),l},selectWord:function(s){s=s||this.selectionStart;var u=this.searchWordBoundary(s,-1),h=this.searchWordBoundary(s,1);this.selectionStart=u,this.selectionEnd=h,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(s){s=s||this.selectionStart;var u=this.findLineBoundaryLeft(s),h=this.findLineBoundaryRight(s);return this.selectionStart=u,this.selectionEnd=h,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(s){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(s),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(s){s._iTextInstances&&s._iTextInstances.forEach(function(u){u.selected=!1,u.isEditing&&u.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(s){if(!(!this.__isMousedown||!this.isEditing)){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var u=this.getSelectionStartFromPointer(s.e),h=this.selectionStart,l=this.selectionEnd;(u!==this.__selectionStartOnMouseDown||h===l)&&(h===u||l===u)||(u>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=u):(this.selectionStart=u,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==h||this.selectionEnd!==l)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(s,u,h){var l=h.slice(0,s),f=t.util.string.graphemeSplit(l).length;if(s===u)return{selectionStart:f,selectionEnd:f};var c=h.slice(s,u),p=t.util.string.graphemeSplit(c).length;return{selectionStart:f,selectionEnd:f+p}},fromGraphemeToStringSelection:function(s,u,h){var l=h.slice(0,s),f=l.join("").length;if(s===u)return{selectionStart:f,selectionEnd:f};var c=h.slice(s,u),p=c.join("").length;return{selectionStart:f,selectionEnd:f+p}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var s=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=s.selectionStart,this.hiddenTextarea.selectionEnd=s.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var s=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=s.selectionEnd,this.inCompositionMode||(this.selectionStart=s.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var s=this._calcTextareaPosition();this.hiddenTextarea.style.left=s.left,this.hiddenTextarea.style.top=s.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var s=this.inCompositionMode?this.compositionStart:this.selectionStart,u=this._getCursorBoundaries(s),h=this.get2DCursorLocation(s),l=h.lineIndex,f=h.charIndex,c=this.getValueOfPropertyAt(l,f,"fontSize")*this.lineHeight,p=u.leftOffset,m=this.calcTransformMatrix(),g={x:u.left+p,y:u.top+u.topOffset+c},v=this.canvas.getRetinaScaling(),y=this.canvas.upperCanvasEl,b=y.width/v,w=y.height/v,C=b-c,_=w-c,S=y.clientWidth/b,T=y.clientHeight/w;return g=t.util.transformPoint(g,m),g=t.util.transformPoint(g,this.canvas.viewportTransform),g.x*=S,g.y*=T,g.x<0&&(g.x=0),g.x>C&&(g.x=C),g.y<0&&(g.y=0),g.y>_&&(g.y=_),g.x+=this.canvas._offset.left,g.y+=this.canvas._offset.top,{left:g.x+"px",top:g.y+"px",fontSize:c+"px",charHeight:c}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var s=this._textBeforeEdit!==this.text,u=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,u&&(u.blur&&u.blur(),u.parentNode&&u.parentNode.removeChild(u)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),s&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),s&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var s in this.styles)this._textLines[s]||delete this.styles[s]},removeStyleFromTo:function(s,u){var h=this.get2DCursorLocation(s,!0),l=this.get2DCursorLocation(u,!0),f=h.lineIndex,c=h.charIndex,p=l.lineIndex,m=l.charIndex,g,v;if(f!==p){if(this.styles[f])for(g=c;g<this._unwrappedTextLines[f].length;g++)delete this.styles[f][g];if(this.styles[p])for(g=m;g<this._unwrappedTextLines[p].length;g++)v=this.styles[p][g],v&&(this.styles[f]||(this.styles[f]={}),this.styles[f][c+g-m]=v);for(g=f+1;g<=p;g++)delete this.styles[g];this.shiftLineStyles(p,f-p)}else if(this.styles[f]){v=this.styles[f];var y=m-c,b,w;for(g=c;g<m;g++)delete v[g];for(w in this.styles[f])b=parseInt(w,10),b>=m&&(v[b-y]=v[w],delete v[w])}},shiftLineStyles:function(s,u){var h=a(this.styles);for(var l in this.styles){var f=parseInt(l,10);f>s&&(this.styles[f+u]=h[f],h[f-u]||delete this.styles[f])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(s,u,h,l){var f,c={},p=!1,m=this._unwrappedTextLines[s].length===u;h||(h=1),this.shiftLineStyles(s,h),this.styles[s]&&(f=this.styles[s][u===0?u:u-1]);for(var g in this.styles[s]){var v=parseInt(g,10);v>=u&&(p=!0,c[v-u]=this.styles[s][g],m&&u===0||delete this.styles[s][g])}var y=!1;for(p&&!m&&(this.styles[s+h]=c,y=!0),y&&h--;h>0;)l&&l[h-1]?this.styles[s+h]={0:a(l[h-1])}:f?this.styles[s+h]={0:a(f)}:delete this.styles[s+h],h--;this._forceClearCache=!0},insertCharStyleObject:function(s,u,h,l){this.styles||(this.styles={});var f=this.styles[s],c=f?a(f):{};h||(h=1);for(var p in c){var m=parseInt(p,10);m>=u&&(f[m+h]=c[m],c[m-h]||delete f[m])}if(this._forceClearCache=!0,l){for(;h--;)Object.keys(l[h]).length&&(this.styles[s]||(this.styles[s]={}),this.styles[s][u+h]=a(l[h]));return}if(f)for(var g=f[u?u-1:1];g&&h--;)this.styles[s][u+h]=a(g)},insertNewStyleBlock:function(s,u,h){for(var l=this.get2DCursorLocation(u,!0),f=[0],c=0,p=0;p<s.length;p++)s[p]===`
`?(c++,f[c]=0):f[c]++;f[0]>0&&(this.insertCharStyleObject(l.lineIndex,l.charIndex,f[0],h),h=h&&h.slice(f[0]+1)),c&&this.insertNewlineStyleObject(l.lineIndex,l.charIndex+f[0],c);for(var p=1;p<c;p++)f[p]>0?this.insertCharStyleObject(l.lineIndex+p,0,f[p],h):h&&this.styles[l.lineIndex+p]&&h[0]&&(this.styles[l.lineIndex+p][0]=h[0]),h=h&&h.slice(f[p]+1);f[p]>0&&this.insertCharStyleObject(l.lineIndex+p,0,f[p],h)},setSelectionStartEndWithShift:function(s,u,h){h<=s?(u===s?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=s),this.selectionStart=h):h>s&&h<u?this._selectionDirection==="right"?this.selectionEnd=h:this.selectionStart=h:(u===s?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=u),this.selectionEnd=h)},setSelectionInBoundaries:function(){var s=this.text.length;this.selectionStart>s?this.selectionStart=s:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>s?this.selectionEnd=s:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),t.util.object.extend(t.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(a){if(this.canvas){this.__newClickTime=+new Date;var s=a.pointer;this.isTripleClick(s)&&(this.fire("tripleclick",a),this._stopEvent(a.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=s,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(a){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===a.x&&this.__lastPointer.y===a.y},_stopEvent:function(a){a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(a){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(a.e))},tripleClickHandler:function(a){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(a.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(a){!this.canvas||!this.editable||a.e.button&&a.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(a.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(a){!this.canvas||!this.editable||a.e.button&&a.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(a){if(this.__isMousedown=!1,!(!this.editable||this.group||a.transform&&a.transform.actionPerformed||a.e.button&&a.e.button!==1)){if(this.canvas){var s=this.canvas._activeObject;if(s&&s!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(a.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(a){var s=this.getSelectionStartFromPointer(a),u=this.selectionStart,h=this.selectionEnd;a.shiftKey?this.setSelectionStartEndWithShift(u,h,s):(this.selectionStart=s,this.selectionEnd=s),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(a){for(var s=this.getLocalPointer(a),u=0,h=0,l=0,f=0,c=0,p,m,g=0,v=this._textLines.length;g<v&&l<=s.y;g++)l+=this.getHeightOfLine(g)*this.scaleY,c=g,g>0&&(f+=this._textLines[g-1].length+this.missingNewlineOffset(g-1));p=this._getLineLeftOffset(c),h=p*this.scaleX,m=this._textLines[c],this.direction==="rtl"&&(s.x=this.width*this.scaleX-s.x+h);for(var y=0,b=m.length;y<b&&(u=h,h+=this.__charBounds[c][y].kernedWidth*this.scaleX,h<=s.x);y++)f++;return this._getNewSelectionStartFromOffset(s,u,h,f,b)},_getNewSelectionStartFromOffset:function(a,s,u,h,l){var f=a.x-s,c=u-a.x,p=c>f||c<0?0:1,m=h+p;return this.flipX&&(m=l-m),m>this._text.length&&(m=this._text.length),m}}),t.util.object.extend(t.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=t.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var a=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+a.top+"; left: "+a.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+a.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):t.document.body.appendChild(this.hiddenTextarea),t.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),t.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),t.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),t.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),t.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),t.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(t.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(a){if(this.isEditing){var s=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(a.keyCode in s)this[s[a.keyCode]](a);else if(a.keyCode in this.ctrlKeysMapDown&&(a.ctrlKey||a.metaKey))this[this.ctrlKeysMapDown[a.keyCode]](a);else return;a.stopImmediatePropagation(),a.preventDefault(),a.keyCode>=33&&a.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(a){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(a.keyCode in this.ctrlKeysMapUp&&(a.ctrlKey||a.metaKey))this[this.ctrlKeysMapUp[a.keyCode]](a);else return;a.stopImmediatePropagation(),a.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(a){var s=this.fromPaste;if(this.fromPaste=!1,a&&a.stopPropagation(),!!this.isEditing){var u=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,h=this._text.length,l=u.length,f,c,p=l-h,m=this.selectionStart,g=this.selectionEnd,v=m!==g,y,b,w;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var C=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),_=m>C.selectionStart;v?(f=this._text.slice(m,g),p+=g-m):l<h&&(_?f=this._text.slice(g+p,g):f=this._text.slice(m,m-p)),c=u.slice(C.selectionEnd-p,C.selectionEnd),f&&f.length&&(c.length&&(y=this.getSelectionStyles(m,m+1,!1),y=c.map(function(){return y[0]})),v?(b=m,w=g):_?(b=g-f.length,w=g):(b=g,w=g+f.length),this.removeStyleFromTo(b,w)),c.length&&(s&&c.join("")===t.copiedText&&!t.disableStyleCopyPaste&&(y=t.copiedTextStyle),this.insertNewStyleBlock(c,m,y)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(a){this.compositionStart=a.target.selectionStart,this.compositionEnd=a.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(t.copiedText=this.getSelectedText(),t.disableStyleCopyPaste?t.copiedTextStyle=null:t.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(a){return a&&a.clipboardData||t.window.clipboardData},_getWidthBeforeCursor:function(a,s){var u=this._getLineLeftOffset(a),h;return s>0&&(h=this.__charBounds[a][s-1],u+=h.left+h.width),u},getDownCursorOffset:function(a,s){var u=this._getSelectionForOffset(a,s),h=this.get2DCursorLocation(u),l=h.lineIndex;if(l===this._textLines.length-1||a.metaKey||a.keyCode===34)return this._text.length-u;var f=h.charIndex,c=this._getWidthBeforeCursor(l,f),p=this._getIndexOnLine(l+1,c),m=this._textLines[l].slice(f);return m.length+p+1+this.missingNewlineOffset(l)},_getSelectionForOffset:function(a,s){return a.shiftKey&&this.selectionStart!==this.selectionEnd&&s?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(a,s){var u=this._getSelectionForOffset(a,s),h=this.get2DCursorLocation(u),l=h.lineIndex;if(l===0||a.metaKey||a.keyCode===33)return-u;var f=h.charIndex,c=this._getWidthBeforeCursor(l,f),p=this._getIndexOnLine(l-1,c),m=this._textLines[l].slice(0,f),g=this.missingNewlineOffset(l-1);return-this._textLines[l-1].length+p-m.length+(1-g)},_getIndexOnLine:function(a,s){for(var u=this._textLines[a],h=this._getLineLeftOffset(a),l=h,f=0,c,p,m=0,g=u.length;m<g;m++)if(c=this.__charBounds[a][m].width,l+=c,l>s){p=!0;var v=l-c,y=l,b=Math.abs(v-s),w=Math.abs(y-s);f=w<b?m:m-1;break}return p||(f=u.length-1),f},moveCursorDown:function(a){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",a)},moveCursorUp:function(a){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",a)},_moveCursorUpOrDown:function(a,s){var u="get"+a+"CursorOffset",h=this[u](s,this._selectionDirection==="right");s.shiftKey?this.moveCursorWithShift(h):this.moveCursorWithoutShift(h),h!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(a){var s=this._selectionDirection==="left"?this.selectionStart+a:this.selectionEnd+a;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,s),a!==0},moveCursorWithoutShift:function(a){return a<0?(this.selectionStart+=a,this.selectionEnd=this.selectionStart):(this.selectionEnd+=a,this.selectionStart=this.selectionEnd),a!==0},moveCursorLeft:function(a){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",a)},_move:function(a,s,u){var h;if(a.altKey)h=this["findWordBoundary"+u](this[s]);else if(a.metaKey||a.keyCode===35||a.keyCode===36)h=this["findLineBoundary"+u](this[s]);else return this[s]+=u==="Left"?-1:1,!0;if(typeof h<"u"&&this[s]!==h)return this[s]=h,!0},_moveLeft:function(a,s){return this._move(a,s,"Left")},_moveRight:function(a,s){return this._move(a,s,"Right")},moveCursorLeftWithoutShift:function(a){var s=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(s=this._moveLeft(a,"selectionStart")),this.selectionEnd=this.selectionStart,s},moveCursorLeftWithShift:function(a){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(a,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(a,"selectionStart")},moveCursorRight:function(a){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",a)},_moveCursorLeftOrRight:function(a,s){var u="moveCursor"+a+"With";this._currentCursorOpacity=1,s.shiftKey?u+="Shift":u+="outShift",this[u](s)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(a){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(a,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(a,"selectionEnd")},moveCursorRightWithoutShift:function(a){var s=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(s=this._moveRight(a,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,s},removeChars:function(a,s){typeof s>"u"&&(s=a+1),this.removeStyleFromTo(a,s),this._text.splice(a,s-a),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(a,s,u,h){typeof h>"u"&&(h=u),h>u&&this.removeStyleFromTo(u,h);var l=t.util.string.graphemeSplit(a);this.insertNewStyleBlock(l,u,s),this._text=[].concat(this._text.slice(0,u),l,this._text.slice(h)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var a=t.util.toFixed,s=/  +/g;t.util.object.extend(t.Text.prototype,{_toSVG:function(){var u=this._getSVGLeftTopOffsets(),h=this._getSVGTextAndBg(u.textTop,u.textLeft);return this._wrapSVGTextAndBg(h)},toSVG:function(u){return this._createBaseSVGMarkup(this._toSVG(),{reviver:u,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(u){var h=!0,l=this.getSvgTextDecoration(this);return[u.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",l?'text-decoration="'+l+'" ':"",'style="',this.getSvgStyles(h),'"',this.addPaintOrder()," >",u.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(u,h){var l=[],f=[],c=u,p;this._setSVGBg(f);for(var m=0,g=this._textLines.length;m<g;m++)p=this._getLineLeftOffset(m),(this.textBackgroundColor||this.styleHas("textBackgroundColor",m))&&this._setSVGTextLineBg(f,m,h+p,c),this._setSVGTextLineText(l,m,h+p,c),c+=this.getHeightOfLine(m);return{textSpans:l,textBgRects:f}},_createTextCharSpan:function(u,h,l,f){var c=u!==u.trim()||u.match(s),p=this.getSvgSpanStyles(h,c),m=p?'style="'+p+'"':"",g=h.deltaY,v="",y=t.Object.NUM_FRACTION_DIGITS;return g&&(v=' dy="'+a(g,y)+'" '),['<tspan x="',a(l,y),'" y="',a(f,y),'" ',v,m,">",t.util.string.escapeXml(u),"</tspan>"].join("")},_setSVGTextLineText:function(u,h,l,f){var c=this.getHeightOfLine(h),p=this.textAlign.indexOf("justify")!==-1,m,g,v="",y,b,w=0,C=this._textLines[h],_;f+=c*(1-this._fontSizeFraction)/this.lineHeight;for(var S=0,T=C.length-1;S<=T;S++)_=S===T||this.charSpacing,v+=C[S],y=this.__charBounds[h][S],w===0?(l+=y.kernedWidth-y.width,w+=y.width):w+=y.kernedWidth,p&&!_&&this._reSpaceAndTab.test(C[S])&&(_=!0),_||(m=m||this.getCompleteStyleDeclaration(h,S),g=this.getCompleteStyleDeclaration(h,S+1),_=t.util.hasStyleChanged(m,g,!0)),_&&(b=this._getStyleDeclaration(h,S)||{},u.push(this._createTextCharSpan(v,b,l,f)),v="",m=g,l+=w,w=0)},_pushTextBgRect:function(u,h,l,f,c,p){var m=t.Object.NUM_FRACTION_DIGITS;u.push("		<rect ",this._getFillAttributes(h),' x="',a(l,m),'" y="',a(f,m),'" width="',a(c,m),'" height="',a(p,m),`"></rect>
`)},_setSVGTextLineBg:function(u,h,l,f){for(var c=this._textLines[h],p=this.getHeightOfLine(h)/this.lineHeight,m=0,g=0,v,y,b=this.getValueOfPropertyAt(h,0,"textBackgroundColor"),w=0,C=c.length;w<C;w++)v=this.__charBounds[h][w],y=this.getValueOfPropertyAt(h,w,"textBackgroundColor"),y!==b?(b&&this._pushTextBgRect(u,b,l+g,f,m,p),g=v.left,m=v.width,b=y):m+=v.kernedWidth;y&&this._pushTextBgRect(u,y,l+g,f,m,p)},_getFillAttributes:function(u){var h=u&&typeof u=="string"?new t.Color(u):"";return!h||!h.getSource()||h.getAlpha()===1?'fill="'+u+'"':'opacity="'+h.getAlpha()+'" fill="'+h.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(u){for(var h=0,l=0,f=0;f<u;f++)h+=this.getHeightOfLine(f);return l=this.getHeightOfLine(f),{lineTop:h,offset:(this._fontSizeMult-this._fontSizeFraction)*l/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(u){var h=t.Object.prototype.getSvgStyles.call(this,u);return h+" white-space: pre;"}})}(),function(a){var s=a.fabric||(a.fabric={});s.Textbox=s.util.createClass(s.IText,s.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:s.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(u){for(var h=0,l=0,f=0,c={},p=0;p<u.graphemeLines.length;p++)u.graphemeText[f]===`
`&&p>0?(l=0,f++,h++):!this.splitByGrapheme&&this._reSpaceAndTab.test(u.graphemeText[f])&&p>0&&(l++,f++),c[p]={line:h,offset:l},f+=u.graphemeLines[p].length,l+=u.graphemeLines[p].length;return c},styleHas:function(u,h){if(this._styleMap&&!this.isWrapping){var l=this._styleMap[h];l&&(h=l.line)}return s.Text.prototype.styleHas.call(this,u,h)},isEmptyStyles:function(u){if(!this.styles)return!0;var h=0,l=u+1,f,c,p=!1,m=this._styleMap[u],g=this._styleMap[u+1];m&&(u=m.line,h=m.offset),g&&(l=g.line,p=l===u,f=g.offset),c=typeof u>"u"?this.styles:{line:this.styles[u]};for(var v in c)for(var y in c[v])if(y>=h&&(!p||y<f))for(var b in c[v][y])return!1;return!0},_getStyleDeclaration:function(u,h){if(this._styleMap&&!this.isWrapping){var l=this._styleMap[u];if(!l)return null;u=l.line,h=l.offset+h}return this.callSuper("_getStyleDeclaration",u,h)},_setStyleDeclaration:function(u,h,l){var f=this._styleMap[u];u=f.line,h=f.offset+h,this.styles[u][h]=l},_deleteStyleDeclaration:function(u,h){var l=this._styleMap[u];u=l.line,h=l.offset+h,delete this.styles[u][h]},_getLineStyle:function(u){var h=this._styleMap[u];return!!this.styles[h.line]},_setLineStyle:function(u){var h=this._styleMap[u];this.styles[h.line]={}},_wrapText:function(u,h){var l=[],f;for(this.isWrapping=!0,f=0;f<u.length;f++)l=l.concat(this._wrapLine(u[f],f,h));return this.isWrapping=!1,l},_measureWord:function(u,h,l){var f=0,c,p=!0;l=l||0;for(var m=0,g=u.length;m<g;m++){var v=this._getGraphemeBox(u[m],h,m+l,c,p);f+=v.kernedWidth,c=u[m]}return f},_wrapLine:function(u,h,l,F){var c=0,p=this.splitByGrapheme,m=[],g=[],v=p?s.util.string.graphemeSplit(u):u.split(this._wordJoiners),y="",b=0,w=p?"":" ",C=0,_=0,S=0,T=!0,I=this._getWidthOfCharSpacing(),F=F||0;v.length===0&&v.push([]),l-=F;for(var $=0;$<v.length;$++)y=p?v[$]:s.util.string.graphemeSplit(v[$]),C=this._measureWord(y,h,b),b+=y.length,c+=_+C-I,c>l&&!T?(m.push(g),g=[],c=C,T=!0):c+=I,!T&&!p&&g.push(w),g=g.concat(y),_=p?0:this._measureWord([w],h,b),b++,T=!1,C>S&&(S=C);return $&&m.push(g),S+F>this.dynamicMinWidth&&(this.dynamicMinWidth=S-I+F),m},isEndOfWrapping:function(u){return!this._styleMap[u+1]||this._styleMap[u+1].line!==this._styleMap[u].line},missingNewlineOffset:function(u){return this.splitByGrapheme?this.isEndOfWrapping(u)?1:0:1},_splitTextIntoLines:function(u){for(var h=s.Text.prototype._splitTextIntoLines.call(this,u),l=this._wrapText(h.lines,this.width),f=new Array(l.length),c=0;c<l.length;c++)f[c]=l[c].join("");return h.lines=f,h.graphemeLines=l,h},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var u={};for(var h in this._styleMap)this._textLines[h]&&(u[this._styleMap[h].line]=1);for(var h in this.styles)u[h]||delete this.styles[h]},toObject:function(u){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(u))}}),s.Textbox.fromObject=function(u,h){var l=s.util.stylesFromArray(u.styles,u.text),f=Object.assign({},u,{styles:l});return s.Object._fromObject("Textbox",f,h,"text")}}(e),function(){var a=t.controlsUtils,s=a.scaleSkewCursorStyleHandler,u=a.scaleCursorStyleHandler,h=a.scalingEqually,l=a.scalingYOrSkewingX,f=a.scalingXOrSkewingY,c=a.scaleOrSkewActionName,p=t.Object.prototype.controls;if(p.ml=new t.Control({x:-.5,y:0,cursorStyleHandler:s,actionHandler:f,getActionName:c}),p.mr=new t.Control({x:.5,y:0,cursorStyleHandler:s,actionHandler:f,getActionName:c}),p.mb=new t.Control({x:0,y:.5,cursorStyleHandler:s,actionHandler:l,getActionName:c}),p.mt=new t.Control({x:0,y:-.5,cursorStyleHandler:s,actionHandler:l,getActionName:c}),p.tl=new t.Control({x:-.5,y:-.5,cursorStyleHandler:u,actionHandler:h}),p.tr=new t.Control({x:.5,y:-.5,cursorStyleHandler:u,actionHandler:h}),p.bl=new t.Control({x:-.5,y:.5,cursorStyleHandler:u,actionHandler:h}),p.br=new t.Control({x:.5,y:.5,cursorStyleHandler:u,actionHandler:h}),p.mtr=new t.Control({x:0,y:-.5,actionHandler:a.rotationWithSnapping,cursorStyleHandler:a.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),t.Textbox){var m=t.Textbox.prototype.controls={};m.mtr=p.mtr,m.tr=p.tr,m.br=p.br,m.tl=p.tl,m.bl=p.bl,m.mt=p.mt,m.mb=p.mb,m.mr=new t.Control({x:.5,y:0,actionHandler:a.changeWidth,cursorStyleHandler:s,actionName:"resizing"}),m.ml=new t.Control({x:-.5,y:0,actionHandler:a.changeWidth,cursorStyleHandler:s,actionName:"resizing"})}}()})(we);const Yx={lockScalingFlip:!0,originY:"center",originX:"center",lockMovementX:!0,lockMovementY:!0,borderColor:"transparent"};function Wp(e=36){let t="";const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<e;r+=1)t+=n.charAt(Math.floor(Math.random()*n.length));return t}function C6(e){var d;const t=new we.fabric.Canvas(e,{width:1,height:1});t.preserveObjectStacking=!0,t.selection=!1,t.renderOnAddRemove=!1;const n=D().config.textureSize;n&&(we.fabric.textureSize=n);const i={...(d=D().config.objectDefaults)==null?void 0:d.global,...Yx};Object.keys(i).forEach(a=>{we.fabric.Object.prototype[a]=i[a]}),t.on("object:added",a=>{var s,u;a.target&&!((u=(s=a.target)==null?void 0:s.data)!=null&&u.id)&&(a.target.data||(a.target.data={}),a.target.data.id=Wp(10))});const o=we.fabric.Object.prototype.controls;return Object.keys(o).forEach(a=>{delete o[a]}),t}let ba=null;function Vs(e){ba=e}class _6{constructor(){Se(this,"maxZoom",2);Se(this,"minZoom",1);Se(this,"step",.05);this.allowUserZoom&&this.bindMouseWheel(),fe.subscribe(t=>t.stageSize,()=>{setTimeout(()=>{this.fitToScreen()},1)})}get allowUserZoom(){var t,n,r;return((r=(n=(t=D().config)==null?void 0:t.tools)==null?void 0:n.zoom)==null?void 0:r.allowUserZoom)??!0}get currentZoom(){return D().zoom}zoomIn(t=this.step){this.set(this.currentZoom+t)}canZoomIn(t=this.step){return this.currentZoom+t<=this.maxZoom}canZoomOut(t=this.step){return this.currentZoom-t>=this.minZoom}zoomOut(t=this.step){this.set(this.currentZoom-t)}set(t,n=!0){if(t<this.minZoom||t>this.maxZoom)return;const r=Kc.round(D().original.width*t,0),i=Kc.round(D().original.height*t,0);he().setZoom(t),n&&he().setDimensions({width:r,height:i}),D().setZoom(t)}fitToScreen(){var o,d;if(!((d=(o=D().config.tools)==null?void 0:o.zoom)!=null&&d.fitImageToScreen))return;const{width:t,height:n}=D().stageSize,r=Math.max(n,1),i=Math.max(t,1);if(D().original.height>r||D().original.width>i){const a=Math.min(r/D().original.height,i/D().original.width);this.minZoom=Math.min(a,1)}else this.minZoom=1;this.set(this.minZoom)}bindMouseWheel(){he().on("mouse:wheel",t=>{t.e.preventDefault(),t.e.stopPropagation(),ba==null&&(t.e.deltaY<0?this.zoomIn():this.zoomOut())})}}function Gx(e){return new Promise(t=>{we.fabric.util.loadImage(e,n=>t(new we.fabric.Image(n)),null,D().config.crossOrigin?"anonymous":void 0)})}function Kx(){return!D().config.image&&!D().config.blankCanvasSize&&(!he()||he().getObjects().length===0)}class S6{constructor(){Se(this,"minWidth",50);Se(this,"minHeight",50)}resize(t,n,{applyZoom:r=!1,resizeHelper:i=!0}={}){const o=D().zoom;he().setWidth(t*(r?o:1)),he().setHeight(n*(r?o:1)),D().setOriginal(t,n),i&&L().transform.resetStraightenAnchor()}async addMainImage(t,n="mainImage"){var i,o;D().toggleLoading(n);const r=await Gx(t);if(r)return this.clear(),r.set(ai),r.name=Ge.MainImage,he().add(r),this.resize(r.width,r.height),r.center(),r.setCoords(),L().zoom.fitToScreen(),D().toggleLoading(!1),(o=(i=D().config).onMainImageLoaded)==null||o.call(i,r),r}openNew(t,n,r){return t=Math.max(this.minWidth,t),n=Math.max(this.minHeight,n),this.clear(),this.resize(t,n),he().backgroundColor=r,L().zoom.fitToScreen(),D().toggleLoading("newCanvas"),requestAnimationFrame(()=>{D().toggleLoading(!1)}),Promise.resolve({width:t,height:n})}getMainImage(){return he().getObjects().find(t=>t.name===Ge.MainImage)}render(){he().requestRenderAll()}async loadInitialContent(){var i,o;const t=D().config.image,n=D().config.blankCanvasSize,r=D().config.state;if(t&&t.endsWith("json")){const d=await El(t);await L().import.loadState(d)}else t&&t.startsWith('{"canvas')?await L().import.loadState(t):t?await this.addMainImage(t):r?await L().import.loadState(r):n&&await this.openNew(n.width,n.height);return Kx()&&((o=(i=D().config.ui)==null?void 0:i.openImageDialog)!=null&&o.show)&&D().togglePanel("newImage",!0),new Promise(d=>{setTimeout(()=>{L().history.addInitial(),d()},10)})}clear(){he().clear(),L().frame.remove(),L().transform.resetStraightenAnchor()}}function k6(e){return e.name===Ge.Sticker&&"forEachObject"in e}const E6=["fontSize","fontFamily","left","top","width","height","scaleX","scaleY","flipX","flipY","angle","src","strokeWidth"];function qx(e={}){he().fire("object:modified",T6(e))}function T6(e){return{values:e,sizeOrPositionChanged:O6(e)}}function O6(e){return Object.keys(e).some(t=>E6.includes(t))}function P6(){D().fabric.on("selection:created",e=>{var t;(t=e.selected)!=null&&t[0]&&!Zx(e)&&Up(e.selected[0])}),D().fabric.on("selection:updated",e=>{var t;Zx(e)||Up((t=e.selected)==null?void 0:t[0])}),D().fabric.on("selection:cleared",()=>{Up()})}function Zx(e){var r,i;const[t]=q0((r=e.selected)==null?void 0:r[0]),n=t===D().activeTool;return D().dirty&&(!((i=e.selected)!=null&&i[0])||!n)?(e.deselected&&L().objects.select(e.deselected[0]),!0):!1}function Up(e){(e==null?void 0:e.data.id)!==D().objects.active.id&&(D().objects.setActive(e??null),D().activeTool!==De.DRAW&&Yf())}class D6{constructor(){this.syncObjects(),P6(),D().fabric.on("text:editing:entered",()=>{D().objects.setIsEditingText(!0)}),D().fabric.on("text:editing:exited",()=>{D().objects.setIsEditingText(!1)}),D().fabric.on("object:added",()=>{this.syncObjects()}),D().fabric.on("object:removed",()=>{this.syncObjects()})}getAll(){return he().getObjects().filter(t=>{var n;return!((n=t==null?void 0:t.data)!=null&&n.pixieInternal)})}get(t){return this.getAll().find(n=>n.name===t)}getById(t){return this.getAll().find(n=>n.data.id===t)}isActive(t){var r;const n=typeof t=="string"?t:t.data.id;return((r=D().objects.active)==null?void 0:r.id)===n}getActive(){return he().getActiveObject()}has(t){return this.getAll().findIndex(n=>n.name===t)>-1}select(t){const n=typeof t=="string"?this.getById(t):t;n&&(he().setActiveObject(n),he().requestRenderAll())}deselectActive(){he().discardActiveObject(),he().requestRenderAll()}setValues(t,n){if(n=n||this.getActive(),!n)return;let r=!1;k6(n)&&t.fill&&t.fill!==n.fill&&n.forEachObject(i=>i.set("fill",t.fill)),vr(n)?((t.fontFamily!==n.fontFamily||t.fontSize!==n.fontSize)&&(r=!0),n.selectionStart!==n.selectionEnd?n.setSelectionStyles(t):n.set(t)):n.set(t),r?setTimeout(()=>{he().requestRenderAll()},50):he().requestRenderAll(),D().objects.setActive(n),qx(t)}move(t,n=1,r){r=r||this.getActive(),r&&(t==="up"?this.setValues({top:r.top-n}):t==="down"?this.setValues({top:r.top+n}):t==="left"?this.setValues({left:r.left-n}):t==="right"&&this.setValues({left:r.left+n}),L().canvas.render())}bringToFront(t){t=t||this.getActive(),t&&(t.bringToFront(),L().canvas.render())}sendToBack(t){t=t||this.getActive(),t&&(t.sendToBack(),L().canvas.render())}flipHorizontally(t){t=t||this.getActive(),t&&(this.setValues({flipX:!t.flipX}),L().canvas.render())}duplicate(t){const n=t||this.getActive();n&&(this.deselectActive(),n.clone(r=>{r.set({left:n.left+40,top:n.top+40,data:{...n.data,id:Wp(10)},name:n.name}),he().add(r),this.select(r),L().canvas.render()}))}delete(t){t=t||this.getActive(),t&&(this.deselectActive(),he().remove(t),he().requestRenderAll(),L().history.addHistoryItem({name:"deletedObject"}))}syncObjects(){const t=this.getAll().map(n=>({name:n.name,selectable:n.selectable??!1,id:n.data.id}));fe.setState({objects:{...D().objects,all:t}})}}const A6={frame:null,fonts:[]};function Qx(e){return e.state||(e.state=Tl()),{...e.state||Tl(),name:e.name,id:Wp(15)}}function Jx(e){return e?/^[a-zA-Z][a-zA-Z\d+\-.]*?:/.test(e):!1}function Jt(e){return e?Jx(e)?e:`${D().config.baseUrl?`${D().config.baseUrl}/`:""}${e}`:""}class M6{constructor(){Se(this,"loadedAssets",{})}loadAsset(t,n={type:"js"}){var o;t=t.startsWith("//")?`${window.location.protocol}${t}`:t;const r=(o=this.loadedAssets[t])==null?void 0:o.state;return r==="loaded"&&!n.force?new Promise(d=>d()):!r||this.loadedAssets[t].doc!==n.document||n.force&&r==="loaded"?(this.loadedAssets[t]={state:new Promise(d=>{const a=Jx(t)?t:`assets/${t}`,s=Xp(t,n.id),u={url:a,id:s,resolve:d,parentEl:n.parentEl,document:n.document};n.type==="css"?this.loadStyleAsset(u):this.loadScriptAsset(u)}),doc:n.document},this.loadedAssets[t].state):this.loadedAssets[t].state}isLoadingOrLoaded(t){return this.loadedAssets[t]!=null}loadStyleAsset(t){var d;const n=t.document||document,r=t.parentEl||n.head,i=n.createElement("link"),o=Xp(t.url,t.id);i.rel="stylesheet",i.id=o,i.href=t.url;try{r.querySelector(`#${o}`)&&((d=r.querySelector(`#${o}`))==null||d.remove())}catch{}i.onload=()=>{this.loadedAssets[t.url].state="loaded",t.resolve()},r.appendChild(i)}loadScriptAsset(t){var d;const n=t.document||document,r=t.parentEl||n.body,i=n.createElement("script"),o=Xp(t.url,t.id);i.async=!0,i.id=o,i.src=t.url;try{r.querySelector(`#${o}`)&&((d=r.querySelector(`#${o}`))==null||d.remove())}catch{}i.onload=()=>{this.loadedAssets[t.url].state="loaded",t.resolve()},(r||r).appendChild(i)}}function Xp(e,t){return t||btoa(e.split("/").pop())}const j6=new M6;function I6(e){return`be-fonts-${e}`}function e2(e,t){const n=t.document||document,r=[],i=[];let o=[];if(e.forEach(d=>{"google"in d&&d.google?r.push(d):"src"in d&&i.push(d)}),r!=null&&r.length){const d=t.weights||[400],a=e.map(u=>`${u.family}:${d.join(",")}`).join("|"),s=j6.loadAsset(`https://fonts.googleapis.com/css?family=${a}&display=swap`,{type:"css",id:I6(t.id),force:t.forceAssetLoad,document:n});o.push(s)}if(i!=null&&i.length){const d=i.map(async a=>{const s=Array.from(n.fonts.values()).find(h=>h.family===a.family);if(s)return s.loaded;const u=new FontFace(a.family,`url(${t!=null&&t.prefixSrc?t.prefixSrc(a.src):a.src})`,a.descriptors);return n.fonts.add(u),u.load()});o=o.concat(d)}return Promise.all(o)}class F6{async undo(){if(this.canUndo()){const t=D().history.items[D().history.pointer-1];await this.load(t)}}async redo(){if(this.canRedo()){const t=D().history.items[D().history.pointer+1];await this.load(t)}}canUndo(){return D().history.canUndo}canRedo(){return D().history.canRedo}reload(){return this.load(D().history.items[D().history.pointer])}replaceCurrent(){const t=D().history.items[D().history.pointer],n=[...D().history.items];n[D().history.pointer]=Qx({name:t.name,state:t})}addHistoryItem(t){const n=Qx(t),i=[...D().history.items.slice(0,D().history.pointer+1),n];D().history.update(i.length-1,i)}load(t){return t={...t,editor:t.editor||A6},new Promise(n=>{e2(R6(t.canvas.objects),{prefixSrc:Jt,id:"pixie-fonts"}).finally(()=>{he().loadFromJSON(t.canvas,()=>{L().zoom.set(1),t.canvasWidth&&t.canvasHeight&&L().canvas.resize(t.canvasWidth,t.canvasHeight,{resizeHelper:!1,applyZoom:!1}),L().frame.remove(),t.editor.frame&&L().frame.add(t.editor.frame.name,t.editor.frame.sizePercent),L().objects.syncObjects(),L().objects.getAll().forEach(r=>{var i,o;if(!r.data.pixieInternal&&r.originX==="left"&&r.originY==="top"){const d=r.getPointByOrigin("center","center");r.set("left",d.x),r.set("top",d.y)}r.set({...Yx}),r.type==="i-text"&&(r.padding=(o=(i=D().config.tools)==null?void 0:i.text)==null?void 0:o.controlsPadding)}),L().canvas.render(),he().calcOffset(),L().zoom.fitToScreen(),D().history.updatePointerById(t.id),L().transform.resetStraightenAnchor(),n()})})})}addInitial(t){!D().history.items.find(r=>r.name==="initial")&&(t||!Kx())&&this.addHistoryItem({name:"initial",state:t})}}function R6(e){const t=[];return e.forEach(n=>{var i,o,d;if(!vr(n))return;const r=(d=(o=(i=D().config.tools)==null?void 0:i.text)==null?void 0:o.items)==null?void 0:d.find(a=>a.family===n.fontFamily);r&&t.push(r)}),t}class L6{canMerge(){return L().objects.getAll().filter(t=>t.name!==Ge.MainImage).length>0}async apply(){D().toggleLoading("merge");const t=L().export.getDataUrl();t&&await L().canvas.addMainImage(t,"merge")}}const ac=[{name:"grayscale"},{name:"blackWhite",fabricType:"blackwhite"},{name:"sharpen",uses:"Convolute",matrix:[0,-1,0,-1,5,-1,0,-1,0]},{name:"invert"},{name:"vintage"},{name:"polaroid"},{name:"kodachrome"},{name:"technicolor"},{name:"brownie"},{name:"sepia"},{name:"removeColor",fabricType:"removecolor",options:{distance:{type:"slider",current:.1,min:0,max:1,step:.01},color:{current:"#fff",type:"colorPicker"}}},{name:"brightness",options:{brightness:{type:"slider",current:.1,min:-1,max:1,step:.1}}},{name:"gamma",options:{red:{type:"slider",current:.1,min:.2,max:2.2,step:.003921},green:{type:"slider",current:.1,min:.2,max:2.2,step:.003921},blue:{type:"slider",current:.1,min:.2,max:2.2,step:.003921}},apply:e=>{e.gamma=[e.red,e.green,e.blue]}},{name:"noise",options:{noise:{type:"slider",current:40,min:1,max:600}}},{name:"pixelate",options:{blocksize:{type:"slider",min:1,max:40,current:6}}},{name:"blur",uses:"Convolute",matrix:[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9]},{name:"emboss",uses:"Convolute",matrix:[1,1,1,1,.7,-1,-1,-1,-1]},{name:"blendColor",fabricType:"blendcolor",options:{alpha:{type:"slider",current:.5,min:.1,max:1,step:.1},mode:{current:"add",type:"select",available:[{key:"add"},{key:"multiply"},{key:"subtract"},{key:"diff"},{key:"screen"},{key:"lighten"},{key:"darken"}]},color:{type:"colorPicker",current:"#FF4081"}}}],z6={grayscale:se("grayscale"),blackWhite:se("Black & White"),sharpen:se("Sharpen"),invert:se("Invert"),vintage:se("Vintage"),polaroid:se("Polaroid"),kodachrome:se("Kodachrome"),technicolor:se("Technicolor"),brownie:se("Brownie"),sepia:se("Sepia"),removeColor:se("Remove Color"),brightness:se("Brightness"),gamma:se("Gamma"),noise:se("Noise"),pixelate:se("Pixelate"),blur:se("Blur"),emboss:se("Emboss"),blendColor:se("Blend Color")},Yp={distance:se("distance"),color:se("color"),brightness:se("brightness"),red:se("red"),green:se("green"),blue:se("blue"),noise:se("noise"),blocksize:se("blocksize"),mode:se("mode"),alpha:se("alpha")};function lc(e){return e&&e.charAt(0).toUpperCase()+e.slice(1)}class B6{constructor(){fe.subscribe(t=>t.history.pointer,()=>{this.syncState()})}apply(t){D().filter.select(t,this.hasOptions(t));const n=this.getByName(t);if(this.isApplied(n.name)){this.remove(n.name);return}const r=this.create(n);this.getImages().forEach(i=>{var o;(o=i.filters)==null||o.push(r),i.applyFilters()}),this.syncState(),L().canvas.render()}remove(t){D().filter.deselect(t);const n=this.getByName(t);this.getImages().forEach(r=>{var o;const i=this.findFilterIndex(n.name,r.filters);(o=r.filters)==null||o.splice(i,1),r.applyFilters()}),this.syncState(),L().canvas.render()}getAll(){return ac}getByName(t){return ac.find(n=>n.name===t)}isApplied(t){const n=L().canvas.getMainImage();return n?this.findFilterIndex(t,n.filters)>-1:!1}applyValue(t,n,r){const i=this.getByName(t);this.getImages().forEach(o=>{const d=(o.filters||[]).find(a=>a.type.toLowerCase()===i.name.toLowerCase());d&&(d[n]=r,i.apply&&i.apply(d,n,r),o.applyFilters())}),L().canvas.render()}addCustom(t,n,r,i){const o=we.fabric.Image.filters;o[lc(t)]=we.fabric.util.createClass(o.BaseFilter,n),o[lc(t)].fromObject=o.BaseFilter.fromObject,ac.push({name:t,options:r,initialConfig:i})}create(t){const n=t.initialConfig||{};let r;return t.uses?(n.matrix=t.matrix,r=new we.fabric.Image.filters[lc(t.uses)](n)):(Object.entries(t.options||{}).forEach(([i,o])=>{n[i]=o.current}),r=new we.fabric.Image.filters[lc(t.name)](n)),r.name=t.name,r}hasOptions(t){return!!this.getByName(t).options}findFilterIndex(t,n){if(!(n!=null&&n.length))return-1;const r=this.getByName(t);return n.findIndex(i=>this.configMatchesFabricFilter(r,i))}syncState(){var r;const t=[];(((r=this.getImages()[0])==null?void 0:r.filters)||[]).forEach(i=>{const o=this.getByFabricFilter(i);o&&t.push(o.name)}),fe.setState({filter:{...D().filter,applied:t}})}getByFabricFilter(t){return ac.find(n=>this.configMatchesFabricFilter(n,t))}configMatchesFabricFilter(t,n){const r=n.type.toLowerCase().replace(" ","");return r===t.fabricType||r===t.name?!0:r==="convolute"&&this.matrixAreEqual(t.matrix,n.matrix)}matrixAreEqual(t,n){if(!t||!n||t.length!==n.length)return!1;for(let r=t.length;r--;)if(t[r]!==n[r])return!1;return!0}getImages(){return L().objects.getAll().filter(t=>t.name===Ge.Image||t.name===Ge.MainImage)}}function N6(e){return e.width<t2(e.usePercentages)&&(e.width=t2(e.usePercentages),e.maintainAspect&&(e.height=uc(e.width,e.usePercentages))),e.width>n2(e.usePercentages)&&(e.width=n2(e.usePercentages),e.maintainAspect&&(e.height=uc(e.width,e.usePercentages))),e.height<r2(e.usePercentages)&&(e.height=r2(e.usePercentages),e.maintainAspect&&(e.width=Gp(e.height,e.usePercentages))),e.height>i2(e.usePercentages)&&(e.height=i2(e.usePercentages),e.maintainAspect&&(e.width=Gp(e.height,e.usePercentages))),e}function t2(e){var n,r;const t=((r=(n=D().config.tools)==null?void 0:n.resize)==null?void 0:r.minWidth)||50;return e?Math.ceil(t*100/D().original.width):t}function n2(e){var n,r;const t=((r=(n=D().config.tools)==null?void 0:n.resize)==null?void 0:r.maxWidth)||2400;return e?Math.ceil(t*100/D().original.width):t}function r2(e){var n,r;const t=((r=(n=D().config.tools)==null?void 0:n.resize)==null?void 0:r.minHeight)||50;return e?Math.ceil(t*100/D().original.height):t}function i2(e){var n,r;const t=((r=(n=D().config.tools)==null?void 0:n.resize)==null?void 0:r.maxHeight)||2400;return e?Math.ceil(t*100/D().original.height):t}function Gp(e,t){if(t)return e;const n=D().original.height/e;return Math.floor(D().original.width/n)}function uc(e,t){if(t)return e;const n=D().original.width/e;return Math.floor(D().original.height/n)}class $6{apply(t){const{width:n,height:r,usePercentages:i}=N6(t),o=Math.ceil(D().original.width),d=Math.ceil(D().original.height),a=Math.ceil(n),s=Math.ceil(r);let u,h;i?(u=n/100,h=r/100):(u=n/D().original.width,h=r/D().original.height),!(o===a&&d===s)&&this.resize(u,h)}resize(t,n){L().zoom.set(1,!1);const r=Math.round(D().original.height*n),i=Math.round(D().original.width*t);L().canvas.resize(i,r,{applyZoom:!1,resizeHelper:!0}),L().objects.getAll().forEach(o=>{const d=o.scaleX||1,a=o.scaleY||1,s=o.left||0,u=o.top||0,h=d*t,l=a*n,f=s*t,c=u*n;o.scaleX=h,o.scaleY=l,o.left=f,o.top=c,o.setCoords()}),L().zoom.fitToScreen(),he().requestRenderAll()}}function V6(e,t){t.innerZone!==null&&(t=t,H6(e,t),W6(e,t),U6(e,t))}function H6(e,t){t.innerZone.style.width=`${e.width}px`,t.innerZone.style.height=`${e.height}px`,t.innerZone.style.transform=`translate(${e.left}px, ${e.top}px)`}function W6(e,t){const n=D().canvasSize.width,r=D().canvasSize.height;t.maskTop.style.height=`${e.top}px`,t.maskTop.style.width=`${n}px`,t.maskLeft.style.top=`${e.top}px`,t.maskLeft.style.height=`${e.height}px`,t.maskLeft.style.width=`${e.left}px`;const i=e.left+e.width;t.maskRight.style.left=`${i}px`,t.maskRight.style.top=`${e.top}px`,t.maskRight.style.height=`${e.height}px`,t.maskRight.style.width=`${n-i}px`,t.maskBottom.style.height=`${r-(e.top+e.height)}px`,t.maskBottom.style.width=`${n}px`}function U6(e,t){const n=(e.width-2)/3;t.lineVer1.style.height=`${e.height}px`,t.lineVer1.style.transform=`translate(${n}px, 0)`,t.lineVer2.style.height=`${e.height}px`,t.lineVer2.style.transform=`translate(${n*2}px, 0)`;const r=(e.height-2)/3;t.lineHor1.style.width=`${e.width}px`,t.lineHor1.style.transform=`translate(0, ${r}px)`,t.lineHor2.style.width=`${e.width}px`,t.lineHor2.style.transform=`translate(0, ${r*2}px)`}function Kp(e,t,n){let r=t,i=n;return e&&(n*e>t?i=t/e:r=n*e),{width:Math.floor(r),height:Math.floor(i)}}function qp(e){if(!e)return null;const t=e.split(":");return parseInt(t[0])/parseInt(t[1])}function X6(e,t=null){const n={width:e.width,height:e.height,top:0,left:0,angle:0};if(t){const r=Kp(t,n.width,n.height);n.width=r.width,n.height=r.height}return n.left=(e.width-n.width)/2,n.top=(e.height-n.height)/2,n}class Y6{constructor(){Se(this,"refs",null)}apply(t){var i;const n=(i=L().frame.active.config)==null?void 0:i.name,r=L().frame.active.currentSizeInPercent;return L().frame.active.hide(),L().merge.apply().then(()=>{L().canvas.resize(Math.round(t.width),Math.round(t.height),{applyZoom:!0,resizeHelper:!0});const o=L().canvas.getMainImage();o.cropX=Math.round(t.left),o.cropY=Math.round(t.top),o.width=Math.round(t.width),o.height=Math.round(t.height),o.viewportCenter(),n&&L().frame.add(n,r),L().zoom.fitToScreen(),L().canvas.render()})}drawZone(t){var n;(n=this.refs)!=null&&n.current&&(D().crop.setCropzoneRect(t),V6(t,this.refs.current))}resetCropzone(t){const n=D().canvasSize,r=qp(t);if(!n)return;D().crop.setAspectRatio(t);const i=X6(n,r);this.drawZone(i)}registerRefs(t){this.refs=t}}class G6{getShapeByName(t){var r,i;const n=(i=(r=D().config.tools)==null?void 0:r.shapes)==null?void 0:i.items;return(n==null?void 0:n.find(o=>o.name===t))||null}addBasicShape(t){var s;const n=this.getShapeByName(t);if(!n)return null;const{width:r,height:i,...o}=((s=D().config.objectDefaults)==null?void 0:s.shape)||{},d={...o,...n.options};let a;if(n.name==="circle")a=new we.fabric.Circle({...d,radius:100});else if(n.name==="ellipse")a=new we.fabric.Ellipse({...d,rx:100,ry:50});else if(n.type==="Path")a=new we.fabric.Path(d.path,{displayName:n.name,...d});else{const u=n.type;a=new we.fabric[u]({...d,width:150,height:150})}return this.addAndPositionShape(a,Ge.Shape,{width:r,height:i}),a}addSticker(t,n){var i,o,d;const r=(d=(o=(i=D().config.tools)==null?void 0:i.stickers)==null?void 0:o.items)==null?void 0:d.find(a=>a.name===t);if(!r)return Promise.resolve();if(r.type==="svg"){const a=Zp(r,n);return this.addSvgSticker(a)}return this.addRegularSticker(r,n)}addRegularSticker(t,n){return new Promise(r=>{we.fabric.util.loadImage(Zp(t,n),i=>{var u;const{width:o,height:d,...a}=((u=D().config.objectDefaults)==null?void 0:u.sticker)||{},s=new we.fabric.Image(i,a);this.addAndPositionShape(s,Ge.Sticker,{width:o,height:d}),r()})})}addSvgSticker(t,n=Ge.Sticker){return new Promise(r=>{we.fabric.loadSVGFromURL(t,(i,o)=>{var h;const{width:d,height:a,...s}=((h=D().config.objectDefaults)==null?void 0:h.sticker)||{},u=we.fabric.util.groupSVGElements(i,o);u.set(s),this.addAndPositionShape(u,n,{width:d,height:a}),r()})})}addAndPositionShape(t,n,{width:r}){t.name=n,t.scaleX=1,t.scaleY=1,he().add(t);const i=r||D().original.width*D().zoom/4;t.scaleToWidth(Math.min(150,i)),t.viewportCenter(),t.setCoords(),L().canvas.render(),he().setActiveObject(t)}}function Zp(e,t){return Jt(`images/stickers/${e.name}/${t}.${e.type}`)}class K6{constructor(t){Se(this,"patternCache",[]);this.activeFrame=t}fillParts(t){this.patternCache.forEach(n=>{this.fillPartWithPattern(n,t)})}fillPartWithPattern(t,n){if(!this.activeFrame.parts)return;t.canvas=new we.fabric.StaticCanvas(null),t.canvas.add(t.img);const r=new we.fabric.Pattern({source:t.canvas.getElement(),repeat:n==="repeat"?"repeat":"no-repeat"});this.activeFrame.parts[t.name]&&this.activeFrame.parts[t.name].set("fill",r)}scale(t){if(!this.activeFrame.config||!this.patternCache)return;const n=this.activeFrame.config.mode;t/=he().getRetinaScaling(),this.patternCache.forEach(r=>{this.activeFrame.parts&&(r.name==="top"||r.name==="bottom"?n==="stretch"?(this.scalePatternToWidth(r.img,this.activeFrame.parts.top.getScaledWidth()),this.scalePatternToHeight(r.img,t)):r.img.scaleToHeight(t):r.name==="left"||r.name==="right"?n==="stretch"?(this.scalePatternToWidth(r.img,t),this.scalePatternToHeight(r.img,this.activeFrame.parts.left.getScaledHeight())):r.img.scaleToWidth(t):n==="stretch"?(this.scalePatternToWidth(r.img,t),this.scalePatternToHeight(r.img,t)):r.img.scaleToWidth(t),r.canvas.setDimensions({width:r.img.getScaledWidth(),height:r.img.getScaledHeight()}))}),L().canvas.render()}scalePatternToWidth(t,n){if(!t.width)return;const r=t.getBoundingRect().width/t.getScaledWidth();t.set("scaleX",n/t.width/r),t.setCoords()}scalePatternToHeight(t,n){if(!t.height)return;const r=t.getBoundingRect().height/t.getScaledHeight();t.set("scaleY",n/t.height/r),t.setCoords()}load(t){const n=this.activeFrame.getPartNames().map(r=>new Promise(i=>{const o={...ai,originX:"left",originY:"top"};D().config.crossOrigin&&(o.crossOrigin="anonymous"),we.fabric.Image.fromURL(this.getPartUrl(t,r),d=>{i({name:r,img:d})},o)}));return Promise.all(n).then(r=>{this.patternCache=r,this.fillParts(t.mode)})}getPartUrl(t,n){return Jt(`images/frames/${t.name}/${n}.png`)}}class q6{constructor(t,n){this.activeFrame=t,this.patterns=n}get defaultColor(){var t,n;return(n=(t=D().config.objectDefaults)==null?void 0:t.global)==null?void 0:n.fill}build(t,n){if(this.createParts(t),this.resize(n),this.activeFrame.config=t,t.mode==="basic"){L().canvas.render();return}this.patterns.load(t).then(()=>{this.patterns.scale(n),L().canvas.render()})}createParts(t){const n={};this.activeFrame.getPartNames().forEach(r=>{const i=t.mode==="basic"?this.defaultColor:void 0;n[r]=new we.fabric.Rect({...ai,fill:i,originX:"left",originY:"top",name:`frame.rect.${r}`,objectCaching:!1,data:{pixieInternal:!0}}),he().add(n[r])}),this.activeFrame.parts=n}resize(t){const n=D().original.width,r=D().original.height,i=this.activeFrame,o=t;i.parts&&(i.parts.topLeft.set({width:o,height:o}),i.parts.topRight.set({left:n-i.parts.topLeft.getScaledWidth(),width:o,height:o}),i.parts.top.set({left:i.parts.topLeft.getScaledWidth()-1,width:n-i.parts.topLeft.getScaledWidth()-i.parts.topRight.getScaledWidth()+3,height:o}),i.parts.bottomLeft.set({top:r-i.parts.topLeft.getScaledHeight(),width:o,height:o}),i.parts.left.set({top:i.parts.topLeft.getScaledHeight()-1,width:o,height:r-i.parts.topLeft.getScaledHeight()-i.parts.bottomLeft.getScaledHeight()+3}),i.parts.bottomRight.set({left:n-i.parts.bottomLeft.getScaledWidth(),top:r-i.parts.topRight.getScaledWidth(),width:o,height:o}),i.parts.bottom.set({left:i.parts.top.left,top:r-i.parts.top.getScaledHeight(),width:i.parts.top.getScaledWidth(),height:o}),i.parts.right.set({left:n-i.parts.left.getScaledWidth(),top:i.parts.left.top,width:i.parts.left.width,height:i.parts.left.getScaledHeight()}))}}class Z6{constructor(){Se(this,"corners",["topLeft","topRight","bottomLeft","bottomRight"]);Se(this,"sides",["top","right","bottom","left"]);Se(this,"parts",null);Se(this,"config",null);Se(this,"currentSizeInPercent",100)}getPartNames(){return[...this.corners,...this.sides]}hide(){this.parts&&(Object.values(this.parts).forEach(t=>t.set({visible:!1})),L().canvas.render())}show(){this.parts&&(Object.values(this.parts).forEach(t=>t.set({visible:!0})),L().canvas.render())}remove(){this.parts&&(this.config=null,Object.values(this.parts).forEach(t=>{he().remove(t)}),this.parts=null,L().canvas.render())}is(t){return this.config?this.config.name===t.name:!1}changeColor(t){var n;((n=this.config)==null?void 0:n.mode)!=="basic"||!this.parts||(Object.values(this.parts).forEach(r=>{r.set("fill",t)}),L().canvas.render())}getMinSize(){var t;return((t=this.config)==null?void 0:t.size.min)??1}getMaxSize(){var t;return((t=this.config)==null?void 0:t.size.max)??35}}class Q6{constructor(){Se(this,"patterns");Se(this,"builder");Se(this,"active");this.active=new Z6,this.patterns=new K6(this.active),this.builder=new q6(this.active,this.patterns),he().on("object:added",()=>{Object.values(this.active.parts||[]).forEach(t=>t.moveTo(98))})}add(t,n){const r=this.getByName(t);if(!r||this.active.is(r))return;this.active.remove(),this.active.currentSizeInPercent=n??r.size.default;const i=this.calcFrameSizeInPixels(this.active.currentSizeInPercent);this.builder.build(r,i),D().frame.select(r)}resize(t){if(!this.active.parts||!this.active.config)return;t?this.active.currentSizeInPercent=t:t=this.active.currentSizeInPercent;const n=this.calcFrameSizeInPixels(t);this.builder.resize(n),this.patterns.scale(n),L().canvas.render()}changeColor(t){this.active.changeColor(t)}remove(){this.active.remove(),D().frame.deselect()}getByName(t){var r,i;const n=(i=(r=D().config.tools)==null?void 0:r.frame)==null?void 0:i.items;if(n)return n.find(o=>o.name===t)}getActiveFrameConfig(){return this.active.config}calcFrameSizeInPixels(t){const n=Math.min(D().original.width,D().original.height);return Math.ceil(t/100*n)}}class J6{constructor(){Se(this,"minWidth",250)}add(t,n={}){var o,d,a,s,u;if(t=t||((d=(o=D().config.tools)==null?void 0:o.text)==null?void 0:d.defaultText),!t)return;const r={...(a=D().config.objectDefaults)==null?void 0:a.text,...n,name:Ge.Text,padding:(u=(s=D().config.tools)==null?void 0:s.text)==null?void 0:u.controlsPadding,editingBorderColor:Of.fill},i=new we.fabric.IText(t,r);he().add(i),n.left==null&&n.top==null&&this.autoPositionText(i),L().objects.select(i)}autoPositionText(t){const n=he().getWidth(),r=he().getHeight(),i=Math.min(he().getWidth(),this.minWidth);t.scaleToWidth(Math.max(n/3,i)),t.getScaledHeight()>r&&t.scaleToHeight(r-t.getScaledHeight()-20),t.viewportCenter(),he().getObjects("i-text").forEach(o=>{if(o!==t&&o.intersectsWithObject(t)){const d=o.top-t.top+o.getScaledHeight();let a=t.top+d;a>D().original.height-o.getScaledHeight()&&(a=0),t.set("top",a),t.setCoords()}})}selectOrAddText(t,n={}){if(D().objects.active.isText)return!1;const r=L().objects.getAll().find(i=>vr(i));return r?(L().objects.select(r),!1):(this.add(t,n),!0)}}const ej=e=>{const t=new we.fabric.PatternBrush(e);return t.getPatternSrc=function(){const r=we.fabric.document.createElement("canvas");r.width=10,r.height=10;const i=r.getContext("2d");return i.strokeStyle=this.color,i.lineWidth=5,i.beginPath(),i.moveTo(0,5),i.lineTo(10,5),i.closePath(),i.stroke(),r},t},tj=e=>{const t=new we.fabric.PatternBrush(e);return t.getPatternSrc=function(){const r=document.createElement("canvas");r.width=10,r.height=10;const i=r.getContext("2d");return i.strokeStyle=this.color,i.lineWidth=5,i.beginPath(),i.moveTo(5,0),i.lineTo(5,10),i.closePath(),i.stroke(),r},t},nj=e=>{const t=new we.fabric.PatternBrush(e);return t.getPatternSrc=function(){const r=this.width/2,i=5,o=document.createElement("canvas"),d=new we.fabric.Rect({width:r,height:r,angle:45,fill:this.color}),a=d.getBoundingRect().width;o.width=a+i,o.height=a+i,d.set({left:a/2,top:a/2});const s=o.getContext("2d");return d.render(s),o},t},rj=e=>{const t=new we.fabric.PatternBrush(e);return t.getPatternSrc=function(){const o=document.createElement("canvas");o.width=10+2,o.height=10+2;const d=o.getContext("2d");return d.fillStyle=this.color,d.fillRect(0,0,10,10),o},t};class ij{constructor(){Se(this,"customBrushes",{VLineBrush:ej,HLineBrush:tj,DiamondBrush:nj,SquareBrush:rj});Se(this,"currentBrush",{type:"PencilBrush",color:(_S=(CS=D().config.objectDefaults)==null?void 0:CS.global)==null?void 0:_S.fill,width:r0[1]});Se(this,"onPathCreated",t=>{t.path.name=Ge.Drawing,t.path.set(sj()),D().setDirty(!0)})}enable(){he().on("path:created",this.onPathCreated),he().isDrawingMode=!0,this.setBrushType(this.currentBrush.type),this.setBrushSize(this.currentBrush.width)}disable(){he().off("path:created",this.onPathCreated),he().isDrawingMode=!1}getBrushType(){return this.currentBrush.type}setBrushType(t){this.currentBrush.type=t,he().freeDrawingBrush=t in we.fabric?new we.fabric[t](he()):this.customBrushes[t](he()),this.applyBrushStyles()}applyBrushStyles(){Object.keys(this.currentBrush).forEach(n=>{he().freeDrawingBrush[n]=this.currentBrush[n]});const t=he().freeDrawingBrush;t.getPatternSrc&&(t.source=t.getPatternSrc.call(t))}setBrushSize(t){this.currentBrush.width=t,this.applyBrushStyles()}getBrushSize(){return this.currentBrush.width}setBrushColor(t){this.currentBrush.color=t,this.applyBrushStyles()}getBrushColor(){return this.currentBrush.color}}function sj(){const e={...ai};return delete e.strokeWidth,e}async function s2(e,t=!0,n=!0){const r=await Gx(e);if(r)return new Promise(i=>{r.name=Ge.Image,r.opacity=0;const o=D().original.width,d=D().original.height;if(t&&(r.width>=o||r.height>=d)){const a=o-.1*o,s=d-.1*d,u=1/Math.min(s/r.getScaledHeight(),a/r.getScaledWidth());r.scaleX*=1/u,r.scaleY*=1/u}D().fabric.add(r),n&&D().fabric.setActiveObject(r),r.viewportCenter(),r.setCoords(),D().fabric.requestRenderAll(),L().zoom.fitToScreen(),r.animate("opacity","1",{duration:425,onChange:()=>{D().fabric.requestRenderAll()},onComplete:()=>{i(r)}})})}function o2(e){var n;return((n=/(?:\.([^.]+))?$/.exec(e))==null?void 0:n[1])||""}function oj(e){const t={md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",gif:"image/gif",yaml:"text/yaml",yml:"text/yaml",log:"text/plain"},n=e.name?o2(e.name):null;return e.type?e.type:n&&n in t?t[n]:"application/octet-stream"}class cc{constructor(t,n){Se(this,"id");Se(this,"fingerprint");Se(this,"name");Se(this,"relativePath","");Se(this,"size");Se(this,"mime","");Se(this,"extension","");Se(this,"native");Se(this,"lastModified");Se(this,"cachedData");this.id=Z0(),this.name=t.name,this.size=t.size,this.mime=oj(t),this.lastModified=t.lastModified,this.extension=o2(t.name)||"bin",this.native=t,n=n||t.webkitRelativePath||"",n=n.replace(/^\/+/g,""),n&&n.split("/").length>1&&(this.relativePath=n),this.fingerprint=aj({name:this.name,size:this.size,mime:this.mime,lastModified:this.lastModified})}get data(){return new Promise(t=>{this.cachedData&&t(this.cachedData);const n=new FileReader;n.addEventListener("load",()=>{this.cachedData=n.result,t(this.cachedData)}),this.extension==="json"?n.readAsText(this.native):n.readAsDataURL(this.native)})}}function aj({name:e,mime:t,size:n,relativePath:r,lastModified:i}){let o="be";return typeof e=="string"&&(o+=`-${a2(e.toLowerCase())}`),t&&(o+=`-${t}`),typeof r=="string"&&(o+=`-${a2(r.toLowerCase())}`),n!==void 0&&(o+=`-${n}`),i!==void 0&&(o+=`-${i}`),o}function lj(e){return e.charCodeAt(0).toString(32)}function a2(e){let t="";return e.replace(/[^A-Z0-9]/gi,n=>(t+=`-${lj(n)}`,"/"))+t}function uj(e={}){const t=document.querySelector("#hidden-file-upload-input");t&&t.remove();const n=document.createElement("input");return n.type="file",n.multiple=e.multiple??!1,n.classList.add("hidden"),n.style.display="none",n.style.visibility="hidden",n.id="hidden-file-upload-input",n.accept=cj(e),e.directory&&(n.webkitdirectory=!0),document.body.appendChild(n),n}function cj({extensions:e=[],types:t=[]}){const n=[];return e!=null&&e.length&&(e=e.map(r=>r.startsWith(".")?r:`.${r}`),n.push(e.join(","))),t!=null&&t.length&&n.push(t.join(",")),n.join(",")}function fj(e={}){return new Promise(t=>{const n=uj(e);n.onchange=r=>{const i=r.target.files;if(!i)return t([]);const o=Array.from(i).filter(d=>d.name!==".DS_Store").map(d=>new cc(d));t(o),n.remove()},document.body.appendChild(n),n.click()})}function hj(e,t){if(e==null)return 0;switch(t){case"KB":return e*1024;case"MB":return e*1024**2;case"GB":return e*1024**3;case"TB":return e*1024**4;case"PB":return e*1024**5;default:return e}}var Qp=(e=>(e.image="image/*",e.audio="audio/*",e.text="text/*",e.json="application/json",e.video="video/mp4,video/mpeg,video/x-m4v,video/*",e))(Qp||{});function dj(e,t=1){if(e==null||Number.isNaN(e))return"";const n=e<0,r=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(n&&(e=-e),e<1)return`${(n?"-":"")+e} B`;const i=Math.min(Math.floor(Math.log(e)/Math.log(1024)),r.length-1);e=Number(e/Math.pow(1024,i));const o=r[i];return e>=10||e%1===0?`${(n?"-":"")+e.toFixed(0)} ${o}`:`${(n?"-":"")+e.toFixed(t)} ${o}`}function l2(e,t){this.text=e=e||"",this.hasWild=~e.indexOf("*"),this.separator=t,this.parts=e.split(t)}l2.prototype.match=function(e){var t=!0,n=this.parts,r,i=n.length,o;if(typeof e=="string"||e instanceof String)if(!this.hasWild&&this.text!=e)t=!1;else{for(o=(e||"").split(this.separator),r=0;t&&r<i;r++)n[r]!=="*"&&(r<o.length?t=n[r]===o[r]:t=!1);t=t&&o}else if(typeof e.splice=="function")for(t=[],r=e.length;r--;)this.match(e[r])&&(t[t.length]=e[r]);else if(typeof e=="object"){t={};for(var d in e)this.match(d)&&(t[d]=e[d])}return t};var pj=function(e,t,n){var r=new l2(e,n||/[\/\.]/);return typeof t<"u"?r.match(t):r},gj=pj,mj=/[\/\+\.]/,vj=function(e,t){function n(r){var i=gj(r,e,mj);return i&&i.length>=2}return t?n(t.split(";")[0]):n};const yj=st(vj);function bj(e,t){if(!t)return;const{maxFileSize:n,allowedFileTypes:r,blockedFileTypes:i}=t;if(n&&e.size!=null&&e.size>n)return se("`:file` exceeds maximum allowed size of :size",{values:{file:e.name,size:dj(n)}});if(r!=null&&r.length&&!u2(e,r)||i!=null&&i.length&&u2(e,i))return se("This file type is not allowed")}function u2(e,t){return t.map(n=>n.split(",")).flat().some(n=>{if(n.includes("/"))return e.mime?yj(e.mime.replace(/;.*?$/,""),n):!1;const r=n.replace(".","").toLowerCase();return r&&e.extension?e.extension.toLowerCase()===r:!1})}class wj{async uploadAndAddImage(t=!0){const n=await this.openUploadWindow();await this.openUploadedFile(n,t)}async uploadAndReplaceMainImage(){const t=await this.openUploadWindow();t&&await this.openBackgroundImage(t)}async uploadAndOpenStateFile(){const t=await this.openUploadWindow(Cj);t&&await this.loadState(await t.data)}async addImageFromUrl(t,n=!0){var r,i;await s2(t,((i=(r=D().config.tools)==null?void 0:r.import)==null?void 0:i.fitOverlayToScreen)??!0,n),L().history.addHistoryItem({name:"overlayImage"})}async addImageFromData(t,n=!0){var r,i;await s2(t,((i=(r=D().config.tools)==null?void 0:r.import)==null?void 0:i.fitOverlayToScreen)??!0,n),L().history.addHistoryItem({name:"overlayImage"})}async openUploadedFile(t,n=!0){if(!t)return;const r=await t.data;switch(t.extension){case"json":await this.loadState(r);break;case"svg":await L().shape.addSvgSticker(r,Ge.Image),L().history.addHistoryItem({name:"overlayImage"});break;default:await this.addImageFromData(r,n)}}async loadState(t){D().toggleLoading("state"),await Xf();let n;typeof t=="string"?t.endsWith(".json")?n=await El(t):n=JSON.parse(t):n=t,n.history?D().history.reset(n.history):await L().history.addInitial(n),await L().history.reload(),D().toggleLoading(!1)}async openUploadWindow(t){var r,i;t=t||xj();const n=(await fj(t))[0];return this.fileIsValid(n)?((i=(r=D().config).onFileOpen)==null||i.call(r,n),n):null}async openBackgroundImage(t){await Xf();let n;t instanceof HTMLImageElement?n=t.src:t instanceof cc?n=await t.data:n=t;const r=await L().canvas.addMainImage(n);return await L().history.addInitial(),r}fileIsValid(t){var o,d,a,s;const n=((d=(o=D().config.tools)==null?void 0:o.import)==null?void 0:d.maxFileSize)??hj(10,"MB"),r=[...((s=(a=D().config.tools)==null?void 0:a.import)==null?void 0:s.validImgExtensions)??[],"json"],i=bj(t,{maxFileSize:n,allowedFileTypes:r});return i?(ss.danger(i),!1):!0}}function xj(){var t,n;const e=(n=(t=D().config.tools)==null?void 0:t.import)==null?void 0:n.validImgExtensions;return e?{extensions:e}:{types:[Qp.image]}}const Cj={types:[".json",Qp.json]};class _j{constructor(){Se(this,"watermark",null);Se(this,"lineStyle",{stroke:"rgba(255,255,255,0.3)",strokeWidth:5,strokeLineCap:"round",strokeLineJoin:"round"})}add(t){this.createGroup(),this.addText(t),this.addLines(),he().add(this.watermark),L().canvas.render()}remove(){this.watermark&&(he().remove(this.watermark),this.watermark=null,L().canvas.render())}createGroup(){this.watermark=new we.fabric.Group(void 0,{...ai,width:D().original.width,height:D().original.height,excludeFromExport:!0,top:0,left:0,originX:"left",originY:"top"})}addText(t){var r;const n=new we.fabric.Text(t,{fill:"rgba(255,255,255,0.3)",strokeWidth:2,stroke:"rgba(255,255,255,0.4)",originX:"center",originY:"center",fontWeight:600,fontSize:150,fontFamily:"Courier New"});n.scaleToWidth(D().original.width/2),(r=this.watermark)==null||r.add(n)}addLines(){var h;if(!this.watermark)return;const t=(h=this.watermark)==null?void 0:h.getObjects("text")[0],n=D().original.width/2,r=D().original.height/2,i=100,o=t.width/4,d=new we.fabric.Line(void 0,this.lineStyle),a=new we.fabric.Line(void 0,this.lineStyle),s=new we.fabric.Line(void 0,this.lineStyle),u=new we.fabric.Line(void 0,this.lineStyle);this.watermark.add(d,a,s,u),d.set({x1:o,y1:-i,x2:n,y2:-r}),a.set({x1:o,y1:i,x2:n,y2:r}),s.set({x1:-o,y1:-i,x2:-n,y2:-r}),u.set({x1:-o,y1:i,x2:-n,y2:r})}}var c2={exports:{}};(function(e,t){(function(n,r){r()})(pt,function(){function n(u,h){return typeof h>"u"?h={autoBom:!1}:typeof h!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),h={autoBom:!h}),h.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}function r(u,h,l){var f=new XMLHttpRequest;f.open("GET",u),f.responseType="blob",f.onload=function(){s(f.response,h,l)},f.onerror=function(){console.error("could not download file")},f.send()}function i(u){var h=new XMLHttpRequest;h.open("HEAD",u,!1);try{h.send()}catch{}return 200<=h.status&&299>=h.status}function o(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var h=document.createEvent("MouseEvents");h.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(h)}}var d=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof pt=="object"&&pt.global===pt?pt:void 0,a=d.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=d.saveAs||(typeof window!="object"||window!==d?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(u,h,l){var f=d.URL||d.webkitURL,c=document.createElement("a");h=h||u.name||"download",c.download=h,c.rel="noopener",typeof u=="string"?(c.href=u,c.origin===location.origin?o(c):i(c.href)?r(u,h,l):o(c,c.target="_blank")):(c.href=f.createObjectURL(u),setTimeout(function(){f.revokeObjectURL(c.href)},4e4),setTimeout(function(){o(c)},0))}:"msSaveOrOpenBlob"in navigator?function(u,h,l){if(h=h||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(n(u,l),h);else if(i(u))r(u,h,l);else{var f=document.createElement("a");f.href=u,f.target="_blank",setTimeout(function(){o(f)})}}:function(u,h,l,f){if(f=f||open("","_blank"),f&&(f.document.title=f.document.body.innerText="downloading..."),typeof u=="string")return r(u,h,l);var c=u.type==="application/octet-stream",p=/constructor/i.test(d.HTMLElement)||d.safari,m=/CriOS\/[\d]+/.test(navigator.userAgent);if((m||c&&p||a)&&typeof FileReader<"u"){var g=new FileReader;g.onloadend=function(){var b=g.result;b=m?b:b.replace(/^data:[^;]*;/,"data:attachment/file;"),f?f.location.href=b:location=b,f=null},g.readAsDataURL(u)}else{var v=d.URL||d.webkitURL,y=v.createObjectURL(u);f?f.location=y:location.href=y,f=null,setTimeout(function(){v.revokeObjectURL(y)},4e4)}});d.saveAs=s.saveAs=s,e.exports=s})})(c2);var Sj=c2.exports;function kj(e,t,n){t=t||"",n=n||512;const r=atob(e),i=[];for(let o=0;o<r.length;o+=n){const d=r.slice(o,o+n),a=new Array(d.length);for(let u=0;u<d.length;u++)a[u]=d.charCodeAt(u);const s=new Uint8Array(a);i.push(s)}return new Blob(i,{type:t})}class Ej{save(t,n,r){var a,s,u;const i=(a=D().config.tools)==null?void 0:a.export;t=t||(i==null?void 0:i.defaultName),n=this.getFormat(n),r=this.getQuality(r);const o=`${t}.${n}`;this.applyWaterMark();const d=n==="json"?this.getJsonState():this.getDataUrl(n,r);if(L().watermark.remove(),!!d)if(D().config.saveUrl)fetch(D().config.saveUrl,{method:"POST",body:JSON.stringify({data:d,filename:o,format:n})});else if(D().config.onSave)(u=(s=D().config).onSave)==null||u.call(s,d,o,n);else{const h=this.getCanvasBlob(n,d);Sj.saveAs(h,o)}}getDataUrl(t,n){try{return t==="svg"?he().toSVG():he().toDataURL({format:this.getFormat(t),quality:this.getQuality(n),multiplier:Math.max(D().original.width/he().width,D().original.height/he().height)})}catch(r){r.message.toLowerCase().includes("tainted")&&ss.danger(se("Could not export canvas with external image."))}return null}getCanvasBlob(t,n){if(t==="json")return new Blob([n],{type:"application/json"});if(t==="svg")return new Blob([n],{type:"image/svg+xml"});const r=`image/${t}`;return n=n.replace(/data:image\/([a-z]*)?;base64,/,""),kj(n,r)}getJsonState(){return JSON.stringify({...Tl(),history:D().history})}applyWaterMark(){const t=D().config.watermarkText;t&&L().watermark.add(t)}getFormat(t){var r;const n=(r=D().config.tools)==null?void 0:r.export;return t=t||(n==null?void 0:n.defaultFormat)||"png",t==="jpg"&&(t="jpeg"),t}getQuality(t){var r;const n=(r=D().config.tools)==null?void 0:r.export;return t=t||(n==null?void 0:n.defaultQuality)||.8,t}}class Tj{constructor(){Se(this,"previewRect",null)}async apply(t){this.previewRect||this.showPreview(),this.updatePreview(t),he().remove(this.previewRect),he().clipPath=this.previewRect;const n=L().export.getDataUrl();n&&L().canvas.clear(),this.hidePreview(),n&&await L().canvas.addMainImage(n),he().clipPath=void 0}getPreviewRadius(){var t;return((t=this.previewRect)==null?void 0:t.rx)||0}updatePreview(t){this.previewRect&&(this.previewRect.set({rx:t,ry:t}),L().canvas.render())}showPreview(){const t=D().original.width*.04;this.previewRect=new we.fabric.Rect({width:D().original.width,height:D().original.height,rx:t,ry:t,objectCaching:!1,fill:"transparent",name:"round.rect",data:{pixieInternal:!0},stroke:"rgba(255,255,255,0.8)",strokeWidth:3,strokeDashArray:[4,4],selectable:!1,evented:!1}),he().add(this.previewRect),this.previewRect.moveTo(99),this.previewRect.viewportCenter(),L().canvas.render()}hidePreview(){this.previewRect&&(he().remove(this.previewRect),L().canvas.render(),this.previewRect=null)}}class Oj{get straightenAnchor(){return he().getObjects().find(t=>t.name===Ge.StraightenAnchor)}rotateLeft(){this.rotateFixed(-90)}rotateRight(){this.rotateFixed(90)}straighten(t){this.storeObjectsRelationToHelper(),L().objects.deselectActive();const n=(this.straightenAnchor.data.rotateAngle||0)+t,r=this.getImageScale(n,this.straightenAnchor);this.straightenAnchor.angle=n,this.straightenAnchor.scaleX=r,this.straightenAnchor.scaleY=r,this.straightenAnchor.data.straightenAngle=t,this.transformObjectsBasedOnHelper()}flip(t){const n=t==="horizontal"?"flipY":"flipX";L().objects.getAll().forEach(r=>{r[n]=!r[n]}),L().canvas.render()}rotateFixed(t){L().zoom.set(1,!1),L().objects.deselectActive();const n=this.straightenAnchor.data.rotateAngle||0;t=Math.round(t/90)*90;const r=n+(this.straightenAnchor.data.straightenAngle||0)+t;L().canvas.resize(D().original.height,D().original.width,{applyZoom:!1,resizeHelper:!1}),this.storeObjectsRelationToHelper(),this.straightenAnchor.rotate(r),this.straightenAnchor.data.rotateAngle=n+t,this.straightenAnchor.center(),this.transformObjectsBasedOnHelper(),L().frame.resize(L().frame.active.currentSizeInPercent),requestAnimationFrame(()=>{L().zoom.fitToScreen()})}getImageScale(t,n){t=we.fabric.util.degreesToRadians(t);const r=D().original.width,i=D().original.height,o=r/2,d=i/2,a=n.width/2,s=n.height/2,u=Math.sqrt(o**2+d**2),h=Math.asin(d/u);let l=(t%(Math.PI*2)+Math.PI*4)%(Math.PI*2);l>Math.PI&&(l-=Math.PI),l>Math.PI/2&&l<=Math.PI&&(l=Math.PI/2-(l-Math.PI/2));const f=Math.PI/2-h-Math.abs(l),c=Math.abs(h-Math.abs(l)),p=Math.cos(f)*u,m=Math.cos(c)*u;return Math.max(m/a,p/s)}storeObjectsRelationToHelper(){L().objects.getAll().forEach(t=>{if(t!==this.straightenAnchor){const n=we.fabric.util.multiplyTransformMatrices(we.fabric.util.invertTransform(this.straightenAnchor.calcTransformMatrix()),t.calcTransformMatrix());t.data={...t.data,relationToCanvas:n}}})}transformObjectsBasedOnHelper(){L().objects.getAll().forEach(t=>{if(t.data.relationToCanvas){const n=we.fabric.util.multiplyTransformMatrices(this.straightenAnchor.calcTransformMatrix(),t.data.relationToCanvas),r=we.fabric.util.qrDecompose(n);t.set({flipX:!1,flipY:!1}),t.setPositionByOrigin({x:r.translateX,y:r.translateY},"center","center"),t.set(r),t.setCoords(),t.data.relationToCanvas=null}})}resetStraightenAnchor(){const t=this.straightenAnchor;t&&he().remove(t);const n=new we.fabric.Rect({...ai,name:Ge.StraightenAnchor,visible:!1,width:D().original.width,height:D().original.height,data:{pixieInternal:!0,straightenAngle:0,rotateAngle:0}});he().add(n),n.viewportCenter()}}function Pj(e){const t=C6(e);D().editor.fabric=t,fe.setState({fabric:t}),D().editor.tools={canvas:new S6,objects:new D6,zoom:new _6,history:new F6,filter:new B6,resize:new $6,crop:new Y6,merge:new L6,shape:new G6,frame:new Q6,text:new J6,draw:new ij,transform:new Oj,import:new wj,watermark:new _j,export:new Ej,corners:new Tj}}function f2(e,t){const n=new ResizeObserver(r=>{const i=r[0].contentRect;t({width:i.width,height:i.height})});return e.current&&n.observe(e.current),()=>{e.current&&n.unobserve(e.current)}}function h2(e){const t=e.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}}const d2="flex flex-shrink-0 items-center justify-between px-12 py-[9px] w-full h-[54px]",p2={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,position:"absolute"},transition:{type:"tween",duration:.15}};function Jp(e,{padding:t,equalWidth:n,variant:r}={}){switch(e){case"2xs":return r==="link"?"text-xs":`text-xs h-24 ${n?"w-24":t||"px-10"}`;case"xs":return r==="link"?"text-xs":`text-xs h-30 ${n?"w-30":t||"px-14"}`;case"sm":return r==="link"?"text-sm":`text-sm h-36 ${n?"w-36":t||"px-18"}`;case"md":return r==="link"?"text-base":`text-base h-42 ${n?"w-42":t||"px-22"}`;case"lg":return r==="link"?"text-lg":`text-base h-50 ${n?"w-50":t||"px-26"}`;case"xl":return r==="link"?"text-xl":`text-lg h-60 ${n?"w-60":t||"px-32"}`;default:return e||""}}function Dj(e){const{variant:t,shadow:n,whitespace:r="whitespace-nowrap",display:i="inline-flex"}=e,o={...e,border:e.border||"border"};let d=[];return t==="outline"?d=Aj(o):t==="text"?d=Mj(o):t==="flat"||t==="raised"?d=Ij(o):t==="link"&&(d=jj(o)),[...d,n||t==="raised"&&"shadow-md",r,i,t&&"align-middle flex-shrink-0 items-center transition-button duration-200","select-none appearance-none no-underline outline-none disabled:pointer-events-none disabled:cursor-default"]}function Aj({color:e,border:t}){const n="disabled:text-disabled disabled:bg-transparent disabled:border-disabled-bg";switch(e){case"primary":return[`text-primary bg-transparent ${t} border-primary/50`,"hover:bg-primary/hover hover:border-primary",n];case"danger":return[`text-danger bg-transparent ${t} border-danger/50`,"hover:bg-danger/4 hover:border-danger",n];case"positive":return[`text-positive bg-transparent ${t} border-positive/50`,"hover:bg-positive/4 hover:border-positive",n];case"paper":return[`text bg-paper ${t}`,"hover:bg-hover",n];case"white":return["text-white bg-transparent border border-white","hover:bg-white/20","disabled:text-white/70 disabled:border-white/70 disabled:bg-transparent"];default:return[`bg-transparent ${t}`,"hover:bg-hover",n]}}function Mj({color:e}){const t="disabled:text-disabled disabled:bg-transparent";switch(e){case"primary":return["text-primary bg-transparent border-transparent","hover:bg-primary/4",t];case"danger":return["text-danger bg-transparent border-transparent","hover:bg-danger/4",t];case"positive":return["text-positive bg-transparent border-transparent","hover:bg-positive/4",t];case"white":return["text-white bg-transparent border-transparent","hover:bg-white/20","disabled:text-white/70 disabled:bg-transparent"];default:return["bg-transparent border-transparent","hover:bg-hover",t]}}function jj({color:e}){switch(e){case"primary":return["text-primary","hover:underline","disabled:text-disabled"];case"danger":return["text-danger","hover:underline","disabled:text-disabled"];default:return["text-main","hover:underline","disabled:text-disabled"]}}function Ij({color:e,border:t}){const n="disabled:text-disabled disabled:bg-disabled disabled:border-transparent disabled:shadow-none";switch(e){case"primary":return[`text-on-primary bg-primary ${t} border-primary`,"hover:bg-primary-dark hover:border-primary-dark",n];case"danger":return[`text-white bg-danger ${t} border-danger`,"hover:bg-danger/90 hover:border-danger/90",n];case"chip":return[`text-main bg-chip ${t} border-chip`,"hover:bg-chip/90 hover:border-chip/90",n];case"paper":return[`text-main bg-paper ${t} border-paper`,"hover:bg-paper/90 hover:border-paper/90",n];case"white":return[`text-black bg-white ${t} border-white`,"hover:bg-white",n];default:return[`bg ${t} border-background`,"hover:bg-hover",n]}}function Bt(e){return e&&(t=>{t.currentTarget.contains(t.target)&&e(t)})}const nr=E.forwardRef((e,t)=>{const{children:n,color:r=null,variant:i,radius:o,shadow:d,whitespace:a,justify:s="justify-center",className:u,href:h,form:l,border:f,elementType:c,to:p,relative:m,replace:g,end:v,display:y,type:b="button",onClick:w,onPointerDown:C,onPointerUp:_,onKeyDown:S,...T}=e,I=c||(h?"a":"button"),F=I==="a";return x.jsx(I,{ref:t,form:F?void 0:l,href:h,to:p,relative:m,type:F?void 0:b,replace:g,end:v,onPointerDown:Bt(C),onPointerUp:Bt(_),onClick:Bt(w),onKeyDown:Bt(S),className:le("focus-visible:ring",Dj({variant:i,color:r,border:f,whitespace:a,display:y}),o,s,u),...T,children:n})}),_t=ce.forwardRef(({children:e,startIcon:t,endIcon:n,size:r="sm",sizeClassName:i,className:o,equalWidth:d=!1,radius:a="rounded-button",variant:s="text",disabled:u,elementType:h,to:l,replace:f,href:c,download:p,...m},g)=>{const v=le("font-semibold",i||Jp(r,{equalWidth:d,variant:s}),o);return x.jsxs(nr,{className:v,ref:g,radius:a,variant:s,disabled:u,to:u?void 0:l,href:u?void 0:c,download:u?void 0:p,elementType:u?void 0:h,replace:u?void 0:f,...m,children:[t&&x.jsx(g2,{position:"start",icon:t,size:r}),e,n&&x.jsx(g2,{position:"end",icon:n,size:r})]})});function g2({icon:e,position:t,size:n}){const r=le("m-auto",{"-ml-4 mr-8":t==="start","-mr-4 ml-8":t==="end"},e.props.className);return ce.cloneElement(e,{className:r,size:n})}const m2=E.createContext(null);function eg(){return E.useContext(m2)}const tg=ve(x.jsx("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"}),"CheckOutlined"),Fj=ce.forwardRef((e,t)=>{let{startIcon:n,capitalizeFirst:r,children:i,description:o,endIcon:d,endSection:a,isDisabled:s,isActive:u,isSelected:h,showCheckmark:l,elementType:f="div",radius:c,padding:p,...m}=e;!n&&l&&(n=x.jsx(tg,{size:"sm",className:le("text-primary",!h&&"invisible")}));const g=le("icon-sm rounded overflow-hidden flex-shrink-0",!s&&"text-muted"),v=le(!s&&"text-muted"),y=f;return x.jsxs(y,{...m,"aria-disabled":s,className:Rj(e),ref:t,children:[n&&x.jsx("div",{className:g,children:n}),x.jsxs("div",{className:le("min-w-auto mr-auto w-full overflow-hidden overflow-ellipsis",r&&"first-letter:capitalize"),children:[i,o&&x.jsx("div",{className:le("mt-4 whitespace-normal text-xs",s?"text-disabled":"text-muted"),children:o})]}),(d||a)&&x.jsx("div",{className:d?g:v,children:d||a})]})});function Rj({className:e,isSelected:t,isActive:n,isDisabled:r,showCheckmark:i,endIcon:o,endSection:d,radius:a,padding:s}){let u="";r?u="text-disabled pointer-events-none":t?n?u="bg-primary/focus":u="bg-primary/selected hover:bg-primary/focus":n?u="hover:bg-fg-base/15 bg-focus":u="hover:bg-hover";let h;return s?h=s:i?o||d?h="pl-8 pr-8 py-8":h="pl-8 pr-24 py-8":h="px-20 py-8",le("w-full select-none outline-none cursor-pointer","text-sm truncate flex items-center gap-10",!r&&"text-main",h,u,e,a)}function fc({children:e,value:t,startIcon:n,endIcon:r,endSection:i,description:o,capitalizeFirst:d,textLabel:a,isDisabled:s,onSelected:u,onClick:h,...l}){var F;const{collection:f,showCheckmark:c,virtualFocus:p,listboxId:m,role:g,listItemsRef:v,handleItemSelection:y,state:{selectedValues:b,activeIndex:w,setActiveIndex:C}}=eg(),_=b.includes(t),S=(F=f.get(t))==null?void 0:F.index,T=w===S;if(S==null)return null;const I=T&&!s?-1:0;return x.jsx(Fj,{...l,onFocus:()=>{p||C(S)},onPointerEnter:$=>{C(S),p||$.currentTarget.focus()},onPointerDown:$=>{p&&$.preventDefault()},onKeyDown:$=>{($.key==="Enter"||$.key===" ")&&($.preventDefault(),y(t),u==null||u())},onClick:$=>{y(t),u==null||u(),h==null||h($)},ref:$=>v.current[S]=$,id:`${m}-${S}`,role:g==="menu"?"menuitem":"option",tabIndex:p?void 0:I,"aria-selected":T&&_,showCheckmark:c,isDisabled:s,isActive:T,isSelected:_,startIcon:n,description:o,endIcon:r,endSection:i,capitalizeFirst:d,"data-value":t,children:e})}var v2={exports:{}};(function(e){(function(){var t=Object.assign;typeof t!="function"&&(t=function(){var i=arguments,o=arguments[0];if(o==null)throw new TypeError("Cannot convert undefined or null to object");o=Object(o);for(var d=1;d<i.length;d++)if(i[d]&&typeof i[d]=="object")for(var a in i[d])o[a]=i[d][a];return o});function n(i){var o=i+"",d=o.indexOf("...");return d>=0&&(d<o.indexOf(")")||o.indexOf("arguments")>=0)}function r(i,o){o||(o={});var d=o.vargs||n(i),a=Object.create(null),s=[],u=[],h,l=new WeakMap,f=function(b,w,C){return setTimeout(function(){if(C){w.splice(b,1),C.splice(b,1);return}w instanceof WeakMap?w.delete(b):delete w[b]},o.maxAge)},c=o.maxAge>0&&o.maxAge<1/0?f:0,p=o.equals?o.equals:function(b,w){return b===w},m=o.maxArgs,g=o.serializer,v,y;return i.length===1&&!o.equals&&!d?(v=(function(b){var w=typeof b;if(!g&&(w==="object"&&b||w==="function")){var C;return l.get(b)||(!c||c(b,l),l.set(b,C=i.call(this,b)),C)}var _=w==="number"||w==="boolean"||b==null?b:w==="string"?JSON.stringify(b):g(b);return a[_]||(!c||c(_,a),a[_]=i.call(this,b))}).bind(this),y=1):v=(function(){var b=arguments.length;if(!b&&h!=null)return u[h];var w=m||b,C;for(C=s.length-1;C>=0;C--)if(!(!m&&s[C].length!==w)){for(var _=w-1;_>=0&&p(s[C][_],arguments[_]);_--)if(_===0)return u[C]}return C=s.length-(C+1),!b&&h==null&&(h=C),!c||c(C,u,s),u[C]=i.apply(this,s[C]=arguments)}).bind(this),v.clear=function(){l=new WeakMap,a=Object.create(null),s=[],u=[],h=void 0},v.keys=function(){return y?null:s.slice()},v.values=function(){return y?null:u.slice()},v.keyValues=function(){return y?{primitives:t({},a),objects:l}:null},v}e.exports=r,typeof window<"u"&&(window.nanomemoize=r)}).call(pt)})(v2);var Lj=v2.exports;const wa=st(Lj);function zj({children:e,label:t,index:n}){const r=E.useId();return x.jsxs("div",{role:"group",className:le(n!==0&&"border-t my-4"),"aria-labelledby":t?`be-select-${r}`:void 0,children:[t&&x.jsx("div",{className:"block uppercase text-muted text-xs px-16 py-10",role:"presentation",id:`be-select-${r}`,"aria-hidden":"true",children:t}),e]})}const Bj=wa(({maxItems:e,children:t,items:n,inputValue:r})=>{let i=$j({children:t,items:n}),o=Nj({collection:i,inputValue:r});return e&&(i=new Map([...i.entries()].slice(0,e)),o=new Map([...o.entries()].slice(0,e))),{collection:i,filteredCollection:o}}),Nj=wa(({collection:e,inputValue:t})=>{let n=new Map;const r=t?`${t}`.toLowerCase().trim():"";if(!r)n=e;else{let i=0;e.forEach((o,d)=>{(o.item?JSON.stringify(o.item):o.textLabel).toLowerCase().trim().includes(r)&&n.set(d,{...o,index:i++})})}return n}),$j=wa(({children:e,items:t})=>{let n;t&&typeof e=="function"?n=t.map(d=>e(d)):n=e;const r=new Map;let i=0;const o=(d,a,s,u)=>{const h=i++,l=a?t==null?void 0:t[s].items[u]:t==null?void 0:t[h];r.set(d.props.value,{index:h,element:d,textLabel:Vj(d),item:l,section:a,isDisabled:d.props.isDisabled,value:d.props.value})};return E.Children.forEach(n,(d,a)=>{E.isValidElement(d)&&(d.type===zj?E.Children.forEach(d.props.children,(s,u)=>{o(s,d,a,u)}):o(d))}),r});function Vj(e){var n;const t=e.props.children;return e.props.textLabel?e.props.textLabel:(n=t==null?void 0:t.props)!=null&&n.message?t.props.message:`${t}`||""}const Mn=Math.min,en=Math.max,hc=Math.round,dc=Math.floor,Vr=e=>({x:e,y:e}),Hj={left:"right",right:"left",bottom:"top",top:"bottom"},Wj={start:"end",end:"start"};function ng(e,t,n){return en(e,Mn(t,n))}function Hs(e,t){return typeof e=="function"?e(t):e}function Hr(e){return e.split("-")[0]}function Ws(e){return e.split("-")[1]}function y2(e){return e==="x"?"y":"x"}function rg(e){return e==="y"?"height":"width"}function xa(e){return["top","bottom"].includes(Hr(e))?"y":"x"}function ig(e){return y2(xa(e))}function Uj(e,t,n){n===void 0&&(n=!1);const r=Ws(e),i=ig(e),o=rg(i);let d=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(d=pc(d)),[d,pc(d)]}function Xj(e){const t=pc(e);return[sg(e),t,sg(t)]}function sg(e){return e.replace(/start|end/g,t=>Wj[t])}function Yj(e,t,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],d=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?o:d;default:return[]}}function Gj(e,t,n,r){const i=Ws(e);let o=Yj(Hr(e),n==="start",r);return i&&(o=o.map(d=>d+"-"+i),t&&(o=o.concat(o.map(sg)))),o}function pc(e){return e.replace(/left|right|bottom|top/g,t=>Hj[t])}function Kj(e){return{top:0,right:0,bottom:0,left:0,...e}}function b2(e){return typeof e!="number"?Kj(e):{top:e,right:e,bottom:e,left:e}}function gc(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function w2(e,t,n){let{reference:r,floating:i}=e;const o=xa(t),d=ig(t),a=rg(d),s=Hr(t),u=o==="y",h=r.x+r.width/2-i.width/2,l=r.y+r.height/2-i.height/2,f=r[a]/2-i[a]/2;let c;switch(s){case"top":c={x:h,y:r.y-i.height};break;case"bottom":c={x:h,y:r.y+r.height};break;case"right":c={x:r.x+r.width,y:l};break;case"left":c={x:r.x-i.width,y:l};break;default:c={x:r.x,y:r.y}}switch(Ws(t)){case"start":c[d]-=f*(n&&u?-1:1);break;case"end":c[d]+=f*(n&&u?-1:1);break}return c}const qj=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:d}=n,a=o.filter(Boolean),s=await(d.isRTL==null?void 0:d.isRTL(t));let u=await d.getElementRects({reference:e,floating:t,strategy:i}),{x:h,y:l}=w2(u,r,s),f=r,c={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:v}=a[m],{x:y,y:b,data:w,reset:C}=await v({x:h,y:l,initialPlacement:r,placement:f,strategy:i,middlewareData:c,rects:u,platform:d,elements:{reference:e,floating:t}});h=y??h,l=b??l,c={...c,[g]:{...c[g],...w}},C&&p<=50&&(p++,typeof C=="object"&&(C.placement&&(f=C.placement),C.rects&&(u=C.rects===!0?await d.getElementRects({reference:e,floating:t,strategy:i}):C.rects),{x:h,y:l}=w2(u,f,s)),m=-1)}return{x:h,y:l,placement:f,strategy:i,middlewareData:c}};async function og(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:o,rects:d,elements:a,strategy:s}=e,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:l="floating",altBoundary:f=!1,padding:c=0}=Hs(t,e),p=b2(c),g=a[f?l==="floating"?"reference":"floating":l],v=gc(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(g)))==null||n?g:g.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:u,rootBoundary:h,strategy:s})),y=l==="floating"?{x:r,y:i,width:d.floating.width,height:d.floating.height}:d.reference,b=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),w=await(o.isElement==null?void 0:o.isElement(b))?await(o.getScale==null?void 0:o.getScale(b))||{x:1,y:1}:{x:1,y:1},C=gc(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:b,strategy:s}):y);return{top:(v.top-C.top+p.top)/w.y,bottom:(C.bottom-v.bottom+p.bottom)/w.y,left:(v.left-C.left+p.left)/w.x,right:(C.right-v.right+p.right)/w.x}}const Zj=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:o,platform:d,elements:a,middlewareData:s}=t,{element:u,padding:h=0}=Hs(e,t)||{};if(u==null)return{};const l=b2(h),f={x:n,y:r},c=ig(i),p=rg(c),m=await d.getDimensions(u),g=c==="y",v=g?"top":"left",y=g?"bottom":"right",b=g?"clientHeight":"clientWidth",w=o.reference[p]+o.reference[c]-f[c]-o.floating[p],C=f[c]-o.reference[c],_=await(d.getOffsetParent==null?void 0:d.getOffsetParent(u));let S=_?_[b]:0;(!S||!await(d.isElement==null?void 0:d.isElement(_)))&&(S=a.floating[b]||o.floating[p]);const T=w/2-C/2,I=S/2-m[p]/2-1,F=Mn(l[v],I),$=Mn(l[y],I),G=F,ne=S-m[p]-$,X=S/2-m[p]/2+T,Q=ng(G,X,ne),Z=!s.arrow&&Ws(i)!=null&&X!==Q&&o.reference[p]/2-(X<G?F:$)-m[p]/2<0,ie=Z?X<G?X-G:X-ne:0;return{[c]:f[c]+ie,data:{[c]:Q,centerOffset:X-Q-ie,...Z&&{alignmentOffset:ie}},reset:Z}}}),Qj=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:o,rects:d,initialPlacement:a,platform:s,elements:u}=t,{mainAxis:h=!0,crossAxis:l=!0,fallbackPlacements:f,fallbackStrategy:c="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=Hs(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const v=Hr(i),y=Hr(a)===a,b=await(s.isRTL==null?void 0:s.isRTL(u.floating)),w=f||(y||!m?[pc(a)]:Xj(a));!f&&p!=="none"&&w.push(...Gj(a,m,p,b));const C=[a,...w],_=await og(t,g),S=[];let T=((r=o.flip)==null?void 0:r.overflows)||[];if(h&&S.push(_[v]),l){const G=Uj(i,d,b);S.push(_[G[0]],_[G[1]])}if(T=[...T,{placement:i,overflows:S}],!S.every(G=>G<=0)){var I,F;const G=(((I=o.flip)==null?void 0:I.index)||0)+1,ne=C[G];if(ne)return{data:{index:G,overflows:T},reset:{placement:ne}};let X=(F=T.filter(Q=>Q.overflows[0]<=0).sort((Q,Z)=>Q.overflows[1]-Z.overflows[1])[0])==null?void 0:F.placement;if(!X)switch(c){case"bestFit":{var $;const Q=($=T.map(Z=>[Z.placement,Z.overflows.filter(ie=>ie>0).reduce((ie,V)=>ie+V,0)]).sort((Z,ie)=>Z[1]-ie[1])[0])==null?void 0:$[0];Q&&(X=Q);break}case"initialPlacement":X=a;break}if(i!==X)return{reset:{placement:X}}}return{}}}};async function Jj(e,t){const{placement:n,platform:r,elements:i}=e,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),d=Hr(n),a=Ws(n),s=xa(n)==="y",u=["left","top"].includes(d)?-1:1,h=o&&s?-1:1,l=Hs(t,e);let{mainAxis:f,crossAxis:c,alignmentAxis:p}=typeof l=="number"?{mainAxis:l,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...l};return a&&typeof p=="number"&&(c=a==="end"?p*-1:p),s?{x:c*h,y:f*u}:{x:f*u,y:c*h}}const e8=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:o,placement:d,middlewareData:a}=t,s=await Jj(t,e);return d===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+s.x,y:o+s.y,data:{...s,placement:d}}}}},t8=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:d=!1,limiter:a={fn:g=>{let{x:v,y}=g;return{x:v,y}}},...s}=Hs(e,t),u={x:n,y:r},h=await og(t,s),l=xa(Hr(i)),f=y2(l);let c=u[f],p=u[l];if(o){const g=f==="y"?"top":"left",v=f==="y"?"bottom":"right",y=c+h[g],b=c-h[v];c=ng(y,c,b)}if(d){const g=l==="y"?"top":"left",v=l==="y"?"bottom":"right",y=p+h[g],b=p-h[v];p=ng(y,p,b)}const m=a.fn({...t,[f]:c,[l]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},n8=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:o}=t,{apply:d=()=>{},...a}=Hs(e,t),s=await og(t,a),u=Hr(n),h=Ws(n),l=xa(n)==="y",{width:f,height:c}=r.floating;let p,m;u==="top"||u==="bottom"?(p=u,m=h===(await(i.isRTL==null?void 0:i.isRTL(o.floating))?"start":"end")?"left":"right"):(m=u,p=h==="end"?"top":"bottom");const g=c-s.top-s.bottom,v=f-s.left-s.right,y=Mn(c-s[p],g),b=Mn(f-s[m],v),w=!t.middlewareData.shift;let C=y,_=b;if(l?_=h||w?Mn(b,v):v:C=h||w?Mn(y,g):g,w&&!h){const T=en(s.left,0),I=en(s.right,0),F=en(s.top,0),$=en(s.bottom,0);l?_=f-2*(T!==0||I!==0?T+I:en(s.left,s.right)):C=c-2*(F!==0||$!==0?F+$:en(s.top,s.bottom))}await d({...t,availableWidth:_,availableHeight:C});const S=await i.getDimensions(o.floating);return f!==S.width||c!==S.height?{reset:{rects:!0}}:{}}}};function Us(e){return x2(e)?(e.nodeName||"").toLowerCase():"#document"}function tn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function rr(e){var t;return(t=(x2(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function x2(e){return e instanceof Node||e instanceof tn(e).Node}function jn(e){return e instanceof Element||e instanceof tn(e).Element}function In(e){return e instanceof HTMLElement||e instanceof tn(e).HTMLElement}function C2(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof tn(e).ShadowRoot}function Ca(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Sn(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function r8(e){return["table","td","th"].includes(Us(e))}function ag(e){const t=lg(),n=Sn(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function i8(e){let t=Wr(e);for(;In(t)&&!Xs(t);){if(ag(t))return t;t=Wr(t)}return null}function lg(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Xs(e){return["html","body","#document"].includes(Us(e))}function Sn(e){return tn(e).getComputedStyle(e)}function mc(e){return jn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Wr(e){if(Us(e)==="html")return e;const t=e.assignedSlot||e.parentNode||C2(e)&&e.host||rr(e);return C2(t)?t.host:t}function _2(e){const t=Wr(e);return Xs(t)?e.ownerDocument?e.ownerDocument.body:e.body:In(t)&&Ca(t)?t:_2(t)}function _a(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=_2(e),o=i===((r=e.ownerDocument)==null?void 0:r.body),d=tn(i);return o?t.concat(d,d.visualViewport||[],Ca(i)?i:[],d.frameElement&&n?_a(d.frameElement):[]):t.concat(i,_a(i,[],n))}function S2(e){const t=Sn(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=In(e),o=i?e.offsetWidth:n,d=i?e.offsetHeight:r,a=hc(n)!==o||hc(r)!==d;return a&&(n=o,r=d),{width:n,height:r,$:a}}function ug(e){return jn(e)?e:e.contextElement}function Ys(e){const t=ug(e);if(!In(t))return Vr(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=S2(t);let d=(o?hc(n.width):n.width)/r,a=(o?hc(n.height):n.height)/i;return(!d||!Number.isFinite(d))&&(d=1),(!a||!Number.isFinite(a))&&(a=1),{x:d,y:a}}const s8=Vr(0);function k2(e){const t=tn(e);return!lg()||!t.visualViewport?s8:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function o8(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==tn(e)?!1:t}function Mi(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),o=ug(e);let d=Vr(1);t&&(r?jn(r)&&(d=Ys(r)):d=Ys(e));const a=o8(o,n,r)?k2(o):Vr(0);let s=(i.left+a.x)/d.x,u=(i.top+a.y)/d.y,h=i.width/d.x,l=i.height/d.y;if(o){const f=tn(o),c=r&&jn(r)?tn(r):r;let p=f,m=p.frameElement;for(;m&&r&&c!==p;){const g=Ys(m),v=m.getBoundingClientRect(),y=Sn(m),b=v.left+(m.clientLeft+parseFloat(y.paddingLeft))*g.x,w=v.top+(m.clientTop+parseFloat(y.paddingTop))*g.y;s*=g.x,u*=g.y,h*=g.x,l*=g.y,s+=b,u+=w,p=tn(m),m=p.frameElement}}return gc({width:h,height:l,x:s,y:u})}const a8=[":popover-open",":modal"];function cg(e){return a8.some(t=>{try{return e.matches(t)}catch{return!1}})}function l8(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const o=i==="fixed",d=rr(r),a=t?cg(t.floating):!1;if(r===d||a&&o)return n;let s={scrollLeft:0,scrollTop:0},u=Vr(1);const h=Vr(0),l=In(r);if((l||!l&&!o)&&((Us(r)!=="body"||Ca(d))&&(s=mc(r)),In(r))){const f=Mi(r);u=Ys(r),h.x=f.x+r.clientLeft,h.y=f.y+r.clientTop}return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-s.scrollLeft*u.x+h.x,y:n.y*u.y-s.scrollTop*u.y+h.y}}function u8(e){return Array.from(e.getClientRects())}function E2(e){return Mi(rr(e)).left+mc(e).scrollLeft}function c8(e){const t=rr(e),n=mc(e),r=e.ownerDocument.body,i=en(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=en(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let d=-n.scrollLeft+E2(e);const a=-n.scrollTop;return Sn(r).direction==="rtl"&&(d+=en(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:d,y:a}}function f8(e,t){const n=tn(e),r=rr(e),i=n.visualViewport;let o=r.clientWidth,d=r.clientHeight,a=0,s=0;if(i){o=i.width,d=i.height;const u=lg();(!u||u&&t==="fixed")&&(a=i.offsetLeft,s=i.offsetTop)}return{width:o,height:d,x:a,y:s}}function h8(e,t){const n=Mi(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=In(e)?Ys(e):Vr(1),d=e.clientWidth*o.x,a=e.clientHeight*o.y,s=i*o.x,u=r*o.y;return{width:d,height:a,x:s,y:u}}function T2(e,t,n){let r;if(t==="viewport")r=f8(e,n);else if(t==="document")r=c8(rr(e));else if(jn(t))r=h8(t,n);else{const i=k2(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return gc(r)}function O2(e,t){const n=Wr(e);return n===t||!jn(n)||Xs(n)?!1:Sn(n).position==="fixed"||O2(n,t)}function d8(e,t){const n=t.get(e);if(n)return n;let r=_a(e,[],!1).filter(a=>jn(a)&&Us(a)!=="body"),i=null;const o=Sn(e).position==="fixed";let d=o?Wr(e):e;for(;jn(d)&&!Xs(d);){const a=Sn(d),s=ag(d);!s&&a.position==="fixed"&&(i=null),(o?!s&&!i:!s&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Ca(d)&&!s&&O2(e,d))?r=r.filter(h=>h!==d):i=a,d=Wr(d)}return t.set(e,r),r}function p8(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const d=[...n==="clippingAncestors"?cg(t)?[]:d8(t,this._c):[].concat(n),r],a=d[0],s=d.reduce((u,h)=>{const l=T2(t,h,i);return u.top=en(l.top,u.top),u.right=Mn(l.right,u.right),u.bottom=Mn(l.bottom,u.bottom),u.left=en(l.left,u.left),u},T2(t,a,i));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}}function g8(e){const{width:t,height:n}=S2(e);return{width:t,height:n}}function m8(e,t,n){const r=In(t),i=rr(t),o=n==="fixed",d=Mi(e,!0,o,t);let a={scrollLeft:0,scrollTop:0};const s=Vr(0);if(r||!r&&!o)if((Us(t)!=="body"||Ca(i))&&(a=mc(t)),r){const l=Mi(t,!0,o,t);s.x=l.x+t.clientLeft,s.y=l.y+t.clientTop}else i&&(s.x=E2(i));const u=d.left+a.scrollLeft-s.x,h=d.top+a.scrollTop-s.y;return{x:u,y:h,width:d.width,height:d.height}}function fg(e){return Sn(e).position==="static"}function P2(e,t){return!In(e)||Sn(e).position==="fixed"?null:t?t(e):e.offsetParent}function D2(e,t){const n=tn(e);if(cg(e))return n;if(!In(e)){let i=Wr(e);for(;i&&!Xs(i);){if(jn(i)&&!fg(i))return i;i=Wr(i)}return n}let r=P2(e,t);for(;r&&r8(r)&&fg(r);)r=P2(r,t);return r&&Xs(r)&&fg(r)&&!ag(r)?n:r||i8(e)||n}const v8=async function(e){const t=this.getOffsetParent||D2,n=this.getDimensions,r=await n(e.floating);return{reference:m8(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function y8(e){return Sn(e).direction==="rtl"}const b8={convertOffsetParentRelativeRectToViewportRelativeRect:l8,getDocumentElement:rr,getClippingRect:p8,getOffsetParent:D2,getElementRects:v8,getClientRects:u8,getDimensions:g8,getScale:Ys,isElement:jn,isRTL:y8};function w8(e,t){let n=null,r;const i=rr(e);function o(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function d(a,s){a===void 0&&(a=!1),s===void 0&&(s=1),o();const{left:u,top:h,width:l,height:f}=e.getBoundingClientRect();if(a||t(),!l||!f)return;const c=dc(h),p=dc(i.clientWidth-(u+l)),m=dc(i.clientHeight-(h+f)),g=dc(u),y={rootMargin:-c+"px "+-p+"px "+-m+"px "+-g+"px",threshold:en(0,Mn(1,s))||1};let b=!0;function w(C){const _=C[0].intersectionRatio;if(_!==s){if(!b)return d();_?d(!1,_):r=setTimeout(()=>{d(!1,1e-7)},1e3)}b=!1}try{n=new IntersectionObserver(w,{...y,root:i.ownerDocument})}catch{n=new IntersectionObserver(w,y)}n.observe(e)}return d(!0),o}function x8(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:d=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:s=!1}=r,u=ug(e),h=i||o?[...u?_a(u):[],..._a(t)]:[];h.forEach(v=>{i&&v.addEventListener("scroll",n,{passive:!0}),o&&v.addEventListener("resize",n)});const l=u&&a?w8(u,n):null;let f=-1,c=null;d&&(c=new ResizeObserver(v=>{let[y]=v;y&&y.target===u&&c&&(c.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var b;(b=c)==null||b.observe(t)})),n()}),u&&!s&&c.observe(u),c.observe(t));let p,m=s?Mi(e):null;s&&g();function g(){const v=Mi(e);m&&(v.x!==m.x||v.y!==m.y||v.width!==m.width||v.height!==m.height)&&n(),m=v,p=requestAnimationFrame(g)}return n(),()=>{var v;h.forEach(y=>{i&&y.removeEventListener("scroll",n),o&&y.removeEventListener("resize",n)}),l==null||l(),(v=c)==null||v.disconnect(),c=null,s&&cancelAnimationFrame(p)}}const C8=e8,_8=t8,S8=Qj,k8=n8,A2=Zj,E8=(e,t,n)=>{const r=new Map,i={platform:b8,...n},o={...i.platform,_c:r};return qj(e,t,{...i,platform:o})},T8=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?A2({element:r.current,padding:i}).fn(n):{}:r?A2({element:r,padding:i}).fn(n):{}}}};var vc=typeof document<"u"?E.useLayoutEffect:E.useEffect;function yc(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!yc(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&e.$$typeof)&&!yc(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function M2(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function j2(e,t){const n=M2(e);return Math.round(t*n)/n}function I2(e){const t=E.useRef(e);return vc(()=>{t.current=e}),t}function O8(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:d}={},transform:a=!0,whileElementsMounted:s,open:u}=e,[h,l]=E.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,c]=E.useState(r);yc(f,r)||c(r);const[p,m]=E.useState(null),[g,v]=E.useState(null),y=E.useCallback(Z=>{Z!=_.current&&(_.current=Z,m(Z))},[m]),b=E.useCallback(Z=>{Z!==S.current&&(S.current=Z,v(Z))},[v]),w=o||p,C=d||g,_=E.useRef(null),S=E.useRef(null),T=E.useRef(h),I=I2(s),F=I2(i),$=E.useCallback(()=>{if(!_.current||!S.current)return;const Z={placement:t,strategy:n,middleware:f};F.current&&(Z.platform=F.current),E8(_.current,S.current,Z).then(ie=>{const V={...ie,isPositioned:!0};G.current&&!yc(T.current,V)&&(T.current=V,Is.flushSync(()=>{l(V)}))})},[f,t,n,F]);vc(()=>{u===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,l(Z=>({...Z,isPositioned:!1})))},[u]);const G=E.useRef(!1);vc(()=>(G.current=!0,()=>{G.current=!1}),[]),vc(()=>{if(w&&(_.current=w),C&&(S.current=C),w&&C){if(I.current)return I.current(w,C,$);$()}},[w,C,$,I]);const ne=E.useMemo(()=>({reference:_,floating:S,setReference:y,setFloating:b}),[y,b]),X=E.useMemo(()=>({reference:w,floating:C}),[w,C]),Q=E.useMemo(()=>{const Z={position:n,left:0,top:0};if(!X.floating)return Z;const ie=j2(X.floating,h.x),V=j2(X.floating,h.y);return a?{...Z,transform:"translate("+ie+"px, "+V+"px)",...M2(X.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ie,top:V}},[n,a,X.floating,h.x,h.y]);return E.useMemo(()=>({...h,update:$,refs:ne,elements:X,floatingStyles:Q}),[h,$,ne,X,Q])}function P8(e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}function hg({floatingWidth:e,ref:t,disablePositioning:n=!1,placement:r="bottom",offset:i=2,showArrow:o=!1,maxHeight:d,shiftCrossAxis:a=!0,fallbackPlacements:s}){const u=E.useRef(null),h={placement:r,strategy:"fixed"};n||(h.whileElementsMounted=x8,h.middleware=[C8(i),_8({padding:16,crossAxis:a,mainAxis:!0}),S8({padding:16,fallbackPlacements:s}),k8({apply({rects:v,availableHeight:y,availableWidth:b,elements:w}){e==="matchTrigger"&&d!=null?Object.assign(w.floating.style,{width:`${v.reference.width}px`,maxWidth:`${b}`,maxHeight:`${Math.min(y,d)}px`}):d!=null&&Object.assign(w.floating.style,{maxHeight:`${Math.min(y,d)}px`})},padding:16})],o&&h.middleware.push(T8({element:u})));const l=O8(h),f=E.useMemo(()=>P8([t,l.refs.setReference]),[l.refs.setReference,t]),{x:c,y:p}=l.middlewareData.arrow||{},m={top:"bottom",right:"left",bottom:"top",left:"right"}[l.placement.split("-")[0]],g={left:c,top:p,right:"",bottom:"",[m]:"-4px"};return{...l,reference:f,arrowRef:u,arrowStyle:g}}function F2(e,t){const{children:n,items:r,role:i="listbox",virtualFocus:o,focusLoopingMode:d="stay",autoFocusFirstItem:a=!0,onItemSelected:s,clearInputOnItemSelection:u,blurReferenceOnItemSelection:h,floatingWidth:l="matchTrigger",floatingMinWidth:f,floatingMaxHeight:c,offset:p,placement:m,showCheckmark:g,showEmptyMessage:v,maxItems:y,isAsync:b,allowCustomValue:w,clearSelectionOnInputClear:C}=e,_=e.selectionMode||"none",T=`${E.useId()}-listbox`,[I,F]=$r(e.inputValue,e.defaultInputValue||"",e.onInputValueChange),[$,G]=E.useState("all"),ne=Bj({children:n,items:r,inputValue:b?void 0:I,maxItems:y}),X=$==="all"?ne.collection:ne.filteredCollection,Q=E.useRef([]),Z=E.useMemo(()=>[...X.values()].map(z=>z.isDisabled?null:z.textLabel),[X]),{selectedValues:ie,selectValues:V}=A8(e),[k,P]=$r(e.isOpen,e.defaultIsOpen,e.onOpenChange),[A,j]=E.useState(null),H=hg({floatingWidth:l,ref:t,placement:m,offset:p,maxHeight:c??420,shiftCrossAxis:!o}),{refs:M,strategy:O,x:R,y:B}=H,U=_==="none"?void 0:X.get(ie[0]),W=_==="none"||U==null?void 0:U.index,ee=z=>{if(_!=="none"){const K=[...X.values()][z];K&&V(K.value)}},re=E.useCallback((z,K)=>{var ae,ye;const te=[...X.values()],N=!te.find(ge=>!ge.isDisabled),q=X.size-1;if(K==null||!X.size||K>q||K<0||N){j(null);return}K=D8(te,K,d,z),j(K),K!=null&&(o?(ae=Q.current[K])==null||ae.scrollIntoView({block:"nearest"}):(ye=Q.current[K])==null||ye.focus())},[X,o,d]),ue=E.useCallback(z=>{F(z.target.value),G(z.target.value.trim()?"filtered":"all"),z.target.value?P(!0):C&&V(""),a&&A==null?re("increment",0):j(null)},[F,P,G,V,C,re,a,A]);return{handleItemSelection:z=>{const K=M.reference.current;_!=="none"?V(z):K&&"focus"in K&&K.focus(),o&&(F(u?"":`${z}`),h&&K&&"blur"in K&&K.blur()),G("all"),P(!1),s==null||s(z),j(null)},onInputChange:ue,focusLoopingMode:d,floatingWidth:l,floatingMinWidth:f,floatingMaxHeight:c,showCheckmark:g,collection:X,collections:ne,virtualFocus:o,focusItem:re,showEmptyMessage:v&&!!I,allowCustomValue:w,refs:M,reference:H.reference,floating:M.setFloating,positionStyle:{position:O,top:B??"",left:R??""},listContent:Z,listItemsRef:Q,listboxId:T,role:i,state:{activeIndex:A,setActiveIndex:j,selectedIndex:W,setSelectedIndex:ee,selectionMode:_,selectedValues:ie,selectValues:V,inputValue:I,setInputValue:F,isOpen:k,setIsOpen:P,setActiveCollection:G}}}function D8(e,t,n,r){var o;const i=e.length-1;for(;(o=e[t])!=null&&o.isDisabled;)if(r==="increment"){if(t++,t>=i)if(n==="loop")t=0;else return n==="stay"?t-1:null}else if(t--,t<0)if(n==="loop")t=i;else return n==="stay"?t+1:null;return t}function A8(e){const{selectionMode:t,allowEmptySelection:n}=e,r=t==="single"||t==="multiple",[i,o]=$r(r?e.selectedValue:void 0,r?e.defaultSelectedValue:void 0,r?e.onSelectionChange:void 0),d=E.useMemo(()=>typeof i>"u"?[]:Array.isArray(i)?i:[i],[i]),a=E.useCallback(s=>{const u=Array.isArray(s)?s:[s];t==="single"?o(u[0]):u.forEach(h=>{const l=d.indexOf(h);l===-1?(d.push(h),o([...d])):(d.length>1||n)&&(d.splice(l,1),o([...d]))})},[n,d,t,o]);return{selectedValues:d,selectValues:a}}const M8=768;function j8(){return Np()||typeof window>"u"?OT().is_mobile_device??!1:window.screen.width<=M8}let Sa=null,I8=new Set,ka=new Map,ji=!1,dg=!1;function pg(e,t){for(let n of I8)n(e,t)}function F8(e){return!(e.metaKey||!Wx()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function bc(e){ji=!0,F8(e)&&(Sa="keyboard",pg("keyboard",e))}function dn(e){Sa="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(ji=!0,pg("pointer",e))}function R2(e){w6(e)&&(ji=!0,Sa="virtual")}function L2(e){e.target===window||e.target===document||(!ji&&!dg&&(Sa="virtual",pg("virtual",e)),ji=!1,dg=!1)}function z2(){ji=!1,dg=!0}function B2(e){if(typeof window>"u"||ka.get(ic(e)))return;const t=ic(e),n=Ct(e);let r=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){ji=!0,r.apply(this,arguments)},n.addEventListener("keydown",bc,!0),n.addEventListener("keyup",bc,!0),n.addEventListener("click",R2,!0),t.addEventListener("focus",L2,!0),t.addEventListener("blur",z2,!1),typeof PointerEvent<"u"?(n.addEventListener("pointerdown",dn,!0),n.addEventListener("pointermove",dn,!0),n.addEventListener("pointerup",dn,!0)):(n.addEventListener("mousedown",dn,!0),n.addEventListener("mousemove",dn,!0),n.addEventListener("mouseup",dn,!0)),t.addEventListener("beforeunload",()=>{N2(e)},{once:!0}),ka.set(t,{focus:r})}const N2=(e,t)=>{const n=ic(e),r=Ct(e);t&&r.removeEventListener("DOMContentLoaded",t),ka.has(n)&&(n.HTMLElement.prototype.focus=ka.get(n).focus,r.removeEventListener("keydown",bc,!0),r.removeEventListener("keyup",bc,!0),r.removeEventListener("click",R2,!0),n.removeEventListener("focus",L2,!0),n.removeEventListener("blur",z2,!1),typeof PointerEvent<"u"?(r.removeEventListener("pointerdown",dn,!0),r.removeEventListener("pointermove",dn,!0),r.removeEventListener("pointerup",dn,!0)):(r.removeEventListener("mousedown",dn,!0),r.removeEventListener("mousemove",dn,!0),r.removeEventListener("mouseup",dn,!0)),ka.delete(n))};function R8(e){const t=Ct(e);let n;return t.readyState!=="loading"?B2(e):(n=()=>{B2(e)},t.addEventListener("DOMContentLoaded",n)),()=>N2(e,n)}typeof document<"u"&&R8();function L8(){return Sa}function z8(e){const t=Ct(e);if(L8()==="virtual"){let n=t.activeElement;y6(()=>{t.activeElement===n&&e.isConnected&&Hx(e)})}else Hx(e)}function B8(e){const t=ic(e);if(!(e instanceof t.HTMLElement)&&!(e instanceof t.SVGElement))return!1;let{display:n,visibility:r}=e.style,i=n!=="none"&&r!=="hidden"&&r!=="collapse";if(i){const{getComputedStyle:o}=e.ownerDocument.defaultView;let{display:d,visibility:a}=o(e);i=d!=="none"&&a!=="hidden"&&a!=="collapse"}return i}function N8(e,t){return!e.hasAttribute("hidden")&&!e.hasAttribute("data-react-aria-prevent-focus")&&(e.nodeName==="DETAILS"&&t&&t.nodeName!=="SUMMARY"?e.hasAttribute("open"):!0)}function $2(e,t){return e.nodeName!=="#comment"&&B8(e)&&N8(e,t)&&(!e.parentElement||$2(e.parentElement,e))}const gg=ce.createContext(null);let Ne=null;function wc(e){let{children:t,contain:n,restoreFocus:r,autoFocus:i}=e,o=E.useRef(null),d=E.useRef(null),a=E.useRef([]),{parentNode:s}=E.useContext(gg)||{},u=E.useMemo(()=>new bg({scopeRef:a}),[a]);Qt(()=>{let f=s||Je.root;if(Je.getTreeNode(f.scopeRef)&&Ne&&!xc(Ne,f.scopeRef)){let c=Je.getTreeNode(Ne);c&&(f=c)}f.addChild(u),Je.addNode(u)},[u,s]),Qt(()=>{let f=Je.getTreeNode(a);f&&(f.contain=!!n)},[n]),Qt(()=>{var f;let c=(f=o.current)===null||f===void 0?void 0:f.nextSibling,p=[];for(;c&&c!==d.current;)p.push(c),c=c.nextSibling;a.current=p},[t]),Y8(a,r,n),U8(a,n),K8(a,r,n),X8(a,i),E.useEffect(()=>{const f=Ct(a.current?a.current[0]:void 0).activeElement;let c=null;if(St(f,a.current)){for(let p of Je.traverse())p.scopeRef&&St(f,p.scopeRef.current)&&(c=p);c===Je.getTreeNode(a)&&(Ne=c.scopeRef)}},[a]),Qt(()=>()=>{var f,c,p;let m=(p=(c=Je.getTreeNode(a))===null||c===void 0||(f=c.parent)===null||f===void 0?void 0:f.scopeRef)!==null&&p!==void 0?p:null;(a===Ne||xc(a,Ne))&&(!m||Je.getTreeNode(m))&&(Ne=m),Je.removeTreeNode(a)},[a]);let h=E.useMemo(()=>V8(a),[]),l=E.useMemo(()=>({focusManager:h,parentNode:u}),[u,h]);return ce.createElement(gg.Provider,{value:l},ce.createElement("span",{"data-focus-scope-start":!0,hidden:!0,ref:o}),t,ce.createElement("span",{"data-focus-scope-end":!0,hidden:!0,ref:d}))}function $8(){var e;return(e=E.useContext(gg))===null||e===void 0?void 0:e.focusManager}function V8(e){return{focusNext(t={}){let n=e.current,{from:r,tabbable:i,wrap:o,accept:d}=t,a=r||Ct(n[0]).activeElement,s=n[0].previousElementSibling,u=Ii(n),h=sr(u,{tabbable:i,accept:d},n);h.currentNode=St(a,n)?a:s;let l=h.nextNode();return!l&&o&&(h.currentNode=s,l=h.nextNode()),l&&ir(l,!0),l},focusPrevious(t={}){let n=e.current,{from:r,tabbable:i,wrap:o,accept:d}=t,a=r||Ct(n[0]).activeElement,s=n[n.length-1].nextElementSibling,u=Ii(n),h=sr(u,{tabbable:i,accept:d},n);h.currentNode=St(a,n)?a:s;let l=h.previousNode();return!l&&o&&(h.currentNode=s,l=h.previousNode()),l&&ir(l,!0),l},focusFirst(t={}){let n=e.current,{tabbable:r,accept:i}=t,o=Ii(n),d=sr(o,{tabbable:r,accept:i},n);d.currentNode=n[0].previousElementSibling;let a=d.nextNode();return a&&ir(a,!0),a},focusLast(t={}){let n=e.current,{tabbable:r,accept:i}=t,o=Ii(n),d=sr(o,{tabbable:r,accept:i},n);d.currentNode=n[n.length-1].nextElementSibling;let a=d.previousNode();return a&&ir(a,!0),a}}}const mg=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[contenteditable]"],H8=mg.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])";mg.push('[tabindex]:not([tabindex="-1"]):not([disabled])');const W8=mg.join(':not([hidden]):not([tabindex="-1"]),');function Ii(e){return e[0].parentElement}function Ea(e){let t=Je.getTreeNode(Ne);for(;t&&t.scopeRef!==e;){if(t.contain)return!1;t=t.parent}return!0}function U8(e,t){let n=E.useRef(),r=E.useRef();Qt(()=>{let i=e.current;if(!t){r.current&&(cancelAnimationFrame(r.current),r.current=void 0);return}const o=Ct(i?i[0]:void 0);let d=u=>{if(u.key!=="Tab"||u.altKey||u.ctrlKey||u.metaKey||!Ea(e)||u.isComposing)return;let h=o.activeElement,l=e.current;if(!l||!St(h,l))return;let f=Ii(l),c=sr(f,{tabbable:!0},l);if(!h)return;c.currentNode=h;let p=u.shiftKey?c.previousNode():c.nextNode();p||(c.currentNode=u.shiftKey?l[l.length-1].nextElementSibling:l[0].previousElementSibling,p=u.shiftKey?c.previousNode():c.nextNode()),u.preventDefault(),p&&ir(p,!0)},a=u=>{(!Ne||xc(Ne,e))&&St(u.target,e.current)?(Ne=e,n.current=u.target):Ea(e)&&!vg(u.target,e)?n.current?n.current.focus():Ne&&Ne.current&&Cc(Ne.current):Ea(e)&&(n.current=u.target)},s=u=>{r.current&&cancelAnimationFrame(r.current),r.current=requestAnimationFrame(()=>{if(o.activeElement&&Ea(e)&&!vg(o.activeElement,e))if(Ne=e,o.body.contains(u.target)){var h;n.current=u.target,(h=n.current)===null||h===void 0||h.focus()}else Ne.current&&Cc(Ne.current)})};return o.addEventListener("keydown",d,!1),o.addEventListener("focusin",a,!1),i==null||i.forEach(u=>u.addEventListener("focusin",a,!1)),i==null||i.forEach(u=>u.addEventListener("focusout",s,!1)),()=>{o.removeEventListener("keydown",d,!1),o.removeEventListener("focusin",a,!1),i==null||i.forEach(u=>u.removeEventListener("focusin",a,!1)),i==null||i.forEach(u=>u.removeEventListener("focusout",s,!1))}},[e,t]),Qt(()=>()=>{r.current&&cancelAnimationFrame(r.current)},[r])}function V2(e){return vg(e)}function St(e,t){return!e||!t?!1:t.some(n=>n.contains(e))}function vg(e,t=null){if(e instanceof Element&&e.closest("[data-react-aria-top-layer]"))return!0;for(let{scopeRef:n}of Je.traverse(Je.getTreeNode(t)))if(n&&St(e,n.current))return!0;return!1}function xc(e,t){var n;let r=(n=Je.getTreeNode(t))===null||n===void 0?void 0:n.parent;for(;r;){if(r.scopeRef===e)return!0;r=r.parent}return!1}function ir(e,t=!1){if(e!=null&&!t)try{z8(e)}catch{}else if(e!=null)try{e.focus()}catch{}}function Cc(e,t=!0){let n=e[0].previousElementSibling,r=Ii(e),i=sr(r,{tabbable:t},e);i.currentNode=n;let o=i.nextNode();t&&!o&&(r=Ii(e),i=sr(r,{tabbable:!1},e),i.currentNode=n,o=i.nextNode()),ir(o)}function X8(e,t){const n=ce.useRef(t);E.useEffect(()=>{if(n.current){Ne=e;const r=Ct(e.current?e.current[0]:void 0);!St(r.activeElement,Ne.current)&&e.current&&Cc(e.current)}n.current=!1},[e])}function Y8(e,t,n){Qt(()=>{if(t||n)return;let r=e.current;const i=Ct(r?r[0]:void 0);let o=d=>{let a=d.target;St(a,e.current)?Ne=e:V2(a)||(Ne=null)};return i.addEventListener("focusin",o,!1),r==null||r.forEach(d=>d.addEventListener("focusin",o,!1)),()=>{i.removeEventListener("focusin",o,!1),r==null||r.forEach(d=>d.removeEventListener("focusin",o,!1))}},[e,t,n])}function G8(e){let t=Je.getTreeNode(Ne);for(;t&&t.scopeRef!==e;){if(t.nodeToRestore)return!1;t=t.parent}return(t==null?void 0:t.scopeRef)===e}function K8(e,t,n){const r=E.useRef(typeof document<"u"?Ct(e.current?e.current[0]:void 0).activeElement:null);Qt(()=>{let i=e.current;const o=Ct(i?i[0]:void 0);if(!t||n)return;let d=()=>{(!Ne||xc(Ne,e))&&St(o.activeElement,e.current)&&(Ne=e)};return o.addEventListener("focusin",d,!1),i==null||i.forEach(a=>a.addEventListener("focusin",d,!1)),()=>{o.removeEventListener("focusin",d,!1),i==null||i.forEach(a=>a.removeEventListener("focusin",d,!1))}},[e,n]),Qt(()=>{const i=Ct(e.current?e.current[0]:void 0);if(!t)return;let o=d=>{if(d.key!=="Tab"||d.altKey||d.ctrlKey||d.metaKey||!Ea(e)||d.isComposing)return;let a=i.activeElement;if(!St(a,e.current))return;let s=Je.getTreeNode(e);if(!s)return;let u=s.nodeToRestore,h=sr(i.body,{tabbable:!0});h.currentNode=a;let l=d.shiftKey?h.previousNode():h.nextNode();if((!u||!i.body.contains(u)||u===i.body)&&(u=void 0,s.nodeToRestore=void 0),(!l||!St(l,e.current))&&u){h.currentNode=u;do l=d.shiftKey?h.previousNode():h.nextNode();while(St(l,e.current));d.preventDefault(),d.stopPropagation(),l?ir(l,!0):V2(u)?ir(u,!0):a.blur()}};return n||i.addEventListener("keydown",o,!0),()=>{n||i.removeEventListener("keydown",o,!0)}},[e,t,n]),Qt(()=>{const i=Ct(e.current?e.current[0]:void 0);if(!t)return;let o=Je.getTreeNode(e);if(o){var d;return o.nodeToRestore=(d=r.current)!==null&&d!==void 0?d:void 0,()=>{let a=Je.getTreeNode(e);if(!a)return;let s=a.nodeToRestore;if(t&&s&&(St(i.activeElement,e.current)||i.activeElement===i.body&&G8(e))){let u=Je.clone();requestAnimationFrame(()=>{if(i.activeElement===i.body){let h=u.getTreeNode(e);for(;h;){if(h.nodeToRestore&&h.nodeToRestore.isConnected){ir(h.nodeToRestore);return}h=h.parent}for(h=u.getTreeNode(e);h;){if(h.scopeRef&&h.scopeRef.current&&Je.getTreeNode(h.scopeRef)){Cc(h.scopeRef.current,!0);return}h=h.parent}}})}}}},[e,t])}function sr(e,t,n){let r=t!=null&&t.tabbable?W8:H8,i=Ct(e).createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode(o){var d;return!(t==null||(d=t.from)===null||d===void 0)&&d.contains(o)?NodeFilter.FILTER_REJECT:o.matches(r)&&$2(o)&&(!n||St(o,n))&&(!(t!=null&&t.accept)||t.accept(o))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return t!=null&&t.from&&(i.currentNode=t.from),i}class yg{get size(){return this.fastMap.size}getTreeNode(t){return this.fastMap.get(t)}addTreeNode(t,n,r){let i=this.fastMap.get(n??null);if(!i)return;let o=new bg({scopeRef:t});i.addChild(o),o.parent=i,this.fastMap.set(t,o),r&&(o.nodeToRestore=r)}addNode(t){this.fastMap.set(t.scopeRef,t)}removeTreeNode(t){if(t===null)return;let n=this.fastMap.get(t);if(!n)return;let r=n.parent;for(let o of this.traverse())o!==n&&n.nodeToRestore&&o.nodeToRestore&&n.scopeRef&&n.scopeRef.current&&St(o.nodeToRestore,n.scopeRef.current)&&(o.nodeToRestore=n.nodeToRestore);let i=n.children;r&&(r.removeChild(n),i.size>0&&i.forEach(o=>r&&r.addChild(o))),this.fastMap.delete(n.scopeRef)}*traverse(t=this.root){if(t.scopeRef!=null&&(yield t),t.children.size>0)for(let n of t.children)yield*this.traverse(n)}clone(){var t;let n=new yg;var r;for(let i of this.traverse())n.addTreeNode(i.scopeRef,(r=(t=i.parent)===null||t===void 0?void 0:t.scopeRef)!==null&&r!==void 0?r:null,i.nodeToRestore);return n}constructor(){this.fastMap=new Map,this.root=new bg({scopeRef:null}),this.fastMap.set(null,this.root)}}class bg{addChild(t){this.children.add(t),t.parent=this}removeChild(t){this.children.delete(t),t.parent=void 0}constructor(t){this.children=new Set,this.contain=!1,this.scopeRef=t.scopeRef}}let Je=new yg;function wg(){const{width:e,height:t}=b6();return{"--be-viewport-height":`${t}px`,"--be-viewport-width":`${e}px`}}const _c={initial:{opacity:0,y:5},animate:{opacity:1,y:0},exit:{opacity:0,y:5},transition:{type:"tween",duration:.125}},Sc=E.forwardRef(({children:e,style:t,autoFocus:n=!1,restoreFocus:r=!0,isDismissable:i,isContextMenu:o,isOpen:d,onClose:a,triggerRef:s,arrowRef:u,arrowStyle:h,onPointerLeave:l,onPointerEnter:f},c)=>{const p=wg(),m=Di(c),{domProps:g}=q8({isDismissable:i,isOpen:d,onClose:a,triggerRef:s,isContextMenu:o},m);return x.jsx(xt.div,{className:"isolate z-popover",role:"presentation",ref:m,style:{...p,...t,position:"fixed"},..._c,...tr(g,{onPointerLeave:l,onPointerEnter:f}),children:x.jsx(wc,{restoreFocus:r,autoFocus:n,contain:!1,children:e})})}),Ta=[];function q8({onClose:e,isDismissable:t=!0,triggerRef:n,isContextMenu:r=!1},i){const o=E.useRef({isPointerDown:!1,isContextMenu:r,onClose:e}),d=o.current;d.isContextMenu=r,d.onClose=e;const a=E.useCallback(p=>{const m=p.target;if(m){const g=m.ownerDocument;if(!g||!g.documentElement.contains(m))return!1}return i.current&&!i.current.contains(m)},[i]),s=E.useCallback(()=>Ta[Ta.length-1]===i,[i]),u=E.useCallback(()=>{s()&&d.onClose()},[s,d]),h=E.useCallback(p=>{var m,g;return n.current&&"contains"in n.current?(g=(m=n.current).contains)==null?void 0:g.call(m,p):!1},[n]),l=E.useCallback(p=>{h(p.target)||s()&&(p.stopPropagation(),p.preventDefault())},[h,s]),f=E.useCallback(p=>{h(p.target)||(s()&&(p.stopPropagation(),p.preventDefault()),(!d.isContextMenu||p.button!==2)&&u())},[h,u,d,s]);return E.useEffect(()=>{Ta.push(i);const p=y=>{a(y)&&(l(y),o.current.isPointerDown=!0)},m=y=>{o.current.isPointerDown&&a(y)&&(o.current.isPointerDown=!1,f(y))},g=y=>{y.preventDefault(),a(y)&&u()},v=y=>{if(!n.current)return;const b=y.target;let w;n.current instanceof Node?w=n.current:"contextElement"in n.current&&(w=n.current.contextElement),(!(b instanceof Node)||!w||b.contains(w))&&d.onClose()};return document.addEventListener("pointerdown",p,!0),document.addEventListener("pointerup",m,!0),document.addEventListener("contextmenu",g,!0),document.addEventListener("scroll",v,!0),()=>{const y=Ta.indexOf(i);y>=0&&Ta.splice(y,1),document.removeEventListener("pointerdown",p,!0),document.removeEventListener("pointerup",m,!0),document.removeEventListener("contextmenu",g,!0),document.removeEventListener("scroll",v,!0)}},[i,a,d,f,l,n,h,u]),{domProps:{onKeyDown:p=>{p.key==="Escape"&&(p.stopPropagation(),p.preventDefault(),u())}}}}const Z8={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2}};function xg({position:e="absolute",className:t,isTransparent:n=!1,disableInitialTransition:r,...i}){return x.jsx(xt.div,{...i,className:le(t,!n&&"bg-background/80","inset-0 z-10 h-full w-full",e,"backdrop-blur-sm"),"aria-hidden":!0,initial:r?void 0:{opacity:0},animate:{opacity:1},exit:{opacity:0},...Z8,transition:{duration:.15}})}const H2=E.forwardRef(({children:e,autoFocus:t=!1,restoreFocus:n=!0,isDismissable:r,isOpen:i,onClose:o},d)=>{const a=wg(),s=Di(d);return x.jsxs("div",{className:"fixed inset-0 isolate z-tray",style:a,children:[x.jsx(xg,{onClick:()=>{r&&o()}},"tray-underlay"),x.jsx(xt.div,{ref:s,className:"absolute bottom-0 left-0 right-0 z-20 mx-auto max-h-tray w-full max-w-375 overflow-hidden rounded-t pb-safe-area",role:"presentation",initial:{opacity:0,y:"100%"},animate:{opacity:1,y:0},exit:{opacity:0,y:"100%"},transition:{type:"tween",duration:.2},children:x.jsx(wc,{restoreFocus:n,autoFocus:t,contain:!0,children:e})})]})});function Cg(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=Object.keys(e),r=Object.keys(t),i=n.length;if(r.length!==i)return!1;for(let o=0;o<i;o++){const d=n[o];if(e[d]!==t[d]||!Object.prototype.hasOwnProperty.call(t,d))return!1}return!0}function kc(){const{i18n:e}=kl(t=>t.data);return{locale:e,localeCode:(e==null?void 0:e.language)||"en",lines:e==null?void 0:e.lines}}function W2(e,{message:t,values:n}){const r=t.match(/\[(.+?)]/),i=n==null?void 0:n.count;if(r&&r[1]&&!Number.isNaN(i)){const[o,d]=r,a=d.split("|");if(!a.length)return t;const u=Q8(e).select(i);let h=a.find(f=>f.startsWith(u));h||(h=a[0]);const l=h.substring(h.indexOf(" ")+1);return t.replace(o,l)}return t}const Q8=wa(e=>new Intl.PluralRules(e));function U2(e,t){return e==null?!1:Object.hasOwn!==void 0?Object.hasOwn(e,t):Object.hasOwnProperty(t)}const be=E.memo(e=>{const{message:t,values:n}=e,{lines:r,localeCode:i}=kc();let o;if(U2(r,t)?o=r==null?void 0:r[t]:U2(r,t==null?void 0:t.toLowerCase())?o=r==null?void 0:r[t==null?void 0:t.toLowerCase()]:o=t,!n||!o)return x.jsx(E.Fragment,{children:o});o=W2(i,{message:o,values:n});const d=[],a=[];if(Object.entries(n).forEach(([s,u])=>{typeof u=="function"?a.push(s):E.isValidElement(u)?d.push(s):u!=null&&(o=o==null?void 0:o.replace(`:${s}`,`${u}`))}),a.length||d.length){const s=[];if(a.length){const f=a.join("");s.push(`(<[${f}]>.+?<\\/[${f}]>)`)}if(d.length){const f=d.join("|");s.push(`(:(?:${f}))`)}const u=new RegExp(s.join("|"),"gm"),l=o.split(u).filter(Boolean).map((f,c)=>{if(f.startsWith("<")&&f.endsWith(">")){const p=f.match(/<([a-z]+)>(.+?)<\/([a-z]+)>/);if(p){const[,m,g]=p,v=n==null?void 0:n[m];if(typeof v=="function"){const y=v(g);return E.cloneElement(y,{key:c})}}}if(f.startsWith(":")){const p=f.replace(":",""),m=n==null?void 0:n[p];if(E.isValidElement(m))return E.cloneElement(m,{key:c})}return f});return x.jsx(E.Fragment,{children:l})}return x.jsx(E.Fragment,{children:o})},J8);function J8(e,t){const{values:n,...r}=e,{values:i,...o}=t;return Cg(i,n)&&Cg(r,o)}function X2({listbox:e,children:t,isLoading:n,mobileOverlay:r=H2,searchField:i,onClose:o,prepend:d,className:a,...s}){const u=j8(),{floatingWidth:h,floatingMinWidth:l="min-w-180",collection:f,showEmptyMessage:c,state:{isOpen:p,setIsOpen:m},positionStyle:g,floating:v,refs:y}=e,b=!d&&u?r:Sc,w=le("text-base sm:text-sm outline-none bg max-h-inherit flex flex-col",!d&&"shadow-xl border py-4",a,b===Sc&&"rounded-panel",b===Sc&&h==="auto"?`max-w-288 ${l}`:""),C=E.useMemo(()=>{let T=0;const I=[];return[...f.values()].reduce((F,$)=>{if(!$.section)F.push(E.cloneElement($.element,{key:$.element.key||$.element.props.value}));else if(!I.includes($.section)){const G=E.cloneElement($.section,{key:$.section.key||T,index:T});F.push(G),I.push($.section),T++}return F},[])},[f]),_=C.length>0||c&&!n,S=_?x.jsxs("div",{className:w,role:"presentation",children:[i,x.jsx(eI,{isLoading:n,...s,children:C})]}):null;return x.jsxs(m2.Provider,{value:e,children:[t,d?S:oi&&Is.createPortal(x.jsx(er,{children:p&&_&&x.jsx(b,{triggerRef:y.reference,restoreFocus:!0,isOpen:p,onClose:()=>{o==null||o(),m(!1)},isDismissable:!0,style:g,ref:v,children:S})}),oi)]})}function eI({className:e,children:t,isLoading:n,...r}){const{role:i,listboxId:o,virtualFocus:d,focusItem:a,state:{activeIndex:s,setActiveIndex:u,selectedIndex:h}}=eg(),l=E.useRef(!0),f=E.useRef(null);return E.useEffect(()=>()=>u(null),[u]),E.useEffect(()=>{if(l.current){const c=s??h;c==null&&!d?requestAnimationFrame(()=>{var p;(p=f.current)==null||p.focus({preventScroll:!0})}):c!=null&&requestAnimationFrame(()=>{a("increment",c)})}l.current=!1},[s,h,a,d]),x.jsx("div",{tabIndex:d?void 0:-1,role:i,id:o,className:"flex-auto overflow-y-auto overscroll-contain outline-none",ref:f,...r,children:t.length?t:x.jsx(tI,{})})}function tI(){return x.jsx("div",{className:"px-8 py-4 text-sm italic text-muted",children:x.jsx(be,{message:"There are no items matching your query"})})}function Y2({state:{isOpen:e,setIsOpen:t,selectedIndex:n,activeIndex:r,setInputValue:i,setActiveIndex:o},focusLoopingMode:d,collection:a,focusItem:s,handleItemSelection:u,allowCustomValue:h}){const l=p=>{if(!(e||!p.currentTarget.contains(p.target))){if(p.key==="ArrowDown")return p.preventDefault(),t(!0),s("increment",n??0),!0;if(p.key==="ArrowUp")return p.preventDefault(),t(!0),s("decrement",n??a.size-1),!0;if(p.key==="Enter"||p.key==="Space")return p.preventDefault(),t(!0),s("increment",n??0),!0}},f=p=>{const m=Math.max(0,a.size-1);if(!(!e||!p.currentTarget.contains(p.target)))switch(p.key){case"ArrowDown":return p.preventDefault(),r==null?s("increment",0):r>=m?d==="loop"?s("increment",0):d==="deselect"&&o(null):s("increment",r+1),!0;case"ArrowUp":return p.preventDefault(),r==null?s("decrement",m):r<=0?d==="loop"?s("decrement",m):d==="deselect"&&o(null):s("decrement",r-1),!0;case"Home":return p.preventDefault(),s("increment",0),!0;case"End":return p.preventDefault(),s("decrement",m),!0;case"Tab":return t(!1),!0}};return{handleTriggerKeyDown:l,handleListboxKeyboardNavigation:f,handleListboxSearchFieldKeydown:p=>{var g,v;if(p.key==="Enter"&&r!=null&&a.size){p.preventDefault();const[y,b]=[...a.entries()][r];y&&(u(y),(v=(g=b.element.props).onSelected)==null||v.call(g));return}p.key==="Escape"&&e&&(t(!1),h||i("")),l(p)||f(p)}}}const _g=new Map;function nI(e){const{localeCode:t}=kc(),n=t+(e?Object.entries(e).sort((i,o)=>i[0]<o[0]?-1:1).join():"");if(_g.has(n))return _g.get(n);const r=new Intl.Collator(t,e);return _g.set(n,r),r}function G2(){const e=nI({usage:"search",sensitivity:"base"}),t=E.useRef({search:"",timeout:void 0}).current,n=(i,o)=>{let d=o??0;for(;d!=null;){const a=i[d],s=a==null?void 0:a.slice(0,t.search.length);if(s&&e.compare(s,t.search)===0)return d;if(d<i.length-1)d++;else return null}return null};return{findMatchingItem:(i,o,d=0)=>{const a=rI(i.key);if(!a||i.ctrlKey||i.metaKey)return null;a===" "&&t.search.trim().length>0&&(i.preventDefault(),i.stopPropagation()),t.search+=a;let s=n(o,d);return s==null&&(s=n(o,0)),clearTimeout(t.timeout),t.timeout=setTimeout(()=>{t.search=""},500),s??null}}}function rI(e){return e.length===1||!/^[A-Z]/i.test(e)?e:""}function iI(e,{noSSR:t}={noSSR:!0}){const n=typeof window<"u"&&typeof window.matchMedia=="function",[r,i]=E.useState(t?()=>n?window.matchMedia(e).matches:!1:null);return E.useEffect(()=>{if(!n)return;const o=window.matchMedia(e),d=()=>{i(o.matches)};return o.addEventListener("change",d),t||d(),()=>{o.removeEventListener("change",d)}},[n,e,t]),typeof window>"u"?null:r}function Ec(e){return iI("(max-width: 768px)",e)}const K2=ve(x.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"SearchOutlined");var sI=e=>e.type==="checkbox",oI=e=>e instanceof Date,q2=e=>e==null;const aI=e=>typeof e=="object";var Gs=e=>!q2(e)&&!Array.isArray(e)&&aI(e)&&!oI(e),lI=e=>Gs(e)&&e.target?sI(e.target)?e.target.checked:e.target.value:e,uI=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,cI=(e,t)=>e.has(uI(t)),fI=e=>{const t=e.constructor&&e.constructor.prototype;return Gs(t)&&t.hasOwnProperty("isPrototypeOf")},hI=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Sg(e){let t;const n=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(hI&&(e instanceof Blob||e instanceof FileList))&&(n||Gs(e)))if(t=n?[]:{},!n&&!fI(e))t=e;else for(const r in e)e.hasOwnProperty(r)&&(t[r]=Sg(e[r]));else return e;return t}var Z2=e=>Array.isArray(e)?e.filter(Boolean):[],kg=e=>e===void 0,kt=(e,t,n)=>{if(!t||!Gs(e))return n;const r=Z2(t.split(/[,[\].]+?/)).reduce((i,o)=>q2(i)?i:i[o],e);return kg(r)||r===e?kg(e[t])?n:e[t]:r},Q2=e=>typeof e=="boolean",dI=e=>/^\w*$/.test(e),pI=e=>Z2(e.replace(/["|']|\]/g,"").split(/\.|\[/)),J2=(e,t,n)=>{let r=-1;const i=dI(t)?[t]:pI(t),o=i.length,d=o-1;for(;++r<o;){const a=i[r];let s=n;if(r!==d){const u=e[a];s=Gs(u)||Array.isArray(u)?u:isNaN(+i[r+1])?{}:[]}if(a==="__proto__")return;e[a]=s,e=e[a]}return e};const eC={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Eg={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},gI=ce.createContext(null),Tg=()=>ce.useContext(gI);var mI=(e,t,n,r=!0)=>{const i={defaultValues:t._defaultValues};for(const o in e)Object.defineProperty(i,o,{get:()=>{const d=o;return t._proxyFormState[d]!==Eg.all&&(t._proxyFormState[d]=!r||Eg.all),n&&(n[d]=!0),e[d]}});return i},vI=e=>Gs(e)&&!Object.keys(e).length,yI=(e,t,n,r)=>{n(e);const{name:i,...o}=e;return vI(o)||Object.keys(o).length>=Object.keys(t).length||Object.keys(o).find(d=>t[d]===(!r||Eg.all))},bI=e=>Array.isArray(e)?e:[e],tC=(e,t,n)=>!e||!t||e===t||bI(e).some(r=>r&&(n?r===t:r.startsWith(t)||t.startsWith(r)));function nC(e){const t=ce.useRef(e);t.current=e,ce.useEffect(()=>{const n=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{n&&n.unsubscribe()}},[e.disabled])}function wI(e){const t=Tg(),{control:n=t.control,disabled:r,name:i,exact:o}=e||{},[d,a]=ce.useState(n._formState),s=ce.useRef(!0),u=ce.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),h=ce.useRef(i);return h.current=i,nC({disabled:r,next:l=>s.current&&tC(h.current,l.name,o)&&yI(l,u.current,n._updateFormState)&&a({...n._formState,...l}),subject:n._subjects.state}),ce.useEffect(()=>(s.current=!0,u.current.isValid&&n._updateValid(!0),()=>{s.current=!1}),[n]),mI(d,n,u.current,!1)}var xI=e=>typeof e=="string",CI=(e,t,n,r,i)=>xI(e)?(r&&t.watch.add(e),kt(n,e,i)):Array.isArray(e)?e.map(o=>(r&&t.watch.add(o),kt(n,o))):(r&&(t.watchAll=!0),n);function _I(e){const t=Tg(),{control:n=t.control,name:r,defaultValue:i,disabled:o,exact:d}=e||{},a=ce.useRef(r);a.current=r,nC({disabled:o,subject:n._subjects.values,next:h=>{tC(a.current,h.name,d)&&u(Sg(CI(a.current,n._names,h.values||n._formValues,!1,i)))}});const[s,u]=ce.useState(n._getWatch(r,i));return ce.useEffect(()=>n._removeUnmounted()),s}function SI(e){const t=Tg(),{name:n,disabled:r,control:i=t.control,shouldUnregister:o}=e,d=cI(i._names.array,n),a=_I({control:i,name:n,defaultValue:kt(i._formValues,n,kt(i._defaultValues,n,e.defaultValue)),exact:!0}),s=wI({control:i,name:n}),u=ce.useRef(i.register(n,{...e.rules,value:a,...Q2(e.disabled)?{disabled:e.disabled}:{}}));return ce.useEffect(()=>{const h=i._options.shouldUnregister||o,l=(f,c)=>{const p=kt(i._fields,f);p&&(p._f.mount=c)};if(l(n,!0),h){const f=Sg(kt(i._options.defaultValues,n));J2(i._defaultValues,n,f),kg(kt(i._formValues,n))&&J2(i._formValues,n,f)}return()=>{(d?h&&!i._state.action:h)?i.unregister(n):l(n,!1)}},[n,i,d,o]),ce.useEffect(()=>{kt(i._fields,n)&&i._updateDisabledField({disabled:r,fields:i._fields,name:n,value:kt(i._fields,n)._f.value})},[r,n,i]),{field:{name:n,value:a,...Q2(r)||s.disabled?{disabled:s.disabled||r}:{},onChange:ce.useCallback(h=>u.current.onChange({target:{value:lI(h),name:n},type:eC.CHANGE}),[n]),onBlur:ce.useCallback(()=>u.current.onBlur({target:{value:kt(i._formValues,n),name:n},type:eC.BLUR}),[n,i]),ref:h=>{const l=kt(i._fields,n);l&&h&&(l._f.ref={focus:()=>h.focus(),select:()=>h.select(),setCustomValidity:f=>h.setCustomValidity(f),reportValidity:()=>h.reportValidity()})}},formState:s,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!kt(s.errors,n)},isDirty:{enumerable:!0,get:()=>!!kt(s.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!kt(s.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!kt(s.validatingFields,n)},error:{enumerable:!0,get:()=>kt(s.errors,n)}})}}function Fi(e={}){const{size:t="md",startAppend:n,endAppend:r,className:i,labelPosition:o,labelDisplay:d="block",inputClassName:a,inputWrapperClassName:s,unstyled:u,invalid:h,disabled:l,background:f="bg-transparent",flexibleHeight:c,inputShadow:p="shadow-sm",descriptionPosition:m="bottom",inputRing:g,inputFontSize:v,labelSuffix:y}={...e};if(u)return{label:"",input:a||"",wrapper:i||"",inputWrapper:s||"",adornment:"",append:{size:"",radius:""},size:{font:"",height:""},description:"",error:""};const b=OI({size:e.size,flexibleHeight:c});v&&(b.font=v);const w=n||r,_=g||`focus:ring ${h?"focus:ring-danger/focus focus:border-danger/60":"focus:ring-primary/focus focus:border-primary/60"}`,S=TI(e);return{label:le(d,"first-letter:capitalize text-left whitespace-nowrap",l&&"text-disabled",b.font,y?"":o==="side"?"mr-16":"mb-4"),input:le("block text-left relative w-full appearance-none transition-shadow text",f,S.input,kI(e),!l&&`${_} focus:outline-none ${p}`,l&&"text-disabled cursor-not-allowed",a,b.font,b.height,EI(e)),adornment:PI(t),append:{size:Jp(t),radius:S.append},wrapper:le(i,b.font,{"flex items-center":o==="side"}),inputWrapper:le("isolate relative",s,w&&"flex items-stretch"),size:b,description:`text-muted ${m==="bottom"?"pt-10":"pb-10"} text-xs`,error:"text-danger pt-10 text-xs"}}function kI({startAppend:e,endAppend:t,inputBorder:n,invalid:r}){if(n)return n;const i=e||t,o=r?"border-danger":"border-divider";return i?e?`${o} border-y border-r`:`${o} border-y border-l`:`${o} border`}function EI({startAdornment:e,endAdornment:t,inputRadius:n}){return n==="rounded-full"?le(e?"pl-54":"pl-28",t?"pr-54":"pr-28"):le(e?"pl-46":"pl-12",t?"pr-46":"pr-12")}function TI(e){const{startAppend:t,endAppend:n,inputRadius:r}=e,i=t||n;return r==="rounded-full"?{input:le(!i&&"rounded-full",t&&"rounded-r-full rounded-l-none",n&&"rounded-l-full rounded-r-none"),append:t?"rounded-l-full":"rounded-r-full"}:r==="rounded-none"?{input:"",append:""}:r?{input:r,append:r}:{input:le(!i&&"rounded-input",t&&"rounded-r-input rounded-l-none",n&&"rounded-l-input rounded-r-none"),append:t?"rounded-l-input":"rounded-r-input"}}function OI({size:e,flexibleHeight:t}){switch(e){case"2xs":return{font:"text-xs",height:t?"min-h-24":"h-24"};case"xs":return{font:"text-xs",height:t?"min-h-30":"h-30"};case"sm":return{font:"text-sm",height:t?"min-h-36":"h-36"};case"lg":return{font:"text-md md:text-lg",height:t?"min-h-50":"h-50"};case"xl":return{font:"text-xl",height:t?"min-h-60":"h-60"};default:return{font:"text-sm",height:t?"min-h-42":"h-42"}}}function PI(e){switch(e){case"2xs":return"icon-2xs";case"xs":return"icon-xs";case"sm":return"icon-sm";case"md":return"icon-sm";case"lg":return"icon-lg";case"xl":return"icon-xl";default:return""}}function rC({children:e,direction:t,className:n,position:r=t==="start"?"left-0":"right-0"}){return e?x.jsx("div",{className:le("pointer-events-none absolute top-0 z-10 flex h-full min-w-42 items-center justify-center text-muted",r,n),children:e}):null}function iC(e,t){const n=(t==null?void 0:t.copy)??!0,r=n?{...e}:e;return Object.keys(r).forEach(i=>{const o=i;t!=null&&t.arrays&&Array.isArray(r[o])&&r[o].length===0?delete r[o]:t!=null&&t.deep&&r[o]&&typeof r[o]=="object"?(r[o]=iC(r[o],t),Object.keys(r[o]).length===0&&delete r[o]):(r[o]==null||r[o]==="")&&delete r[o]}),n?r:e}const sC=ce.forwardRef((e,t)=>{const{children:n,description:r,errorMessage:i,descriptionProps:o={},errorMessageProps:d={},startAdornment:a,endAdornment:s,adornmentPosition:u,startAppend:h,endAppend:l,fieldClassNames:f,disabled:c,wrapperProps:p}=e;return x.jsxs("div",{className:f.wrapper,ref:t,...p,children:[x.jsx(DI,{...e}),x.jsxs("div",{className:f.inputWrapper,children:[x.jsx(rC,{direction:"start",className:f.adornment,position:u,children:a}),h&&x.jsx(oC,{style:f.append,disabled:c,children:h}),n,l&&x.jsx(oC,{style:f.append,disabled:c,children:l}),x.jsx(rC,{direction:"end",className:f.adornment,position:u,children:s})]}),r&&!i&&x.jsx("div",{className:f.description,...o,children:r}),i&&x.jsx("div",{className:f.error,...d,children:i})]})});function DI({labelElementType:e,fieldClassNames:t,labelProps:n,label:r,labelSuffix:i,labelSuffixPosition:o="spaced",required:d}){if(!r)return null;const a=e||"label",s=x.jsxs(a,{className:t.label,...n,children:[r,d&&x.jsx("span",{className:"text-danger",children:" *"})]});return i?x.jsxs("div",{className:le("mb-4 flex w-full gap-4",o==="spaced"?"items-end":"items-center"),children:[s,x.jsx("div",{className:le("text-xs text-muted",o==="spaced"?"ml-auto":""),children:i})]}):s}function oC({children:e,style:t,disabled:n}){return ce.cloneElement(e,{...e.props,disabled:e.props.disabled||n,...iC(t)})}function Og({autoFocus:e,autoSelectText:t},n){const r=E.useRef(e);E.useEffect(()=>{r.current&&n.current&&requestAnimationFrame(()=>{var i,o;(i=n.current)==null||i.focus(),t&&((o=n.current)==null?void 0:o.nodeName.toLowerCase())==="input"&&n.current.select()}),r.current=!1},[n,t])}function aC(e){const{focusRef:t,labelElementType:n="label",label:r,labelSuffix:i,labelSuffixPosition:o,autoFocus:d,autoSelectText:a,labelPosition:s,descriptionPosition:u,size:h,errorMessage:l,description:f,flexibleHeight:c,startAdornment:p,endAdornment:m,startAppend:g,adornmentPosition:v,endAppend:y,className:b,inputClassName:w,inputWrapperClassName:C,unstyled:_,background:S,invalid:T,disabled:I,id:F,inputRadius:$,inputBorder:G,inputShadow:ne,inputRing:X,inputFontSize:Q,...Z}=e;Og(e,t);const ie=E.useId(),V=F||ie,k=`${V}-label`,P=`${V}-description`,A=`${V}-error`,j={id:k,htmlFor:n==="label"?V:void 0},H={id:P},M={id:A},R={"aria-label":!e.label&&!e["aria-label"]&&e.placeholder?e.placeholder:e["aria-label"],"aria-invalid":T||void 0,id:V,disabled:I,...Z},B=[];r&&B.push(j.id),R["aria-labelledby"]&&B.push(R["aria-labelledby"]),R["aria-labelledby"]=B.length?B.join(" "):void 0;const U=[];return f&&U.push(H.id),l&&U.push(M.id),R["aria-describedby"]&&U.push(R["aria-describedby"]),R["aria-describedby"]=U.length?U.join(" "):void 0,{fieldProps:{errorMessageProps:M,descriptionProps:H,labelProps:j,disabled:I,label:r,labelSuffix:i,labelSuffixPosition:o,autoFocus:d,autoSelectText:a,labelPosition:s,descriptionPosition:u,size:h,errorMessage:l,description:f,flexibleHeight:c,startAdornment:p,endAdornment:m,startAppend:g,adornmentPosition:v,endAppend:y,className:b,inputClassName:w,inputWrapperClassName:C,unstyled:_,background:S,invalid:T},inputProps:R}}const or=E.forwardRef(({inputElementType:e="input",flexibleHeight:t,inputRef:n,inputTestId:r,...i},o)=>{const d=Di(n),{fieldProps:a,inputProps:s}=aC({...i,focusRef:d}),u=e==="textarea",h=u?"textarea":"input",l=Fi({...i,flexibleHeight:t||e==="textarea"});return e==="textarea"&&!i.unstyled&&(l.input=`${l.input} py-12`),x.jsx(sC,{ref:o,fieldClassNames:l,...a,children:x.jsx(h,{"data-testid":r,ref:d,...s,rows:u?s.rows||4:void 0,className:l.input})})});ce.forwardRef(({name:e,...t},n)=>{const{field:{onChange:r,onBlur:i,value:o="",ref:d},fieldState:{invalid:a,error:s}}=SI({name:e}),u={onChange:r,onBlur:i,value:o??"",invalid:a,errorMessage:s==null?void 0:s.message,inputRef:d,name:e};return x.jsx(or,{ref:n,...tr(u,t)})});const AI=E.forwardRef((e,t)=>{const{searchPlaceholder:n,showSearchField:r,children:[i,o],floatingWidth:d="auto",isLoading:a}=e,s=E.useId(),u=Ec(),h=F2({...e,clearInputOnItemSelection:!0,showEmptyMessage:r,floatingWidth:u?"auto":d,virtualFocus:r,role:r?"listbox":"menu",focusLoopingMode:r?"stay":"loop",children:o.props.children},t),{state:{isOpen:l,setIsOpen:f,activeIndex:c,inputValue:p,setInputValue:m},listboxId:g,focusItem:v,listContent:y,reference:b,onInputChange:w}=h,{handleTriggerKeyDown:C,handleListboxKeyboardNavigation:_,handleListboxSearchFieldKeydown:S}=Y2(h),{findMatchingItem:T}=G2(),I=F=>{if(!l)return;const $=T(F,y,c);$!=null&&v("increment",$)};return x.jsx(X2,{onClick:F=>F.stopPropagation(),listbox:h,onKeyDownCapture:r?void 0:I,onKeyDown:_,onClose:r?()=>m(""):void 0,"aria-labelledby":s,isLoading:a,searchField:r?x.jsx(or,{size:"sm",placeholder:n,startAdornment:x.jsx(K2,{}),className:"flex-shrink-0 px-8 pb-8 pt-4",autoFocus:!0,"aria-expanded":l?"true":"false","aria-haspopup":"listbox","aria-controls":l?g:void 0,"aria-autocomplete":"list",autoComplete:"off",autoCorrect:"off",spellCheck:"false",value:p,onChange:w,onKeyDown:F=>{S(F)}}):null,children:E.cloneElement(i,{id:s,"aria-expanded":l?"true":"false","aria-haspopup":"menu","aria-controls":l?g:void 0,ref:b,onKeyDown:C,onClick:Bt(F=>{var $,G;(G=($=i.props)==null?void 0:$.onClick)==null||G.call($,F),f(!l)})})})});function MI({children:e}){return e}function jI({item:e,button:t}){return x.jsxs(AI,{children:[t,x.jsx(MI,{children:(e.menuItems||[]).map(n=>x.jsx(fc,{value:n.label,onSelected:()=>{n.action(D().editor)},children:n.label},n.label))})]})}const je=E.forwardRef(({children:e,size:t="md",iconSize:n=t&&t.length<=3?t:"md",variant:r="text",radius:i="rounded-button",className:o,padding:d,equalWidth:a=!0,badge:s,...u},h)=>{const l=le(Jp(t,{padding:d,equalWidth:a,variant:r}),o,s&&"relative");return x.jsxs(nr,{...u,ref:h,radius:i,variant:r,className:l,children:[E.cloneElement(e,{size:n}),s]})});function II({icon:e,className:t,size:n}){let r;return ce.isValidElement(e)?r=ce.cloneElement(e,{className:"svg-iconEl"}):typeof e=="string"?r=x.jsx("img",{className:"w-font h-font",src:e,alt:""}):Array.isArray(e)?r=ce.createElement(Tk(e),{size:n}):r=ce.createElement(e,{size:n}),x.jsx("span",{className:le(t,"leading-none"),children:r})}const Pg=ce.memo(II);function Dg({value:e}){return e?typeof e=="string"?x.jsx(be,{message:e}):x.jsx(be,{...e}):null}function FI({item:e}){const t=e.label?x.jsx(LI,{item:e}):x.jsx(RI,{item:e});return e.menuItems?x.jsx(jI,{item:e,button:t}):ce.cloneElement(t,{onClick:()=>{var n;(n=e.action)==null||n.call(e,D().editor)}})}const RI=E.forwardRef(({item:e,...t},n)=>x.jsx(je,{ref:n,radius:"rounded-full",size:"sm",...t,children:x.jsx(Pg,{icon:e.icon})})),LI=E.forwardRef(({item:e,...t},n)=>x.jsx(_t,{ref:n,radius:"rounded-full",size:"xs",color:e.buttonColor||"primary",variant:e.buttonVariant||"flat",startIcon:e.icon&&x.jsx(Pg,{icon:e.icon}),...t,children:x.jsx(Dg,{value:e.label})}));function Tc({children:e,color:t,variant:n,radius:r="rounded-button",size:i,className:o,value:d,onChange:a,multiple:s,disabled:u}){const h=c=>d===void 0?!1:s?d.includes(c):c===d,l=c=>{const p=[...d],m=d.indexOf(c);return m>-1?p.splice(m,1):p.push(c),p},f=ce.Children.map(e,(c,p)=>{if(ce.isValidElement(c)){const m=h(c.props.value),g=m?"primary":t;return ce.cloneElement(c,{color:m?"primary":t,variant:n,size:i,radius:null,disabled:c.props.disabled||u,...c.props,onClick:v=>{c.props.onClick&&c.props.onClick(v),a&&(s?a==null||a(l(c.props.value)):a==null||a(c.props.value))},className:le(c.props.className,m?"z-20":"z-10",zI(p,e,r,g))})}});return x.jsx("div",{className:le(r,"isolate inline-flex",o),children:f})}function zI(e,t,n,r){return e===0?le(n,"rounded-tr-none rounded-br-none",!r&&"border-r-transparent disabled:border-r-transparent"):e===t.length-1?le(n,"rounded-tl-none rounded-bl-none -ml-1"):le("rounded-none -ml-1",!r&&"border-r-transparent disabled:border-r-transparent")}const BI=ve(x.jsx("path",{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"}),"UndoOutlined"),NI=ve(x.jsx("path",{d:"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"}),"RedoOutlined");function $I(){const e=fe(n=>n.history.canUndo),t=fe(n=>n.history.canRedo);return x.jsxs(Tc,{variant:"outline",children:[x.jsx(je,{equalWidth:!1,size:"xs",padding:"pl-12 pr-10",radius:"rounded-full",disabled:!e,onClick:()=>{L().history.undo()},children:x.jsx(BI,{})},"undo"),x.jsx(je,{equalWidth:!1,padding:"pl-10 pr-12",size:"xs",radius:"rounded-full",disabled:!t,onClick:()=>{L().history.redo()},children:x.jsx(NI,{})},"redo")]})}const VI=ve(x.jsx("path",{d:"M19 13H5v-2h14v2z"}),"RemoveOutlined"),HI=ve(x.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"AddOutlined");function WI(){var n,r;const e=fe(i=>i.zoom)||1;return fe(i=>{var o,d;return(d=(o=i.config.tools)==null?void 0:o.zoom)==null?void 0:d.allowUserZoom})??!0?x.jsxs("div",{className:"flex items-center select-none",children:[x.jsx(je,{size:"sm",disabled:!((n=L().zoom)!=null&&n.canZoomOut()),onClick:()=>{L().zoom.zoomOut(L().zoom.step)},children:x.jsx(VI,{})}),x.jsxs("div",{className:"w-[4ch] text-sm text-center",children:[Math.round(e*100),"%"]}),x.jsx(je,{size:"sm",disabled:!((r=L().zoom)!=null&&r.canZoomIn()),onClick:()=>{L().zoom.zoomIn(L().zoom.step)},children:x.jsx(HI,{})})]}):null}function Ag({item:e}){switch(e.type){case"undoWidget":return x.jsx($I,{});case"zoomWidget":return x.jsx(WI,{});case"button":return x.jsx(FI,{item:e});case"image":return x.jsx("img",{className:"h-30 object-cover",src:Jt(e.src),alt:""});default:return null}}const Ur=ve(x.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}),"CloseOutlined");function Oc(){var r;let e=fe(i=>{var o;return((o=i.config.ui)==null?void 0:o.mode)===Tf.OVERLAY});const{width:t}=fe(i=>i.stageSize),n=t<=700;return n&&((r=D().config.ui)!=null&&r.forceOverlayModeOnMobile)&&(e=!0),{isModal:e,isMobile:n}}function UI(){const{isModal:e,isMobile:t}=Oc(),n=fe(s=>{var u;return(u=s.config.ui)==null?void 0:u.allowEditorClose})??!0,r=fe(s=>{var u,h;return(h=(u=s.config.ui)==null?void 0:u.menubar)==null?void 0:h.items}),{left:i,center:o,right:d}=E.useMemo(()=>XI(r||[],t),[r,t]),a=e&&t&&n&&x.jsx(je,{size:"sm",className:"ml-10",onClick:()=>{D().editor.close()},children:x.jsx(Ur,{})});return x.jsxs(xt.div,{className:d2,...p2,children:[x.jsx("div",{className:"mr-auto flex items-center gap-8",children:i.map((s,u)=>x.jsx(Ag,{item:s},u))}),x.jsx("div",{className:"flex items-center gap-10",children:o.map((s,u)=>x.jsx(Ag,{item:s},u))}),x.jsx("div",{className:"ml-auto flex items-center gap-8",children:d.map((s,u)=>x.jsx(Ag,{item:s},u))}),a]})}function XI(e,t){const n={left:[],center:[],right:[]};(e||[]).filter(i=>!t&&!i.mobileOnly||t&&!i.desktopOnly).forEach(i=>{i.align==="left"?n.left.push({...i,position:i.position??1}):i.align==="right"?n.right.push({...i,position:i.position??1}):n.center.push({...i,position:i.position??1})});const r=Object.entries(n).map(([i,o])=>[i,o.sort((d,a)=>(d.position??0)-(a.position??0))]);return Object.fromEntries(r)}function YI(){const e=fe(n=>{var r;return(r=n.crop.zoneRect)==null?void 0:r.width})||1,t=fe(n=>{var r;return(r=n.crop.zoneRect)==null?void 0:r.height})||1;return x.jsx("div",{className:"text-sm",children:`${e}x${t}`})}function GI(){const e=fe(t=>t.activeTool);return x.jsxs(xt.div,{className:d2,...p2,children:[x.jsx(KI,{}),qI(e),x.jsx(ZI,{})]})}function KI(){const{isMobile:e}=Oc(),t=fe(n=>n.dirty);return e?x.jsx(je,{size:"sm",onClick:()=>{D().cancelChanges()},children:x.jsx(Ur,{})}):x.jsx(_t,{variant:"outline",size:"xs",startIcon:x.jsx(Ur,{}),radius:"rounded-full",className:"min-w-92",onClick:()=>{D().cancelChanges()},children:t?x.jsx(be,{message:"Cancel"}):x.jsx(be,{message:"Close"})})}function qI(e){var n,r;if(!e)return null;const t=x.jsx("div",{className:"capitalize text-sm",children:x.jsx(be,{message:e})});switch(e){case De.CROP:return((r=(n=D().config.tools)==null?void 0:n.crop)==null?void 0:r.allowCustomRatio)??!0?x.jsx(YI,{}):t;default:return t}}function ZI(){const{isMobile:e}=Oc(),t=fe(n=>n.dirty);return e?x.jsx(je,{size:"sm",disabled:!t,onClick:()=>{D().applyChanges()},children:x.jsx(tg,{})}):x.jsx(_t,{variant:"flat",color:"primary",size:"xs",disabled:!t,startIcon:x.jsx(tg,{}),radius:"rounded-full",onClick:()=>{D().applyChanges()},children:x.jsx(be,{message:"Apply"})})}function lC(){const e=fe(t=>t.activeTool);return x.jsx(er,{initial:!1,children:e?x.jsx(GI,{},"activeToolbar"):x.jsx(UI,{},"mainToolbar")})}const QI={newCanvas:se("Loading Canvas"),mainImage:se("Loading Image"),state:se("Loading State"),merge:se("Processing Image")};function JI(){const[e,t]=E.useState(!1);return E.useEffect(()=>{fe.subscribe(n=>n.loading,n=>{n&&t(n)})},[]),x.jsx(er,{children:e&&x.jsx(xt.div,{initial:{y:"60%",opacity:0},animate:{y:0,opacity:1},exit:{y:"-60%",opacity:0},transition:{type:"tween",duration:.3},onAnimationComplete:()=>{setTimeout(()=>{t(!1)},400)},className:"absolute z-loading-indicator inset-0 m-auto p-6 w-144 h-32 text-center text-sm bg-paper rounded-full shadow-lg",children:x.jsx(be,{...QI[e]})})})}function eF(e,t,n){return Math.max(t,Math.min(e,n))}const it={toVector(e,t){return e===void 0&&(e=t),Array.isArray(e)?e:[e,e]},add(e,t){return[e[0]+t[0],e[1]+t[1]]},sub(e,t){return[e[0]-t[0],e[1]-t[1]]},addTo(e,t){e[0]+=t[0],e[1]+=t[1]},subTo(e,t){e[0]-=t[0],e[1]-=t[1]}};function uC(e,t,n){return t===0||Math.abs(t)===1/0?Math.pow(e,n*5):e*t*n/(t+n*e)}function cC(e,t,n,r=.15){return r===0?eF(e,t,n):e<t?-uC(t-e,n-t,r)+t:e>n?+uC(e-n,n-t,r)+n:e}function tF(e,[t,n],[r,i]){const[[o,d],[a,s]]=e;return[cC(t,o,d,r),cC(n,a,s,i)]}function nF(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rF(e){var t=nF(e,"string");return typeof t=="symbol"?t:String(t)}function Et(e,t,n){return t=rF(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ue(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fC(Object(n),!0).forEach(function(r){Et(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const hC={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function dC(e){return e?e[0].toUpperCase()+e.slice(1):""}const iF=["enter","leave"];function sF(e=!1,t){return e&&!iF.includes(t)}function oF(e,t="",n=!1){const r=hC[e],i=r&&r[t]||t;return"on"+dC(e)+dC(i)+(sF(n,i)?"Capture":"")}const aF=["gotpointercapture","lostpointercapture"];function lF(e){let t=e.substring(2).toLowerCase();const n=!!~t.indexOf("passive");n&&(t=t.replace("passive",""));const r=aF.includes(t)?"capturecapture":"capture",i=!!~t.indexOf(r);return i&&(t=t.replace("capture","")),{device:t,capture:i,passive:n}}function uF(e,t=""){const n=hC[e],r=n&&n[t]||t;return e+r}function Pc(e){return"touches"in e}function pC(e){return Pc(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function cF(e){return Array.from(e.touches).filter(t=>{var n,r;return t.target===e.currentTarget||((n=e.currentTarget)===null||n===void 0||(r=n.contains)===null||r===void 0?void 0:r.call(n,t.target))})}function fF(e){return e.type==="touchend"||e.type==="touchcancel"?e.changedTouches:e.targetTouches}function gC(e){return Pc(e)?fF(e)[0]:e}function Mg(e,t){try{const n=t.clientX-e.clientX,r=t.clientY-e.clientY,i=(t.clientX+e.clientX)/2,o=(t.clientY+e.clientY)/2,d=Math.hypot(n,r);return{angle:-(Math.atan2(n,r)*180)/Math.PI,distance:d,origin:[i,o]}}catch{}return null}function hF(e){return cF(e).map(t=>t.identifier)}function mC(e,t){const[n,r]=Array.from(e.touches).filter(i=>t.includes(i.identifier));return Mg(n,r)}function jg(e){const t=gC(e);return Pc(e)?t.identifier:t.pointerId}function vC(e){const t=gC(e);return[t.clientX,t.clientY]}const yC=40,bC=800;function dF(e){let{deltaX:t,deltaY:n,deltaMode:r}=e;return r===1?(t*=yC,n*=yC):r===2&&(t*=bC,n*=bC),[t,n]}function pF(e){const t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){const{shiftKey:n,altKey:r,metaKey:i,ctrlKey:o}=e;Object.assign(t,{shiftKey:n,altKey:r,metaKey:i,ctrlKey:o})}return t}function Dc(e,...t){return typeof e=="function"?e(...t):e}function gF(){}function mF(...e){return e.length===0?gF:e.length===1?e[0]:function(){let t;for(const n of e)t=n.apply(this,arguments)||t;return t}}function wC(e,t){return Object.assign({},t,e||{})}const vF=32;class xC{constructor(t,n,r){this.ctrl=t,this.args=n,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(t){this.ctrl.state[this.key]=t}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:t,shared:n,ingKey:r,args:i}=this;n[r]=t._active=t.active=t._blocked=t._force=!1,t._step=[!1,!1],t.intentional=!1,t._movement=[0,0],t._distance=[0,0],t._direction=[0,0],t._delta=[0,0],t._bounds=[[-1/0,1/0],[-1/0,1/0]],t.args=i,t.axis=void 0,t.memo=void 0,t.elapsedTime=t.timeDelta=0,t.direction=[0,0],t.distance=[0,0],t.overflow=[0,0],t._movementBound=[!1,!1],t.velocity=[0,0],t.movement=[0,0],t.delta=[0,0],t.timeStamp=0}start(t){const n=this.state,r=this.config;n._active||(this.reset(),this.computeInitial(),n._active=!0,n.target=t.target,n.currentTarget=t.currentTarget,n.lastOffset=r.from?Dc(r.from,n):n.offset,n.offset=n.lastOffset,n.startTime=n.timeStamp=t.timeStamp)}computeValues(t){const n=this.state;n._values=t,n.values=this.config.transform(t)}computeInitial(){const t=this.state;t._initial=t._values,t.initial=t.values}compute(t){const{state:n,config:r,shared:i}=this;n.args=this.args;let o=0;if(t&&(n.event=t,r.preventDefault&&t.cancelable&&n.event.preventDefault(),n.type=t.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,pF(t)),i.down=i.pressed=i.buttons%2===1||i.touches>0,o=t.timeStamp-n.timeStamp,n.timeStamp=t.timeStamp,n.elapsedTime=n.timeStamp-n.startTime),n._active){const _=n._delta.map(Math.abs);it.addTo(n._distance,_)}this.axisIntent&&this.axisIntent(t);const[d,a]=n._movement,[s,u]=r.threshold,{_step:h,values:l}=n;if(r.hasCustomTransform?(h[0]===!1&&(h[0]=Math.abs(d)>=s&&l[0]),h[1]===!1&&(h[1]=Math.abs(a)>=u&&l[1])):(h[0]===!1&&(h[0]=Math.abs(d)>=s&&Math.sign(d)*s),h[1]===!1&&(h[1]=Math.abs(a)>=u&&Math.sign(a)*u)),n.intentional=h[0]!==!1||h[1]!==!1,!n.intentional)return;const f=[0,0];if(r.hasCustomTransform){const[_,S]=l;f[0]=h[0]!==!1?_-h[0]:0,f[1]=h[1]!==!1?S-h[1]:0}else f[0]=h[0]!==!1?d-h[0]:0,f[1]=h[1]!==!1?a-h[1]:0;this.restrictToAxis&&!n._blocked&&this.restrictToAxis(f);const c=n.offset,p=n._active&&!n._blocked||n.active;p&&(n.first=n._active&&!n.active,n.last=!n._active&&n.active,n.active=i[this.ingKey]=n._active,t&&(n.first&&("bounds"in r&&(n._bounds=Dc(r.bounds,n)),this.setup&&this.setup()),n.movement=f,this.computeOffset()));const[m,g]=n.offset,[[v,y],[b,w]]=n._bounds;n.overflow=[m<v?-1:m>y?1:0,g<b?-1:g>w?1:0],n._movementBound[0]=n.overflow[0]?n._movementBound[0]===!1?n._movement[0]:n._movementBound[0]:!1,n._movementBound[1]=n.overflow[1]?n._movementBound[1]===!1?n._movement[1]:n._movementBound[1]:!1;const C=n._active?r.rubberband||[0,0]:[0,0];if(n.offset=tF(n._bounds,n.offset,C),n.delta=it.sub(n.offset,c),this.computeMovement(),p&&(!n.last||o>vF)){n.delta=it.sub(n.offset,c);const _=n.delta.map(Math.abs);it.addTo(n.distance,_),n.direction=n.delta.map(Math.sign),n._direction=n._delta.map(Math.sign),!n.first&&o>0&&(n.velocity=[_[0]/o,_[1]/o],n.timeDelta=o)}}emit(){const t=this.state,n=this.shared,r=this.config;if(t._active||this.clean(),(t._blocked||!t.intentional)&&!t._force&&!r.triggerAllEvents)return;const i=this.handler(Ue(Ue(Ue({},n),t),{},{[this.aliasKey]:t.values}));i!==void 0&&(t.memo=i)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function yF([e,t],n){const r=Math.abs(e),i=Math.abs(t);if(r>i&&r>n)return"x";if(i>r&&i>n)return"y"}class bF extends xC{constructor(...t){super(...t),Et(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=it.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=it.sub(this.state.offset,this.state.lastOffset)}axisIntent(t){const n=this.state,r=this.config;if(!n.axis&&t){const i=typeof r.axisThreshold=="object"?r.axisThreshold[pC(t)]:r.axisThreshold;n.axis=yF(n._movement,i)}n._blocked=(r.lockDirection||!!r.axis)&&!n.axis||!!r.axis&&r.axis!==n.axis}restrictToAxis(t){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":t[1]=0;break;case"y":t[0]=0;break}}}const wF=e=>e,CC=.15,_C={enabled(e=!0){return e},eventOptions(e,t,n){return Ue(Ue({},n.shared.eventOptions),e)},preventDefault(e=!1){return e},triggerAllEvents(e=!1){return e},rubberband(e=0){switch(e){case!0:return[CC,CC];case!1:return[0,0];default:return it.toVector(e)}},from(e){if(typeof e=="function")return e;if(e!=null)return it.toVector(e)},transform(e,t,n){const r=e||n.shared.transform;return this.hasCustomTransform=!!r,r||wF},threshold(e){return it.toVector(e,0)}},xF=0,Oa=Ue(Ue({},_C),{},{axis(e,t,{axis:n}){if(this.lockDirection=n==="lock",!this.lockDirection)return n},axisThreshold(e=xF){return e},bounds(e={}){if(typeof e=="function")return o=>Oa.bounds(e(o));if("current"in e)return()=>e.current;if(typeof HTMLElement=="function"&&e instanceof HTMLElement)return e;const{left:t=-1/0,right:n=1/0,top:r=-1/0,bottom:i=1/0}=e;return[[t,n],[r,i]]}}),SC={ArrowRight:(e,t=1)=>[e*t,0],ArrowLeft:(e,t=1)=>[-1*e*t,0],ArrowUp:(e,t=1)=>[0,-1*e*t],ArrowDown:(e,t=1)=>[0,e*t]};class CF extends bF{constructor(...t){super(...t),Et(this,"ingKey","dragging")}reset(){super.reset();const t=this.state;t._pointerId=void 0,t._pointerActive=!1,t._keyboardActive=!1,t._preventScroll=!1,t._delayed=!1,t.swipe=[0,0],t.tap=!1,t.canceled=!1,t.cancel=this.cancel.bind(this)}setup(){const t=this.state;if(t._bounds instanceof HTMLElement){const n=t._bounds.getBoundingClientRect(),r=t.currentTarget.getBoundingClientRect(),i={left:n.left-r.left+t.offset[0],right:n.right-r.right+t.offset[0],top:n.top-r.top+t.offset[1],bottom:n.bottom-r.bottom+t.offset[1]};t._bounds=Oa.bounds(i)}}cancel(){const t=this.state;t.canceled||(t.canceled=!0,t._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(t){const n=this.config,r=this.state;if(t.buttons!=null&&(Array.isArray(n.pointerButtons)?!n.pointerButtons.includes(t.buttons):n.pointerButtons!==-1&&n.pointerButtons!==t.buttons))return;const i=this.ctrl.setEventIds(t);n.pointerCapture&&t.target.setPointerCapture(t.pointerId),!(i&&i.size>1&&r._pointerActive)&&(this.start(t),this.setupPointer(t),r._pointerId=jg(t),r._pointerActive=!0,this.computeValues(vC(t)),this.computeInitial(),n.preventScrollAxis&&pC(t)!=="mouse"?(r._active=!1,this.setupScrollPrevention(t)):n.delay>0?(this.setupDelayTrigger(t),n.triggerAllEvents&&(this.compute(t),this.emit())):this.startPointerDrag(t))}startPointerDrag(t){const n=this.state;n._active=!0,n._preventScroll=!0,n._delayed=!1,this.compute(t),this.emit()}pointerMove(t){const n=this.state,r=this.config;if(!n._pointerActive)return;const i=jg(t);if(n._pointerId!==void 0&&i!==n._pointerId)return;const o=vC(t);if(document.pointerLockElement===t.target?n._delta=[t.movementX,t.movementY]:(n._delta=it.sub(o,n._values),this.computeValues(o)),it.addTo(n._movement,n._delta),this.compute(t),n._delayed&&n.intentional){this.timeoutStore.remove("dragDelay"),n.active=!1,this.startPointerDrag(t);return}if(r.preventScrollAxis&&!n._preventScroll)if(n.axis)if(n.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){n._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(t);return}else return;this.emit()}pointerUp(t){this.ctrl.setEventIds(t);try{this.config.pointerCapture&&t.target.hasPointerCapture(t.pointerId)&&t.target.releasePointerCapture(t.pointerId)}catch{}const n=this.state,r=this.config;if(!n._active||!n._pointerActive)return;const i=jg(t);if(n._pointerId!==void 0&&i!==n._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(t);const[o,d]=n._distance;if(n.tap=o<=r.tapsThreshold&&d<=r.tapsThreshold,n.tap&&r.filterTaps)n._force=!0;else{const[a,s]=n._delta,[u,h]=n._movement,[l,f]=r.swipe.velocity,[c,p]=r.swipe.distance,m=r.swipe.duration;if(n.elapsedTime<m){const g=Math.abs(a/n.timeDelta),v=Math.abs(s/n.timeDelta);g>l&&Math.abs(u)>c&&(n.swipe[0]=Math.sign(a)),v>f&&Math.abs(h)>p&&(n.swipe[1]=Math.sign(s))}}this.emit()}pointerClick(t){!this.state.tap&&t.detail>0&&(t.preventDefault(),t.stopPropagation())}setupPointer(t){const n=this.config,r=n.device;n.pointerLock&&t.currentTarget.requestPointerLock(),n.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(t){this.state._preventScroll&&t.cancelable&&t.preventDefault()}setupScrollPrevention(t){this.state._preventScroll=!1,_F(t);const n=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",n),this.eventStore.add(this.sharedConfig.window,"touch","cancel",n),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,t)}setupDelayTrigger(t){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(t)},this.config.delay)}keyDown(t){const n=SC[t.key];if(n){const r=this.state,i=t.shiftKey?10:t.altKey?.1:1;this.start(t),r._delta=n(this.config.keyboardDisplacement,i),r._keyboardActive=!0,it.addTo(r._movement,r._delta),this.compute(t),this.emit()}}keyUp(t){t.key in SC&&(this.state._keyboardActive=!1,this.setActive(),this.compute(t),this.emit())}bind(t){const n=this.config.device;t(n,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(t(n,"change",this.pointerMove.bind(this)),t(n,"end",this.pointerUp.bind(this)),t(n,"cancel",this.pointerUp.bind(this)),t("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(t("key","down",this.keyDown.bind(this)),t("key","up",this.keyUp.bind(this))),this.config.filterTaps&&t("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function _F(e){"persist"in e&&typeof e.persist=="function"&&e.persist()}const Pa=typeof window<"u"&&window.document&&window.document.createElement;function kC(){return Pa&&"ontouchstart"in window}function SF(){return kC()||Pa&&window.navigator.maxTouchPoints>1}function kF(){return Pa&&"onpointerdown"in window}function EF(){return Pa&&"exitPointerLock"in window.document}function TF(){try{return"constructor"in GestureEvent}catch{return!1}}const pn={isBrowser:Pa,gesture:TF(),touch:kC(),touchscreen:SF(),pointer:kF(),pointerLock:EF()},OF=250,PF=180,DF=.5,AF=50,MF=250,jF=10,EC={mouse:0,touch:0,pen:8},IF=Ue(Ue({},Oa),{},{device(e,t,{pointer:{touch:n=!1,lock:r=!1,mouse:i=!1}={}}){return this.pointerLock=r&&pn.pointerLock,pn.touch&&n?"touch":this.pointerLock?"mouse":pn.pointer&&!i?"pointer":pn.touch?"touch":"mouse"},preventScrollAxis(e,t,{preventScroll:n}){if(this.preventScrollDelay=typeof n=="number"?n:n||n===void 0&&e?OF:void 0,!(!pn.touchscreen||n===!1))return e||(n!==void 0?"y":void 0)},pointerCapture(e,t,{pointer:{capture:n=!0,buttons:r=1,keys:i=!0}={}}){return this.pointerButtons=r,this.keys=i,!this.pointerLock&&this.device==="pointer"&&n},threshold(e,t,{filterTaps:n=!1,tapsThreshold:r=3,axis:i=void 0}){const o=it.toVector(e,n?r:i?1:0);return this.filterTaps=n,this.tapsThreshold=r,o},swipe({velocity:e=DF,distance:t=AF,duration:n=MF}={}){return{velocity:this.transform(it.toVector(e)),distance:this.transform(it.toVector(t)),duration:n}},delay(e=0){switch(e){case!0:return PF;case!1:return 0;default:return e}},axisThreshold(e){return e?Ue(Ue({},EC),e):EC},keyboardDisplacement(e=jF){return e}});function FF(e){const[t,n]=e.overflow,[r,i]=e._delta,[o,d]=e._direction;(t<0&&r>0&&o<0||t>0&&r<0&&o>0)&&(e._movement[0]=e._movementBound[0]),(n<0&&i>0&&d<0||n>0&&i<0&&d>0)&&(e._movement[1]=e._movementBound[1])}const RF=30,LF=100;class zF extends xC{constructor(...t){super(...t),Et(this,"ingKey","pinching"),Et(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const t=this.state;t._touchIds=[],t.canceled=!1,t.cancel=this.cancel.bind(this),t.turns=0}computeOffset(){const{type:t,movement:n,lastOffset:r}=this.state;t==="wheel"?this.state.offset=it.add(n,r):this.state.offset=[(1+n[0])*r[0],n[1]+r[1]]}computeMovement(){const{offset:t,lastOffset:n}=this.state;this.state.movement=[t[0]/n[0],t[1]-n[1]]}axisIntent(){const t=this.state,[n,r]=t._movement;if(!t.axis){const i=Math.abs(n)*RF-Math.abs(r);i<0?t.axis="angle":i>0&&(t.axis="scale")}}restrictToAxis(t){this.config.lockDirection&&(this.state.axis==="scale"?t[1]=0:this.state.axis==="angle"&&(t[0]=0))}cancel(){const t=this.state;t.canceled||setTimeout(()=>{t.canceled=!0,t._active=!1,this.compute(),this.emit()},0)}touchStart(t){this.ctrl.setEventIds(t);const n=this.state,r=this.ctrl.touchIds;if(n._active&&n._touchIds.every(o=>r.has(o))||r.size<2)return;this.start(t),n._touchIds=Array.from(r).slice(0,2);const i=mC(t,n._touchIds);i&&this.pinchStart(t,i)}pointerStart(t){if(t.buttons!=null&&t.buttons%2!==1)return;this.ctrl.setEventIds(t),t.target.setPointerCapture(t.pointerId);const n=this.state,r=n._pointerEvents,i=this.ctrl.pointerIds;if(n._active&&Array.from(r.keys()).every(d=>i.has(d))||(r.size<2&&r.set(t.pointerId,t),n._pointerEvents.size<2))return;this.start(t);const o=Mg(...Array.from(r.values()));o&&this.pinchStart(t,o)}pinchStart(t,n){const r=this.state;r.origin=n.origin,this.computeValues([n.distance,n.angle]),this.computeInitial(),this.compute(t),this.emit()}touchMove(t){if(!this.state._active)return;const n=mC(t,this.state._touchIds);n&&this.pinchMove(t,n)}pointerMove(t){const n=this.state._pointerEvents;if(n.has(t.pointerId)&&n.set(t.pointerId,t),!this.state._active)return;const r=Mg(...Array.from(n.values()));r&&this.pinchMove(t,r)}pinchMove(t,n){const r=this.state,i=r._values[1],o=n.angle-i;let d=0;Math.abs(o)>270&&(d+=Math.sign(o)),this.computeValues([n.distance,n.angle-360*d]),r.origin=n.origin,r.turns=d,r._movement=[r._values[0]/r._initial[0]-1,r._values[1]-r._initial[1]],this.compute(t),this.emit()}touchEnd(t){this.ctrl.setEventIds(t),this.state._active&&this.state._touchIds.some(n=>!this.ctrl.touchIds.has(n))&&(this.state._active=!1,this.compute(t),this.emit())}pointerEnd(t){const n=this.state;this.ctrl.setEventIds(t);try{t.target.releasePointerCapture(t.pointerId)}catch{}n._pointerEvents.has(t.pointerId)&&n._pointerEvents.delete(t.pointerId),n._active&&n._pointerEvents.size<2&&(n._active=!1,this.compute(t),this.emit())}gestureStart(t){t.cancelable&&t.preventDefault();const n=this.state;n._active||(this.start(t),this.computeValues([t.scale,t.rotation]),n.origin=[t.clientX,t.clientY],this.compute(t),this.emit())}gestureMove(t){if(t.cancelable&&t.preventDefault(),!this.state._active)return;const n=this.state;this.computeValues([t.scale,t.rotation]),n.origin=[t.clientX,t.clientY];const r=n._movement;n._movement=[t.scale-1,t.rotation],n._delta=it.sub(n._movement,r),this.compute(t),this.emit()}gestureEnd(t){this.state._active&&(this.state._active=!1,this.compute(t),this.emit())}wheel(t){const n=this.config.modifierKey;n&&(Array.isArray(n)?!n.find(r=>t[r]):!t[n])||(this.state._active?this.wheelChange(t):this.wheelStart(t),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(t){this.start(t),this.wheelChange(t)}wheelChange(t){"uv"in t||t.cancelable&&t.preventDefault();const r=this.state;r._delta=[-dF(t)[1]/LF*r.offset[0],0],it.addTo(r._movement,r._delta),FF(r),this.state.origin=[t.clientX,t.clientY],this.compute(t),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){const n=this.config.device;n&&(t(n,"start",this[n+"Start"].bind(this)),t(n,"change",this[n+"Move"].bind(this)),t(n,"end",this[n+"End"].bind(this)),t(n,"cancel",this[n+"End"].bind(this)),t("lostPointerCapture","",this[n+"End"].bind(this))),this.config.pinchOnWheel&&t("wheel","",this.wheel.bind(this),{passive:!1})}}const BF=Ue(Ue({},_C),{},{device(e,t,{shared:n,pointer:{touch:r=!1}={}}){if(n.target&&!pn.touch&&pn.gesture)return"gesture";if(pn.touch&&r)return"touch";if(pn.touchscreen){if(pn.pointer)return"pointer";if(pn.touch)return"touch"}},bounds(e,t,{scaleBounds:n={},angleBounds:r={}}){const i=d=>{const a=wC(Dc(n,d),{min:-1/0,max:1/0});return[a.min,a.max]},o=d=>{const a=wC(Dc(r,d),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof n!="function"&&typeof r!="function"?[i(),o()]:d=>[i(d),o(d)]},threshold(e,t,n){return this.lockDirection=n.axis==="lock",it.toVector(e,this.lockDirection?[.1,3]:0)},modifierKey(e){return e===void 0?"ctrlKey":e},pinchOnWheel(e=!0){return e}});Ue(Ue({},Oa),{},{mouseOnly:(e=!0)=>e}),Ue(Ue({},Oa),{},{mouseOnly:(e=!0)=>e});const Ig=new Map,Fg=new Map;function NF(e){Ig.set(e.key,e.engine),Fg.set(e.key,e.resolver)}const $F={key:"drag",engine:CF,resolver:IF},VF={key:"pinch",engine:zF,resolver:BF};function HF(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function WF(e,t){if(e==null)return{};var n=HF(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}const UF={target(e){if(e)return()=>"current"in e?e.current:e},enabled(e=!0){return e},window(e=pn.isBrowser?window:void 0){return e},eventOptions({passive:e=!0,capture:t=!1}={}){return{passive:e,capture:t}},transform(e){return e}},XF=["target","eventOptions","window","enabled","transform"];function Ac(e={},t){const n={};for(const[r,i]of Object.entries(t))switch(typeof i){case"function":n[r]=i.call(n,e[r],r,e);break;case"object":n[r]=Ac(e[r],i);break;case"boolean":i&&(n[r]=e[r]);break}return n}function YF(e,t,n={}){const r=e,{target:i,eventOptions:o,window:d,enabled:a,transform:s}=r,u=WF(r,XF);if(n.shared=Ac({target:i,eventOptions:o,window:d,enabled:a,transform:s},UF),t){const h=Fg.get(t);n[t]=Ac(Ue({shared:n.shared},u),h)}else for(const h in u){const l=Fg.get(h);l&&(n[h]=Ac(Ue({shared:n.shared},u[h]),l))}return n}class TC{constructor(t,n){Et(this,"_listeners",new Set),this._ctrl=t,this._gestureKey=n}add(t,n,r,i,o){const d=this._listeners,a=uF(n,r),s=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},u=Ue(Ue({},s),o);t.addEventListener(a,i,u);const h=()=>{t.removeEventListener(a,i,u),d.delete(h)};return d.add(h),h}clean(){this._listeners.forEach(t=>t()),this._listeners.clear()}}class GF{constructor(){Et(this,"_timeouts",new Map)}add(t,n,r=140,...i){this.remove(t),this._timeouts.set(t,window.setTimeout(n,r,...i))}remove(t){const n=this._timeouts.get(t);n&&window.clearTimeout(n)}clean(){this._timeouts.forEach(t=>void window.clearTimeout(t)),this._timeouts.clear()}}class KF{constructor(t){Et(this,"gestures",new Set),Et(this,"_targetEventStore",new TC(this)),Et(this,"gestureEventStores",{}),Et(this,"gestureTimeoutStores",{}),Et(this,"handlers",{}),Et(this,"config",{}),Et(this,"pointerIds",new Set),Et(this,"touchIds",new Set),Et(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),qF(this,t)}setEventIds(t){if(Pc(t))return this.touchIds=new Set(hF(t)),this.touchIds;if("pointerId"in t)return t.type==="pointerup"||t.type==="pointercancel"?this.pointerIds.delete(t.pointerId):t.type==="pointerdown"&&this.pointerIds.add(t.pointerId),this.pointerIds}applyHandlers(t,n){this.handlers=t,this.nativeHandlers=n}applyConfig(t,n){this.config=YF(t,n,this.config)}clean(){this._targetEventStore.clean();for(const t of this.gestures)this.gestureEventStores[t].clean(),this.gestureTimeoutStores[t].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...t){const n=this.config.shared,r={};let i;if(!(n.target&&(i=n.target(),!i))){if(n.enabled){for(const d of this.gestures){const a=this.config[d],s=OC(r,a.eventOptions,!!i);if(a.enabled){const u=Ig.get(d);new u(this,t,d).bind(s)}}const o=OC(r,n.eventOptions,!!i);for(const d in this.nativeHandlers)o(d,"",a=>this.nativeHandlers[d](Ue(Ue({},this.state.shared),{},{event:a,args:t})),void 0,!0)}for(const o in r)r[o]=mF(...r[o]);if(!i)return r;for(const o in r){const{device:d,capture:a,passive:s}=lF(o);this._targetEventStore.add(i,d,"",r[o],{capture:a,passive:s})}}}}function Ks(e,t){e.gestures.add(t),e.gestureEventStores[t]=new TC(e,t),e.gestureTimeoutStores[t]=new GF}function qF(e,t){t.drag&&Ks(e,"drag"),t.wheel&&Ks(e,"wheel"),t.scroll&&Ks(e,"scroll"),t.move&&Ks(e,"move"),t.pinch&&Ks(e,"pinch"),t.hover&&Ks(e,"hover")}const OC=(e,t,n)=>(r,i,o,d={},a=!1)=>{var s,u;const h=(s=d.capture)!==null&&s!==void 0?s:t.capture,l=(u=d.passive)!==null&&u!==void 0?u:t.passive;let f=a?r:oF(r,i,h);n&&l&&(f+="Passive"),e[f]=e[f]||[],e[f].push(o)},ZF=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function QF(e){const t={},n={},r=new Set;for(let i in e)ZF.test(i)?(r.add(RegExp.lastMatch),n[i]=e[i]):t[i]=e[i];return[n,t,r]}function qs(e,t,n,r,i,o){if(!e.has(n)||!Ig.has(r))return;const d=n+"Start",a=n+"End",s=u=>{let h;return u.first&&d in t&&t[d](u),n in t&&(h=t[n](u)),u.last&&a in t&&t[a](u),h};i[r]=s,o[r]=o[r]||{}}function JF(e,t){const[n,r,i]=QF(e),o={};return qs(i,n,"onDrag","drag",o,t),qs(i,n,"onWheel","wheel",o,t),qs(i,n,"onScroll","scroll",o,t),qs(i,n,"onPinch","pinch",o,t),qs(i,n,"onMove","move",o,t),qs(i,n,"onHover","hover",o,t),{handlers:o,config:t,nativeHandlers:r}}function eR(e,t={},n,r){const i=ce.useMemo(()=>new KF(e),[]);if(i.applyHandlers(e,r),i.applyConfig(t,n),ce.useEffect(i.effect.bind(i)),ce.useEffect(()=>i.clean.bind(i),[]),t.target===void 0)return i.bind.bind(i)}function tR(e){return e.forEach(NF),function(n,r){const{handlers:i,nativeHandlers:o,config:d}=JF(n,r||{});return eR(i,d,void 0,o)}}function ar({e,rect:t,deltaX:n,deltaY:r}){return{rect:t,x:e.clientX,y:e.clientY,deltaX:n??0,deltaY:r??0,nativeEvent:e}}function Mc({onMoveStart:e,onMove:t,onMoveEnd:n,minimumMovement:r=0,preventDefault:i,stopPropagation:o=!0,onPress:d,onLongPress:a,...s}){const h=E.useRef({lastPosition:{x:0,y:0},started:!1,longPressTriggered:!1}).current,{addGlobalListener:l,removeGlobalListener:f}=Vp(),c=v=>{!h.el||(e==null?void 0:e(v,h.el))===!1||(h.originalTouchAction=h.el.style.touchAction,h.el.style.touchAction="none",h.originalUserSelect=document.documentElement.style.userSelect,document.documentElement.style.userSelect="none",h.started=!0)},p=v=>{var y;if(v.button===0&&h.id==null){if(h.started=!1,((y=s.onPointerDown)==null?void 0:y.call(s,v))===!1)return;o&&v.stopPropagation(),i&&v.preventDefault(),h.id=v.pointerId,h.el=v.currentTarget,h.lastPosition={x:v.clientX,y:v.clientY},a&&(h.longPressTimer=setTimeout(()=>{a(v,h.el),h.longPressTriggered=!0},400)),(e||t)&&l(window,"pointermove",m,!1),l(window,"pointerup",g,!1),l(window,"pointercancel",g,!1)}},m=v=>{if(v.pointerId===h.id){const y=v.clientX-h.lastPosition.x,b=v.clientY-h.lastPosition.y;(Math.abs(y)>=r||Math.abs(b)>=r)&&!h.started&&c(v),h.started&&(t==null||t(v,y,b),h.lastPosition={x:v.clientX,y:v.clientY})}},g=v=>{var y;if(v.pointerId===h.id){h.longPressTimer&&clearTimeout(h.longPressTimer);const b=h.longPressTriggered;h.longPressTriggered=!1,h.started&&(n==null||n(v)),h.el&&(v.type!=="pointercancel"&&((y=s.onPointerUp)==null||y.call(s,v,h.el),v.target&&h.el.contains(v.target)&&(b?a==null||a(v,h.el):d==null||d(v,h.el))),document.documentElement.style.userSelect=h.originalUserSelect||"",h.el.style.touchAction=h.originalTouchAction||""),h.id=void 0,h.started=!1,f(window,"pointermove",m,!1),f(window,"pointerup",g,!1),f(window,"pointercancel",g,!1)}};return{domProps:{onPointerDown:Bt(p)}}}function nR(e,t){const n={...e};n.left=Math.max(0,n.left);const r=n.left-e.left;r>0&&(n.width-=r),n.top=Math.max(0,n.top);const i=n.top-e.top;return i>0&&(n.height-=i),n.width=Math.min(n.width,t.width-n.left),n.height=Math.min(n.height,t.height-n.top),n}function Da(e){return{left:e.left,top:e.top,width:e.width,height:e.height}}var nn=(e=>(e.topLeft="topLeft",e.topRight="topRight",e.bottomLeft="bottomLeft",e.bottomRight="bottomRight",e))(nn||{});let Oe={};const PC=(e={})=>{Vs(null),Oe=e};function DC({aspectRatio:e,boundaryRef:t,boundaryRect:n,restrictWithinBoundary:r=!0,minWidth:i=50,minHeight:o=50,...d}){const a={onMoveStart:(u,h)=>{var f;const l=u.target;if(!l.dataset.resizeHandle||ba||(PC({currentRect:Da(h.getBoundingClientRect()),resizeDir:l.dataset.resizeHandle}),!Oe.currentRect))return!1;Vs("resize"),n?Oe.boundaryRect=n:t!=null&&t.current&&(Oe.boundaryRect=Da(t.current.getBoundingClientRect())),Oe.currentRect&&Oe.boundaryRect&&(Oe.currentRect.left-=Oe.boundaryRect.left,Oe.currentRect.top-=Oe.boundaryRect.top),Oe.initialAspectRatio=Oe.currentRect.width/Oe.currentRect.height,(f=d.onResizeStart)==null||f.call(d,ar({rect:Oe.currentRect,e:u}))},onMove:(u,h,l)=>{var m;if(!Oe.resizeDir||!Oe.currentRect)return;const f=e==="initial"?Oe.initialAspectRatio:e,c=rR(Oe.currentRect,h,l,f),p=iR(c,i,o,f);(m=d.onResize)==null||m.call(d,ar({rect:p,e:u,deltaX:h,deltaY:l})),Oe.currentRect=c},onMoveEnd:u=>{var h;Oe.currentRect&&((h=d.onResizeEnd)==null||h.call(d,ar({rect:Oe.currentRect,e:u}))),PC()}},{domProps:s}=Mc(a);return{resizeProps:s}}function rR(e,t,n,r){const i={...e},o={...e};return Oe.resizeDir==="topRight"?(o.width=Math.floor(o.width+t),r?o.height=Math.floor(o.width/r):o.height=Math.floor(o.height-n),o.top=Math.floor(o.top+(i.height-o.height))):Oe.resizeDir==="bottomRight"?(o.width=Math.floor(o.width+t),r?o.height=Math.floor(o.width/r):o.height=Math.floor(o.height+n)):Oe.resizeDir==="topLeft"?(o.width=Math.floor(o.width-t),r?o.height=Math.floor(o.width/r):o.height=Math.floor(o.height-n),o.left=Math.floor(o.left+(i.width-o.width)),o.top=Math.floor(o.top+(i.height-o.height))):Oe.resizeDir==="bottomLeft"&&(o.width=Math.floor(o.width-t),r?o.height=Math.floor(o.width/r):o.height=Math.floor(o.height+n),o.left=Math.floor(o.left+t)),o}function iR(e,t,n,r){const i=Oe.resizeDir==="bottomLeft"||Oe.resizeDir==="topLeft",o=Oe.resizeDir==="topRight"||Oe.resizeDir==="topLeft";let d={...e};d.width=Math.max(t,e.width),d.height=Math.max(n,e.height);const a=d.width-e.width;i&&a>0&&(d.left-=a);const s=d.height-e.height;if(o&&s>0&&(d.top-=s),Oe.boundaryRect&&(d=nR(d,Oe.boundaryRect)),r){const u=d.width,h=d.height,l=Kp(r,d.width,d.height);d.width=l.width,d.height=l.height,o&&(d.top+=h-d.height),i&&(d.left+=u-d.width)}return d}function Xr({position:e,inset:t=!1}){const n=sR(e,t);return x.jsx("div",{"data-resize-handle":e,className:`border-white absolute w-20 h-20 ${n}`})}function sR(e,t){const n=t?"left-0":"-left-5",r=t?"top-0":"-top-5",i=t?"bottom-0":"-bottom-5",o=t?"right-0":"-right-5";switch(e){case nn.topLeft:return`${n} ${r} border-l-4 border-t-4 cursor-nwse-resize`;case nn.topRight:return`${o} ${r} border-r-4 border-t-4 cursor-nesw-resize`;case nn.bottomRight:return`${o} ${i} border-r-4 border-b-4 cursor-se-resize`;case nn.bottomLeft:return`${n} ${i} border-l-4 border-b-4 cursor-sw-resize`;default:return""}}var Aa=(e=>(e.top="maskTop",e.right="maskRight",e.bottom="maskBottom",e.left="maskLeft",e))(Aa||{});function jc({position:e,refs:t}){const n=oR(e);return x.jsx("div",{className:`cropzone-transition bg-black/50 bottom absolute ${n}`,ref:r=>t.current[e]=r})}function oR(e){switch(e){case"maskTop":return"left-0 top-0";case"maskBottom":return"bottom-0 left-0";default:return""}}function Ic({name:e,refs:t}){const n=le("cropzone-transition pointer-events-none absolute left-0 top-0 bg-white/50",e.startsWith("lineHor")?"h-px":"w-px");return x.jsx("div",{className:n,ref:r=>{t.current[e]=r}})}function Ma(e,t,n){return Math.min(Math.max(e,t),n)}let qe={};function AC({boundaryRef:e,boundaryRect:t,minimumMovement:n,restrictWithinBoundary:r=!0,...i}){const o={minimumMovement:n,onMoveStart:(a,s)=>{var u;if(ba)return!1;qe={currentRect:Da(s.getBoundingClientRect())},Vs("move"),t?qe.boundaryRect=t:e!=null&&e.current&&(qe.boundaryRect=Da(e.current.getBoundingClientRect())),qe.currentRect&&qe.boundaryRect&&(qe.currentRect.left-=qe.boundaryRect.left,qe.currentRect.top-=qe.boundaryRect.top),(u=i.onMoveStart)==null||u.call(i,ar({rect:qe.currentRect,e:a}))},onMove:(a,s,u)=>{var f;if(!qe.currentRect)return;const h={...qe.currentRect,left:qe.currentRect.left+s,top:qe.currentRect.top+u},l={...h};qe.boundaryRect&&r&&(l.left=Ma(h.left,0,qe.boundaryRect.width-h.width),l.top=Ma(h.top,0,qe.boundaryRect.height-h.height)),(f=i.onMove)==null||f.call(i,ar({rect:l,e:a,deltaX:s,deltaY:u})),qe.currentRect=h},onMoveEnd:a=>{var s;qe.currentRect&&((s=i.onMoveEnd)==null||s.call(i,ar({rect:qe.currentRect,e:a})),Vs(null),qe={})}},{domProps:d}=Mc(o);return{moveProps:d}}function aR(){const e=E.useRef({}),[t,n]=E.useState(!0),r=fe(h=>h.canvasSize),i=fe(h=>{var l,f;return(f=(l=h.config.tools)==null?void 0:l.crop)==null?void 0:f.cropzone}),o=fe(h=>{var l,f;return(f=(l=h.config.tools)==null?void 0:l.crop)==null?void 0:f.defaultRatio})||null,d=fe(h=>h.crop.selectedAspectRatio)||null,{moveProps:a}=AC({boundaryRect:r,onMoveStart:()=>n(!0),onMove:h=>L().crop.drawZone(h.rect),onMoveEnd:()=>n(!1)}),{resizeProps:s}=DC({boundaryRect:r,minHeight:50,minWidth:50,aspectRatio:qp(d),onResizeStart:()=>n(!0),onResize:h=>L().crop.drawZone(h.rect),onResizeEnd:()=>n(!1)});E.useLayoutEffect(()=>{L().crop.registerRefs(e),L().crop.resetCropzone(o)},[o,r]);const u=le("cropzone absolute z-cropzone isolate left-0 top-0 w-full h-full overflow-hidden",t&&"moving");return x.jsxs("div",{className:u,onPointerDown:h=>{h.stopPropagation(),h.preventDefault()},children:[x.jsxs("div",{className:"cropzone-transition border-white/50 absolute z-10 left-0 top-0 border",...tr(s,a),ref:h=>e.current.innerZone=h,children:[!(i!=null&&i.hideTopLeft)&&x.jsx(Xr,{position:nn.topLeft,inset:!0}),!(i!=null&&i.hideTopRight)&&x.jsx(Xr,{position:nn.topRight,inset:!0}),!(i!=null&&i.hideBottomLeft)&&x.jsx(Xr,{position:nn.bottomLeft,inset:!0}),!(i!=null&&i.hideBottomRight)&&x.jsx(Xr,{position:nn.bottomRight,inset:!0}),x.jsx(Ic,{name:"lineVer1",refs:e}),x.jsx(Ic,{name:"lineVer2",refs:e}),x.jsx(Ic,{name:"lineHor1",refs:e}),x.jsx(Ic,{name:"lineHor2",refs:e})]}),x.jsx(jc,{refs:e,position:Aa.top}),x.jsx(jc,{refs:e,position:Aa.left}),x.jsx(jc,{refs:e,position:Aa.right}),x.jsx(jc,{refs:e,position:Aa.bottom})]})}const lR=ve(x.jsx("path",{d:"M 7 2 C 6.448 2 6 2.448 6 3 C 6 3.552 6.448 4 7 4 L 20 4 L 20 17 C 20 17.552 20.448 18 21 18 C 21.552 18 22 17.552 22 17 L 22 4 C 22 2.895 21.105 2 20 2 L 7 2 z M 4 6 C 2.895 6 2 6.895 2 8 L 2 20 C 2 21.105 2.895 22 4 22 L 16 22 C 17.105 22 18 21.105 18 20 L 18 8 C 18 6.895 17.105 6 16 6 L 4 6 z M 10 10 C 10.552 10 11 10.448 11 11 L 11 13 L 13 13 C 13.552 13 14 13.448 14 14 C 14 14.552 13.552 15 13 15 L 11 15 L 11 17 C 11 17.552 10.552 18 10 18 C 9.448 18 9 17.552 9 17 L 9 15 L 7 15 C 6.448 15 6 14.552 6 14 C 6 13.448 6.448 13 7 13 L 9 13 L 9 11 C 9 10.448 9.448 10 10 10 z"})),uR=ve(x.jsx("path",{d:"M 11 3 L 2 21 L 11 21 L 11 3 z M 13 3 L 13 21 L 22 21 L 13 3 z M 9 11.472656 L 9 19 L 5.2363281 19 L 9 11.472656 z"})),cR=ve(x.jsx("path",{d:"M 16.476562 2.4511719 C 16.392047 2.4657656 16.308531 2.5061719 16.238281 2.5761719 L 14.130859 4.6835938 C 13.956859 4.8575938 13.956859 5.1394531 14.130859 5.3144531 L 16.238281 7.4238281 C 16.519281 7.7048281 17 7.5054219 17 7.1074219 L 17 6 L 20 6 L 20 9 A 1.0001 1.0001 0 1 0 22 9 L 22 6 C 22 4.9069372 21.093063 4 20 4 L 17 4 L 17 2.8925781 C 17 2.5940781 16.730109 2.4073906 16.476562 2.4511719 z M 4 5 C 2.9069372 5 2 5.9069372 2 7 L 2 14 C 2 15.093063 2.9069372 16 4 16 L 7 16 L 7 19 C 7 20.105 7.895 21 9 21 L 16 21 C 17.105 21 18 20.105 18 19 L 18 12 C 18 10.895 17.105 10 16 10 L 13 10 L 13 7 C 13 5.9069372 12.093063 5 11 5 L 4 5 z M 4 7 L 11 7 L 11 14 L 4 14 L 4 7 z"})),fR=ve(x.jsx("path",{d:"M 10 2 L 9 3 L 3 3 L 3 5 L 21 5 L 21 3 L 15 3 L 14 2 L 10 2 z M 4.3652344 7 L 5.8925781 20.263672 C 6.0245781 21.253672 6.877 22 7.875 22 L 16.123047 22 C 17.121047 22 17.974422 21.254859 18.107422 20.255859 L 19.634766 7 L 4.3652344 7 z"})),hR={width:120,height:30},dR=[{name:"Duplicate",icon:lR,onClick:()=>{L().objects.duplicate()}},{name:"Flip",icon:uR,onClick:()=>{L().objects.flipHorizontally()}},{name:"Bring to front",icon:cR,onClick:()=>{L().objects.bringToFront()}},{name:"Delete",icon:fR,onClick:()=>{L().objects.delete()}}],pR=ce.forwardRef((e,t)=>{const r=fe(i=>i.objects.active.isMoving)?"opacity-0":"opacity-100";return x.jsx("div",{ref:t,className:`${r} absolute z-obj-box left-0 top-0 flex items-center text-white bg-controls rounded shadow transition-opacity overflow-hidden`,children:dR.map(i=>{const o=i.icon;return x.jsx(je,{size:"sm",className:"w-30 h-30 hover:bg-white/hover",radius:"rounded-none",onClick:i.onClick,children:x.jsx(o,{})},i.name)})})});function gR(e,t){if(!t)return;const n=e.angle||0,r=n>168&&n<188?-30:-15,i=D().canvasSize,o=D().stageSize,d=hR,a=i.top-o.top,s=i.left-o.left,u=o.width-(s+i.width),h=o.height-(a+i.height),l=-a,f=-(i.left-o.left),c=i.width-d.width+u,p=i.height-d.height+h,m=e.getBoundingRect();let g=m.top-d.height+r,v=m.left+m.width/2-d.width/2;g=Math.min(p,Math.max(l,g)),v=Math.min(c,Math.max(f,v)),t.style.transform=`translate(${v}px, ${g}px) rotate(0deg)`}function mR(e){const t=L().objects.getActive();if(!t||!e.rect.angle)return;const n=we.fabric.util.radiansToDegrees(e.rect.angle);n!==t.angle&&L().objects.setValues({angle:n})}function vR(e){const t=e.rect.width/2,n=e.rect.height/2;L().objects.setValues({left:(e.rect.left+t)/D().zoom,top:(e.rect.top+n)/D().zoom})}function yR(e){const t=L().objects.getActive();if(!t)return;const n={};vr(t)?(e.deltaX>0||t.getScaledHeight()>=20&&t.getScaledWidth()>=20)&&(n.fontSize=(t.fontSize||1)+e.deltaX):(t.width&&(n.scaleX=e.rect.width/D().zoom/t.width),t.height&&(n.scaleY=e.rect.height/D().zoom/t.height)),L().objects.setValues(n)}function MC(e,t){const n=L().objects.getActive();if(!n||!e.current)return;const r=e.current,i=we.fabric.util.degreesToRadians(n.angle??0);let o=Math.round(n.getScaledWidth()*D().zoom),d=Math.round(n.getScaledHeight()*D().zoom),a=Math.round((n.left??0)*D().zoom),s=Math.round((n.top??0)*D().zoom);const u=n.originX==="center"?o/2:0,h=n.originY==="center"?d/2:0;n.padding&&(o+=n.padding*2,d+=n.padding*2,a-=n.padding,s-=n.padding),r.style.width=`${o}px`,r.style.height=`${d}px`,r.style.transform=`translate(${a-u}px, ${s-h}px) rotate(${i}rad)`,L().canvas.render(),gR(n,t.current)}function bR(){var t;const e=L().objects.getActive();vr(e)&&(e.enterEditing(),(t=e.hiddenTextarea)==null||t.focus())}function wR(){return x.jsx("div",{className:"absolute -bottom-20 left-1/2 w-2 h-20 bg-white cursor-default -translate-x-1/2",children:x.jsx("div",{"data-rotate-handle":!0,className:"w-18 h-18 absolute -bottom-10 -left-8 bg-white rounded-full cursor-move"})})}let Fn={};function xR(e){const t={onMoveStart:(r,i)=>{var u,h;if(!r.target.dataset.rotateHandle||ba)return!1;const d=Da(i.getBoundingClientRect());if(!d)return!1;const a=(u=i.style.transform.match(/rotate\((.+?)\)/))==null?void 0:u[1],[s="0"]=a?a.split(","):[];IC({currentRect:d,centerX:d.left+d.width/2,centerY:d.top+d.height/2,startAngle:parseFloat(s)}),Vs("rotate"),Fn.startAngle=jC(r),(h=e.onRotateStart)==null||h.call(e,ar({rect:d,e:r}))},onMove:(r,i,o)=>{var a;if(!Fn.currentRect)return;const d={...Fn.currentRect};d.angle=jC(r),d.left+=i,d.top+=o,(a=e.onRotate)==null||a.call(e,ar({rect:d,e:r,deltaX:i,deltaY:o})),Fn.currentRect=d},onMoveEnd:r=>{var i;Fn.currentRect&&((i=e.onRotateEnd)==null||i.call(e,ar({rect:Fn.currentRect,e:r}))),IC()}},{domProps:n}=Mc(t);return{rotateProps:n}}function jC(e){const t={x:Fn.centerX||0,y:Fn.centerY||0};return Math.atan2(t.y-e.pageY,t.x-e.pageX)-(Fn.startAngle||0)}const IC=(e={})=>{Vs(null),Fn=e};function CR(){const e=E.useRef(null),t=E.useRef(null),n=fe(f=>f.objects.active.id),r=fe(f=>f.objects.isEditingText),i=fe(f=>f.zoom),o=_R(),d=E.useRef(null),a=E.useCallback(()=>{d.current?(clearTimeout(d.current),d.current=null,bR()):d.current=setTimeout(()=>{d.current=null},300)},[]);let{moveProps:s}=AC({boundaryRef:D().canvasRef,restrictWithinBoundary:!1,onMoveEnd:()=>{D().objects.setActiveIsMoving(!1)},onMove:f=>{D().objects.setActiveIsMoving(!0),vR(f)}});o.lockMovement&&(s={});const{resizeProps:u}=DC({minWidth:50,minHeight:50,aspectRatio:o.unlockAspectRatio?null:"initial",boundaryRef:o.containWithinCanvas?D().canvasRef:void 0,restrictWithinBoundary:!1,onResizeEnd:()=>{D().objects.setActiveIsMoving(!1)},onResize:f=>{D().objects.setActiveIsMoving(!0),yR(f)}}),{rotateProps:h}=xR({boundaryRef:D().canvasRef,onRotateEnd:()=>{D().objects.setActiveIsMoving(!1)},onRotate:f=>{D().objects.setActiveIsMoving(!0),mR(f)}});E.useEffect(()=>{he()&&D().editor.on("object:modified",f=>{f.sizeOrPositionChanged&&MC(e,t)})},[]),E.useEffect(()=>{MC(e,t)},[n,i,r]);const l=n&&!r?"block":"hidden";return x.jsxs("div",{className:l,children:[x.jsxs("div",{ref:e,...tr(h,u,s),onClick:a,className:"absolute z-obj-box border-2 border-white shadow-md cursor-move",children:[!o.hideTopLeft&&x.jsx(Xr,{position:nn.topLeft}),!o.hideTopRight&&x.jsx(Xr,{position:nn.topRight}),!o.hideBottomLeft&&x.jsx(Xr,{position:nn.bottomLeft}),!o.hideBottomRight&&x.jsx(Xr,{position:nn.bottomRight}),!o.hideRotatingPoint&&x.jsx(wR,{})]}),x.jsx(pR,{ref:t})]})}function _R(){const e=L().objects.getActive();if(!e||!e.name)return{};const t=D().config.objectControls||{},n=e.name;return{...t.global,...t[n]}}function SR(){const e=fe(n=>n.activeTool===De.CROP),t=fe(n=>n.objects.active.id);return x.jsxs("div",{children:[e&&x.jsx(aR,{}),t&&x.jsx(CR,{})]})}const kR=tR([$F,VF]),ER=ce.forwardRef((e,t)=>{const[n,r]=E.useState(!1);E.useEffect(()=>fe.subscribe(o=>o.loading,o=>{r(!o)}),[]);const i={visible:{opacity:1,transition:{duration:.35,delay:.5}},hidden:{opacity:0,transition:{duration:0}}};return x.jsx(TR,{children:x.jsxs(xt.div,{initial:{opacity:0},variants:i,animate:n?"visible":"hidden",className:"relative m-auto w-max",style:{backgroundImage:`url(${Jt("images/empty-canvas-bg.png")})`},children:[x.jsx(SR,{}),x.jsx("canvas",{ref:t})]})})});function TR({children:e}){const t=E.useRef(null),n=kR({onPinch:r=>{if(!L().zoom.allowUserZoom||!FC(r))return r.cancel();r.direction[0]===1?L().zoom.zoomIn(.01):L().zoom.zoomOut(.01),r.event.stopPropagation(),r.event.preventDefault()},onDrag:r=>{if(r.pinching||!FC(r))return r.cancel();t.current.scrollLeft-=r.delta[0],t.current.scrollTop-=r.delta[1]}});return x.jsx("div",{ref:t,className:"w-full h-full overflow-hidden touch-none flex",...n(),children:e})}function FC(e){return!(he().findTarget(e.event,!1)||he().isDrawingMode)}function Rg({actionBtn:e,children:t,className:n}){return x.jsxs("div",{className:le(n,"flex gap-16 items-center h-full"),children:[e&&x.jsx("div",{className:"flex-shrink-0",children:e}),x.jsx("div",{className:"w-full flex-auto",children:t}),e&&x.jsx("div",{className:"w-96"})]})}function Zs(){return(Zs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Fc(e,t){if(e==null)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t.indexOf(n=o[r])>=0||(i[n]=e[n]);return i}function ja(e){var t=E.useRef(e),n=E.useRef(function(r){t.current&&t.current(r)});return t.current=e,n.current}var Ia=function(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=1),e>n?n:e<t?t:e},Fa=function(e){return"touches"in e},Lg=function(e){return e&&e.ownerDocument.defaultView||self},RC=function(e,t,n){var r=e.getBoundingClientRect(),i=Fa(t)?function(o,d){for(var a=0;a<o.length;a++)if(o[a].identifier===d)return o[a];return o[0]}(t.touches,n):t;return{left:Ia((i.pageX-(r.left+Lg(e).pageXOffset))/r.width),top:Ia((i.pageY-(r.top+Lg(e).pageYOffset))/r.height)}},LC=function(e){!Fa(e)&&e.preventDefault()},zC=ce.memo(function(e){var t=e.onMove,n=e.onKey,r=Fc(e,["onMove","onKey"]),i=E.useRef(null),o=ja(t),d=ja(n),a=E.useRef(null),s=E.useRef(!1),u=E.useMemo(function(){var c=function(g){LC(g),(Fa(g)?g.touches.length>0:g.buttons>0)&&i.current?o(RC(i.current,g,a.current)):m(!1)},p=function(){return m(!1)};function m(g){var v=s.current,y=Lg(i.current),b=g?y.addEventListener:y.removeEventListener;b(v?"touchmove":"mousemove",c),b(v?"touchend":"mouseup",p)}return[function(g){var v=g.nativeEvent,y=i.current;if(y&&(LC(v),!function(w,C){return C&&!Fa(w)}(v,s.current)&&y)){if(Fa(v)){s.current=!0;var b=v.changedTouches||[];b.length&&(a.current=b[0].identifier)}y.focus(),o(RC(y,v,a.current)),m(!0)}},function(g){var v=g.which||g.keyCode;v<37||v>40||(g.preventDefault(),d({left:v===39?.05:v===37?-.05:0,top:v===40?.05:v===38?-.05:0}))},m]},[d,o]),h=u[0],l=u[1],f=u[2];return E.useEffect(function(){return f},[f]),ce.createElement("div",Zs({},r,{onTouchStart:h,onMouseDown:h,className:"react-colorful__interactive",ref:i,onKeyDown:l,tabIndex:0,role:"slider"}))}),zg=function(e){return e.filter(Boolean).join(" ")},BC=function(e){var t=e.color,n=e.left,r=e.top,i=r===void 0?.5:r,o=zg(["react-colorful__pointer",e.className]);return ce.createElement("div",{className:o,style:{top:100*i+"%",left:100*n+"%"}},ce.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:t}}))},dt=function(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=Math.pow(10,t)),Math.round(n*e)/n},OR=function(e){return jR(Bg(e))},Bg=function(e){return e[0]==="#"&&(e=e.substring(1)),e.length<6?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?dt(parseInt(e[3]+e[3],16)/255,2):1}:{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16),a:e.length===8?dt(parseInt(e.substring(6,8),16)/255,2):1}},PR=function(e){return MR(AR(e))},DR=function(e){var t=e.s,n=e.v,r=e.a,i=(200-t)*n/100;return{h:dt(e.h),s:dt(i>0&&i<200?t*n/100/(i<=100?i:200-i)*100:0),l:dt(i/2),a:dt(r,2)}},Ng=function(e){var t=DR(e);return"hsl("+t.h+", "+t.s+"%, "+t.l+"%)"},AR=function(e){var t=e.h,n=e.s,r=e.v,i=e.a;t=t/360*6,n/=100,r/=100;var o=Math.floor(t),d=r*(1-n),a=r*(1-(t-o)*n),s=r*(1-(1-t+o)*n),u=o%6;return{r:dt(255*[r,a,d,d,s,r][u]),g:dt(255*[s,r,r,a,d,d][u]),b:dt(255*[d,d,s,r,r,a][u]),a:dt(i,2)}},Rc=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},MR=function(e){var t=e.r,n=e.g,r=e.b,i=e.a,o=i<1?Rc(dt(255*i)):"";return"#"+Rc(t)+Rc(n)+Rc(r)+o},jR=function(e){var t=e.r,n=e.g,r=e.b,i=e.a,o=Math.max(t,n,r),d=o-Math.min(t,n,r),a=d?o===t?(n-r)/d:o===n?2+(r-t)/d:4+(t-n)/d:0;return{h:dt(60*(a<0?a+6:a)),s:dt(o?d/o*100:0),v:dt(o/255*100),a:i}},IR=ce.memo(function(e){var t=e.hue,n=e.onChange,r=zg(["react-colorful__hue",e.className]);return ce.createElement("div",{className:r},ce.createElement(zC,{onMove:function(i){n({h:360*i.left})},onKey:function(i){n({h:Ia(t+360*i.left,0,360)})},"aria-label":"Hue","aria-valuenow":dt(t),"aria-valuemax":"360","aria-valuemin":"0"},ce.createElement(BC,{className:"react-colorful__hue-pointer",left:t/360,color:Ng({h:t,s:100,v:100,a:1})})))}),FR=ce.memo(function(e){var t=e.hsva,n=e.onChange,r={backgroundColor:Ng({h:t.h,s:100,v:100,a:1})};return ce.createElement("div",{className:"react-colorful__saturation",style:r},ce.createElement(zC,{onMove:function(i){n({s:100*i.left,v:100-100*i.top})},onKey:function(i){n({s:Ia(t.s+100*i.left,0,100),v:Ia(t.v-100*i.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+dt(t.s)+"%, Brightness "+dt(t.v)+"%"},ce.createElement(BC,{className:"react-colorful__saturation-pointer",top:1-t.v/100,left:t.s/100,color:Ng(t)})))}),NC=function(e,t){if(e===t)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0},RR=function(e,t){return e.toLowerCase()===t.toLowerCase()||NC(Bg(e),Bg(t))};function LR(e,t,n){var r=ja(n),i=E.useState(function(){return e.toHsva(t)}),o=i[0],d=i[1],a=E.useRef({color:t,hsva:o});E.useEffect(function(){if(!e.equal(t,a.current.color)){var u=e.toHsva(t);a.current={hsva:u,color:t},d(u)}},[t,e]),E.useEffect(function(){var u;NC(o,a.current.hsva)||e.equal(u=e.fromHsva(o),a.current.color)||(a.current={hsva:o,color:u},r(u))},[o,e,r]);var s=E.useCallback(function(u){d(function(h){return Object.assign({},h,u)})},[]);return[o,s]}var zR=typeof window<"u"?E.useLayoutEffect:E.useEffect,BR=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},$C=new Map,NR=function(e){zR(function(){var t=e.current?e.current.ownerDocument:document;if(t!==void 0&&!$C.has(t)){var n=t.createElement("style");n.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,$C.set(t,n);var r=BR();r&&n.setAttribute("nonce",r),t.head.appendChild(n)}},[])},$R=function(e){var t=e.className,n=e.colorModel,r=e.color,i=r===void 0?n.defaultColor:r,o=e.onChange,d=Fc(e,["className","colorModel","color","onChange"]),a=E.useRef(null);NR(a);var s=LR(n,i,o),u=s[0],h=s[1],l=zg(["react-colorful",t]);return ce.createElement("div",Zs({},d,{ref:a,className:l}),ce.createElement(FR,{hsva:u,onChange:h}),ce.createElement(IR,{hue:u.h,onChange:h,className:"react-colorful__last-control"}))},VR={defaultColor:"000",toHsva:OR,fromHsva:function(e){return PR({h:e.h,s:e.s,v:e.v,a:1})},equal:RR},HR=function(e){return ce.createElement($R,Zs({},e,{colorModel:VR}))},WR=/^#?([0-9A-F]{3,8})$/i,UR=function(e){var t=e.color,n=t===void 0?"":t,r=e.onChange,i=e.onBlur,o=e.escape,d=e.validate,a=e.format,s=e.process,u=Fc(e,["color","onChange","onBlur","escape","validate","format","process"]),h=E.useState(function(){return o(n)}),l=h[0],f=h[1],c=ja(r),p=ja(i),m=E.useCallback(function(v){var y=o(v.target.value);f(y),d(y)&&c(s?s(y):y)},[o,s,d,c]),g=E.useCallback(function(v){d(v.target.value)||f(o(n)),p(v)},[n,o,d,p]);return E.useEffect(function(){f(o(n))},[n,o]),ce.createElement("input",Zs({},u,{value:a?a(l):l,spellCheck:"false",onChange:m,onBlur:g}))},VC=function(e){return"#"+e},XR=function(e){var t=e.prefixed,n=e.alpha,r=Fc(e,["prefixed","alpha"]),i=E.useCallback(function(d){return d.replace(/([^0-9A-F]+)/gi,"").substring(0,n?8:6)},[n]),o=E.useCallback(function(d){return function(a,s){var u=WR.exec(a),h=u?u[1].length:0;return h===3||h===6||!!s&&h===4||!!s&&h===8}(d,n)},[n]);return ce.createElement(UR,Zs({},r,{escape:i,format:t?VC:void 0,process:VC,validate:o}))},HC={};HC={alpha:"",black:"",blue:"","blue purple":" ",brightness:"",brown:"","brown yellow":" ",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"","cyan blue":" ",dark:"",gray:"",grayish:" ",green:"","green cyan":" ",hue:" ",light:"",lightness:"",magenta:"","magenta pink":" ",orange:"","orange yellow":" ",pale:"",pink:"","pink red":" ",purple:"","purple magenta":"",red:"","red orange":" ",saturation:"",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} `,"very dark":" ","very light":" ",vibrant:"",white:"",yellow:"","yellow green":" "};var WC={};WC={alpha:"",black:"",blue:"","blue purple":" ",brightness:"",brown:"","brown yellow":" ",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"","cyan blue":" ",dark:"",gray:"",grayish:"",green:"","green cyan":" ",hue:"",light:"",lightness:"",magenta:"","magenta pink":" ",orange:"","orange yellow":" ",pale:"",pink:"","pink red":" ",purple:"","purple magenta":" ",red:"","red orange":" ",saturation:"",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} `,"very dark":" ","very light":" ",vibrant:" ",white:"",yellow:"","yellow green":" "};var UC={};UC={alpha:"Alfa",black:"ern",blue:"Modr","blue purple":"modrofialov",brightness:"Jas",brown:"hnd","brown yellow":"hndolut",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"tyrkysov","cyan blue":"tyrkysovomodr",dark:"tmav",gray:"ed",grayish:"naedl",green:"Zelen","green cyan":"zelenotyrkysov",hue:"Odstn",light:"svtl",lightness:"Svtlost",magenta:"purpurov","magenta pink":"purpurov rov",orange:"oranov","orange yellow":"oranovolut",pale:"bled",pink:"rov","pink red":"rovoerven",purple:"fialov","purple magenta":"fialov purpurov",red:"erven","red orange":"ervenooranov",saturation:"Sytost",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} prhledn`,"very dark":"velmi tmav","very light":"velmi svtl",vibrant:"ziv",white:"bl",yellow:"lut","yellow green":"lutozelen"};var XC={};XC={alpha:"Alfa",black:"sort",blue:"Bl","blue purple":"bllilla",brightness:"Lysstyrke",brown:"brun","brown yellow":"brungul",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"cyan","cyan blue":"cyan bl",dark:"mrk",gray:"gr",grayish:"grlig",green:"Grn","green cyan":"grn cyan",hue:"Tone",light:"lys",lightness:"Lyshed",magenta:"magenta","magenta pink":"magenta pink",orange:"orange","orange yellow":"orangegul",pale:"bleg",pink:"lyserd","pink red":"lyserdlig rd",purple:"lilla","purple magenta":"lilla magenta",red:"Rd","red orange":"rdorange",saturation:"Farvemtning",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} gennemsigtig`,"very dark":"meget mrk","very light":"meget lys",vibrant:"klar",white:"hvid",yellow:"gul","yellow green":"gulgrn"};var YC={};YC={alpha:"Alpha",black:"Schwarz",blue:"Blau","blue purple":"Blaulila",brightness:"Helligkeit",brown:"Braun","brown yellow":"Braungelb",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"Cyan","cyan blue":"Cyanblau",dark:"dunkles",gray:"Grau",grayish:"gruliches",green:"Grn","green cyan":"Grncyan",hue:"Farbton",light:"helles",lightness:"Leuchtkraft",magenta:"Magenta","magenta pink":"Magentarosa",orange:"Orange","orange yellow":"Orangegelb",pale:"blasses",pink:"Rosa","pink red":"Rosarot",purple:"Lila","purple magenta":"Lilamagenta",red:"Rot","red orange":"Rotorange",saturation:"Sttigung",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, zu ${e.percentTransparent} transparent`,"very dark":"sehr dunkles","very light":"sehr helles",vibrant:"lebhaftes",white:"Wei",yellow:"Gelb","yellow green":"Gelbgrn"};var GC={};GC={alpha:"",black:"",blue:"","blue purple":" ",brightness:"",brown:"","brown yellow":" ",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"","cyan blue":" ",dark:"",gray:"",grayish:"",green:"","green cyan":" ",hue:"",light:"",lightness:"",magenta:"","magenta pink":" ",orange:"","orange yellow":" ",pale:"",pink:"","pink red":" ",purple:"","purple magenta":" ",red:"","red orange":" ",saturation:"",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} `,"very dark":" ","very light":" ",vibrant:"",white:"",yellow:"","yellow green":" "};var KC={};KC={hue:"Hue",saturation:"Saturation",lightness:"Lightness",brightness:"Brightness",red:"Red",green:"Green",blue:"Blue",alpha:"Alpha",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} transparent`,"very dark":"very dark",dark:"dark",light:"light","very light":"very light",pale:"pale",grayish:"grayish",vibrant:"vibrant",black:"black",white:"white",gray:"gray",pink:"pink","pink red":"pink red","red orange":"red orange",brown:"brown",orange:"orange","orange yellow":"orange yellow","brown yellow":"brown yellow",yellow:"yellow","yellow green":"yellow green","green cyan":"green cyan",cyan:"cyan","cyan blue":"cyan blue","blue purple":"blue purple",purple:"purple","purple magenta":"purple magenta",magenta:"magenta","magenta pink":"magenta pink"};var qC={};qC={alpha:"Alpha",black:"negro",blue:"Azul","blue purple":"prpura azulado",brightness:"Brillo",brown:"marrn","brown yellow":"amarillo amarronado",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"cian","cyan blue":"azul cian",dark:"oscuro",gray:"gris",grayish:"grisceo",green:"Verde","green cyan":"cian verdoso",hue:"Tono",light:"claro",lightness:"Luminosidad",magenta:"magenta","magenta pink":"rosa magenta",orange:"naranja","orange yellow":"amarillo anaranjado",pale:"plido",pink:"rosa","pink red":"rojo rosado",purple:"morado","purple magenta":"magenta violceo",red:"Rojo","red orange":"naranja rojizo",saturation:"Saturacin",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} transparente`,"very dark":"muy oscuro","very light":"muy claro",vibrant:"intenso",white:"blanco",yellow:"amarillo","yellow green":"verde amarillento"};var ZC={};ZC={alpha:"Alfa",black:"must",blue:"Sinine","blue purple":"sinakaslilla",brightness:"Heledus",brown:"pruun","brown yellow":"pruunikaskollane",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"tsaan","cyan blue":"tsaansinine",dark:"tume",gray:"hall",grayish:"hallikas",green:"Roheline","green cyan":"tsaanroheline",hue:"Vrv",light:"valgus",lightness:"Valgus",magenta:"magentapunane","magenta pink":"magentaroosa",orange:"oran","orange yellow":"oranikaskollane",pale:"kahvatu",pink:"roosa","pink red":"vaarikapunane",purple:"lilla","purple magenta":"purpurne magenta",red:"Punane","red orange":"punakasoran",saturation:"Kllastus",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} lbipaistev`,"very dark":"vga tume","very light":"vga hele",vibrant:"ere",white:"valge",yellow:"kollane","yellow green":"kollakasroheline"};var QC={};QC={alpha:"Alpha",black:"musta",blue:"Sininen","blue purple":"sinivioletti",brightness:"Kirkkaus",brown:"ruskea","brown yellow":"ruskeankeltainen",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"syaani","cyan blue":"syaaninsininen",dark:"tumma",gray:"harmaa",grayish:"harmahtava",green:"Vihre","green cyan":"vihrensyaani",hue:"Svy",light:"vaalea",lightness:"Valomr",magenta:"magenta","magenta pink":"magentapinkki",orange:"oranssi","orange yellow":"oranssinkeltainen",pale:"vaalea",pink:"pinkki","pink red":"vaaleanpunainen",purple:"violetti","purple magenta":"violettimagenta",red:"Punainen","red orange":"punaoranssi",saturation:"Vrikyllisyys",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} lpinkyv`,"very dark":"hyvin tumma","very light":"erittin vaalea",vibrant:"eloisa",white:"valkea",yellow:"keltainen","yellow green":"keltavihre"};var JC={};JC={alpha:"Alpha",black:"Noir",blue:"Bleu","blue purple":"Violet bleu",brightness:"Luminosit",brown:"Brun","brown yellow":"Jaune brun",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"Cyan","cyan blue":"Bleu cyan",dark:"Sombre",gray:"Gris",grayish:"Gristre",green:"Vert","green cyan":"Cyan vert",hue:"Teinte",light:"Clair",lightness:"Luminosit",magenta:"Magenta","magenta pink":"Rose magenta",orange:"Orange","orange yellow":"Jaune orang",pale:"Ple",pink:"Rose","pink red":"Rouge ros",purple:"Violet","purple magenta":"Magenta violet",red:"Rouge","red orange":"Orange rouge",saturation:"Saturation",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} transparent`,"very dark":"Trs sombre","very light":"Trs clair",vibrant:"Vif",white:"Blanc",yellow:"Jaune","yellow green":"Vert jaune"};var e_={};e_={alpha:"",black:"",blue:"","blue purple":" ",brightness:"",brown:"","brown yellow":" ",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"","cyan blue":" ",dark:"",gray:"",grayish:"",green:"","green cyan":" ",hue:"",light:"",lightness:" ",magenta:"'","magenta pink":" '",orange:"","orange yellow":" ",pale:"",pink:"","pink red":" ",purple:"","purple magenta":"' ",red:"","red orange":" ",saturation:"",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} `,"very dark":" ","very light":" ",vibrant:"",white:"",yellow:"","yellow green":" "};var t_={};t_={alpha:"Alfa",black:"crno",blue:"Plava","blue purple":"plavo ljubiasta",brightness:"Svjetlina",brown:"smea","brown yellow":"smee uta",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"cijan","cyan blue":"cijan plava",dark:"tamno",gray:"siva",grayish:"sivkasto",green:"Zelena","green cyan":"zelena cijan",hue:"Nijansa",light:"svjetlo",lightness:"Osvijetljenost",magenta:"magenta","magenta pink":"magentno ruiasta",orange:"naranasta","orange yellow":"naranasto uta",pale:"blijeda",pink:"ruiasta","pink red":"ruiasto crvena",purple:"ljubiasta","purple magenta":"ljubiasta magenta",red:"Crvena","red orange":"crveno naranasta",saturation:"Zasienost",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} prozirnosti`,"very dark":"jako tamna","very light":"vrlo svijetlo",vibrant:"vibrantna",white:"bijela",yellow:"uto","yellow green":"uto zelena"};var n_={};n_={alpha:"Alfa",black:"fekete",blue:"Kk","blue purple":"kk lila",brightness:"Fnyessg",brown:"barna","brown yellow":"barna srga",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"cinkk","cyan blue":"cinkk",dark:"stt",gray:"szrke",grayish:"szrks",green:"Zld","green cyan":"zld cinkk",hue:"Sznrnyalat",light:"vilgos",lightness:"Vilgossg",magenta:"bbor","magenta pink":"bbor rzsaszn",orange:"narancs","orange yellow":"narancssrga",pale:"halvny",pink:"rzsaszn","pink red":"rzsaszn piros",purple:"lila","purple magenta":"lila bbor",red:"Piros","red orange":"piros narancs",saturation:"Teltettsg",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} tltsz`,"very dark":"nagyon stt","very light":"nagyon vilgos",vibrant:"lnk",white:"fehr",yellow:"srga","yellow green":"srga zld"};var r_={};r_={alpha:"Alfa",black:"nero",blue:"Blu","blue purple":"blu viola",brightness:"Luminosit",brown:"marrone","brown yellow":"giallo bruno",colorName:e=>`${e.hue} ${e.chroma} ${e.lightness}`,cyan:"ciano","cyan blue":"blu ciano",dark:"scuro",gray:"grigio",grayish:"grigiastro",green:"Verde","green cyan":"verde ciano",hue:"Tonalit",light:"chiaro",lightness:"Luminosit",magenta:"magenta","magenta pink":"rosa magenta",orange:"arancio","orange yellow":"giallo arancio",pale:"tenue",pink:"rosa","pink red":"rosa rosso",purple:"viola","purple magenta":"viola magenta",red:"Rosso","red orange":"rosso arancio",saturation:"Saturazione",transparentColorName:e=>`${e.hue} ${e.chroma} ${e.lightness}, trasparenza ${e.percentTransparent}`,"very dark":"molto scuro","very light":"molto chiaro",vibrant:"vivace",white:"bianco",yellow:"giallo","yellow green":"giallo verde"};var i_={};i_={alpha:"",black:"",blue:"","blue purple":"",brightness:"",brown:"","brown yellow":"",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"","cyan blue":"",dark:"",gray:"",grayish:"",green:"","green cyan":"",hue:"",light:"",lightness:"",magenta:"","magenta pink":"",orange:"","orange yellow":"",pale:"",pink:"","pink red":"",purple:"","purple magenta":"",red:"","red orange":"",saturation:"",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} `,"very dark":"","very light":"",vibrant:"",white:"",yellow:"","yellow green":""};var s_={};s_={alpha:"",black:"",blue:"","blue purple":"",brightness:"",brown:"","brown yellow":"",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"","cyan blue":"",dark:"",gray:"",grayish:"",green:"","green cyan":"",hue:"",light:"",lightness:"",magenta:"","magenta pink":" ",orange:"","orange yellow":" ",pale:"",pink:"","pink red":" ",purple:"","purple magenta":" ",red:"","red orange":" ",saturation:"",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} `,"very dark":" ","very light":" ",vibrant:"",white:"",yellow:"","yellow green":""};var o_={};o_={alpha:"Alfa",black:"juoda",blue:"Mlyna","blue purple":"melsvai violetin",brightness:"Rykumas",brown:"ruda","brown yellow":"rusvai geltona",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"alsvai mlyna","cyan blue":"alsvai mlyna",dark:"tamsi",gray:"pilka",grayish:"pilkva",green:"alia","green cyan":"alsvai mlyna",hue:"Atspalvis",light:"viesi",lightness:"viesumas",magenta:"rausvai raudona","magenta pink":"purpurin",orange:"oranin","orange yellow":"oraninio atspalvio geltona",pale:"blyki",pink:"roin","pink red":"roin raudona",purple:"violetin","purple magenta":"purpurin rausvai raudona",red:"Raudona","red orange":"rausvai oranin",saturation:"sotinimas",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} skaidri`,"very dark":"labai tamsi","very light":"labai viesi",vibrant:"ryki",white:"balta",yellow:"geltona","yellow green":"gelsvai alia"};var a_={};a_={alpha:"Alfa",black:"melns",blue:"Zila","blue purple":"zili violets",brightness:"Spilgtums",brown:"brns","brown yellow":"brni dzeltens",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"cins","cyan blue":"cina zils",dark:"tums",gray:"pelks",grayish:"pelcgs",green:"Zaa","green cyan":"za cins",hue:"Nokrsa",light:"gais",lightness:"Gaiums",magenta:"fuksiju","magenta pink":"fuksiju roz",orange:"orans","orange yellow":"orani dzeltens",pale:"bls",pink:"roz","pink red":"rozgi sarkans",purple:"violets","purple magenta":"violets fuksiju",red:"Sarkana","red orange":"sarkangi orans",saturation:"Piestinjums",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} caurspdgs`,"very dark":"oti tums","very light":"oti gais",vibrant:"kos",white:"balts",yellow:"dzeltens","yellow green":"dzelteni za"};var l_={};l_={alpha:"Alfa",black:"svart",blue:"Bl","blue purple":"bllilla",brightness:"Lysstyrke",brown:"brun","brown yellow":"brungul",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"cyan","cyan blue":"cyanbl",dark:"mrk",gray:"gr",grayish:"graktig",green:"Grnn","green cyan":"grnncyan",hue:"Fargetone",light:"lys",lightness:"Lyshet",magenta:"magenta","magenta pink":"magentarosa",orange:"oransje","orange yellow":"oransjegul",pale:"blek",pink:"rosa","pink red":"rosard",purple:"lilla","purple magenta":"lillamagenta",red:"Rd","red orange":"rdoransje",saturation:"Metning",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} gjennomsiktig`,"very dark":"svrt mrk","very light":"svrt lys",vibrant:"levende",white:"hvit",yellow:"gul","yellow green":"gulgrnn"};var u_={};u_={alpha:"Alfa",black:"zwart",blue:"Blauw","blue purple":"paarsblauw",brightness:"Helderheid",brown:"bruin","brown yellow":"bruingeel",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"cyaan","cyan blue":"cyaanblauw",dark:"donker",gray:"grijs",grayish:"grijsachtig",green:"Groen","green cyan":"cyaangroen",hue:"Kleurtoon",light:"licht",lightness:"Lichtsterkte",magenta:"magenta","magenta pink":"magentaroze",orange:"oranje","orange yellow":"oranjegeel",pale:"bleek",pink:"roze","pink red":"rozerood",purple:"paars","purple magenta":"magentapaars",red:"Rood","red orange":"roodoranje",saturation:"Verzadiging",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} transparant`,"very dark":"heel donker","very light":"heel licht",vibrant:"levendig",white:"wit",yellow:"geel","yellow green":"geelgroen"};var c_={};c_={alpha:"Alfa",black:"czarny",blue:"Niebieski","blue purple":"niebiesko-fioletowy",brightness:"Jasno",brown:"brzowy","brown yellow":"brzowo-ty",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"cyjanowy","cyan blue":"cyjanowo-niebieski",dark:"ciemny",gray:"szary",grayish:"szarawy",green:"Zielony","green cyan":"zielono-cyjanowy",hue:"Odcie",light:"jasny",lightness:"Jaskrawo",magenta:"purpurowy","magenta pink":"purpurowo-rowy",orange:"pomaraczowy","orange yellow":"pomaraczowo-ty",pale:"blady",pink:"rowy","pink red":"rowo-czerwony",purple:"fioletowy","purple magenta":"fioletowo-purpurowy",red:"Czerwony","red orange":"czerwono-pomaraczowy",saturation:"Nasycenie",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} przezroczystoci`,"very dark":"bardzo ciemny","very light":"bardzo jasny",vibrant:"intensywny",white:"biay",yellow:"ty","yellow green":"to-zielony"};var f_={};f_={alpha:"Alfa",black:"preto",blue:"Azul","blue purple":"roxo azulado",brightness:"Brilho",brown:"marrom","brown yellow":"marrom amarelado",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"ciano","cyan blue":"azul-ciano",dark:"escuro",gray:"cinza",grayish:"acinzentado",green:"Verde","green cyan":"verde-ciano",hue:"Matiz",light:"claro",lightness:"Luminosidade",magenta:"magenta","magenta pink":"rosa-magenta",orange:"laranja","orange yellow":"amarelo alaranjado",pale:"plido",pink:"rosa","pink red":"rosa avermelhado",purple:"roxo","purple magenta":"roxo-magenta",red:"Vermelho","red orange":"laranja avermelhado",saturation:"Saturao",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} transparente`,"very dark":"muito escuro","very light":"muito claro",vibrant:"vibrante",white:"branco",yellow:"amarelo","yellow green":"verde amarelado"};var h_={};h_={alpha:"Alfa",black:"preto",blue:"Azul","blue purple":"azul-prpura",brightness:"Luminosidade",brown:"castanho","brown yellow":"amarelo-castanho",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"ciano","cyan blue":"azul-ciano",dark:"escuro",gray:"cinzento",grayish:"acinzentado",green:"Verde","green cyan":"verde-ciano",hue:"Tonalidade",light:"claro",lightness:"Claridade",magenta:"magenta","magenta pink":"rosa-magenta",orange:"laranja","orange yellow":"amarelo-laranja",pale:"plido",pink:"cor-de-rosa","pink red":"vermelho-rosa",purple:"prpura","purple magenta":"prpura-magenta",red:"Vermelho","red orange":"laranja-vermelho",saturation:"Saturao",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} transparente`,"very dark":"muito escuro","very light":"muito claro",vibrant:"vibrante",white:"branco",yellow:"amarelo","yellow green":"verde-amarelo"};var d_={};d_={alpha:"Alfa",black:"negru",blue:"Albastru","blue purple":"albastru-violet",brightness:"Luminozitate",brown:"maro","brown yellow":"galben maro",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"bleu","cyan blue":"albastru-bleu",dark:"nchis",gray:"gri",grayish:"cenuiu",green:"Verde","green cyan":"verde bleu",hue:"Nuan",light:"deschis",lightness:"Luminozitate",magenta:"fucsia","magenta pink":"roz-fucsia",orange:"portocaliu","orange yellow":"galben-portocaliu",pale:"pal",pink:"roz","pink red":"roz-rou",purple:"violet","purple magenta":"violet-fucsia",red:"Rou","red orange":"portocaliu-rou",saturation:"Saturaie",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} transparent`,"very dark":"foarte nchis","very light":"foarte deschis",vibrant:"plin de via",white:"alb",yellow:"galben","yellow green":"galben-verde"};var p_={};p_={alpha:"",black:"",blue:"","blue purple":"-",brightness:"",brown:"","brown yellow":"-",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"","cyan blue":"  ",dark:"",gray:"",grayish:"",green:"","green cyan":"-",hue:"",light:"",lightness:"",magenta:"","magenta pink":"-",orange:"","orange yellow":"-",pale:"",pink:"","pink red":"-",purple:"","purple magenta":"-",red:"","red orange":"-",saturation:"",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue},   ${e.percentTransparent}`,"very dark":" ","very light":" ",vibrant:"",white:"",yellow:"","yellow green":"-"};var g_={};g_={alpha:"Alfa",black:"ierna",blue:"Modr","blue purple":"modrofialov",brightness:"Jas",brown:"hned","brown yellow":"hnedolt",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"azrov","cyan blue":"azrov modr",dark:"tmav",gray:"siv",grayish:"sivast",green:"Zelen","green cyan":"zelen azrov",hue:"Odtie",light:"svetl",lightness:"Svetlos",magenta:"purpurov","magenta pink":"ruov purpurov",orange:"oranov","orange yellow":"oranovolt",pale:"bled",pink:"ruov","pink red":"ruovoerven",purple:"fialov","purple magenta":"fialov purpurov",red:"erven","red orange":"ervenooranov",saturation:"Stos",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} priehadn`,"very dark":"vemi tmav","very light":"vemi svetl",vibrant:"energick",white:"biela",yellow:"lt","yellow green":"ltozelen"};var m_={};m_={alpha:"Alfa",black:"rna",blue:"Modra","blue purple":"modro vijolina",brightness:"Svetlost",brown:"rjava","brown yellow":"rjavo rumena",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"cian","cyan blue":"cian modra",dark:"temna",gray:"siva",grayish:"sivkasta",green:"Zelena","green cyan":"zelena cian",hue:"Barva",light:"svetla",lightness:"Lahkost",magenta:"krlatna","magenta pink":"krlatno roza",orange:"oranna","orange yellow":"oranno rumena",pale:"bleda",pink:"roza","pink red":"roza rdea",purple:"vijolina","purple magenta":"vijolino krlatna",red:"Rdea","red orange":"rdee oranna",saturation:"Nasienost",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} prozorna`,"very dark":"zelo temna","very light":"zelo svetla",vibrant:"ivahna",white:"bela",yellow:"rumena","yellow green":"rumeno zelena"};var v_={};v_={alpha:"Alfa",black:"crno",blue:"Plava","blue purple":"plavoljubiasta",brightness:"Osvetljenost",brown:"smea","brown yellow":"smeeuta",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"cijan","cyan blue":"cijan plava",dark:"tamno",gray:"siva",grayish:"sivkasta",green:"Zelena","green cyan":"zeleno cijan",hue:"Nijansa",light:"svetla",lightness:"Osvetljenje",magenta:"purpurnocrvena","magenta pink":"magenta ruiasta",orange:"narandasta","orange yellow":"narandastouta",pale:"bledo",pink:"ruiasta","pink red":"ruiastocrvena",purple:"ljubiasta","purple magenta":"ljubiasta magenta",red:"Crvena","red orange":"crvenonarandasta",saturation:"Zasienje",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} prozirna`,"very dark":"veoma tamno","very light":"vrlo svetlo",vibrant:"ivopisna",white:"bela",yellow:"uto","yellow green":"utozelena"};var y_={};y_={alpha:"Alfa",black:"svart",blue:"Bltt","blue purple":"bllila",brightness:"Ljusstyrka",brown:"brun","brown yellow":"brungul",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"cyan","cyan blue":"cyanbl",dark:"mrk",gray:"gr",grayish:"graktig",green:"Grnt","green cyan":"grn cyan",hue:"Nyans",light:"ljus",lightness:"Ljushet",magenta:"magenta","magenta pink":"magentarosa",orange:"orange","orange yellow":"orangegul",pale:"blek",pink:"rosa","pink red":"rosard",purple:"lila","purple magenta":"lila magenta",red:"Rtt","red orange":"rdorange",saturation:"Mttnad",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} genomskinlig`,"very dark":"mycket mrk","very light":"mycket ljus",vibrant:"livfull",white:"vit",yellow:"gul","yellow green":"gulgrn"};var b_={};b_={alpha:"Alfa",black:"siyah",blue:"Mavi","blue purple":"mavi mor",brightness:"Parlaklk",brown:"kahverengi","brown yellow":"kahverengi sar",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"camgbei","cyan blue":"camgbei mavi",dark:"koyu",gray:"gri",grayish:"grimsi",green:"Yeil","green cyan":"yeil camgbei",hue:"Ton",light:"ak",lightness:"Canllk",magenta:"eflatun","magenta pink":"eflatun pembe",orange:"turuncu","orange yellow":"turuncu sar",pale:"solgun",pink:"pembe","pink red":"pembe krmz",purple:"mor","purple magenta":"mor eflatun",red:"Krmz","red orange":"krmz portakal",saturation:"Doygunluk",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} saydam`,"very dark":"ok koyu","very light":"ok ak",vibrant:"canl",white:"beyaz",yellow:"sar","yellow green":"sar yeil"};var w_={};w_={alpha:"",black:"",blue:"","blue purple":"-",brightness:"",brown:"","brown yellow":"-",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"","cyan blue":"-",dark:"",gray:"",grayish:"",green:"","green cyan":"-",hue:"",light:"",lightness:"",magenta:"","magenta pink":"-",orange:"","orange yellow":"-",pale:"",pink:"","pink red":"-",purple:"","purple magenta":"-",red:"","red orange":"-",saturation:"",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue},   ${e.percentTransparent}`,"very dark":" ","very light":" ",vibrant:"",white:"",yellow:"","yellow green":"-"};var x_={};x_={alpha:"Alpha",black:"",blue:"","blue purple":"",brightness:"",brown:"","brown yellow":"",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"","cyan blue":"",dark:"",gray:"",grayish:"",green:"","green cyan":"",hue:"",light:"",lightness:"",magenta:"","magenta pink":"",orange:"","orange yellow":"",pale:"",pink:"","pink red":"",purple:"","purple magenta":"",red:"","red orange":"",saturation:"",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} `,"very dark":"","very light":"",vibrant:"",white:"",yellow:"","yellow green":"/"};var C_={};C_={alpha:"Alpha",black:"",blue:"","blue purple":"",brightness:"",brown:"","brown yellow":"",colorName:e=>`${e.lightness} ${e.chroma} ${e.hue}`,cyan:"","cyan blue":"",dark:"",gray:"",grayish:"",green:"","green cyan":"",hue:"",light:"",lightness:"",magenta:"","magenta pink":"",orange:"","orange yellow":"",pale:"",pink:"","pink red":"",purple:"","purple magenta":"",red:"","red orange":"",saturation:"",transparentColorName:e=>`${e.lightness} ${e.chroma} ${e.hue}, ${e.percentTransparent} `,"very dark":"","very light":"",vibrant:"",white:"",yellow:"","yellow green":""};var __={};__={"ar-AE":HC,"bg-BG":WC,"cs-CZ":UC,"da-DK":XC,"de-DE":YC,"el-GR":GC,"en-US":KC,"es-ES":qC,"et-EE":ZC,"fi-FI":QC,"fr-FR":JC,"he-IL":e_,"hr-HR":t_,"hu-HU":n_,"it-IT":r_,"ja-JP":i_,"ko-KR":s_,"lt-LT":o_,"lv-LV":a_,"nb-NO":l_,"nl-NL":u_,"pl-PL":c_,"pt-BR":f_,"pt-PT":h_,"ro-RO":d_,"ru-RU":p_,"sk-SK":g_,"sl-SI":m_,"sr-SP":v_,"sv-SE":y_,"tr-TR":b_,"uk-UA":w_,"zh-CN":x_,"zh-TW":C_};const YR=Symbol.for("react-aria.i18n.locale"),GR=Symbol.for("react-aria.i18n.strings");let Qs;class Js{getStringForLocale(t,n){let i=this.getStringsForLocale(n)[t];if(!i)throw new Error(`Could not find intl message ${t} in ${n} locale`);return i}getStringsForLocale(t){let n=this.strings[t];return n||(n=KR(t,this.strings,this.defaultLocale),this.strings[t]=n),n}static getGlobalDictionaryForPackage(t){if(typeof window>"u")return null;let n=window[YR];if(Qs===void 0){let i=window[GR];if(!i)return null;Qs={};for(let o in i)Qs[o]=new Js({[n]:i[o]},n)}let r=Qs==null?void 0:Qs[t];if(!r)throw new Error(`Strings for package "${t}" were not included by LocalizedStringProvider. Please add it to the list passed to createLocalizedStringDictionary.`);return r}constructor(t,n="en-US"){this.strings=Object.fromEntries(Object.entries(t).filter(([,r])=>r)),this.defaultLocale=n}}function KR(e,t,n="en-US"){if(t[e])return t[e];let r=qR(e);if(t[r])return t[r];for(let i in t)if(i.startsWith(r+"-"))return t[i];return t[n]}function qR(e){return Intl.Locale?new Intl.Locale(e).language:e.split("-")[0]}const S_=new Map,k_=new Map;class ZR{format(t,n){let r=this.strings.getStringForLocale(t,this.locale);return typeof r=="function"?r(n,this):r}plural(t,n,r="cardinal"){let i=n["="+t];if(i)return typeof i=="function"?i():i;let o=this.locale+":"+r,d=S_.get(o);d||(d=new Intl.PluralRules(this.locale,{type:r}),S_.set(o,d));let a=d.select(t);return i=n[a]||n.other,typeof i=="function"?i():i}number(t){let n=k_.get(this.locale);return n||(n=new Intl.NumberFormat(this.locale),k_.set(this.locale,n)),n.format(t)}select(t,n){let r=t[n]||t.other;return typeof r=="function"?r():r}constructor(t,n){this.locale=t,this.strings=n}}let $g=new Map,Vg=!1;try{Vg=new Intl.NumberFormat("de-DE",{signDisplay:"exceptZero"}).resolvedOptions().signDisplay==="exceptZero"}catch{}let Lc=!1;try{Lc=new Intl.NumberFormat("de-DE",{style:"unit",unit:"degree"}).resolvedOptions().style==="unit"}catch{}const E_={degree:{narrow:{default:"","ja-JP":" ","zh-TW":"","sl-SI":" "}}};class Ra{format(t){let n="";if(!Vg&&this.options.signDisplay!=null?n=JR(this.numberFormatter,this.options.signDisplay,t):n=this.numberFormatter.format(t),this.options.style==="unit"&&!Lc){var r;let{unit:i,unitDisplay:o="short",locale:d}=this.resolvedOptions();if(!i)return n;let a=(r=E_[i])===null||r===void 0?void 0:r[o];n+=a[d]||a.default}return n}formatToParts(t){return this.numberFormatter.formatToParts(t)}formatRange(t,n){if(typeof this.numberFormatter.formatRange=="function")return this.numberFormatter.formatRange(t,n);if(n<t)throw new RangeError("End date must be >= start date");return`${this.format(t)}  ${this.format(n)}`}formatRangeToParts(t,n){if(typeof this.numberFormatter.formatRangeToParts=="function")return this.numberFormatter.formatRangeToParts(t,n);if(n<t)throw new RangeError("End date must be >= start date");let r=this.numberFormatter.formatToParts(t),i=this.numberFormatter.formatToParts(n);return[...r.map(o=>({...o,source:"startRange"})),{type:"literal",value:"  ",source:"shared"},...i.map(o=>({...o,source:"endRange"}))]}resolvedOptions(){let t=this.numberFormatter.resolvedOptions();return!Vg&&this.options.signDisplay!=null&&(t={...t,signDisplay:this.options.signDisplay}),!Lc&&this.options.style==="unit"&&(t={...t,style:"unit",unit:this.options.unit,unitDisplay:this.options.unitDisplay}),t}constructor(t,n={}){this.numberFormatter=QR(t,n),this.options=n}}function QR(e,t={}){let{numberingSystem:n}=t;if(n&&e.includes("-nu-")&&(e.includes("-u-")||(e+="-u-"),e+=`-nu-${n}`),t.style==="unit"&&!Lc){var r;let{unit:d,unitDisplay:a="short"}=t;if(!d)throw new Error('unit option must be provided with style: "unit"');if(!(!((r=E_[d])===null||r===void 0)&&r[a]))throw new Error(`Unsupported unit ${d} with unitDisplay = ${a}`);t={...t,style:"decimal"}}let i=e+(t?Object.entries(t).sort((d,a)=>d[0]<a[0]?-1:1).join():"");if($g.has(i))return $g.get(i);let o=new Intl.NumberFormat(e,t);return $g.set(i,o),o}function JR(e,t,n){if(t==="auto")return e.format(n);if(t==="never")return e.format(Math.abs(n));{let r=!1;if(t==="always"?r=n>0||Object.is(n,0):t==="exceptZero"&&(Object.is(n,-0)||Object.is(n,0)?n=Math.abs(n):r=n>0),r){let i=e.format(-n),o=e.format(n),d=i.replace(o,"").replace(/\u200e|\u061C/,"");return[...d].length!==1&&console.warn("@react-aria/i18n polyfill for NumberFormat signDisplay: Unsupported case"),i.replace(o,"!!!").replace(d,"+").replace("!!!",o)}else return e.format(n)}}function eL(e){return e&&e.__esModule?e.default:e}let Hg=new Js(eL(__));function tL(e){let t=Yr.parse(e)||Gr.parse(e)||Kr.parse(e);if(t)return t;throw new Error("Invalid color value: "+e)}const T_=.68,nL=.85,O_=.55,P_=.001,Wg=[[0,"pink"],[15,"red"],[48,"orange"],[94,"yellow"],[135,"green"],[175,"cyan"],[264,"blue"],[284,"purple"],[320,"magenta"],[349,"pink"]];class Ug{toHexInt(){return this.toFormat("rgb").toHexInt()}getChannelValue(t){if(t in this)return this[t];throw new Error("Unsupported color channel: "+t)}withChannelValue(t,n){if(t in this){let r=this.clone();return r[t]=n,r}throw new Error("Unsupported color channel: "+t)}getChannelName(t,n){return(Js.getGlobalDictionaryForPackage("@react-stately/color")||Hg).getStringForLocale(t,n)}getColorSpaceAxes(t){let{xChannel:n,yChannel:r}=t,i=n||this.getColorChannels().find(a=>a!==r),o=r||this.getColorChannels().find(a=>a!==i),d=this.getColorChannels().find(a=>a!==i&&a!==o);return{xChannel:i,yChannel:o,zChannel:d}}getColorName(t){let[n,r,i]=A_(this),o=Js.getGlobalDictionaryForPackage("@react-stately/color")||Hg;if(n>.999)return o.getStringForLocale("white",t);if(n<.001)return o.getStringForLocale("black",t);let d;[d,n]=this.getOklchHue(n,r,i,t);let a="",s="";r<=.1&&r>=P_?n>=.7?s="pale":s="grayish":r>=.15&&(s="vibrant"),n<.3?a="very dark":n<O_?a="dark":n<.7||(n<.85?a="light":a="very light"),s&&(s=o.getStringForLocale(s,t)),a&&(a=o.getStringForLocale(a,t));let u=this.getChannelValue("alpha"),h=new ZR(t,o);if(u<1){let l=new Ra(t,{style:"percent"}).format(1-u);return h.format("transparentColorName",{lightness:a,chroma:s,hue:d,percentTransparent:l}).replace(/\s+/g," ").trim()}else return h.format("colorName",{lightness:a,chroma:s,hue:d}).replace(/\s+/g," ").trim()}getOklchHue(t,n,r,i){let o=Js.getGlobalDictionaryForPackage("@react-stately/color")||Hg;if(n<P_)return[o.getStringForLocale("gray",i),t];for(let d=0;d<Wg.length;d++){let[a,s]=Wg[d],[u,h]=Wg[d+1]||[360,"pink"];if(r>=a&&r<u)return s==="orange"&&(t<T_?s="brown":t=t-T_+O_),r>a+(u-a)/2&&s!==h?s=`${s} ${h}`:s==="yellow"&&t<nL&&(s="yellow green"),[o.getStringForLocale(s,i).toLocaleLowerCase(i),t]}throw new Error("Unexpected hue")}getHueName(t){let[n,r,i]=A_(this),[o]=this.getOklchHue(n,r,i,t);return o}}class Yr extends Ug{static parse(t){let n=[];if(/^#[\da-f]+$/i.test(t)&&[4,5,7,9].includes(t.length)){const o=(t.length<6?t.replace(/[^#]/gi,"$&$&"):t).slice(1).split("");for(;o.length>0;)n.push(parseInt(o.splice(0,2).join(""),16));n[3]=n[3]!==void 0?n[3]/255:void 0}const r=t.match(/^rgba?\((.*)\)$/);r!=null&&r[1]&&(n=r[1].split(",").map(o=>Number(o.trim())),n=n.map((o,d)=>Ai(o,0,d<3?255:1)));var i;return n.length<3?void 0:new Yr(n[0],n[1],n[2],(i=n[3])!==null&&i!==void 0?i:1)}toString(t="css"){switch(t){case"hex":return"#"+(this.red.toString(16).padStart(2,"0")+this.green.toString(16).padStart(2,"0")+this.blue.toString(16).padStart(2,"0")).toUpperCase();case"hexa":return"#"+(this.red.toString(16).padStart(2,"0")+this.green.toString(16).padStart(2,"0")+this.blue.toString(16).padStart(2,"0")+Math.round(this.alpha*255).toString(16).padStart(2,"0")).toUpperCase();case"rgb":return`rgb(${this.red}, ${this.green}, ${this.blue})`;case"css":case"rgba":return`rgba(${this.red}, ${this.green}, ${this.blue}, ${this.alpha})`;default:return this.toFormat(t).toString(t)}}toFormat(t){switch(t){case"hex":case"hexa":case"rgb":case"rgba":return this;case"hsb":case"hsba":return this.toHSB();case"hsl":case"hsla":return this.toHSL();default:throw new Error("Unsupported color conversion: rgb -> "+t)}}toHexInt(){return this.red<<16|this.green<<8|this.blue}toHSB(){const t=this.red/255,n=this.green/255,r=this.blue/255,i=Math.min(t,n,r),o=Math.max(t,n,r),d=o-i,a=o===0?0:d/o;let s=0;if(d!==0){switch(o){case t:s=(n-r)/d+(n<r?6:0);break;case n:s=(r-t)/d+2;break;case r:s=(t-n)/d+4;break}s/=6}return new Gr(Qe(s*360,2),Qe(a*100,2),Qe(o*100,2),this.alpha)}toHSL(){const t=this.red/255,n=this.green/255,r=this.blue/255,i=Math.min(t,n,r),o=Math.max(t,n,r),d=(o+i)/2,a=o-i;let s,u;if(a===0)s=u=0;else{switch(u=a/(d<.5?o+i:2-o-i),o){case t:s=(n-r)/a+(n<r?6:0);break;case n:s=(r-t)/a+2;break;case r:s=(t-n)/a+4;break}s/=6}return new Kr(Qe(s*360,2),Qe(u*100,2),Qe(d*100,2),this.alpha)}clone(){return new Yr(this.red,this.green,this.blue,this.alpha)}getChannelRange(t){switch(t){case"red":case"green":case"blue":return{minValue:0,maxValue:255,step:1,pageSize:17};case"alpha":return{minValue:0,maxValue:1,step:.01,pageSize:.1};default:throw new Error("Unknown color channel: "+t)}}getChannelFormatOptions(t){switch(t){case"red":case"green":case"blue":return{style:"decimal"};case"alpha":return{style:"percent"};default:throw new Error("Unknown color channel: "+t)}}formatChannelValue(t,n){let r=this.getChannelFormatOptions(t),i=this.getChannelValue(t);return new Ra(n,r).format(i)}getColorSpace(){return"rgb"}getColorChannels(){return Yr.colorChannels}constructor(t,n,r,i){super(),this.red=t,this.green=n,this.blue=r,this.alpha=i}}Yr.colorChannels=["red","green","blue"];const rL=/hsb\(([-+]?\d+(?:.\d+)?\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d+(?:.\d+)?%)\)|hsba\(([-+]?\d+(?:.\d+)?\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d(.\d+)?)\)/;class Gr extends Ug{static parse(t){let n;if(n=t.match(rL)){var r;const[i,o,d,a]=((r=n[1])!==null&&r!==void 0?r:n[2]).split(",").map(s=>Number(s.trim().replace("%","")));return new Gr(D_(i,360),Ai(o,0,100),Ai(d,0,100),Ai(a??1,0,1))}}toString(t="css"){switch(t){case"css":return this.toHSL().toString("css");case"hex":return this.toRGB().toString("hex");case"hexa":return this.toRGB().toString("hexa");case"hsb":return`hsb(${this.hue}, ${Qe(this.saturation,2)}%, ${Qe(this.brightness,2)}%)`;case"hsba":return`hsba(${this.hue}, ${Qe(this.saturation,2)}%, ${Qe(this.brightness,2)}%, ${this.alpha})`;default:return this.toFormat(t).toString(t)}}toFormat(t){switch(t){case"hsb":case"hsba":return this;case"hsl":case"hsla":return this.toHSL();case"rgb":case"rgba":return this.toRGB();default:throw new Error("Unsupported color conversion: hsb -> "+t)}}toHSL(){let t=this.saturation/100,n=this.brightness/100,r=n*(1-t/2);return t=r===0||r===1?0:(n-r)/Math.min(r,1-r),new Kr(Qe(this.hue,2),Qe(t*100,2),Qe(r*100,2),this.alpha)}toRGB(){let t=this.hue,n=this.saturation/100,r=this.brightness/100,i=(o,d=(o+t/60)%6)=>r-n*r*Math.max(Math.min(d,4-d,1),0);return new Yr(Math.round(i(5)*255),Math.round(i(3)*255),Math.round(i(1)*255),this.alpha)}clone(){return new Gr(this.hue,this.saturation,this.brightness,this.alpha)}getChannelRange(t){switch(t){case"hue":return{minValue:0,maxValue:360,step:1,pageSize:15};case"saturation":case"brightness":return{minValue:0,maxValue:100,step:1,pageSize:10};case"alpha":return{minValue:0,maxValue:1,step:.01,pageSize:.1};default:throw new Error("Unknown color channel: "+t)}}getChannelFormatOptions(t){switch(t){case"hue":return{style:"unit",unit:"degree",unitDisplay:"narrow"};case"saturation":case"brightness":case"alpha":return{style:"percent"};default:throw new Error("Unknown color channel: "+t)}}formatChannelValue(t,n){let r=this.getChannelFormatOptions(t),i=this.getChannelValue(t);return(t==="saturation"||t==="brightness")&&(i/=100),new Ra(n,r).format(i)}getColorSpace(){return"hsb"}getColorChannels(){return Gr.colorChannels}constructor(t,n,r,i){super(),this.hue=t,this.saturation=n,this.brightness=r,this.alpha=i}}Gr.colorChannels=["hue","saturation","brightness"];const iL=/hsl\(([-+]?\d+(?:.\d+)?\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d+(?:.\d+)?%)\)|hsla\(([-+]?\d+(?:.\d+)?\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d+(?:.\d+)?%\s*,\s*[-+]?\d(.\d+)?)\)/;function D_(e,t){return(e%t+t)%t}class Kr extends Ug{static parse(t){let n;if(n=t.match(iL)){var r;const[i,o,d,a]=((r=n[1])!==null&&r!==void 0?r:n[2]).split(",").map(s=>Number(s.trim().replace("%","")));return new Kr(D_(i,360),Ai(o,0,100),Ai(d,0,100),Ai(a??1,0,1))}}toString(t="css"){switch(t){case"hex":return this.toRGB().toString("hex");case"hexa":return this.toRGB().toString("hexa");case"hsl":return`hsl(${this.hue}, ${Qe(this.saturation,2)}%, ${Qe(this.lightness,2)}%)`;case"css":case"hsla":return`hsla(${this.hue}, ${Qe(this.saturation,2)}%, ${Qe(this.lightness,2)}%, ${this.alpha})`;default:return this.toFormat(t).toString(t)}}toFormat(t){switch(t){case"hsl":case"hsla":return this;case"hsb":case"hsba":return this.toHSB();case"rgb":case"rgba":return this.toRGB();default:throw new Error("Unsupported color conversion: hsl -> "+t)}}toHSB(){let t=this.saturation/100,n=this.lightness/100,r=n+t*Math.min(n,1-n);return t=r===0?0:2*(1-n/r),new Gr(Qe(this.hue,2),Qe(t*100,2),Qe(r*100,2),this.alpha)}toRGB(){let t=this.hue,n=this.saturation/100,r=this.lightness/100,i=n*Math.min(r,1-r),o=(d,a=(d+t/30)%12)=>r-i*Math.max(Math.min(a-3,9-a,1),-1);return new Yr(Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255),this.alpha)}clone(){return new Kr(this.hue,this.saturation,this.lightness,this.alpha)}getChannelRange(t){switch(t){case"hue":return{minValue:0,maxValue:360,step:1,pageSize:15};case"saturation":case"lightness":return{minValue:0,maxValue:100,step:1,pageSize:10};case"alpha":return{minValue:0,maxValue:1,step:.01,pageSize:.1};default:throw new Error("Unknown color channel: "+t)}}getChannelFormatOptions(t){switch(t){case"hue":return{style:"unit",unit:"degree",unitDisplay:"narrow"};case"saturation":case"lightness":case"alpha":return{style:"percent"};default:throw new Error("Unknown color channel: "+t)}}formatChannelValue(t,n){let r=this.getChannelFormatOptions(t),i=this.getChannelValue(t);return(t==="saturation"||t==="lightness")&&(i/=100),new Ra(n,r).format(i)}getColorSpace(){return"hsl"}getColorChannels(){return Kr.colorChannels}constructor(t,n,r,i){super(),this.hue=t,this.saturation=n,this.lightness=r,this.alpha=i}}Kr.colorChannels=["hue","saturation","lightness"];function A_(e){let t=e.toFormat("rgb"),n=t.getChannelValue("red")/255,r=t.getChannelValue("green")/255,i=t.getChannelValue("blue")/255;[n,r,i]=oL(n,r,i);let[o,d,a]=aL(n,r,i),[s,u,h]=lL(o,d,a);return sL(s,u,h)}function sL(e,t,n){var r=Math.atan2(n,t)*180/Math.PI;return[e,Math.sqrt(t**2+n**2),r>=0?r:r+360]}function oL(e,t,n){return[Xg(e),Xg(t),Xg(n)]}function Xg(e){let t=e<0?-1:1,n=Math.abs(e);return n<=.04045?e/12.92:t*Math.pow((n+.055)/1.055,2.4)}function aL(e,t,n){return Yg([.4123907992659595,.35758433938387796,.1804807884018343,.21263900587151036,.7151686787677559,.07219231536073371,.01933081871559185,.11919477979462599,.9505321522496606],e,t,n)}function lL(e,t,n){const r=[.819022437996703,.3619062600528904,-.1288737815209879,.0329836539323885,.9292868615863434,.0361446663506424,.0481771893596242,.2642395317527308,.6335478284694309],i=[.210454268309314,.7936177747023054,-.0040720430116193,1.9779985324311684,-2.42859224204858,.450593709617411,.0259040424655478,.7827717124575296,-.8086757549230774];let[o,d,a]=Yg(r,e,t,n);return Yg(i,Math.cbrt(o),Math.cbrt(d),Math.cbrt(a))}function Yg(e,t,n,r){let i=e[0]*t+e[1]*n+e[2]*r,o=e[3]*t+e[4]*n+e[5]*r,d=e[6]*t+e[7]*n+e[8]*r;return[i,o,d]}const uL=[{color:"rgb(255, 255, 255)",name:se("White")},{color:"rgb(239,245,245)",name:se("Solitude")},{color:"rgb(245,213,174)",name:se("Wheat")},{color:"rgb(253,227,167)",name:se("Cape Honey")},{color:"rgb(242,222,186)",name:se("Milk punch")},{color:"rgb(97,118,75)",name:se("Dingy"),foreground:"rgb(255, 255, 255)"},{color:"rgb(4, 147, 114)",name:se("Aquamarine"),foreground:"rgb(255, 255, 255)"},{color:"rgb(222,245,229)",name:se("Cosmic Latte")},{color:"rgb(233,119,119)",name:se("Geraldine"),foreground:"rgb(90,14,14)"},{color:"rgb(247,164,164)",name:se("Sundown")},{color:"rgb(30,139,195)",name:se("Pelorous"),foreground:"rgb(255, 255, 255)"},{color:"rgb(142,68,173)",name:se("Deep Lilac"),foreground:"rgb(255, 255, 255)"},{color:"rgb(108,74,182)",name:se("Blue marguerite"),foreground:"rgb(255, 255, 255)"},{color:"rgb(139,126,116)",name:se("Americano"),foreground:"rgb(255, 255, 255)"},{color:"rgb(0,0,0)",name:se("Black"),foreground:"rgb(255, 255, 255)"},{color:"rgb(64,66,88)",name:se("Blue zodiac"),foreground:"rgb(255, 255, 255)"},{color:"rgb(101,100,124)",name:se("Comet"),foreground:"rgb(255, 255, 255)"}];function cL({onChange:e,value:t,colors:n}){const r=n.map(i=>{const o=t===i;return x.jsx(nr,{onClick:()=>{e==null||e(i)},className:le("relative block flex-shrink-0 w-26 h-26 border rounded",o&&"shadow-md"),style:{backgroundColor:i},children:o&&x.jsx("span",{className:"absolute inset-0 m-auto rounded-full w-8 h-8 bg-white"})},i)});return x.jsx("div",{className:"flex flex-wrap gap-6",children:r})}const fL=uL.map(({color:e})=>e).slice(0,14);function hL({defaultValue:e,onChange:t,colorPresets:n,showInput:r}){const[i,o]=E.useState(e),d=n||fL,a=Fi({size:"sm"});return x.jsxs("div",{children:[x.jsx(HR,{className:"!w-auto",color:i,onChange:s=>{t==null||t(s),o(s)}}),x.jsxs("div",{className:"px-12 py-20",children:[d&&x.jsx(cL,{colors:d,onChange:s=>{if(s){const u=tL(s).toString("hex");t==null||t(u),o(u)}},value:i}),r&&x.jsx("div",{className:"pt-20",children:x.jsx(XR,{autoComplete:"off",role:"textbox",autoCorrect:"off",spellCheck:"false",required:!0,"aria-label":"Hex color",prefixed:!0,className:a.input,color:i,onChange:s=>{t==null||t(s),o(s)}})})]})]})}const zc=ce.createContext(null);function M_(){return E.useContext(zc)}function qr(){const{lines:e,localeCode:t}=kc();return{trans:E.useCallback(r=>dL({...r,lines:e,localeCode:t}),[e,t])}}const dL=wa(e=>{let{lines:t,message:n,values:r,localeCode:i}=e;return n==null?"":(n=(t==null?void 0:t[n])||(t==null?void 0:t[n.toLowerCase()])||n,r&&(n=W2(i,e),Object.entries(r).forEach(([o,d])=>{n=n.replace(`:${o}`,`${d}`)})),n)},{equals:Cg,callTimeout:0});function pL({onDismiss:e}){const{trans:t}=qr(),n=()=>{e&&e()};return x.jsx("button",{className:"sr-only","aria-label":t(se("Dismiss")),tabIndex:-1,onClick:n})}function Bc(e){const{type:t="modal",dialogProps:n,...r}=E.useContext(zc),{children:i,className:o,size:d="md",background:a,radius:s="rounded",maxWidth:u="max-w-dialog",...h}=e;let l=null;(t==="popover"||t==="tray")&&(l=x.jsx(pL,{onDismiss:r.close}));const f=d==="fullscreenTakeover"||t==="tray",c=le("mx-auto pointer-events-auto outline-none flex flex-col overflow-hidden",a||"bg",t!=="tray"&&gL(d),t==="tray"&&"rounded-t border-b-bg",d!=="fullscreenTakeover"&&"shadow-2xl border max-h-dialog",!f&&`${s} ${u}`,o);return x.jsxs("div",{...tr({role:"dialog",tabIndex:-1},n,h),style:{...e.style,"--be-dialog-padding":"24px"},"aria-modal":!0,className:c,children:[E.Children.toArray(i).map(p=>E.isValidElement(p)?E.cloneElement(p,{size:p.props.size??d}):p),l]})}function gL(e){switch(e){case"2xs":return"w-256";case"xs":return"w-320";case"sm":return"w-384";case"md":return"w-440";case"lg":return"w-620";case"xl":return"w-780";case"2xl":return"w-850";case"fullscreen":return"w-1280";case"fullscreenTakeover":return"w-full h-full";default:return e}}const Gg=ve(x.jsx("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"}),"KeyboardArrowDownOutlined"),mL=E.forwardRef(({children:e,autoFocus:t=!1,restoreFocus:n=!0,isDismissable:r=!0,isOpen:i=!1,placement:o="center",onClose:d},a)=>{const s=wg(),u=Di(a);return x.jsxs("div",{className:"fixed inset-0 isolate z-modal",style:s,onKeyDown:h=>{h.key==="Escape"&&(h.stopPropagation(),h.preventDefault(),d())},children:[x.jsx(xg,{onClick:()=>{r&&d()}},"modal-underlay"),x.jsx(xt.div,{ref:u,className:le("pointer-events-none absolute inset-0 z-20 flex h-full w-full",o==="center"&&"items-center justify-center",o==="top"&&"items-start justify-center pt-40"),role:"presentation",initial:{opacity:0,scale:o==="top"?1:.7},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1},transition:{duration:.1},children:x.jsx(wc,{restoreFocus:n,autoFocus:t,contain:!0,children:e})})]})});function vL({x:e,y:t},n){return{getBoundingClientRect(){return{x:e,y:t,width:0,height:0,top:t,right:e,bottom:t,left:e}},contextElement:n}}function yL(e){const t=E.useRef(e);return E.useEffect(()=>{t.current=e}),E.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function Nc(e){let{children:t,type:n,disableInitialTransition:r,isDismissable:i=!0,moveFocusToDialog:o=!0,returnFocusToTrigger:d=!0,triggerOnHover:a=!1,triggerOnContextMenu:s=!1,usePortal:u=!0,mobileType:h,alwaysReturnCurrentValueOnClose:l}=e;const f=E.useRef(null),c=s&&!e.triggerRef?f:e.triggerRef,p=E.useRef(e.value),[m,g]=$r(e.isOpen,e.defaultIsOpen,e.onOpenChange),[v,y]=$r(e.value,e.defaultValue,e.onValueChange);Ec()&&n==="popover"&&(n=h||"modal");const w=E.useRef(null),{x:C,y:_,reference:S,strategy:T,refs:I}=hg({...e,disablePositioning:n==="modal"}),F=n==="popover"?{position:T,top:_??"",left:C??""}:{},$=E.useId(),G=`${$}-label`,ne=`${$}-description`,X=`${$}-form`,Q=yL(e.onClose),Z=E.useCallback(U=>{typeof U>"u"&&l&&(U=v);const W=typeof U<"u"?U:p.current;Q==null||Q(W,{initialValue:p.current,valueChanged:W!==p.current}),g(!1)},[Q,g,v,l]),ie=E.useCallback(()=>{g(!0),p.current=e.value},[e.value,g]);Qt(()=>{c!=null&&c.current&&I.reference.current!==c.current&&S(c.current)},[S,c==null?void 0:c.current,I]);const V=E.useMemo(()=>({"aria-labelledby":G,"aria-describedby":ne}),[G,ne]);let k;n==="modal"?k=mL:n==="tray"?k=H2:k=Sc;const P=E.useMemo(()=>({dialogProps:V,type:n,labelId:G,descriptionId:ne,isDismissable:i,close:Z,value:v,initialValue:p.current,setValue:y,formId:X}),[Z,ne,V,X,G,n,i,v,y]);a=a&&n==="popover";const A={onPointerEnter:Bt(U=>{ie()}),onPointerLeave:Bt(U=>{w.current=setTimeout(()=>{Z()},150)})},j={onPointerEnter:Bt(U=>{w.current&&clearTimeout(w.current)}),onPointerLeave:Bt(U=>{Z()})},H={onContextMenu:Bt(U=>{U.preventDefault(),f.current=vL({x:U.clientX,y:U.clientY},U.currentTarget),ie()})},M={onClick:Bt(U=>{U.stopPropagation(),m?Z():ie()})},{dialogTrigger:O,dialog:R}=bL(t,P),B=x.jsx(er,{initial:!r,children:m&&x.jsx(zc.Provider,{value:P,children:x.jsx(k,{...a?j:{},ref:I.setFloating,triggerRef:I.reference,style:F,restoreFocus:d,autoFocus:o,isOpen:m,onClose:Z,isDismissable:i,isContextMenu:s,placement:e.placement,children:R})})});return x.jsxs(E.Fragment,{children:[O&&E.cloneElement(O,tr({...!c&&!s?{ref:S}:{},...s?{}:M,...a?A:{},...s?H:{}},{...O.props})),u?oi&&Is.createPortal(B,oi):B]})}function bL(e,t){const n=Array.isArray(e)?e:E.Children.toArray(e);let r=n.length===2?n[1]:n[0];return r=typeof r=="function"?r(t):r,n.length===2?{dialogTrigger:n[0],dialog:r}:{dialog:r}}function Ri(e){const{label:t,className:n,value:r,onChange:i,size:o,width:d="w-max"}=e,a=fe(p=>{var m,g;return(g=(m=p.config.ui)==null?void 0:m.colorPresets)==null?void 0:g.items})||[],s=Fi({size:o}),[u,h]=E.useState(r),[l,f]=E.useState(!1),c=p=>{h(p),i==null||i(p)};return x.jsxs("div",{className:le(n,d),children:[t&&x.jsx("span",{className:s.label,children:t}),x.jsxs(Nc,{type:"popover",isOpen:l,onOpenChange:f,children:[x.jsxs(nr,{className:le(s.input,"inline-flex items-center"),"aria-label":e["aria-label"],children:[x.jsx("span",{className:"block flex-shrink-0 mr-5 border rounded h-2/4 aspect-square",style:{backgroundColor:u}}),x.jsx(wL,{isActive:l,className:s.adornment})]}),x.jsx(Bc,{size:"auto",children:x.jsx(hL,{onChange:c,defaultValue:u,colorPresets:a})})]})]})}function wL({isActive:e,className:t}){const n=e?"rotate-180":"rotate-0";return x.jsx(Gg,{size:"sm",className:`transition-transform ml-auto flex-shrink-0 ${n} ${t}`})}function xL(e){const{size:t="md",inline:n,label:r,showValueLabel:i=!!r,className:o,width:d="w-full",slider:a,children:s,trackColor:u="primary",fillColor:h="primary"}=e,{domProps:l,trackRef:f,getThumbPercent:c,getThumbValueLabel:p,labelId:m,groupId:g,thumbIds:v,isDisabled:y,numberFormatter:b,minValue:w,maxValue:C,step:_,values:S,getValueLabel:T}=a;let I="",F=Math.max([...b.format(w)].length,[...b.format(C)].length,[...b.format(_)].length);T?I=T(S[0]):S.length===1?I=p(0):S.length===2&&(I=`${p(0)}  ${p(1)}`,F=3+2*Math.max(F,[...b.format(w)].length,[...b.format(C)].length));const $=Fi({size:t,disabled:y,labelDisplay:"flex"}),G=le("touch-none",o,d,{"flex items-center":n});return x.jsxs("div",{className:G,role:"group",id:g,children:[(r||i)&&x.jsxs("div",{className:le($.label,"select-none"),children:[r&&x.jsx("label",{onClick:()=>{var ne;(ne=document.getElementById(v[0]))==null||ne.focus()},id:m,htmlFor:g,children:r}),i&&x.jsx("output",{htmlFor:v[0],className:"ml-auto text-right","aria-live":"off",style:F?{width:`${F}ch`,minWidth:`${F}ch`}:void 0,children:I})]}),x.jsxs("div",{ref:f,className:le("relative",CL(e)),...l,role:"presentation",children:[x.jsx("div",{className:le("absolute inset-0 m-auto rounded",_L(u,y),j_(t))}),x.jsx("div",{className:le("absolute inset-0 my-auto rounded",SL(h,y),j_(t)),style:{width:`${Math.max(c(0)*100,0)}%`}}),s]})]})}function CL({size:e,wrapperHeight:t}){if(t)return t;switch(e){case"xs":return"h-14";case"sm":return"h-20";default:return"h-30"}}function j_(e){switch(e){case"xs":return"h-2";case"sm":return"h-3";default:return"h-4"}}function _L(e,t){switch(t&&(e="disabled"),e){case"disabled":return"bg-slider-disabled/60";case"primary":return"bg-primary-light";case"neutral":return"bg-divider";default:return e}}function SL(e,t){switch(t&&(e="disabled"),e){case"disabled":return"bg-slider-disabled";case"primary":return"bg-primary";default:return e}}function I_(e={}){const{localeCode:t}=kc();return E.useMemo(()=>new Ra(t,e),[t,e])}function F_({minValue:e=0,maxValue:t=100,isDisabled:n=!1,step:r=1,formatOptions:i,onChangeEnd:o,onPointerDown:d,label:a,getValueLabel:s,showThumbOnHoverOnly:u,thumbSize:h,onPointerMove:l,...f}){const[c,p]=E.useState(!1),m=I_(i),{addGlobalListener:g,removeGlobalListener:v}=Vp(),y=E.useRef(null),[b,w]=$r(f.value?f.value:void 0,f.defaultValue??[e],f.onChange),C=E.useRef(null);C.current=b;const[_,S]=E.useState(new Array(b.length).fill(!1)),T=E.useRef(null);T.current=_;function I(N){return m.format(N)}const F=N=>{var q;return((q=T.current)==null?void 0:q[N])||!1},$=N=>I(b[N]),G=N=>N===0?e:b[N-1],ne=N=>N===b.length-1?t:b[N+1],X=(N,q)=>{if(n||!M(N)||!C.current)return;const ae=G(N),ye=ne(N);q=x6(q,ae,ye,r),C.current=R_(C.current,N,q),w(C.current)},Q=(N,q)=>{var ye;if(n||!M(N))return;const ae=(ye=T.current)==null?void 0:ye[N];T.current=R_(T.current||[],N,q),S(T.current),o&&ae&&!T.current.some(Boolean)&&o(C.current||[])},[Z,ie]=E.useState(void 0),V=N=>{const q=Math.min(1,(N-e)/(t-e));return isNaN(q)?0:q},k=N=>V(C.current[N]),P=(N,q)=>{X(N,j(q))},A=N=>Math.round((N-e)/r)*r+e,j=N=>{const q=N*(t-e)+e;return Ma(A(q),e,t)},H=E.useRef(new Array(b.length).fill(!0)),M=N=>H.current[N],O=(N,q)=>{H.current[N]=q},R=E.useRef(null),B=E.useRef(void 0),U=N=>{if(!(N.pointerType==="mouse"&&(N.button!==0||N.altKey||N.ctrlKey||N.metaKey))&&(d==null||d(),y.current&&!n&&b.every((q,ae)=>!_[ae]))){const q=y.current.offsetWidth,ae=y.current.getBoundingClientRect().left,ge=(N.clientX-ae)/q,J=j(ge);let pe;const xe=b.findIndex(ke=>J-ke<0);if(xe===0)pe=xe;else if(xe===-1)pe=b.length-1;else{const ke=b[xe-1],Le=b[xe];Math.abs(ke-J)<Math.abs(Le-J)?pe=xe-1:pe=xe}pe>=0&&M(pe)?(N.preventDefault(),R.current=pe,ie(pe),B.current=N.pointerId,Q(R.current,!0),X(pe,J),g(window,"pointerup",ue,!1)):R.current=null}},W=E.useRef(null),{domProps:ee}=Mc({onPointerDown:U,onMoveStart(){W.current=null},onMove(N,q){var ye;const ae=((ye=y.current)==null?void 0:ye.offsetWidth)||0;if(W.current==null&&(W.current=k(R.current||0)*ae),W.current+=q,R.current!=null&&y.current){const ge=Ma(W.current/ae,0,1);P(R.current,ge)}},onMoveEnd(){R.current!=null&&(Q(R.current,!1),R.current=null)}}),re=tr(ee,{onPointerEnter:()=>{p(!0)},onPointerLeave:()=>{p(!1)},onPointerMove:N=>{l==null||l(N)}}),ue=N=>{N.pointerId===B.current&&(R.current!=null&&(Q(R.current,!1),R.current=null),v(window,"pointerup",ue,!1))},Y=E.useId(),z=a?`${Y}-label`:void 0,K=`${Y}-group`,te=[...Array(b.length)].map((N,q)=>`${Y}-thumb-${q}`);return{domProps:re,trackRef:y,isDisabled:n,step:r,values:b,minValue:e,maxValue:t,focusedThumb:Z,labelId:z,groupId:K,thumbIds:te,numberFormatter:m,getThumbPercent:k,getThumbMinValue:G,getThumbMaxValue:ne,getThumbValueLabel:$,isThumbDragging:F,setThumbValue:X,updateDraggedThumbs:Q,setThumbEditable:O,setFocusedThumb:ie,getValueLabel:s,isPointerOver:c,showThumbOnHoverOnly:u,thumbSize:h}}function R_(e,t,n){return e[t]===n?e:[...e.slice(0,t),n,...e.slice(t+1)]}function kL({index:e,slider:t,isDisabled:n,ariaLabel:r,inputRef:i,onBlur:o,fillColor:d="primary"}){const a=Di(i),{addGlobalListener:s,removeGlobalListener:u}=Vp(),{step:h,values:l,focusedThumb:f,labelId:c,thumbIds:p,isDisabled:m,getThumbPercent:g,getThumbMinValue:v,getThumbMaxValue:y,getThumbValueLabel:b,setThumbValue:w,updateDraggedThumbs:C,isThumbDragging:_,setThumbEditable:S,setFocusedThumb:T,isPointerOver:I,showThumbOnHoverOnly:F,thumbSize:$="w-18 h-18"}=t,G=_(e),ne=l[e];S(e,!n);const X=n||m,Q=E.useCallback(()=>{a.current&&a.current.focus({preventScroll:!0})},[a]),Z=f===e;E.useEffect(()=>{Z&&Q()},[Z,Q]);const ie=E.useRef(void 0),V=P=>{P.pointerId===ie.current&&(Q(),C(e,!1),u(window,"pointerup",V,!1))},k=le("outline-none rounded-full top-1/2 -translate-y-1/2 -translate-x-1/2 absolute inset-0 transition-button duration-200",$,!X&&"shadow-md",EL({fillColor:d,isDisabled:X,isDragging:G}),!F||F&&G||I?"visible":"invisible");return x.jsx("div",{role:"presentation",className:k,style:{left:`${Math.max(g(e)*100,0)}%`},onPointerDown:P=>{P.button!==0||P.altKey||P.ctrlKey||P.metaKey||(Q(),ie.current=P.pointerId,C(e,!0),s(window,"pointerup",V,!1))},children:x.jsx("input",{id:p[e],onKeyDown:Bt(()=>{C(e,!0)}),onKeyUp:Bt(()=>{C(e,!1)}),ref:a,tabIndex:X?void 0:0,min:v(e),max:y(e),step:h,value:ne,disabled:X,"aria-label":r,"aria-labelledby":c,"aria-orientation":"horizontal","aria-valuetext":b(e),onFocus:()=>{T(e)},onBlur:P=>{T(void 0),C(e,!1),o==null||o(P)},onChange:P=>{w(e,parseFloat(P.target.value))},type:"range",className:"sr-only"})})}function EL({isDisabled:e,isDragging:t,fillColor:n}){return e?"bg-slider-disabled cursor-default":n&&n!=="primary"?n:le("hover:bg-primary-dark",t?"bg-primary-dark":"bg-primary")}function Li({inputRef:e,onBlur:t,...n}){const{onChange:r,onChangeEnd:i,value:o,defaultValue:d,...a}=n,s={...a,value:o!=null?[o]:void 0,defaultValue:d!=null?[d]:void 0,onChange:h=>{r==null||r(h[0])},onChangeEnd:h=>{i==null||i(h[0])}},u=F_(s);return x.jsx(xL,{...s,slider:u,children:x.jsx(kL,{fillColor:n.fillColor,index:0,slider:u,inputRef:e,onBlur:t})})}const L_=ce.forwardRef((e,t)=>{let{value:n=0,minValue:r=0,maxValue:i=100,size:o="md",isIndeterminate:d=!1,className:a,position:s="relative",trackColor:u,fillColor:h="border-primary",...l}=e;n=Ma(n,r,i);const f=TL(o),c=(n-r)/(i-r),p=I_({style:"percent"});let m="";!d&&!m&&(m=p.format(c));const g={},v={};if(!d){const y=(n-r)/(i-r)*100;let b;y>0&&y<=50?(b=-180+y/50*180,g.transform=`rotate(${b}deg)`,v.transform="rotate(-180deg)"):y>50&&(b=-180+(y-50)/50*180,g.transform="rotate(0deg)",v.transform=`rotate(${b}deg)`)}return x.jsxs("div",{...l,"aria-valuenow":d?void 0:n,"aria-valuemin":r,"aria-valuemax":i,"aria-valuetext":d?void 0:m,role:"progressbar",ref:t,className:le("progress-circle",s,f,d&&"indeterminate",a),children:[x.jsx("div",{className:le(f,u,"rounded-full border-4")}),x.jsxs("div",{className:le("fills absolute left-0 top-0 h-full w-full",d&&"progress-circle-fills-animate"),children:[x.jsx(z_,{circleSize:f,subMaskStyle:g,isIndeterminate:d,className:"rotate-180",fillColor:h,subMaskClassName:le(d&&"progress-circle-fill-submask-1-animate")}),x.jsx(z_,{circleSize:f,subMaskStyle:v,isIndeterminate:d,fillColor:h,subMaskClassName:le(d&&"progress-circle-fill-submask-2-animate")})]})]})});function z_({subMaskStyle:e,subMaskClassName:t,className:n,circleSize:r,isIndeterminate:i,fillColor:o}){return x.jsx("div",{className:le("absolute h-full w-1/2 origin-[100%] overflow-hidden",n),children:x.jsx("div",{className:le("h-full w-full origin-[100%] rotate-180 overflow-hidden",!i&&"transition-transform duration-100",t),style:e,children:x.jsx("div",{className:le(r,o,"rounded-full border-4")})})})}function TL(e){switch(e){case"xs":return"w-20 h-20";case"sm":return"w-24 h-24";case"md":return"w-32 h-32";case"lg":return"w-42 h-42";default:return e}}function OL({isLoading:e,icon:t}){const n=E.useRef(null),{trans:r}=qr(),[i,o]=E.useState(!1),{state:{isOpen:d,inputValue:a}}=eg(),s=E.useRef(a);return E.useEffect(()=>{e&&!i?(n.current===null&&(n.current=setTimeout(()=>{o(!0)},500)),a!==s.current&&(clearTimeout(n.current),n.current=setTimeout(()=>{o(!0)},500))):e||(o(!1),clearTimeout(n.current),n.current=null),s.current=a},[e,i,a]),i&&(d||e)?x.jsx(L_,{"aria-label":r({message:"Loading"}),size:"sm",isIndeterminate:!0}):t||x.jsx(Gg,{})}function PL(e,t){const n=Ec(),{hideCaret:r,placeholder:i=x.jsx(be,{message:"Select an option..."}),selectedValue:o,onItemSelected:d,onOpenChange:a,onInputValueChange:s,onSelectionChange:u,selectionMode:h,minWidth:l="min-w-128",children:f,searchPlaceholder:c,showEmptyMessage:p,showSearchField:m,defaultInputValue:g,inputValue:v,isLoading:y,isAsync:b,valueClassName:w,floatingWidth:C=n?"auto":"matchTrigger",..._}=e,S=F2({...e,clearInputOnItemSelection:!0,showEmptyMessage:p||m,floatingWidth:C,selectionMode:"single",role:"listbox",virtualFocus:m},t),{state:{selectedValues:T,isOpen:I,setIsOpen:F,activeIndex:$,setSelectedIndex:G,inputValue:ne,setInputValue:X},collections:Q,focusItem:Z,listboxId:ie,reference:V,refs:k,listContent:P,onInputChange:A}=S,{fieldProps:j,inputProps:H}=aC({..._,focusRef:k.reference}),M=Q.collection.get(T[0]),O=M?x.jsxs("span",{className:"flex items-center gap-10",children:[M.element.props.startIcon,x.jsx("span",{className:le("overflow-hidden overflow-ellipsis whitespace-nowrap",w),children:M.element.props.children})]}):x.jsx("span",{className:"italic",children:i}),R=Fi({...e,endAdornment:!0}),{handleTriggerKeyDown:B,handleListboxKeyboardNavigation:U,handleListboxSearchFieldKeydown:W}=Y2(S),{findMatchingItem:ee}=G2(),re=Y=>{if(!I)return;const z=ee(Y,P,$);z!=null&&Z("increment",z)},ue=Y=>{if(I)return;const z=ee(Y,P,$);z!=null&&G(z)};return x.jsx(X2,{listbox:S,onKeyDownCapture:m?void 0:re,onKeyDown:U,onClose:m?()=>X(""):void 0,isLoading:y,searchField:m&&x.jsx(or,{size:e.size==="xs"||e.size==="sm"?"xs":"sm",placeholder:c,startAdornment:x.jsx(K2,{}),className:"flex-shrink-0 px-8 pb-8 pt-4",autoFocus:!0,"aria-expanded":I?"true":"false","aria-haspopup":"listbox","aria-controls":I?ie:void 0,"aria-autocomplete":"list",autoComplete:"off",autoCorrect:"off",spellCheck:"false",value:ne,onChange:A,onKeyDown:Y=>{W(Y)}}),children:x.jsx(sC,{fieldClassNames:R,...j,endAdornment:!r&&x.jsx(OL,{isLoading:y}),children:x.jsx("button",{...H,type:"button","data-selected-value":M==null?void 0:M.value,"aria-expanded":I?"true":"false","aria-haspopup":"listbox","aria-controls":I?ie:void 0,ref:V,onKeyDown:B,onKeyDownCapture:m?void 0:ue,disabled:_.disabled,onClick:()=>{F(!I)},className:le(R.input,!j.unstyled&&l),children:O})})})}const Kg=ce.forwardRef(PL);function DL(){const e=fe(d=>d.filter.selected);if(!e)return null;const t=L().filter.getByName(e).options,n=(d,a)=>{var s;(s=L().filter)==null||s.applyValue(e,d,a),D().setDirty(!0)},r=L().canvas.getMainImage().filters,i=L().filter.findFilterIndex(e,r),o=r==null?void 0:r[i];if(t){const d=Object.entries(t).map(([a,s])=>{let u;const h=o?o[a]:s.current;return s.type==="slider"?u=x.jsx(Li,{label:x.jsx("span",{className:"capitalize",children:x.jsx(be,{...Yp[a]})}),minValue:s.min,maxValue:s.max,step:s.step,defaultValue:h,formatOptions:{style:"percent"},size:"sm",onChange:l=>{n(a,l)}}):s.type==="colorPicker"?u=x.jsx(Ri,{label:x.jsx(be,{...Yp[a]}),size:"sm",width:"w-full",value:h,onChange:l=>{n(a,l)}}):s.type==="select"&&(u=x.jsx(Kg,{selectionMode:"single",size:"sm",label:x.jsx(be,{...Yp[a]}),defaultValue:h,onSelectionChange:l=>{n(a,l)},children:s.available.map(l=>x.jsx(fc,{value:l.key,children:x.jsx("span",{className:"capitalize",children:x.jsx(be,{message:l.key})})},l.key))})),x.jsx("div",{className:"pb-10",children:u},a)});return x.jsx(Rg,{children:x.jsx("div",{className:"max-w-240 pt-10 mx-auto",children:d})})}return null}function AL(){const e=fe(r=>r.frame.active),t=(e==null?void 0:e.mode)==="basic",n=E.useCallback(r=>`${r}%`,[]);return x.jsx(Rg,{className:"pb-18 pt-6",children:x.jsxs("div",{className:"max-w-288 m-auto",children:[t&&x.jsx(Ri,{className:"mb-20",width:"w-full",size:"sm",label:x.jsx(be,{message:"Color"}),value:L().frame.builder.defaultColor,onChange:r=>{L().frame.active.changeColor(r)}}),x.jsx(Li,{size:"sm",label:x.jsx(be,{message:"Size"}),step:1,minValue:L().frame.active.getMinSize(),maxValue:L().frame.active.getMaxSize(),defaultValue:L().frame.active.currentSizeInPercent,getValueLabel:n,onChange:r=>{L().frame.resize(r)}})]})})}const La=ce.createContext(null);function ML(){const{tabsRef:e,selectedTab:t}=E.useContext(La),[n,r]=E.useState({width:void 0,transform:void 0,className:void 0});return Qt(()=>{if(t!=null&&e.current){const i=e.current[t];if(!i)return;r(o=>({width:`${i.offsetWidth}px`,transform:`translateX(${i.offsetLeft}px)`,className:o.width===void 0?"":"transition-all"}))}},[r,t,e]),x.jsx("div",{className:le("absolute bottom-0 left-0 h-2 bg-primary",n.className),role:"presentation",style:{width:n.width,transform:n.transform}})}function jL({children:e,center:t,expand:n,className:r}){const i=E.Children.toArray(e);return x.jsx(wc,{children:x.jsxs("div",{className:le("flex relative max-w-full overflow-auto border-b max-sm:hidden-scrollbar md:compact-scrollbar",r),role:"tablist","aria-orientation":"horizontal",children:[i.map((o,d)=>E.isValidElement(o)?E.cloneElement(o,{index:d,className:le(o.props.className,n&&"flex-auto",t&&d===0&&"ml-auto",t&&d===i.length-1&&"mr-auto")}):null),x.jsx(ML,{})]})})}function IL(e){const{size:t="md",children:n,className:r,isLazy:i,overflow:o="overflow-hidden"}=e,d=E.useRef([]),a=E.useId(),[s,u]=$r(e.selectedTab,e.defaultSelectedTab||0,e.onTabChange),h=E.useMemo(()=>({selectedTab:s,setSelectedTab:u,tabsRef:d,size:t,isLazy:i,id:a}),[s,a,i,u,t]);return x.jsx(La.Provider,{value:h,children:x.jsx("div",{className:le(r,o,"max-w-full"),children:n})})}const FL=ve(x.jsx("path",{d:"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"}),"FormatUnderlinedOutlined"),RL=ve(x.jsx("path",{d:"M10 19h4v-3h-4v3zM5 4v3h5v3h4V7h5V4H5zM3 14h18v-2H3v2z"}),"FormatStrikethroughOutlined"),LL=ve(x.jsx("path",{d:"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4h-8z"}),"FormatItalicOutlined"),zL=ve(x.jsx("path",{d:"M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"}),"FormatAlignRightOutlined"),BL=ve(x.jsx("path",{d:"M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"}),"FormatAlignLeftOutlined"),NL=ve(x.jsx("path",{d:"M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"}),"FormatAlignCenterOutlined");function $L(){return x.jsxs("div",{className:"flex gap-20 justify-center",children:[x.jsx(VL,{}),x.jsx(HL,{}),x.jsx(WL,{})]})}function VL(){const e=fe(n=>n.objects.active.editableProps.fontSize)??40,{trans:t}=qr();return x.jsx(or,{type:"number",size:"xs","aria-label":t({message:"Font Size"}),min:1,max:300,className:"w-64 flex-shrink-0",value:e,onChange:n=>{L().objects.setValues({fontSize:n.target.valueAsNumber}),D().setDirty(!0)}})}function HL(){const e=fe(o=>o.objects.active.editableProps.fontStyle),t=fe(o=>o.objects.active.editableProps.underline),n=fe(o=>o.objects.active.editableProps.linethrough),[r,i]=E.useState([e,t&&"underline",n&&"linethrough"]);return x.jsxs(Tc,{size:"xs",variant:"outline",radius:"rounded",value:r,multiple:!0,onChange:o=>{i(o),L().objects.setValues({underline:o.includes("underline"),linethrough:o.includes("linethrough"),fontStyle:o.includes("italic")?"italic":""}),D().setDirty(!0)},children:[x.jsx(je,{value:"underline",children:x.jsx(FL,{})}),x.jsx(je,{value:"linethrough",children:x.jsx(RL,{})}),x.jsx(je,{value:"italic",children:x.jsx(LL,{})})]})}function WL(){const e=fe(t=>t.objects.active.editableProps.textAlign);return x.jsxs(Tc,{size:"xs",variant:"outline",radius:"rounded",value:e,onChange:t=>{L().objects.setValues({textAlign:t}),D().setDirty(!0)},children:[x.jsx(je,{value:"left",children:x.jsx(BL,{})}),x.jsx(je,{value:"center",children:x.jsx(NL,{})}),x.jsx(je,{value:"right",children:x.jsx(zL,{})})]})}function UL({children:e,className:t}){const{selectedTab:n,isLazy:r}=E.useContext(La),i=E.Children.toArray(e).filter(d=>!!d);let o;if(r){const d=i[n];o=E.isValidElement(d)?E.cloneElement(i[n],{index:n}):null}else o=i.map((d,a)=>{if(E.isValidElement(d)){const s=a===n;return E.cloneElement(d,{index:a,"aria-hidden":!s,className:s?d.props.className:le(d.props.className,"hidden")})}return null});return x.jsx("div",{className:t,children:o})}function zi({className:e,children:t,index:n,...r}){const{id:i}=E.useContext(La),[o,d]=E.useState(0),a=E.useRef(null);return Qt(()=>{if(a!=null&&a.current){const s=()=>{const h=sr(a.current,{tabbable:!0});d(h.nextNode()?void 0:0)};s();const u=new MutationObserver(s);return u.observe(a.current,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["tabIndex","disabled"]}),()=>{u.disconnect()}}},[a]),x.jsx("div",{tabIndex:o,ref:a,id:`${i}-${n}-tabpanel`,"aria-labelledby":`${i}-${n}-tab`,className:le(e,"focus-visible:outline-primary-light"),role:"tabpanel",...r,children:t})}const B_=[{type:"linear",coords:{x1:-80,y1:0,x2:80,y2:0},colorStops:[{color:"#ffe47b",offset:0},{color:"rgb(111,154,211)",offset:1}]},{type:"linear",coords:{x1:0,y1:-120,x2:0,y2:120},colorStops:[{color:"#ff4040",offset:0},{color:"#e6399b",offset:1}]},{type:"linear",coords:{x1:-90,y1:-90,x2:90,y2:90},colorStops:[{offset:0,color:"rgb(166,111,213)"},{offset:.5,color:"rgba(106, 72, 215, 0.5)"},{offset:1,color:"#200772"}]},{type:"radial",coords:{r1:100,r2:10,x1:0,y1:0,x2:0,y2:0},colorStops:[{offset:0,color:"#FF4F4F"},{offset:1,color:"rgb(255, 239, 64)"}]},{type:"radial",coords:{r1:100,r2:10,x1:0,y1:0,x2:20,y2:20},colorStops:[{offset:0,color:"#ffe47b"},{offset:.5,color:"rgb(111,154,211)"},{offset:1,color:"rgb(166,111,213)"}]},{type:"radial",coords:{r1:50,r2:80,x1:45,y1:45,x2:52,y2:50},colorStops:[{offset:0,color:"rgb(155, 237, 0)"},{offset:1,color:"rgba(0, 164, 128,0.4)"}]},{type:"linear",coords:{x1:-90,y1:-90,x2:90,y2:90},colorStops:[{offset:0,color:"#9ecb2d"},{offset:.5,color:"#72aa00"},{offset:1,color:"#bfd255"}]},{type:"radial",coords:{r1:100,r2:50,x1:30,y1:0,x2:0,y2:0},colorStops:[{offset:0,color:"#aebcbf"},{offset:1,color:"#0a0809"}]},{type:"linear",coords:{x1:-80,y1:0,x2:80,y2:0},colorStops:[{offset:0,color:"#ffffff"},{offset:1,color:"#f6f6f6"}]},{type:"linear",coords:{x1:0,y1:-120,x2:0,y2:120},colorStops:[{offset:0,color:"#fefcea"},{offset:1,color:"#f1da36"}]},{type:"linear",coords:{x1:-90,y1:-90,x2:90,y2:90},colorStops:[{offset:0,color:"rgb(166,111,213)"},{offset:.5,color:"rgba(106, 72, 215, 0.5)"},{offset:1,color:"#ff1a00"}]},{type:"linear",coords:{x1:0,y1:-120,x2:0,y2:120},colorStops:[{offset:0,color:"#b7deed"},{offset:1,color:"#21b4e2"}]},{type:"linear",coords:{x1:-80,y1:100,x2:80,y2:-100},colorStops:[{offset:0,color:"#ffe47b"},{offset:1,color:"rgb(111,154,211)"}]}],XL=ve(x.jsx("path",{d:"M19.51 3.08 3.08 19.51c.09.34.27.65.51.9.25.24.56.42.9.51L20.93 4.49c-.19-.69-.73-1.23-1.42-1.41zM11.88 3 3 11.88v2.83L14.71 3h-2.83zM5 3c-1.1 0-2 .9-2 2v2l4-4H5zm14 18c.55 0 1.05-.22 1.41-.59.37-.36.59-.86.59-1.41v-2l-4 4h2zm-9.71 0h2.83L21 12.12V9.29L9.29 21z"}),"TextureOutlined"),YL=ve(x.jsx("path",{d:"M11 9h2v2h-2V9zm-2 2h2v2H9v-2zm4 0h2v2h-2v-2zm2-2h2v2h-2V9zM7 9h2v2H7V9zm12-6H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 18H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2zm2-7h-2v2h2v2h-2v-2h-2v2h-2v-2h-2v2H9v-2H7v2H5v-2h2v-2H5V5h14v6z"}),"GradientOutlined"),GL=ve(x.jsx("path",{d:"M18 20H4V6h9V4H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-9h-2v9zm-7.79-3.17-1.96-2.36L5.5 18h11l-3.54-4.71zM20 4V1h-2v3h-3c.01.01 0 2 0 2h3v2.99c.01.01 2 0 2 0V6h3V4h-3z"}),"AddPhotoAlternateOutlined");function N_({property:e}){const{trans:t}=qr(),n=fe(r=>r.objects.active.editableProps[e]);return x.jsxs("div",{className:"flex items-center justify-center gap-14",children:[x.jsx(Ri,{className:"flex-shrink-0",size:"xs","aria-label":t({message:"Color"}),value:typeof n=="string"?n:Of.fill,onChange:r=>{L().objects.setValues({[e]:r}),D().setDirty(!0)}}),x.jsx($_,{type:"gradient",property:e}),x.jsx($_,{type:"texture",property:e})]})}function $_({type:e,property:t}){const n=e==="texture"?x.jsx(XL,{}):x.jsx(YL,{});return x.jsx(E.Fragment,{children:x.jsxs(Nc,{type:"popover",children:[x.jsx(_t,{className:"flex-shrink-0",id:`${e}-panel-trigger`,variant:"outline",size:"xs",startIcon:n,endIcon:x.jsx(Gg,{}),children:x.jsx("span",{className:"capitalize",children:e==="gradient"?x.jsx(be,{message:"Gradient"}):x.jsx(be,{message:"Texture"})})}),x.jsx(Bc,{size:"auto",children:x.jsx("div",{className:"grid gap-8 grid-cols-5-min-content p-10 bg-paper rounded shadow-md",children:x.jsx(KL,{property:t,type:e})})})]})})}function KL({type:e,property:t}){const{close:n}=M_(),r=Array.from(Array(e==="gradient"?B_.length:28).keys()),i="w-56 h-56 bg border shadow-sm hover:scale-110",o=r.map(d=>{const a=Jt(`images/${e}s/${d}.png`);return x.jsx(nr,{radius:"rounded",className:i,style:{backgroundImage:`url(${a})`},"aria-label":`Select ${e} #${d}`,onClick:async()=>{n();const s=e==="gradient"?new we.fabric.Gradient(B_[d]):await V_(a);L().objects.setValues({[t]:s}),D().setDirty(!0)}},d)});return e==="texture"&&o.unshift(x.jsx(qL,{property:t,className:i},"upload-btn")),x.jsx(E.Fragment,{children:o})}function qL({className:e,property:t}){const{close:n}=M_();return x.jsx(nr,{radius:"rounded",className:e,"aria-label":"Upload an image",onClick:async()=>{const r=await L().import.openUploadWindow();if(n(),r){const i=await V_(await r.data);L().objects.setValues({[t]:i})}},children:x.jsx(GL,{className:"icon-md"})})}function V_(e){return new Promise(t=>{we.fabric.util.loadImage(e,n=>{const r=new we.fabric.Pattern({source:n,repeat:"repeat"});t(r)})})}function ZL(){const e=fe(t=>t.objects.active.editableProps.opacity);return x.jsx(Li,{className:"max-w-240 w-full mx-auto","aria-label":"Opacity",value:e,minValue:.1,step:.1,maxValue:1,onChange:t=>{L().objects.setValues({opacity:t}),D().setDirty(!0)}})}function QL(){const{trans:e}=qr(),t=fe(r=>r.objects.active.editableProps.stroke),n=fe(r=>r.objects.active.editableProps.strokeWidth);return x.jsxs("div",{className:"flex items-center gap-40",children:[x.jsx(Ri,{className:"ml-auto flex-shrink-0",size:"xs",value:t,"aria-label":e({message:"Outline Color"}),onChange:r=>{L().objects.setValues({stroke:r}),D().setDirty(!0)}}),x.jsx(Li,{"aria-label":"Outline Width",className:"max-w-240 mr-auto flex-shrink-0",value:n,onChange:r=>{L().objects.setValues({strokeWidth:r}),D().setDirty(!0)}})]})}const JL=ve(x.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4.86 8.86-3 3.87L9 13.14 6 17h12l-3.86-5.14z"}),"ImageOutlined");function ez(){return x.jsx("div",{className:"flex justify-center",children:x.jsx(_t,{type:"button",variant:"outline",size:"xs",startIcon:x.jsx(JL,{}),radius:"rounded-full",onClick:async()=>{const e=await L().import.openUploadWindow();if(e){const t=L().objects.getActive();if(t&&"setSrc"in t){const n=await e.data;t.setSrc(n,()=>{qx({src:n}),L().canvas.render()})}}},children:x.jsx(be,{message:"Replace Image"})})})}const H_={color:"rgba(0, 0, 0, 0.6)",blur:3,offsetX:-1,offsetY:0};function tz(){const{trans:e}=qr(),t=fe(n=>n.objects.active.editableProps.shadow)||H_;return x.jsxs("div",{className:"flex items-center gap-40",children:[x.jsx(Ri,{className:"ml-auto flex-shrink-0",value:t.color,size:"xs","aria-label":e({message:"Shadow Color"}),onChange:n=>{L().objects.setValues({shadow:W_({color:n})}),D().setDirty(!0)}}),x.jsx(Li,{"aria-label":"Shadow Blur",className:"max-w-240 mr-auto flex-shrink-0",defaultValue:t.blur,onChange:n=>{L().objects.setValues({shadow:W_({blur:n})}),D().setDirty(!0)}})]})}function W_(e){var n;const t=(n=L().objects.getActive())==null?void 0:n.shadow;return t?(Object.entries(e).forEach(([r,i])=>{t[r]=i}),t):new we.fabric.Shadow({...H_,...e})}function Bi({index:e,className:t,isDisabled:n,children:r,padding:i,elementType:o="button",to:d,relative:a,width:s="min-w-min"}){const{selectedTab:u,setSelectedTab:h,tabsRef:l,size:f="md",id:c}=E.useContext(La),p=e===u,m=$8(),g=i||(f==="sm"?"px-12":"px-18"),v=le("tracking-wide overflow-hidden capitalize text-sm flex items-center justify-center outline-none transition-colors","focus-visible:ring focus-visible:ring-2 ring-inset rounded whitespace-nowrap cursor-pointer",s,nz({isDisabled:n,isSelected:p}),t,f==="md"&&`${g} h-48`,f==="sm"&&`${g} h-32`,n&&"pointer-events-none"),y=C=>{switch(C.key){case"ArrowLeft":m==null||m.focusPrevious();break;case"ArrowRight":m==null||m.focusNext();break;case"Home":m==null||m.focusFirst();break;case"End":m==null||m.focusLast();break}},b=p?0:-1,w=o;return x.jsx(w,{disabled:n,id:`${c}-${e}-tab`,"aria-controls":`${c}-${e}-tabpanel`,type:"button",role:"tab","aria-selected":p,tabIndex:n?void 0:b,onKeyDown:y,onClick:()=>{h(e)},to:d,relative:a,className:v,ref:C=>{l.current&&C&&(l.current[e]=C)},children:r})}function nz({isDisabled:e,isSelected:t}){return e?"text-disabled cursor-default":t?"text-primary":"text-muted hover:text-main"}function U_(){const e=fe(t=>t.objects.active);return x.jsxs(IL,{size:"sm",className:"pb-18 pt-6",children:[x.jsxs(jL,{center:!0,children:[e.isText&&x.jsx(Bi,{children:x.jsx(be,{message:"Font"})}),!e.isImage&&x.jsx(Bi,{children:x.jsx(be,{message:"Color"})}),!e.isImage&&x.jsx(Bi,{children:x.jsx(be,{message:"Background"})}),e.isImage&&x.jsx(Bi,{children:x.jsx(be,{message:"Image"})}),x.jsx(Bi,{children:x.jsx(be,{message:"Opacity"})}),x.jsx(Bi,{children:x.jsx(be,{message:"Outline"})}),x.jsx(Bi,{children:x.jsx(be,{message:"Shadow"})})]}),x.jsxs(UL,{className:"pt-16 h-50",children:[e.isText&&x.jsx(zi,{children:x.jsx($L,{})},"font"),!e.isImage&&x.jsx(zi,{children:x.jsx(N_,{property:"fill"})}),!e.isImage&&x.jsx(zi,{children:x.jsx(N_,{property:"backgroundColor"})}),e.isImage&&x.jsx(zi,{children:x.jsx(ez,{})}),x.jsx(zi,{children:x.jsx(ZL,{})}),x.jsx(zi,{children:x.jsx(QL,{})}),x.jsx(zi,{children:x.jsx(tz,{})})]})]})}function rz(){const t=!Ec()&&x.jsx(_t,{size:"sm",color:"primary",variant:"outline",onClick:()=>{L().text.add(),D().setDirty(!0)},children:x.jsx(be,{message:"New Text"})});return x.jsx(Rg,{actionBtn:t,children:x.jsx(U_,{})})}const iz=ve(x.jsx("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownwardOutlined"),X_=500,Rn={};let za=!1,lr=null,Ni=null;const Y_=e=>{var t;for(const n in Rn)n!==e&&((t=Rn[n])==null||t.call(Rn,!0),delete Rn[n])},sz=E.forwardRef(({children:e,label:t,placement:n="top",offset:r=10,variant:i="neutral",delay:o=1500,isDisabled:d,usePortal:a=!0,...s},u)=>{const{x:h,y:l,reference:f,strategy:c,arrowRef:p,arrowStyle:m,refs:g}=hg({placement:n,offset:r,ref:u,showArrow:!0}),[v,y]=E.useState(!1),b=E.useId(),w=E.useRef(),C=()=>{clearTimeout(w.current),w.current=void 0,Y_(b),Rn[b]=_,za=!0,y(!0),lr&&(clearTimeout(lr),lr=null),Ni&&(clearTimeout(Ni),Ni=null)},_=E.useCallback(F=>{F?(clearTimeout(w.current),w.current=void 0,y(!1)):w.current||(w.current=setTimeout(()=>{w.current=void 0,y(!1)},X_)),lr&&(clearTimeout(lr),lr=null),za&&(Ni&&clearTimeout(Ni),Ni=setTimeout(()=>{delete Rn[b],Ni=null,za=!1},X_))},[b]),S=()=>{Y_(b),Rn[b]=_,!v&&!lr&&!za?lr=setTimeout(()=>{lr=null,za=!0,C()},o):v||C()},T=F=>{!F&&o>0&&!w.current?S():C()};E.useEffect(()=>()=>{clearTimeout(w.current),Rn[b]&&delete Rn[b]},[b]),E.useEffect(()=>{const F=$=>{$.key==="Escape"&&_(!0)};if(v)return document.addEventListener("keydown",F,!0),()=>{document.removeEventListener("keydown",F,!0)}},[v,_]);const I=x.jsx(er,{children:v&&x.jsxs(xt.div,{..._c,ref:g.setFloating,id:b,role:"tooltip",onPointerEnter:()=>{T(!0)},onPointerLeave:()=>{_()},className:le("z-tooltip my-4 max-w-240 break-words rounded px-8 py-4 text-xs text-white shadow",i==="positive"&&"bg-positive",i==="danger"&&"bg-danger",i==="neutral"&&"bg-toast"),style:{position:c,top:l??"",left:h??""},children:[x.jsx("div",{ref:p,className:"absolute h-8 w-8 rotate-45 bg-inherit",style:m}),t]})});return x.jsxs(E.Fragment,{children:[E.cloneElement(e,tr({"aria-describedby":v?b:void 0,ref:f,onPointerEnter:F=>{F.pointerType==="mouse"&&T()},onFocus:F=>{F.target.matches(":focus-visible")&&T(!0)},onPointerLeave:F=>{F.pointerType==="mouse"&&_()},onPointerDown:()=>{_(!0)},onBlur:()=>{_()},"aria-label":typeof t=="string"?t:t.props.message},s)),a?oi&&Is.createPortal(I,oi):I]})});function oz(){const e=fe(o=>o.activeToolOverlay),t=fe(o=>o.objects.active.id),n=az(e,t),[r,i]=E.useState(!0);return x.jsxs("div",{className:"relative z-tool-overlay text-sm",children:[n&&x.jsx("div",{className:le("absolute right-16 text-muted z-50 transition-all",!r&&"rotate-180",r?"-top-144":"-top-40"),children:x.jsx(sz,{label:r?x.jsx(be,{message:"Hide options"}):x.jsx(be,{message:"Show options"}),children:x.jsx(je,{variant:"outline",radius:"rounded-lg",size:"xs",onClick:()=>{i(!r)},children:x.jsx(iz,{})})})}),x.jsx(er,{children:n&&r&&x.jsx(xt.div,{initial:{y:0,opacity:0},animate:{y:"-100%",opacity:1},exit:{y:0,opacity:0},transition:{type:"tween",duration:.15},className:"absolute inset-x-0 gap-16 px-5vw bg bg-opacity-95 border-t",children:n},"tool-controls-overlay")})]})}function az(e,t){switch(e){case sn.Filter:return x.jsx(DL,{});case sn.Frame:return x.jsx(AL,{});case sn.Text:return t&&x.jsx(rz,{});case sn.ActiveObject:return t&&x.jsx(U_,{});default:return null}}const qg=ve(x.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.59-13L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41z"}),"CancelOutlined");function lz({filter:e}){const t=fe(d=>d.filter.applied.includes(e)),n=L().filter.hasOptions(e),r=le("block flex-shrink-0 rounded",{"text-primary border-primary":t}),i=z6[e],o=x.jsxs(E.Fragment,{children:[x.jsxs("div",{className:"relative",children:[x.jsx(uz,{filter:e}),t&&x.jsx(cz,{filter:e,hasOptions:n})]}),x.jsx("div",{className:"mt-4 text-center text-xs capitalize",children:i?x.jsx(be,{...i}):e})]});return t&&n?x.jsx("div",{className:r,children:o}):x.jsx(nr,{className:r,onClick:()=>{t?L().filter.remove(e):L().filter.apply(e)},children:o})}function uz({filter:e}){const t=fe(r=>r.filter.selected===e),n=le("m-auto w-96 h-56 border rounded object-cover",{shadow:t});return x.jsx("img",{src:Jt(`images/filter/${e}.jpg`),className:n,alt:""})}function cz({filter:e,hasOptions:t}){const n=x.jsx(je,{color:"primary",size:"md",onClick:()=>{L().filter.remove(e)},children:x.jsx(qg,{})});return x.jsxs("div",{className:"flex items-center justify-center bg-background/70 absolute inset-0 border-2 border-primary rounded",children:[t?n:x.jsx(qg,{className:"svg-icon icon-md"}),t&&x.jsx(fz,{filter:e,hasOptions:t})]})}function fz({filter:e,hasOptions:t}){return x.jsx(je,{color:"primary",size:"md",onClick:()=>{D().activeToolOverlay===sn.Filter&&D().filter.selected===e?D().setActiveTool(D().activeTool,null):D().filter.select(e,t)},children:x.jsx(o0,{})})}const $i=E.forwardRef(({children:e,className:t,gap:n="gap-10"},r)=>{const i=ce.Children.map(e,(o,d)=>ce.isValidElement(o)?ce.cloneElement(o,{isFirst:d===0,isLast:ce.Children.count(e)===d+1}):o);return x.jsx("div",{ref:r,className:le("tiny-scrollbar pb-4 overflow-x-auto relative flex items-center",n,t),children:i})});function ur({isFirst:e,isLast:t,children:n,className:r}){const i=le(r,"flex-shrink-0",{"ml-auto":e,"mr-auto":t});return x.jsx("div",{className:i,children:n})}function hz(){const e=fe(n=>{var r,i;return(i=(r=n.config.tools)==null?void 0:r.filter)==null?void 0:i.items})||[];E.useEffect(()=>{L().filter.syncState()},[]);const t=e.map(n=>x.jsx(ur,{children:x.jsx(lz,{filter:n})},n));return x.jsx($i,{children:t})}const dz=ve(x.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"}),"LockOutlined"),pz=ve(x.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h2c0-1.66 1.34-3 3-3s3 1.34 3 3v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"}),"LockOpenOutlined"),gz=ve(x.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlankOutlined"),mz=ve(x.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),G_=ve(x.jsx("path",{d:"M19,3H5C3.9,3,3,3.9,3,5v14c0,1.1,0.9,2,2,2h14c1.1,0,2-0.9,2-2V5C21,3.9,20.1,3,19,3z M17,13H7v-2h10V13z"}),"CheckBox"),vz=E.forwardRef((e,t)=>{const{size:n="md",children:r,className:i,icon:o,checkedIcon:d,disabled:a,isIndeterminate:s,errorMessage:u,invalid:h,orientation:l="horizontal",onChange:f,autoFocus:c,required:p,value:m,name:g,inputTestId:v}=e,y=Fi({...e,label:r}),b=o||gz,w=d||(s?G_:mz),C=Di(t);Og({autoFocus:c},C),E.useEffect(()=>{C.current&&(C.current.indeterminate=s||!1)});const[_,S]=$r(e.checked,e.defaultChecked||!1),T=E.useCallback(G=>{f==null||f(G),S(G.target.checked)},[f,S]),I=le("select-none",i,h&&"text-danger",!h&&a&&"text-disabled");let F,$=h?"text-danger":null;return s?(F=G_,$=$||"text-primary"):_?(F=w,$=$||"text-primary"):(F=b,$=$||"text-muted"),x.jsxs("div",{children:[x.jsx("label",{className:I,children:x.jsxs("div",{className:le("relative flex items-center",l==="vertical"&&"flex-col flex-col-reverse"),children:[x.jsx("input",{className:"absolute left-0 top-0 h-24 w-24 appearance-none overflow-hidden rounded outline-none ring-inset transition-shadow focus-visible:ring",type:"checkbox","aria-checked":s?"mixed":_,"aria-invalid":h||void 0,onChange:T,ref:C,required:p,disabled:a,value:m,name:g,"data-testid":v}),x.jsx(F,{size:n,className:le("pointer-events-none",a?"text-disabled":$)}),r&&x.jsx("div",{className:le("first-letter:capitalize",y.size.font,l==="vertical"?"mb-6":"ml-6"),children:r})]})}),u&&x.jsx("div",{className:y.error,children:u})]})});function yz(){const{trans:e}=qr(),{minWidth:t=50,minHeight:n=50,maxHeight:r=2400,maxWidth:i=2400}=fe(l=>{var f;return(f=l.config.tools)==null?void 0:f.resize})||{},o=fe(l=>l.original),d=fe(l=>l.resize.formValue);E.useEffect(()=>{D().resize.setFormValue({...o})},[o]),E.useEffect(()=>{D().setDirty(!0)},[]);const a=l=>{const f={...d,width:l};d.maintainAspect&&(f.height=uc(l,d.usePercentages)),D().resize.setFormValue(f)},s=l=>{const f={...d,height:l};l&&d.maintainAspect&&(f.width=Gp(l,d.usePercentages)),D().resize.setFormValue(f)},u=l=>{const f={...d,maintainAspect:l};l&&(f.height=uc(f.width,f.usePercentages)),D().resize.setFormValue(f)},h=l=>{l.preventDefault(),D().applyChanges()};return x.jsxs("form",{className:"flex items-center justify-center gap-16 w-full",onSubmit:h,children:[x.jsx(or,{type:"number",min:t,max:i,size:"sm",className:"w-full max-w-112",label:x.jsx(be,{message:"Width"}),value:d.width,onChange:l=>{a(l.target.valueAsNumber)}}),x.jsx("div",{className:"mt-24",children:x.jsx(vz,{size:"md",checked:d.maintainAspect,onChange:l=>{u(!d.maintainAspect)},"aria-label":e({message:"Maintain aspect ratio"}),checkedIcon:dz,icon:pz})}),x.jsx(or,{type:"number",min:n,max:r,size:"sm",className:"w-full max-w-112",label:x.jsx(be,{message:"Height"}),value:d.height,onChange:l=>{s(l.target.valueAsNumber)}}),x.jsx("button",{type:"submit",className:"hidden",children:x.jsx(be,{message:"Resize"})})]})}function bz(){const e=fe(i=>{var o,d;return(d=(o=i.config.tools)==null?void 0:o.crop)==null?void 0:d.presets})||[],t=fe(i=>i.crop.selectedAspectRatio),n=fe(i=>{var o,d;return(d=(o=i.config.tools)==null?void 0:o.crop)==null?void 0:d.allowCustomRatio})??!0,r=e.filter(i=>i.ratio||!i.ratio&&n).map(i=>x.jsx(ur,{children:x.jsxs(nr,{onClick:()=>L().crop.resetCropzone(i.ratio),className:"flex flex-col items-center justify-between cursor-pointer h-56",children:[x.jsx(wz,{preset:i,selectedRatio:t}),x.jsx(xz,{preset:i,selectedRatio:t})]})},i.ratio||i.name));return x.jsx($i,{gap:"gap-18",children:r})}function wz({preset:e,selectedRatio:t}){let n=40,r=30;if(e.ratio){const o=qp(e.ratio);({width:n,height:r}=Kp(o,n,r))}const i=le("border-2",{"border-dotted":e.ratio===null,"border-primary":t===e.ratio});return x.jsx("div",{style:{width:`${n}px`,height:`${r}px`},className:i})}function xz({preset:e,selectedRatio:t}){const n=le("mt-4 text-center text-xs",{"text-primary":t===e.ratio});return x.jsx("div",{className:n,children:e.name?x.jsx(be,{message:e.name}):e.ratio})}const K_=ve(x.jsx("path",{d:"M15 21h2v-2h-2v2zm4-12h2V7h-2v2zM3 5v14c0 1.1.9 2 2 2h4v-2H5V5h4V3H5c-1.1 0-2 .9-2 2zm16-2v2h2c0-1.1-.9-2-2-2zm-8 20h2V1h-2v22zm8-6h2v-2h-2v2zM15 5h2V3h-2v2zm4 8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2z"}),"FlipOutlined");function Cz(){return x.jsxs("div",{children:[x.jsx(je,{size:"sm",onClick:()=>{L().transform.flip("vertical"),D().setDirty(!0)},children:x.jsx(K_,{})}),x.jsx(je,{size:"sm",onClick:()=>{L().transform.flip("horizontal"),D().setDirty(!0)},children:x.jsx(K_,{className:"rotate-90"})})]})}const _z=ve(x.jsx("path",{d:"M7.11 8.53 5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47zM6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47zm1.01 5.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03L7.1 18.32zM13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93z"}),"RotateLeftOutlined"),Sz=ve(x.jsx("path",{d:"M15.55 5.55 11 1v3.07C7.06 4.56 4 7.92 4 12s3.05 7.44 7 7.93v-2.02c-2.84-.48-5-2.94-5-5.91s2.16-5.43 5-5.91V10l4.55-4.45zM19.93 11c-.17-1.39-.72-2.73-1.62-3.89l-1.42 1.42c.54.75.88 1.6 1.02 2.47h2.02zM13 17.9v2.02c1.39-.17 2.74-.71 3.9-1.61l-1.44-1.44c-.75.54-1.59.89-2.46 1.03zm3.89-2.42 1.42 1.41c.9-1.16 1.45-2.5 1.62-3.89h-2.02c-.14.87-.48 1.72-1.02 2.48z"}),"RotateRightOutlined");function kz(){return x.jsxs("div",{children:[x.jsx(je,{size:"sm",onClick:()=>{L().transform.rotateLeft(),D().setDirty(!0)},children:x.jsx(_z,{})}),x.jsx(je,{size:"sm",onClick:()=>{L().transform.rotateRight(),D().setDirty(!0)},children:x.jsx(Sz,{})})]})}function Ez(){return x.jsxs("div",{className:"flex items-center justify-center gap-16",children:[x.jsx(Cz,{}),x.jsx(Tz,{}),x.jsx(kz,{})]})}function Tz(){const e=E.useRef(null),{domProps:t,groupId:n,thumbIds:r,trackRef:i,getThumbValueLabel:o}=F_({minValue:-45,maxValue:45,step:1,defaultValue:[D().crop.straightenAngle],onChange:d=>{const a=d[0];L().transform.straighten(a),D().crop.setTransformAngle(a),D().setDirty(!0),e.current.style.transform=`translateX(${a}px)`}});return x.jsx("div",{id:n,role:"group",className:"flex-auto flex-shrink-0 max-w-320 touch-none isolate",children:x.jsxs("div",{...t,ref:i,className:"h-36 relative",children:[x.jsxs("output",{htmlFor:r[0],"aria-live":"off",className:"absolute left-1/2 top-1/2 w-40 text-center bg -translate-x-1/2 -translate-y-1/2 z-10",children:[o(0),""]}),x.jsx(Oz,{ref:e})]})})}const Oz=ce.forwardRef((e,t)=>{const n=[...Array(80).keys()],r=n.map(i=>x.jsx("circle",{cx:2+i*10,cy:"20",r:i%5?.75:2},i));return x.jsx("div",{className:"relative h-full cursor-pointer overflow-hidden",children:x.jsx("svg",{ref:t,style:{width:n.length*10},className:"absolute -left-80 h-full fill-current",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",children:r})})});function Pz(){return E.useEffect(()=>(D().setDirty(!0),L().frame.active.hide(),()=>{L().frame.active.show()}),[]),x.jsxs("div",{className:"pb-16",children:[x.jsx("div",{className:"mb-10",children:x.jsx(Ez,{})}),x.jsx(bz,{})]})}const Dz=ve(x.jsx("path",{d:"M 16 6 C 12.484375 6 9.273438 7.070313 6.90625 8.84375 C 4.539063 10.617188 3 13.15625 3 16 C 3 18.84375 4.539063 21.382813 6.90625 23.15625 C 9.273438 24.929688 12.484375 26 16 26 C 19.515625 26 22.726563 24.929688 25.09375 23.15625 C 27.460938 21.382813 29 18.84375 29 16 C 29 13.15625 27.460938 10.617188 25.09375 8.84375 C 22.726563 7.070313 19.515625 6 16 6 Z M 16 8 C 19.109375 8 21.898438 8.957031 23.875 10.4375 C 25.851563 11.917969 27 13.875 27 16 C 27 18.125 25.851563 20.082031 23.875 21.5625 C 21.898438 23.042969 19.109375 24 16 24 C 12.890625 24 10.101563 23.042969 8.125 21.5625 C 6.148438 20.082031 5 18.125 5 16 C 5 13.875 6.148438 11.917969 8.125 10.4375 C 10.101563 8.957031 12.890625 8 16 8 Z "})),Az=ve(x.jsx("path",{d:"M 16 4 C 9.382813 4 4 9.382813 4 16 C 4 22.617188 9.382813 28 16 28 C 22.617188 28 28 22.617188 28 16 C 28 9.382813 22.617188 4 16 4 Z M 16 6 C 21.535156 6 26 10.464844 26 16 C 26 21.535156 21.535156 26 16 26 C 10.464844 26 6 21.535156 6 16 C 6 10.464844 10.464844 6 16 6 Z "})),Mz=ve(x.jsx("path",{d:"M 3 6 L 3 26 L 29 26 L 29 6 Z M 5 8 L 27 8 L 27 24 L 5 24 Z "})),jz=ve(x.jsx("path",{d:"M 16 4.90625 L 15.125 6.40625 L 4.71875 24.5 L 3.875 26 L 28.125 26 L 27.28125 24.5 L 16.875 6.40625 Z M 16 8.9375 L 24.65625 24 L 7.34375 24 Z "}));function Iz(){const t=(fe(n=>{var r,i;return(i=(r=n.config.tools)==null?void 0:r.shapes)==null?void 0:i.items})||[]).map(n=>x.jsx(ur,{children:x.jsx(je,{variant:"outline",radius:"rounded-2xl",size:"xl",onClick:()=>{L().shape.addBasicShape(n.name),D().setDirty(!0)},children:x.jsx(Fz,{shape:n})})},n.name));return x.jsx($i,{children:t})}function Fz({shape:e}){var t;return e.type==="Path"?x.jsx("svg",{className:"m-auto w-36 h-36",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 -100 512 700",children:x.jsx("path",{className:"fill-transparent stroke-current",d:(t=e.options)==null?void 0:t.path,strokeWidth:25})}):ce.cloneElement(Rz[e.name],{className:"w-30 h-30"})}const Rz={circle:x.jsx(Az,{viewBox:"0 0 32 32"}),square:x.jsx(Mz,{viewBox:"0 0 32 32"}),triangle:x.jsx(jz,{viewBox:"0 0 32 32"}),ellipse:x.jsx(Dz,{viewBox:"0 0 32 32"})};function Ba(e,t,n){let r=n.initialDeps??[],i;return()=>{var o,d,a,s;let u;n.key&&((o=n.debug)!=null&&o.call(n))&&(u=Date.now());const h=e();if(!(h.length!==r.length||h.some((c,p)=>r[p]!==c)))return i;r=h;let f;if(n.key&&((d=n.debug)!=null&&d.call(n))&&(f=Date.now()),i=t(...h),n.key&&((a=n.debug)!=null&&a.call(n))){const c=Math.round((Date.now()-u)*100)/100,p=Math.round((Date.now()-f)*100)/100,m=p/16,g=(v,y)=>{for(v=String(v);v.length<y;)v=" "+v;return v};console.info(`%c ${g(p,5)} /${g(c,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*m,120))}deg 100% 31%);`,n==null?void 0:n.key)}return(s=n==null?void 0:n.onChange)==null||s.call(n,i),i}}function Zg(e,t){if(e===void 0)throw new Error(`Unexpected undefined${t?`: ${t}`:""}`);return e}const Lz=(e,t)=>Math.abs(e-t)<1,zz=(e,t,n)=>{let r;return function(...i){e.clearTimeout(r),r=e.setTimeout(()=>t.apply(this,i),n)}},Bz=e=>e,Nz=e=>{const t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let i=t;i<=n;i++)r.push(i);return r},$z=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;const i=d=>{const{width:a,height:s}=d;t({width:Math.round(a),height:Math.round(s)})};if(i(n.getBoundingClientRect()),!r.ResizeObserver)return()=>{};const o=new r.ResizeObserver(d=>{const a=d[0];if(a!=null&&a.borderBoxSize){const s=a.borderBoxSize[0];if(s){i({width:s.inlineSize,height:s.blockSize});return}}i(n.getBoundingClientRect())});return o.observe(n,{box:"border-box"}),()=>{o.unobserve(n)}},q_={passive:!0},Vz=typeof window>"u"?!0:"onscrollend"in window,Hz=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;let i=0;const o=Vz?()=>{}:zz(r,()=>{t(i,!1)},e.options.isScrollingResetDelay),d=u=>()=>{i=n[e.options.horizontal?"scrollLeft":"scrollTop"],o(),t(i,u)},a=d(!0),s=d(!1);return s(),n.addEventListener("scroll",a,q_),n.addEventListener("scrollend",s,q_),()=>{n.removeEventListener("scroll",a),n.removeEventListener("scrollend",s)}},Wz=(e,t,n)=>{if(t!=null&&t.borderBoxSize){const r=t.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return Math.round(e.getBoundingClientRect()[n.options.horizontal?"width":"height"])},Uz=(e,{adjustments:t=0,behavior:n},r)=>{var i,o;const d=e+t;(o=(i=r.scrollElement)==null?void 0:i.scrollTo)==null||o.call(i,{[r.options.horizontal?"left":"top"]:d,behavior:n})};class Xz{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollDirection=null,this.scrollAdjustments=0,this.measureElementCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(i=>{i.forEach(o=>{this._measureElement(o.target,o)})}));return{disconnect:()=>{var i;return(i=r())==null?void 0:i.disconnect()},observe:i=>{var o;return(o=r())==null?void 0:o.observe(i,{box:"border-box"})},unobserve:i=>{var o;return(o=r())==null?void 0:o.unobserve(i)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,i])=>{typeof i>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Bz,rangeExtractor:Nz,onChange:()=>{},measureElement:Wz,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,...n}},this.notify=(n,r)=>{var i,o;const{startIndex:d,endIndex:a}=this.range??{startIndex:void 0,endIndex:void 0},s=this.calculateRange();(n||d!==(s==null?void 0:s.startIndex)||a!==(s==null?void 0:s.endIndex))&&((o=(i=this.options).onChange)==null||o.call(i,this,r))},this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.scrollElement=null},this._didMount=()=>(this.measureElementCache.forEach(this.observer.observe),()=>{this.observer.disconnect(),this.cleanup()}),this._willUpdate=()=>{var n;const r=this.options.getScrollElement();this.scrollElement!==r&&(this.cleanup(),this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this._scrollToOffset(this.scrollOffset,{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,i=>{this.scrollRect=i,this.notify(!1,!1)})),this.unsubs.push(this.options.observeElementOffset(this,(i,o)=>{this.scrollAdjustments=0,this.scrollDirection=o?this.scrollOffset<i?"forward":"backward":null,this.scrollOffset=i;const d=this.isScrolling;this.isScrolling=o,this.notify(d!==o,o)})))},this.getSize=()=>this.scrollRect[this.options.horizontal?"width":"height"],this.getMeasurementOptions=Ba(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey],(n,r,i,o)=>(this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:i,getItemKey:o}),{key:!1}),this.getFurthestMeasurement=(n,r)=>{const i=new Map,o=new Map;for(let d=r-1;d>=0;d--){const a=n[d];if(i.has(a.lane))continue;const s=o.get(a.lane);if(s==null||a.end>s.end?o.set(a.lane,a):a.end<s.end&&i.set(a.lane,!0),i.size===this.options.lanes)break}return o.size===this.options.lanes?Array.from(o.values()).sort((d,a)=>d.end===a.end?d.index-a.index:d.end-a.end)[0]:void 0},this.getMeasurements=Ba(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:i,getItemKey:o},d)=>{const a=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const s=this.measurementsCache.slice(0,a);for(let u=a;u<n;u++){const h=o(u),l=this.options.lanes===1?s[u-1]:this.getFurthestMeasurement(s,u),f=l?l.end+this.options.gap:r+i,c=d.get(h),p=typeof c=="number"?c:this.options.estimateSize(u),m=f+p,g=l?l.lane:u%this.options.lanes;s[u]={index:u,start:f,size:p,end:m,key:h,lane:g}}return this.measurementsCache=s,s},{key:!1,debug:()=>this.options.debug}),this.calculateRange=Ba(()=>[this.getMeasurements(),this.getSize(),this.scrollOffset],(n,r,i)=>this.range=n.length>0&&r>0?Yz({measurements:n,outerSize:r,scrollOffset:i}):null,{key:!1,debug:()=>this.options.debug}),this.getIndexes=Ba(()=>[this.options.rangeExtractor,this.calculateRange(),this.options.overscan,this.options.count],(n,r,i,o)=>r===null?[]:n({startIndex:r.startIndex,endIndex:r.endIndex,overscan:i,count:o}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,i=n.getAttribute(r);return i?parseInt(i,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const i=this.measurementsCache[this.indexFromElement(n)];if(!i||!n.isConnected){this.measureElementCache.forEach((a,s)=>{a===n&&(this.observer.unobserve(n),this.measureElementCache.delete(s))});return}const o=this.measureElementCache.get(i.key);o!==n&&(o&&this.observer.unobserve(o),this.observer.observe(n),this.measureElementCache.set(i.key,n));const d=this.options.measureElement(n,r,this);this.resizeItem(i,d)},this.resizeItem=(n,r)=>{const i=this.itemSizeCache.get(n.key)??n.size,o=r-i;o!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(n,o,this):n.start<this.scrollOffset+this.scrollAdjustments)&&this._scrollToOffset(this.scrollOffset,{adjustments:this.scrollAdjustments+=o,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(n.index),this.itemSizeCache=new Map(this.itemSizeCache.set(n.key,r)),this.notify(!0,!1))},this.measureElement=n=>{n&&this._measureElement(n,void 0)},this.getVirtualItems=Ba(()=>[this.getIndexes(),this.getMeasurements()],(n,r)=>{const i=[];for(let o=0,d=n.length;o<d;o++){const a=n[o],s=r[a];i.push(s)}return i},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();return Zg(r[Z_(0,r.length-1,i=>Zg(r[i]).start,n)])},this.getOffsetForAlignment=(n,r)=>{const i=this.getSize();r==="auto"&&(n<=this.scrollOffset?r="start":n>=this.scrollOffset+i?r="end":r="start"),r==="start"?n=n:r==="end"?n=n-i:r==="center"&&(n=n-i/2);const o=this.options.horizontal?"scrollWidth":"scrollHeight",a=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[o]:this.scrollElement[o]:0)-this.getSize();return Math.max(Math.min(a,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const i=Zg(this.getMeasurements()[n]);if(r==="auto")if(i.end>=this.scrollOffset+this.getSize()-this.options.scrollPaddingEnd)r="end";else if(i.start<=this.scrollOffset+this.options.scrollPaddingStart)r="start";else return[this.scrollOffset,r];const o=r==="end"?i.end+this.options.scrollPaddingEnd:i.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(o,r),r]},this.isDynamicMode=()=>this.measureElementCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(n,{align:r="start",behavior:i}={})=>{this.cancelScrollToIndex(),i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:i})},this.scrollToIndex=(n,{align:r="auto",behavior:i}={})=>{n=Math.max(0,Math.min(n,this.options.count-1)),this.cancelScrollToIndex(),i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const[o,d]=this.getOffsetForIndex(n,r);this._scrollToOffset(o,{adjustments:void 0,behavior:i}),i!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.measureElementCache.has(this.options.getItemKey(n))){const[s]=this.getOffsetForIndex(n,d);Lz(s,this.scrollOffset)||this.scrollToIndex(n,{align:d,behavior:i})}else this.scrollToIndex(n,{align:d,behavior:i})}))},this.scrollBy=(n,{behavior:r}={})=>{this.cancelScrollToIndex(),r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.scrollOffset+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let i;return r.length===0?i=this.options.paddingStart:i=this.options.lanes===1?((n=r[r.length-1])==null?void 0:n.end)??0:Math.max(...r.slice(-this.options.lanes).map(o=>o.end)),i-this.options.scrollMargin+this.options.paddingEnd},this._scrollToOffset=(n,{adjustments:r,behavior:i})=>{this.options.scrollToFn(n,{behavior:i,adjustments:r},this)},this.measure=()=>{var n,r;this.itemSizeCache=new Map,(r=(n=this.options).onChange)==null||r.call(n,this,!1)},this.setOptions(t),this.scrollRect=this.options.initialRect,this.scrollOffset=typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset,this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(n=>{this.itemSizeCache.set(n.key,n.size)}),this.notify(!1,!1)}}const Z_=(e,t,n,r)=>{for(;e<=t;){const i=(e+t)/2|0,o=n(i);if(o<r)e=i+1;else if(o>r)t=i-1;else return i}return e>0?e-1:0};function Yz({measurements:e,outerSize:t,scrollOffset:n}){const r=e.length-1,o=Z_(0,r,a=>e[a].start,n);let d=o;for(;d<r&&e[d].end<n+t;)d++;return{startIndex:o,endIndex:d}}const Gz=typeof document<"u"?E.useLayoutEffect:E.useEffect;function Kz(e){const t=E.useReducer(()=>({}),{})[1],n={...e,onChange:(i,o)=>{var d;o?Is.flushSync(t):t(),(d=e.onChange)==null||d.call(e,i,o)}},[r]=E.useState(()=>new Xz(n));return r.setOptions(n),E.useEffect(()=>r._didMount(),[]),Gz(()=>r._willUpdate()),r}function qz(e){return Kz({observeElementRect:$z,observeElementOffset:Hz,scrollToFn:Uz,...e})}function Q_(){const e=fe(t=>{var n;return(n=t.config.ui)==null?void 0:n.activeTheme});return fe(t=>{var n;return(((n=t.config.ui)==null?void 0:n.themes)||[]).find(r=>r.name===e)})}function Zz({category:e}){const t=Q_(),n=e.name,r=e.list?e.list:Array.from(Array(e.items).keys()),i=E.useRef(null),o=qz({horizontal:!0,count:r.length,getScrollElement:()=>i.current,estimateSize:E.useCallback(()=>52,[]),overscan:5});return E.useEffect(()=>{o.scrollToIndex(0)},[n]),x.jsx(E.Fragment,{children:x.jsx("div",{ref:i,className:"tiny-scrollbar overflow-x-auto overflow-y-hidden",style:{height:"52px"},children:x.jsx("div",{className:"h-full relative mx-auto",style:{width:`${o.getTotalSize()}px`},children:o.getVirtualItems().map(d=>{const a=`${r[d.index]}`;return x.jsx("div",{className:"absolute top-0 left-0 h-full",style:{width:`${d.size}px`,transform:`translateX(${d.start}px)`},children:x.jsx(_t,{variant:"outline",radius:"rounded-xl",size:"md",equalWidth:!0,onClick:async()=>{await L().shape.addSticker(e.name,a),D().setDirty(!0)},children:x.jsx("img",{className:le("m-auto m-auto w-28 h-28",e.invertPreview&&(t==null?void 0:t.isDark)&&"invert"),src:Zp(e,a),alt:a})})},d.index)})})})})}function Qz(){const e=fe(i=>{var o,d;return(d=(o=i.config.tools)==null?void 0:o.stickers)==null?void 0:d.items})||[],[t,n]=E.useState(e[0]),r=e.map(i=>{const o=t===i,d=_k[i.name];return x.jsx(_t,{size:"xs",color:o?"primary":null,value:i,children:x.jsx("span",{className:"capitalize",children:d?x.jsx(be,{...d}):i.name})},i.name)});return x.jsxs("div",{className:"h-92",children:[x.jsx("div",{className:"mb-10 w-full hide-scrollbar overflow-x-auto overflow-y-hidden flex",children:x.jsx(Tc,{value:t,onChange:i=>n(i),variant:"outline",radius:"rounded-full",className:"mx-auto",children:r})}),t&&x.jsx(Zz,{category:t})]})}function Jz(){const e=fe(r=>{var i,o;return(o=(i=r.config.tools)==null?void 0:i.frame)==null?void 0:o.items})||[],t=fe(r=>r.frame.active);E.useEffect(()=>{D().frame.active&&D().frame.showOptionsPanel()},[]);const n=e.map(r=>{const i=Jt(`images/frames/${r.name}/thumbnail.png`),o=(t==null?void 0:t.name)===r.name,d=o?"border-primary":"";return x.jsx(ur,{children:x.jsxs("button",{type:"button",className:`border-2 overflow-hidden relative rounded border cursor-pointer ${d}`,onClick:()=>{D().setDirty(!0),o?L().frame.remove():L().frame.add(r.name)},children:[o&&x.jsx(eB,{}),x.jsx("img",{draggable:"false",className:"w-64 h-64",src:i,alt:r.name})]})},r.name)});return x.jsx($i,{children:n})}function eB(){return x.jsx("span",{className:"bg-background/70 absolute inset-0 text-primary",children:x.jsx(qg,{className:"svg-icon icon-md absolute inset-0 block m-auto"})})}function tB(){const e=fe(n=>{var r,i;return(i=(r=n.config.tools)==null?void 0:r.text)==null?void 0:i.items});E.useEffect(()=>{e&&e2(e,{prefixSrc:Jt,id:"pixie-fonts"}).catch(()=>{})},[e]),E.useEffect(()=>{L().text.selectOrAddText()&&D().setDirty(!0)},[]);const t=(e||[]).map(n=>x.jsx(ur,{children:x.jsx(nB,{fontConfig:n})},n.family));return x.jsx($i,{className:"pt-6",children:t})}function nB({fontConfig:e}){var r;const t=fe(i=>i.objects.active.editableProps.fontFamily),n=le("block px-6 w-110 h-68 text-sm bg border rounded-2xl",{"border-primary":t===e.family,"text-primary":t===e.family});return x.jsx("button",{type:"button",className:n,style:{fontFamily:e.family.includes('"')?e.family:`"${e.family}"`,fontWeight:((r=e.descriptors)==null?void 0:r.weight)||"normal"},onClick:async()=>{L().text.selectOrAddText(),D().setDirty(!0),L().objects.setValues({fontFamily:e.family})},children:e.family})}const rB=ve(x.jsx("path",{d:"M290.7 57.4L57.4 290.7c-25 25-25 65.5 0 90.5l80 80c12 12 28.3 18.7 45.3 18.7H288h9.4H512c17.7 0 32-14.3 32-32s-14.3-32-32-32H387.9L518.6 285.3c25-25 25-65.5 0-90.5L381.3 57.4c-25-25-65.5-25-90.5 0zM297.4 416H288l-105.4 0-80-80L227.3 211.3 364.7 348.7 297.4 416z"}),"EraserFA","0 0 576 512");function iB(){return E.useEffect(()=>(L().draw.enable(),()=>{L().draw.disable()}),[]),x.jsxs($i,{gap:"gap-16",children:[x.jsx(ur,{children:x.jsx(Ri,{size:"sm",label:x.jsx(be,{message:"Brush Color"}),value:L().draw.currentBrush.color,onChange:e=>{L().draw.setBrushColor(e)}})}),x.jsx(ur,{children:x.jsx(oB,{})}),x.jsx(ur,{children:x.jsx(sB,{})})]})}function sB(){const e=fe(r=>{var i,o;return(o=(i=r.config.tools)==null?void 0:i.draw)==null?void 0:o.brushSizes})||[],[t,n]=E.useState(L().draw.currentBrush.width);return x.jsx(Kg,{selectionMode:"single",selectedValue:t,onSelectionChange:r=>{n(r),L().draw.setBrushSize(r)},size:"sm",label:x.jsx(be,{message:"Brush Size"}),children:e.map(r=>x.jsx(fc,{value:r,children:x.jsxs("div",{className:"flex items-center",children:[x.jsx("div",{className:"flex-shrink-0 mr-8 border-[3px] rounded-full",style:{width:`${r}px`,height:`${r}px`}}),r]})},r))})}function oB(){const e=fe(i=>{var o,d;return(d=(o=i.config.tools)==null?void 0:o.draw)==null?void 0:d.brushTypes})||[],t=Q_(),[n,r]=E.useState(L().draw.currentBrush.type);return x.jsx(Kg,{selectionMode:"single",selectedValue:n,onSelectionChange:i=>{r(i),L().draw.setBrushType(i)},size:"sm",label:x.jsx(be,{message:"Brush Type"}),children:e.map(i=>x.jsx(fc,{value:i,children:x.jsxs("div",{className:"flex items-center",children:[i==="EraserBrush"?x.jsx(rB,{className:"mr-8"}):x.jsx("img",{className:"flex-shrink-0 mr-8 w-24 h-24",src:aB(i,t==null?void 0:t.isDark),alt:""}),x.jsx(be,{message:i.replace(/([A-Z])/g," $1").trim()})]})},i))})}function aB(e,t=!1){const n=e.replace("Brush","").toLowerCase();return Jt(`images/brushes/${t?"white":"black"}/${n}.png`)}function lB(){const{trans:e}=qr(),t=fe(n=>n.corners.radius);return E.useEffect(()=>(D().setDirty(!0),L().corners.showPreview(),()=>L().corners.hidePreview()),[]),x.jsx("div",{className:"max-w-320 mx-auto",children:x.jsx(Li,{minValue:1,maxValue:300,label:e({message:"Radius"}),getValueLabel:n=>`${n}px`,onChange:n=>{L().corners.updatePreview(n),D().corners.setRadius(n)},value:t})})}const J_={initial:{y:"130%",opacity:0},animate:{y:0,opacity:1},exit:{y:"130%",opacity:0,left:0,position:"absolute",overflowY:"hidden"},transition:{type:"tween",duration:.15}};function uB({activeTool:e}){const t=cB(e);return x.jsx(xt.div,{className:"relative h-full w-full text-sm bg select-none overflow-hidden",...J_,children:t})}function cB(e){switch(e){case De.FILTER:return x.jsx(hz,{});case De.RESIZE:return x.jsx(yz,{});case De.CROP:return x.jsx(Pz,{});case De.DRAW:return x.jsx(iB,{});case De.TEXT:return x.jsx(tB,{});case De.SHAPES:return x.jsx(Iz,{});case De.STICKERS:return x.jsx(Qz,{});case De.FRAME:return x.jsx(Jz,{});case De.CORNERS:return x.jsx(lB,{});default:return null}}function eS({className:e}){const t=fe(n=>n.activeTool);return x.jsx("nav",{className:le("z-navbar min-h-86 flex-shrink-0 px-16 relative overflow-hidden",e),children:x.jsx(er,{initial:!1,children:t?x.jsx(uB,{activeTool:t},"tool-controls"):x.jsx(fB,{},"nav-items")})})}function fB(){const e=fe(t=>{var n,r;return(r=(n=t.config.ui)==null?void 0:n.nav)==null?void 0:r.items})||[];return x.jsx(xt.div,{className:"w-full h-full bg-inherit",...J_,children:x.jsx($i,{children:e.map(t=>x.jsx(ur,{children:x.jsx(hB,{item:t})},t.name))})})}function hB({item:e}){const t=()=>{typeof e.action=="string"?Yf(e.action):typeof e.action=="function"&&e.action(D().editor)},n=$k[e.name];return x.jsxs(nr,{variant:"outline",color:"paper",className:"flex-col flex-shrink-0 w-68 h-68",radius:"rounded-2xl",onClick:t,children:[x.jsx("div",{className:"mb-1",children:x.jsx(Pg,{className:"icon-md",icon:e.icon})}),x.jsx("div",{className:"mt-6 text-xs capitalize max-w-[90%] overflow-hidden overflow-ellipsis",children:n?x.jsx(be,{...n}):e.name})]})}function dB(){const e=fe(n=>n.history.items),t=fe(n=>n.history.pointer);return x.jsxs(xt.div,{..._c,className:"absolute bottom-20 right-20 w-224 max-w-[calc(100%-40px)] max-h-[calc(100%-40px)] bg-paper shadow-xl border focus:outline-none rounded overflow-hidden",children:[x.jsxs("div",{className:"px-10 py-2 mb-4 font-medium text-sm border-b flex items-center",children:[x.jsx(be,{message:"History"}),x.jsx(je,{size:"xs",className:"ml-auto flex-shrink-0",onClick:()=>{D().togglePanel("history",!1)},children:x.jsx(Ur,{})})]}),x.jsx("div",{className:"p-10",children:e.map(n=>{const r=n.id===e[t].id,i=mr[n.name],o=i.icon&&ce.createElement(i.icon,{className:"icon-sm"});return x.jsx(_t,{onClick:()=>{r||L().history.load(n)},variant:"outline",color:r?"primary":null,size:"sm",className:le("w-full mb-8",r&&"pointer-events-none"),justify:"justify-start",startIcon:o,children:x.jsx(be,{...i.name})},n.id)})})]})}function pB(e){const{children:t,className:n,color:r,onDismiss:i,leftAdornment:o,rightAdornment:d,hideDismissButton:a=!1,size:s,showDivider:u,justify:h="justify-between",titleFontWeight:l="font-semibold",titleTextSize:f=s==="xs"?"text-xs":"text-sm",closeButtonSize:c=s==="xs"?"xs":"sm",actions:p}=e,{labelId:m,isDismissable:g,close:v}=E.useContext(zc);return x.jsxs("div",{className:le(n,"flex flex-shrink-0 items-center gap-10",l,u&&"border-b",gB(e),r||"text-main",h),children:[o,x.jsx("h3",{id:m,className:le(f,"mr-auto leading-5 opacity-90"),children:t}),d,p,g&&!a&&x.jsx(je,{"aria-label":"Dismiss",onClick:()=>{i?i():v()},size:c,className:le("-mr-8 text-muted",d&&"sr-only"),children:x.jsx(Ur,{})})]})}function gB({size:e,padding:t}){if(t)return t;switch(e){case"2xs":case"xs":return"px-14 py-4";case"sm":return"px-18 py-4";default:return"px-24 py-6"}}const tS=E.forwardRef((e,t)=>{const{children:n,className:r,padding:i,size:o,...d}=e;return x.jsx("div",{...d,ref:t,className:le(r,mB(e),"overflow-y-auto overflow-x-hidden overscroll-contain text-sm flex-auto"),children:n})});function mB({size:e,padding:t}){if(t)return t;switch(e){case"xs":return"p-14";case"sm":return"p-18";default:return"px-24 py-20"}}function vB(){const e=fe(t=>t.openPanels.newImage);return x.jsx(Nc,{isOpen:e,disableInitialTransition:!0,type:"modal",isDismissable:!1,children:x.jsx(yB,{})})}function yB(){const[e,t]=E.useState("default");return x.jsxs(Bc,{className:"text-center max-w-max text-main",size:"auto",children:[x.jsx(pB,{padding:"px-24 pt-24 pb-12",showDivider:!1,children:x.jsx(be,{message:"Open a photo or design to get started"})}),x.jsx(tS,{children:e==="default"?x.jsx(bB,{setActivePanel:t}):x.jsx(xB,{setActivePanel:t})})]})}function bB({setActivePanel:e}){return x.jsxs(x.Fragment,{children:[x.jsx(_t,{className:"mr-20",size:"sm",variant:"raised",color:"primary",onClick:()=>{L().import.uploadAndReplaceMainImage()},children:x.jsx(be,{message:"Open Photo"})}),x.jsx(_t,{variant:"outline",size:"sm",color:"primary",onClick:()=>{e("newCanvas")},children:x.jsx(be,{message:"Create New"})}),x.jsx(wB,{})]})}function wB(){const e=fe(t=>{var n,r;return(r=(n=t.config.ui)==null?void 0:n.openImageDialog)==null?void 0:r.sampleImages});return e!=null&&e.length?x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"relative py-20 text-main",children:[x.jsx("hr",{className:"absolute h-1 border-none bg-divider w-full top inset-0 m-auto"}),x.jsx("span",{className:"text-sm bg px-6 relative",children:x.jsx(be,{message:"or use sample"})})]}),x.jsx("ul",{className:"flex items-center gap-16",children:e.map(t=>x.jsx("li",{className:"shrink-0",children:x.jsx("button",{type:"button",onClick:async()=>{typeof t.action=="function"?t.action():t.url.endsWith(".json")?(await El(Jt(t.url)),D().togglePanel("newImage",!1)):(await L().import.openBackgroundImage(Jt(t.url)),D().togglePanel("newImage",!1))},children:x.jsx("img",{className:"w-80 h-80 rounded overflow-hidden transition-shadow hover:shadow-md",src:Jt(t.thumbnail),alt:""})})},t.url||t.thumbnail))})]}):null}function xB({setActivePanel:e}){const[t,n]=E.useState({width:800,height:600,bgColor:"transparent"});return x.jsxs("form",{onSubmit:r=>{r.preventDefault();const{width:i,height:o,bgColor:d}=t;i&&o&&(D().setConfig({blankCanvasSize:{width:i,height:o}}),L().canvas.openNew(i,o,d),D().togglePanel("newImage",!1),L().history.addInitial())},children:[x.jsx(or,{type:"number",label:x.jsx(be,{message:"Width"}),value:t.width,min:1,required:!0,className:"mb-16",onChange:r=>{n({...t,width:r.target.valueAsNumber})}}),x.jsx(or,{type:"number",label:x.jsx(be,{message:"Height"}),value:t.height,min:1,required:!0,className:"mb-16",onChange:r=>{n({...t,height:r.target.valueAsNumber})}}),x.jsx(Ri,{onChange:r=>{n({...t,bgColor:r})},className:"mb-16",value:t.bgColor,label:x.jsx(be,{message:"Background color"})}),x.jsxs("div",{className:"text-right",children:[x.jsx(_t,{size:"sm",variant:"text",className:"mr-10",onClick:()=>{e("default")},children:x.jsx(be,{message:"Cancel"})}),x.jsx(_t,{size:"sm",type:"submit",variant:"raised",color:"primary",children:x.jsx(be,{message:"Create"})})]})]})}const CB=E.forwardRef((e,t)=>{const n=Fi(e),{label:r,children:i,size:o,className:d,orientation:a="horizontal",disabled:s,required:u,invalid:h,errorMessage:l,description:f}=e,c={},p=E.useId(),m=e.name||p;return x.jsxs("fieldset",{"aria-describedby":f?`${p}-description`:void 0,ref:t,className:le("text-left",d),children:[r&&x.jsx("legend",{className:n.label,...c,children:r}),x.jsx("div",{className:le("flex",r?"mt-6":"mt-0",a==="vertical"?"flex-col gap-10":"flex-row gap-16"),children:E.Children.map(i,g=>{if(E.isValidElement(g))return E.cloneElement(g,{name:m,size:o,invalid:g.props.invalid||h||void 0,disabled:g.props.disabled||s,required:g.props.required||u})})}),f&&!l&&x.jsx("div",{className:n.description,id:`${p}-description`,children:f}),l&&x.jsx("div",{className:n.error,children:l})]})}),Qg=E.forwardRef((e,t)=>{const{children:n,autoFocus:r,size:i,invalid:o,isFirst:d,...a}=e,s=Di(t);Og({autoFocus:r},s);const u=_B(i);return x.jsxs("label",{className:le("inline-flex gap-8 select-none items-center whitespace-nowrap align-middle",u.label,e.disabled&&"text-disabled pointer-events-none",e.invalid&&"text-danger"),children:[x.jsx("input",{type:"radio",className:le("focus-visible:ring outline-none","rounded-full transition-button border-2 appearance-none","border-text-muted disabled:border-disabled-fg checked:border-primary checked:hover:border-primary-dark","before:bg-primary disabled:before:bg-disabled-fg before:hover:bg-primary-dark","before:h-full before:w-full before:block before:rounded-full before:scale-10 before:opacity-0 before:transition before:duration-200","checked:before:scale-[.65] checked:before:opacity-100",u.circle),ref:s,...a}),n&&x.jsx("span",{children:n})]})});function _B(e){switch(e){case"xs":return{circle:"h-12 w-12",label:"text-xs"};case"sm":return{circle:"h-16 w-16",label:"text-sm"};case"lg":return{circle:"h-24 w-24",label:"text-lg"};default:return{circle:"h-20 w-20",label:"text-base"}}}function SB(){const e=fe(t=>t.openPanels.export);return x.jsx(Nc,{isOpen:e,onOpenChange:t=>{t||D().togglePanel("export",!1)},type:"modal",children:x.jsx(kB,{})})}function kB(){const[e,t]=E.useState(()=>{var n,r,i,o,d,a;return{filename:((r=(n=D().config.tools)==null?void 0:n.export)==null?void 0:r.defaultName)||"image",format:((o=(i=D().config.tools)==null?void 0:i.export)==null?void 0:o.defaultFormat)||"jpeg",quality:((a=(d=D().config.tools)==null?void 0:d.export)==null?void 0:a.defaultQuality)||.8}});return x.jsx(Bc,{className:"text-center max-w-max text-main",size:"auto",children:x.jsx(tS,{children:x.jsxs("form",{onSubmit:n=>{n.preventDefault(),L().export.save(e.filename,e.format,e.quality),D().togglePanel("export",!1)},children:[x.jsx(or,{required:!0,size:"sm",label:x.jsx(be,{message:"Save As"}),value:e.filename,onChange:n=>{t({...e,filename:n.target.value})}}),x.jsxs(CB,{size:"sm",className:"my-20","aria-label":"Image format",children:[x.jsx(Qg,{value:"jpeg",checked:e.format==="jpeg",onChange:n=>{t({...e,format:n.target.value})},children:"JPEG"}),x.jsx(Qg,{value:"png",checked:e.format==="png",onChange:n=>{t({...e,format:n.target.value})},children:"PNG"}),x.jsx(Qg,{value:"json",checked:e.format==="json",onChange:n=>{t({...e,format:n.target.value})},children:"JSON"})]}),x.jsx(Li,{size:"sm",minValue:.1,step:.1,maxValue:1,value:e.quality,onChange:n=>{t({...e,quality:n})},formatOptions:{style:"percent"},label:x.jsx(be,{message:"Quality"})}),x.jsx(_t,{variant:"raised",color:"primary",type:"submit",className:"mt-20 w-full",size:"sm",children:x.jsx(be,{message:"Save"})})]})})})}function EB(){const e=fe(n=>n.objects.all),t=fe(n=>n.objects.active.id);return x.jsxs(xt.div,{..._c,className:"absolute bottom-20 right-20 w-224 max-w-[calc(100%-40px)] max-h-[calc(100%-40px)] bg-paper shadow-xl border focus:outline-none rounded overflow-hidden",children:[x.jsxs("div",{className:"px-10 py-2 mb-4 font-medium text-sm border-b flex items-center",children:[x.jsx(be,{message:"Objects"}),x.jsx(je,{size:"xs",className:"ml-auto flex-shrink-0",onClick:()=>{D().togglePanel("objects",!1)},children:x.jsx(Ur,{})})]}),x.jsx("div",{className:"p-8",children:e.map(n=>{const r=n.id===t,i=n.name;if(!i)return null;const o=XE[i],d=o.icon&&ce.createElement(o.icon,{className:"icon-sm"});return x.jsx(_t,{onClick:()=>{r||!n.selectable||L().objects.select(n.id)},variant:"outline",color:r?"primary":null,size:"sm",className:le("w-full mb-8",(r||!n.selectable)&&"pointer-events-none"),justify:"justify-start",startIcon:d,children:x.jsx(be,{...o.name})},n.id)})})]})}function TB(){const e=fe(n=>n.openPanels.history),t=fe(n=>n.openPanels.objects);return x.jsxs("div",{className:"z-modal",children:[x.jsxs(er,{children:[e&&x.jsx(dB,{},"historyPanel"),t&&x.jsx(EB,{},"objListPanel")]}),x.jsx(vB,{}),x.jsx(SB,{})]})}/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jg(){return Jg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jg.apply(this,arguments)}var nS;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(nS||(nS={}));function cr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function rS(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function iS(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var sS;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(sS||(sS={}));function OB(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function PB(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?iS(e):e;return{pathname:n?n.startsWith("/")?n:DB(n,t):t,search:MB(r),hash:jB(i)}}function DB(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function em(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function AB(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function oS(e,t){let n=AB(e);return t?n.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function aS(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=iS(e):(i=Jg({},e),cr(!i.pathname||!i.pathname.includes("?"),em("?","pathname","search",i)),cr(!i.pathname||!i.pathname.includes("#"),em("#","pathname","hash",i)),cr(!i.search||!i.search.includes("#"),em("#","search","hash",i)));let o=e===""||i.pathname==="",d=o?"/":i.pathname,a;if(d==null)a=n;else{let l=t.length-1;if(!r&&d.startsWith("..")){let f=d.split("/");for(;f[0]==="..";)f.shift(),l-=1;i.pathname=f.join("/")}a=l>=0?t[l]:"/"}let s=PB(i,a),u=d&&d!=="/"&&d.endsWith("/"),h=(o||d===".")&&n.endsWith("/");return!s.pathname.endsWith("/")&&(u||h)&&(s.pathname+="/"),s}const lS=e=>e.join("/").replace(/\/\/+/g,"/"),MB=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,jB=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,uS=["post","put","patch","delete"];new Set(uS);const IB=["get",...uS];new Set(IB);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tm(){return tm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tm.apply(this,arguments)}const cS=E.createContext(null),Na=E.createContext(null),fS=E.createContext(null),$c=E.createContext({outlet:null,matches:[],isDataRoute:!1});function FB(e,t){let{relative:n}=t===void 0?{}:t;nm()||cr(!1);let{basename:r,navigator:i}=E.useContext(Na),{hash:o,pathname:d,search:a}=dS(e,{relative:n}),s=d;return r!=="/"&&(s=d==="/"?r:lS([r,d])),i.createHref({pathname:s,search:a,hash:o})}function nm(){return E.useContext(fS)!=null}function rm(){return nm()||cr(!1),E.useContext(fS).location}function hS(e){E.useContext(Na).static||E.useLayoutEffect(e)}function RB(){let{isDataRoute:e}=E.useContext($c);return e?$B():LB()}function LB(){nm()||cr(!1);let e=E.useContext(cS),{basename:t,future:n,navigator:r}=E.useContext(Na),{matches:i}=E.useContext($c),{pathname:o}=rm(),d=JSON.stringify(oS(i,n.v7_relativeSplatPath)),a=E.useRef(!1);return hS(()=>{a.current=!0}),E.useCallback(function(u,h){if(h===void 0&&(h={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let l=aS(u,JSON.parse(d),o,h.relative==="path");e==null&&t!=="/"&&(l.pathname=l.pathname==="/"?t:lS([t,l.pathname])),(h.replace?r.replace:r.push)(l,h.state,h)},[t,r,d,o,e])}function dS(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=E.useContext(Na),{matches:i}=E.useContext($c),{pathname:o}=rm(),d=JSON.stringify(oS(i,r.v7_relativeSplatPath));return E.useMemo(()=>aS(e,JSON.parse(d),o,n==="path"),[e,d,o,n])}var pS=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(pS||{}),gS=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(gS||{});function zB(e){let t=E.useContext(cS);return t||cr(!1),t}function BB(e){let t=E.useContext($c);return t||cr(!1),t}function NB(e){let t=BB(),n=t.matches[t.matches.length-1];return n.route.id||cr(!1),n.route.id}function $B(){let{router:e}=zB(pS.UseNavigateStable),t=NB(gS.UseNavigateStable),n=E.useRef(!1);return hS(()=>{n.current=!0}),E.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,tm({fromRouteId:t},o)))},[e,t])}new Promise(()=>{});/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function im(){return im=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},im.apply(this,arguments)}function VB(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function HB(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function WB(e,t){return e.button===0&&(!t||t==="_self")&&!HB(e)}const UB=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],XB="6";try{window.__reactRouterVersion=XB}catch{}const YB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",GB=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,KB=E.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:o,replace:d,state:a,target:s,to:u,preventScrollReset:h,unstable_viewTransition:l}=t,f=VB(t,UB),{basename:c}=E.useContext(Na),p,m=!1;if(typeof u=="string"&&GB.test(u)&&(p=u,YB))try{let b=new URL(window.location.href),w=u.startsWith("//")?new URL(b.protocol+u):new URL(u),C=OB(w.pathname,c);w.origin===b.origin&&C!=null?u=C+w.search+w.hash:m=!0}catch{}let g=FB(u,{relative:i}),v=qB(u,{replace:d,state:a,target:s,preventScrollReset:h,relative:i,unstable_viewTransition:l});function y(b){r&&r(b),b.defaultPrevented||v(b)}return E.createElement("a",im({},f,{href:p||g,onClick:m||o?r:y,ref:n,target:s}))});var mS;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(mS||(mS={}));var vS;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(vS||(vS={}));function qB(e,t){let{target:n,replace:r,state:i,preventScrollReset:o,relative:d,unstable_viewTransition:a}=t===void 0?{}:t,s=RB(),u=rm(),h=dS(e,{relative:d});return E.useCallback(l=>{if(WB(l,n)){l.preventDefault();let f=r!==void 0?r:rS(u)===rS(h);s(e,{replace:f,state:i,preventScrollReset:o,relative:d,unstable_viewTransition:a})}},[u,s,h,r,i,n,e,o,d,a])}const ZB=ve(x.jsx("path",{d:"M11 15h2v2h-2v-2zm0-8h2v6h-2V7zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutlineOutlined"),QB=ve(x.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm4.59-12.42L10 14.17l-2.59-2.58L6 13l4 4 8-8z"}),"CheckCircleOutlined"),JB={opacity:0,y:50,scale:.3},e7={opacity:1,y:0,scale:1},t7={opacity:0,scale:.5};function n7(){const e=Q0(t=>t.toasts);return x.jsx("div",{className:"pointer-events-none relative",children:x.jsx(er,{initial:!1,children:e.map(t=>x.jsx("div",{className:le("fixed z-toast mx-auto p-20",t.position==="bottom-center"?"bottom-0 left-0 right-0":"bottom-0 right-0"),children:x.jsxs(xt.div,{initial:t.disableEnterAnimation?void 0:JB,animate:t.disableEnterAnimation?void 0:e7,exit:t.disableExitAnimation?void 0:t7,className:le("pointer-events-auto mx-auto flex max-h-100 min-h-50 w-min min-w-288 max-w-500 items-center gap-10 rounded-lg border bg-paper bg-paper py-6 pl-16 pr-6 text-sm text-main shadow-lg"),onPointerEnter:()=>{var n;return(n=t.timer)==null?void 0:n.pause()},onPointerLeave:()=>{var n;return(n=t.timer)==null?void 0:n.resume()},role:"alert","aria-live":t.type==="danger"?"assertive":"polite",children:[t.type==="danger"&&x.jsx(ZB,{className:"flex-shrink-0 text-danger",size:"md"}),t.type==="loading"&&x.jsx(L_,{size:"sm",className:"flex-shrink-0",isIndeterminate:!0}),t.type==="positive"&&x.jsx(QB,{className:"flex-shrink-0 text-positive",size:"md"}),x.jsx("div",{className:"mr-auto w-max overflow-hidden overflow-ellipsis","data-testid":"toast-message",children:x.jsx(Dg,{value:t.message})}),t.action&&x.jsx(_t,{variant:"text",color:"primary",size:"sm",className:"flex-shrink-0",onFocus:()=>{var n;return(n=t.timer)==null?void 0:n.pause()},onBlur:()=>{var n;return(n=t.timer)==null?void 0:n.resume()},onClick:()=>is().remove(t.id),elementType:KB,to:t.action.action,children:x.jsx(Dg,{value:t.action.label})}),t.type!=="loading"&&x.jsx(je,{onFocus:()=>{var n;return(n=t.timer)==null?void 0:n.pause()},onBlur:()=>{var n;return(n=t.timer)==null?void 0:n.resume()},type:"button",className:"flex-shrink-0",onClick:()=>{is().remove(t.id)},size:"sm",children:x.jsx(Ur,{})})]})},t.id))})})}function yS(e){return Wx()?e.metaKey:e.ctrlKey}function r7(e){switch(e.key){case"z":yS(e)&&(e.preventDefault(),e.stopPropagation(),e.shiftKey?L().history.redo():L().history.undo());break;case"ArrowUp":e.preventDefault(),e.stopPropagation(),L().objects.move("up");break;case"ArrowRight":e.preventDefault(),e.stopPropagation(),L().objects.move("right");break;case"ArrowDown":e.preventDefault(),e.stopPropagation(),L().objects.move("down");break;case"ArrowLeft":e.preventDefault(),e.stopPropagation(),L().objects.move("left");break;case"Delete":e.preventDefault(),e.stopPropagation(),L().objects.delete();break;case"v":yS(e)&&(e.preventDefault(),e.stopPropagation(),i7());break}}async function i7(){try{const e=await navigator.clipboard.read();for(const t of e)for(const n of t.types)if(n.startsWith("image/")){const r=await t.getType(n),i=new FileReader;i.onload=o=>{var d;(d=o.target)!=null&&d.result&&L().import.addImageFromData(o.target.result)},i.readAsDataURL(r);return}}catch(e){console.error(e)}}const s7=new Map,sm=new Map,bS={status:"inactive"};async function*o7(e){const t=[];for(const n of e.items)if(n.kind==="file"){const r=n.webkitGetAsEntry();r&&t.push(r)}for(const n of t)if(n.isFile){if(n.name===".DS_Store")continue;const r=await xS(n);yield new cc(r,n.fullPath)}else n.isDirectory&&(yield*wS(n))}async function*wS(e){const t=e.createReader();let n;do{n=await new Promise((r,i)=>{t.readEntries(r,i)});for(const r of n)if(r.isFile){if(r.name===".DS_Store")continue;const i=await xS(r);yield new cc(i,r.fullPath)}else r.isDirectory&&(yield*wS(r))}while(n.length>0)}function xS(e){return new Promise((t,n)=>e.file(t,n))}async function a7(e){const t=[];for await(const n of e)t.push(n);return t}const l7=400;function u7({id:e,disabled:t,ref:n,...r}){const i=E.useRef({dragOverElements:new Set,dropActivateTimer:void 0}).current,o=E.useRef(r);o.current=r,E.useLayoutEffect(()=>(sm.set(e,{...sm.get(e),disabled:t,id:e,ref:n}),()=>{sm.delete(e)}),[e,o,t,n]);const d=f=>{var m;const c=o.current,p=c.allowDragEventsFromItself||n.current!==((m=f.ref)==null?void 0:m.current);return!!(f!=null&&f.type&&p&&c.types.includes(f.type)&&(!c.acceptsDrop||c.acceptsDrop(f)))},a=f=>{var p,m;const c=$a(f);c&&((m=(p=o.current).onDragLeave)==null||m.call(p,c))};return{droppableProps:t?{}:{onDragOver:f=>{var p,m;f.preventDefault(),f.stopPropagation();const c=$a(f);c&&d(c)&&((m=(p=o.current).onDragOver)==null||m.call(p,c,f))},onDragEnter:f=>{var p,m;if(f.stopPropagation(),i.dragOverElements.add(f.target),i.dragOverElements.size>1)return;const c=$a(f);c&&d(c)&&((m=(p=o.current).onDragEnter)==null||m.call(p,c),clearTimeout(i.dropActivateTimer),typeof o.current.onDropActivate=="function"&&(i.dropActivateTimer=setTimeout(()=>{var g,v;c&&((v=(g=o.current).onDropActivate)==null||v.call(g,c))},l7)))},onDragLeave:f=>{f.stopPropagation(),i.dragOverElements.delete(f.target);for(const p of i.dragOverElements)f.currentTarget.contains(p)||i.dragOverElements.delete(p);if(i.dragOverElements.size>0)return;const c=$a(f);c&&d(c)&&(a(f),clearTimeout(i.dropActivateTimer))},onDrop:async f=>{var p,m,g,v;f.preventDefault(),f.stopPropagation(),i.dragOverElements.clear(),a(f),clearTimeout(i.dropActivateTimer);const c=$a(f);c&&((m=(p=o.current).onDragLeave)==null||m.call(p,c),d(c)&&((v=(g=o.current).onDrop)==null||v.call(g,c)))}}}}function $a(e){if(bS.dragTargetId!=null)return s7.get(bS.dragTargetId);if(e.dataTransfer.types.includes("Files"))return{type:"nativeFile",el:null,ref:null,getData:()=>a7(o7(e.dataTransfer))}}function c7(){const e=fe(p=>{var m;return(m=p.config.ui)==null?void 0:m.visible})??!0,t=fe(p=>{var m,g;return(g=(m=p.config.ui)==null?void 0:m.nav)==null?void 0:g.position})??"bottom",n=fe(p=>{var m,g;return(g=(m=p.config.ui)==null?void 0:m.menubar)==null?void 0:g.position})??"top",r=fe(p=>{var m;return(m=p.config.ui)==null?void 0:m.allowEditorClose})??!0,i=E.useRef(null),o=E.useRef(null),{isModal:d,isMobile:a}=Oc(),s=E.useCallback(async p=>{var g,v;if(D().activeTool||D().dirty||p.type!=="nativeFile")return;const m=await p.getData();L().import.fileIsValid(m[0])&&(((v=(g=D().config.tools)==null?void 0:g.import)==null?void 0:v.openDroppedImageAsBackground)??!1?await L().import.openBackgroundImage(m[0]):await L().import.openUploadedFile(m[0]))},[]),{droppableProps:u}=u7({id:"pixie-root",ref:o,types:["nativeFile"],onDrop:s});E.useEffect(()=>{var g,v;D().fabric||(fe.setState({canvasRef:i}),Pj(i.current),(g=D().config.ui)!=null&&g.defaultTool&&D().setActiveTool((v=D().config.ui)==null?void 0:v.defaultTool,null),L().canvas.loadInitialContent().then(()=>{var y,b;(b=(y=D().config).onLoad)==null||b.call(y,D().editor)}));const p=f2(o,()=>{D().setStageSize(h2(o.current))}),m=f2(i,()=>{D().setCanvasSize(h2(i.current))});return()=>{p(),m()}},[o]);const h={visible:{opacity:1,scale:1,display:"flex"},hidden:{opacity:0,transitionEnd:{display:"none"}}},l=le("pixie-root flex flex-col overflow-hidden bg-background text-main no-tap-highlight w-full h-full",{relative:!d,"fixed inset-0 w-full h-full z-20":d,"shadow-lg border rounded-md m-auto max-h-[calc(100vh-90px)] max-w-[calc(100vw-90px)]":d&&!a}),f=d&&e&&!a&&r,c=d&&e;return x.jsxs(e6,{features:t6,strict:!0,children:[f&&x.jsx(je,{className:"z-20 fixed right-2 top-2 text-white",size:"lg",onClick:()=>{D().editor.close()},children:x.jsx(Ur,{})}),c&&x.jsx(xg,{position:"fixed",disableInitialTransition:!0}),x.jsxs(xt.div,{initial:!1,variants:h,animate:e?"visible":"hidden",className:l,children:[n==="top"&&x.jsx(lC,{}),t==="top"&&x.jsx(eS,{className:"pt-14"}),x.jsxs("main",{className:"relative flex-auto my-20 overflow-hidden outline-none",tabIndex:-1,...tr(u,{onKeyDownCapture:r7}),ref:o,children:[x.jsx(JI,{}),x.jsx(ER,{ref:i})]}),x.jsx(oz,{}),t==="bottom"&&x.jsx(eS,{}),n==="bottom"&&x.jsx(lC,{}),x.jsx(TB,{}),x.jsx(n7,{})]})]})}(function(){fabric.Object.ENLIVEN_PROPS.push("eraser");var e=fabric.Object.prototype._drawClipPath,t=fabric.Object.prototype.needsItsOwnCache,n=fabric.Object.prototype.toObject,r=fabric.Object.prototype.getSvgCommons,i=fabric.Object.prototype._createBaseClipPathSVGMarkup,o=fabric.Object.prototype._createBaseSVGMarkup;fabric.Object.prototype.cacheProperties.push("eraser"),fabric.Object.prototype.stateProperties.push("eraser"),fabric.util.object.extend(fabric.Object.prototype,{erasable:!0,eraser:void 0,needsItsOwnCache:function(){return t.call(this)||!!this.eraser},_drawClipPath:function(s,u){if(e.call(this,s,u),this.eraser){var h=this._getNonTransformedDimensions();this.eraser.isType("eraser")&&this.eraser.set({width:h.x,height:h.y}),e.call(this,s,this.eraser)}},toObject:function(s){var u=n.call(this,["erasable"].concat(s));return this.eraser&&!this.eraser.excludeFromExport&&(u.eraser=this.eraser.toObject(s)),u},getSvgCommons:function(){return r.call(this)+(this.eraser?'mask="url(#'+this.eraser.clipPathId+')" ':"")},_createEraserSVGMarkup:function(s){return this.eraser?(this.eraser.clipPathId="MASK_"+fabric.Object.__uid++,['<mask id="',this.eraser.clipPathId,'" >',this.eraser.toSVG(s),"</mask>",`
`].join("")):""},_createBaseClipPathSVGMarkup:function(s,u){return[this._createEraserSVGMarkup(u&&u.reviver),i.call(this,s,u)].join("")},_createBaseSVGMarkup:function(s,u){return[this._createEraserSVGMarkup(u&&u.reviver),o.call(this,s,u)].join("")}});var d=fabric.Group.prototype._restoreObjectsState;fabric.util.object.extend(fabric.Group.prototype,{_addEraserPathToObjects:function(s){this._objects.forEach(function(u){fabric.EraserBrush.prototype._addPathToObjectEraser.call(fabric.EraserBrush.prototype,u,s)})},applyEraserToObjects:function(){var s=this,u=this.eraser;if(u){delete this.eraser;var h=s.calcTransformMatrix();u.clone(function(l){var f=s.clipPath;l.getObjects("path").forEach(function(c){var p=fabric.util.multiplyTransformMatrices(h,c.calcTransformMatrix());fabric.util.applyTransformToObject(c,p),f?f.clone(function(m){var g=fabric.EraserBrush.prototype.applyClipPathToPath.call(fabric.EraserBrush.prototype,c,m,h);s._addEraserPathToObjects(g)},["absolutePositioned","inverted"]):s._addEraserPathToObjects(c)})})}},_restoreObjectsState:function(){return this.erasable===!0&&this.applyEraserToObjects(),d.call(this)}}),fabric.Eraser=fabric.util.createClass(fabric.Group,{type:"eraser",originX:"center",originY:"center",drawObject:function(s){s.save(),s.fillStyle="black",s.fillRect(-this.width/2,-this.height/2,this.width,this.height),s.restore(),this.callSuper("drawObject",s)},_getBounds:function(){},_toSVG:function(s){var u=["<g ","COMMON_PARTS",` >
`],h=-this.width/2,l=-this.height/2,f=["<rect ",'fill="white" ','x="',h,'" y="',l,'" width="',this.width,'" height="',this.height,`" />
`].join("");u.push("		",f);for(var c=0,p=this._objects.length;c<p;c++)u.push("		",this._objects[c].toSVG(s));return u.push(`</g>
`),u}}),fabric.Eraser.fromObject=function(s,u){var h=s.objects;fabric.util.enlivenObjects(h,function(l){var f=fabric.util.object.clone(s,!0);delete f.objects,fabric.util.enlivenObjectEnlivables(s,f,function(){u&&u(new fabric.Eraser(l,f,!0))})})};var a=fabric.Canvas.prototype._renderOverlay;fabric.util.object.extend(fabric.Canvas.prototype,{isErasing:function(){return this.isDrawingMode&&this.freeDrawingBrush&&this.freeDrawingBrush.type==="eraser"&&this.freeDrawingBrush._isErasing},_renderOverlay:function(s){a.call(this,s),this.isErasing()&&!this.freeDrawingBrush.inverted&&this.freeDrawingBrush._render()}}),fabric.EraserBrush=fabric.util.createClass(fabric.PencilBrush,{type:"eraser",inverted:!1,_isErasing:!1,_isErasable:function(s){return s.erasable!==!1},_prepareCollectionTraversal:function(s,u,h){s.forEachObject(function(l){l.forEachObject&&l.erasable==="deep"?this._prepareCollectionTraversal(l,u,h):!this.inverted&&l.erasable&&l.visible?(l.visible=!1,s.dirty=!0,h.visibility.push(l),h.collection.push(s)):this.inverted&&l.visible&&(l.erasable&&l.eraser?(l.eraser.inverted=!0,l.dirty=!0,s.dirty=!0,h.eraser.push(l),h.collection.push(s)):(l.visible=!1,s.dirty=!0,h.visibility.push(l),h.collection.push(s)))},this)},preparePattern:function(){this._patternCanvas||(this._patternCanvas=fabric.util.createCanvasElement());var s=this._patternCanvas;s.width=this.canvas.width,s.height=this.canvas.height;var u=s.getContext("2d");if(this.canvas._isRetinaScaling()){var h=this.canvas.getRetinaScaling();this.canvas.__initRetinaScaling(h,s,u)}var l=this.canvas.backgroundImage,f=l&&this._isErasable(l),c=this.canvas.overlayImage,p=c&&this._isErasable(c);if(!this.inverted&&(l&&!f||this.canvas.backgroundColor))f&&(this.canvas.backgroundImage=void 0),this.canvas._renderBackground(u),f&&(this.canvas.backgroundImage=l);else if(this.inverted&&l&&f){var m=this.canvas.backgroundColor;this.canvas.backgroundColor=void 0,this.canvas._renderBackground(u),this.canvas.backgroundColor=m}u.save(),u.transform.apply(u,this.canvas.viewportTransform);var g={visibility:[],eraser:[],collection:[]};if(this._prepareCollectionTraversal(this.canvas,u,g),this.canvas._renderObjects(u,this.canvas._objects),g.visibility.forEach(function(v){v.visible=!0}),g.eraser.forEach(function(v){v.eraser.inverted=!1,v.dirty=!0}),g.collection.forEach(function(v){v.dirty=!0}),u.restore(),!this.inverted&&(c&&!p||this.canvas.overlayColor))p&&(this.canvas.overlayImage=void 0),a.call(this.canvas,u),p&&(this.canvas.overlayImage=c);else if(this.inverted&&c&&p){var m=this.canvas.overlayColor;this.canvas.overlayColor=void 0,a.call(this.canvas,u),this.canvas.overlayColor=m}},_setBrushStyles:function(s){this.callSuper("_setBrushStyles",s),s.strokeStyle="black"},_saveAndTransform:function(s){this.callSuper("_saveAndTransform",s),this._setBrushStyles(s),s.globalCompositeOperation=s===this.canvas.getContext()?"destination-out":"source-over"},needsFullRender:function(){return!0},onMouseDown:function(s,u){this.canvas._isMainEvent(u.e)&&(this._prepareForDrawing(s),this._captureDrawingPath(s),this.preparePattern(),this._isErasing=!0,this.canvas.fire("erasing:start"),this._render())},_render:function(){var s;this.inverted||(s=this.canvas.getContext(),this.callSuper("_render",s)),s=this.canvas.contextTop,this.canvas.clearContext(s),this.callSuper("_render",s),s.save();var u=this.canvas.getRetinaScaling(),h=1/u;s.scale(h,h),s.globalCompositeOperation="source-in",s.drawImage(this._patternCanvas,0,0),s.restore()},createPath:function(s){var u=this.callSuper("createPath",s);return u.globalCompositeOperation=this.inverted?"source-over":"destination-out",u.stroke=this.inverted?"white":"black",u},applyClipPathToPath:function(s,u,h){var l=fabric.util.invertTransform(s.calcTransformMatrix()),f=u.calcTransformMatrix(),c=u.absolutePositioned?l:fabric.util.multiplyTransformMatrices(l,h);return u.absolutePositioned=!1,fabric.util.applyTransformToObject(u,fabric.util.multiplyTransformMatrices(c,f)),s.clipPath=s.clipPath?fabric.util.mergeClipPaths(u,s.clipPath):u,s},clonePathWithClipPath:function(s,u,h){var l=u.calcTransformMatrix(),f=u.clipPath,c=this;s.clone(function(p){f.clone(function(m){h(c.applyClipPathToPath(p,m,l))},["absolutePositioned","inverted"])})},_addPathToObjectEraser:function(s,u){var h=this;if(s.forEachObject&&s.erasable==="deep"){var l=s._objects.filter(function(c){return c.erasable});l.length>0&&s.clipPath?this.clonePathWithClipPath(u,s,function(c){l.forEach(function(p){h._addPathToObjectEraser(p,c)})}):l.length>0&&l.forEach(function(c){h._addPathToObjectEraser(c,u)});return}var f=s.eraser;f||(f=new fabric.Eraser,s.eraser=f),u.clone(function(c){var p=fabric.util.multiplyTransformMatrices(fabric.util.invertTransform(s.calcTransformMatrix()),c.calcTransformMatrix());fabric.util.applyTransformToObject(c,p),f.addWithUpdate(c),s.set("dirty",!0),s.fire("erasing:end",{path:c}),s.group&&Array.isArray(h.__subTargets)&&h.__subTargets.push(s)})},applyEraserToCanvas:function(s){var u=this.canvas,h={};return["backgroundImage","overlayImage"].forEach(function(l){var f=u[l];f&&f.erasable&&(this._addPathToObjectEraser(f,s),h[l]=f)},this),h},_finalizeAndAddPath:function(){var s=this.canvas.contextTop,u=this.canvas;s.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate)),u.clearContext(u.contextTop),this._isErasing=!1;var h=this._points&&this._points.length>1?this.convertPointsToSVGPath(this._points):null;if(!h||this._isEmptySVGPath(h)){u.fire("erasing:end"),u.requestRenderAll();return}var l=this.createPath(h);l.setCoords(),u.fire("before:path:created",{path:l});var f=this.applyEraserToCanvas(l),c=this;this.__subTargets=[];var p=[];u.forEachObject(function(m){m.erasable&&m.intersectsWithObject(l,!0,!0)&&(c._addPathToObjectEraser(m,l),p.push(m))}),u.fire("erasing:end",{path:l,targets:p,subTargets:this.__subTargets,drawables:f}),delete this.__subTargets,u.requestRenderAll(),this._resetShadow(),u.fire("path:created",{path:l})}})})(),Kc.enableBoundaryChecking(!1);const Va=class Va{constructor(t){Se(this,"tools",{});Se(this,"fabric",null);if(t.sentryDsn&&bk({dsn:t.sentryDsn}),XS(DT),!t.selector)throw new Error('Pixie required "selector" option.');const n=document.querySelector(t.selector);if(!n)return;n.classList.add("pi"),kT(n),this.setConfig(t),fe.setState({editor:this}),aw(n).render(x.jsx(ce.StrictMode,{children:x.jsx(c7,{})}))}get state(){return D()}get defaultConfig(){return Va.defaultConfig}open(t={}){return new Promise(async n=>{var r;Object.keys(t).length?await this.resetEditor({...P0(t,{ui:{visible:!0},image:t.image||D().config.image,state:t.state||D().config.state,blankCanvasSize:t.blankCanvasSize||D().config.blankCanvasSize})}):(r=D().config.ui)!=null&&r.visible||D().setConfig({ui:{visible:!0}}),n()})}close(){var t,n,r;(t=D().config.ui)!=null&&t.visible&&(this.setConfig({ui:{visible:!1}}),(r=(n=D().config).onClose)==null||r.call(n))}setConfig(t){D().setConfig(t)}uploadAndAddImage(){return L().import.uploadAndAddImage()}uploadAndReplaceMainImage(){return L().import.uploadAndReplaceMainImage()}uploadAndOpenStateFile(){return L().import.uploadAndOpenStateFile()}newCanvas(t,n,r){return L().canvas.openNew(t,n,r)}getState(t){return JSON.stringify(Tl(t))}setState(t){return L().import.loadState(t)}async setStateFromUrl(t){const n=await El(t);return L().import.loadState(n)}openTool(t){Yf(t)}applyChanges(){D().applyChanges()}cancelChanges(){D().cancelChanges()}async resetEditor(t){await Xf(t),await L().canvas.loadInitialContent()}togglePanel(t,n){t==="objects"&&D().togglePanel("history",!1),t==="history"&&D().togglePanel("objects",!1),D().togglePanel(t,n)}on(t,n){var r;(r=this.fabric)==null||r.on(t,n)}isDirty(){return D().dirty}get(t){return this.tools[t]}notify(t){return ss(t)}static init(t){return new Promise(n=>{const r=t.onLoad;t.onLoad=i=>{r==null||r(i),n(i)},new this(t)})}};Se(Va,"defaultConfig",u0),Se(Va,"version",Hk);let om=Va;return om});
//# sourceMappingURL=pixie.umd.js.map
